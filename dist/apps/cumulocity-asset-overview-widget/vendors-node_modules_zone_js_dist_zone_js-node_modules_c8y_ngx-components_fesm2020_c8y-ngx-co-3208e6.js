"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkcumulocity_asset_overview_widget"] = self["webpackChunkcumulocity_asset_overview_widget"] || []).push([["vendors-node_modules_zone_js_dist_zone_js-node_modules_c8y_ngx-components_fesm2020_c8y-ngx-co-3208e6"],{

/***/ "./node_modules/zone.js/dist/zone.js":
/*!*******************************************!*\
  !*** ./node_modules/zone.js/dist/zone.js ***!
  \*******************************************/
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\n/**\n * @license Angular v14.2.0-next.0\n * (c) 2010-2022 Google LLC. https://angular.io/\n * License: MIT\n */\n(function (factory) {\n     true ? !(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)) :\n        0;\n})((function () {\n    'use strict';\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    ((function (global) {\n        var performance = global['performance'];\n        function mark(name) {\n            performance && performance['mark'] && performance['mark'](name);\n        }\n        function performanceMeasure(name, label) {\n            performance && performance['measure'] && performance['measure'](name, label);\n        }\n        mark('Zone');\n        // Initialize before it's accessed below.\n        // __Zone_symbol_prefix global can be used to override the default zone\n        // symbol prefix with a custom one if needed.\n        var symbolPrefix = global['__Zone_symbol_prefix'] || '__zone_symbol__';\n        function __symbol__(name) {\n            return symbolPrefix + name;\n        }\n        var checkDuplicate = global[__symbol__('forceDuplicateZoneCheck')] === true;\n        if (global['Zone']) {\n            // if global['Zone'] already exists (maybe zone.js was already loaded or\n            // some other lib also registered a global object named Zone), we may need\n            // to throw an error, but sometimes user may not want this error.\n            // For example,\n            // we have two web pages, page1 includes zone.js, page2 doesn't.\n            // and the 1st time user load page1 and page2, everything work fine,\n            // but when user load page2 again, error occurs because global['Zone'] already exists.\n            // so we add a flag to let user choose whether to throw this error or not.\n            // By default, if existing Zone is from zone.js, we will not throw the error.\n            if (checkDuplicate || typeof global['Zone'].__symbol__ !== 'function') {\n                throw new Error('Zone already loaded.');\n            }\n            else {\n                return global['Zone'];\n            }\n        }\n        var Zone = /** @class */ (function () {\n            function Zone(parent, zoneSpec) {\n                this._parent = parent;\n                this._name = zoneSpec ? zoneSpec.name || 'unnamed' : '<root>';\n                this._properties = zoneSpec && zoneSpec.properties || {};\n                this._zoneDelegate =\n                    new _ZoneDelegate(this, this._parent && this._parent._zoneDelegate, zoneSpec);\n            }\n            Zone.assertZonePatched = function () {\n                if (global['Promise'] !== patches['ZoneAwarePromise']) {\n                    throw new Error('Zone.js has detected that ZoneAwarePromise `(window|global).Promise` ' +\n                        'has been overwritten.\\n' +\n                        'Most likely cause is that a Promise polyfill has been loaded ' +\n                        'after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. ' +\n                        'If you must load one, do so before loading zone.js.)');\n                }\n            };\n            Object.defineProperty(Zone, \"root\", {\n                get: function () {\n                    var zone = Zone.current;\n                    while (zone.parent) {\n                        zone = zone.parent;\n                    }\n                    return zone;\n                },\n                enumerable: false,\n                configurable: true\n            });\n            Object.defineProperty(Zone, \"current\", {\n                get: function () {\n                    return _currentZoneFrame.zone;\n                },\n                enumerable: false,\n                configurable: true\n            });\n            Object.defineProperty(Zone, \"currentTask\", {\n                get: function () {\n                    return _currentTask;\n                },\n                enumerable: false,\n                configurable: true\n            });\n            // tslint:disable-next-line:require-internal-with-underscore\n            Zone.__load_patch = function (name, fn, ignoreDuplicate) {\n                if (ignoreDuplicate === void 0) { ignoreDuplicate = false; }\n                if (patches.hasOwnProperty(name)) {\n                    // `checkDuplicate` option is defined from global variable\n                    // so it works for all modules.\n                    // `ignoreDuplicate` can work for the specified module\n                    if (!ignoreDuplicate && checkDuplicate) {\n                        throw Error('Already loaded patch: ' + name);\n                    }\n                }\n                else if (!global['__Zone_disable_' + name]) {\n                    var perfName = 'Zone:' + name;\n                    mark(perfName);\n                    patches[name] = fn(global, Zone, _api);\n                    performanceMeasure(perfName, perfName);\n                }\n            };\n            Object.defineProperty(Zone.prototype, \"parent\", {\n                get: function () {\n                    return this._parent;\n                },\n                enumerable: false,\n                configurable: true\n            });\n            Object.defineProperty(Zone.prototype, \"name\", {\n                get: function () {\n                    return this._name;\n                },\n                enumerable: false,\n                configurable: true\n            });\n            Zone.prototype.get = function (key) {\n                var zone = this.getZoneWith(key);\n                if (zone)\n                    return zone._properties[key];\n            };\n            Zone.prototype.getZoneWith = function (key) {\n                var current = this;\n                while (current) {\n                    if (current._properties.hasOwnProperty(key)) {\n                        return current;\n                    }\n                    current = current._parent;\n                }\n                return null;\n            };\n            Zone.prototype.fork = function (zoneSpec) {\n                if (!zoneSpec)\n                    throw new Error('ZoneSpec required!');\n                return this._zoneDelegate.fork(this, zoneSpec);\n            };\n            Zone.prototype.wrap = function (callback, source) {\n                if (typeof callback !== 'function') {\n                    throw new Error('Expecting function got: ' + callback);\n                }\n                var _callback = this._zoneDelegate.intercept(this, callback, source);\n                var zone = this;\n                return function () {\n                    return zone.runGuarded(_callback, this, arguments, source);\n                };\n            };\n            Zone.prototype.run = function (callback, applyThis, applyArgs, source) {\n                _currentZoneFrame = { parent: _currentZoneFrame, zone: this };\n                try {\n                    return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);\n                }\n                finally {\n                    _currentZoneFrame = _currentZoneFrame.parent;\n                }\n            };\n            Zone.prototype.runGuarded = function (callback, applyThis, applyArgs, source) {\n                if (applyThis === void 0) { applyThis = null; }\n                _currentZoneFrame = { parent: _currentZoneFrame, zone: this };\n                try {\n                    try {\n                        return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);\n                    }\n                    catch (error) {\n                        if (this._zoneDelegate.handleError(this, error)) {\n                            throw error;\n                        }\n                    }\n                }\n                finally {\n                    _currentZoneFrame = _currentZoneFrame.parent;\n                }\n            };\n            Zone.prototype.runTask = function (task, applyThis, applyArgs) {\n                if (task.zone != this) {\n                    throw new Error('A task can only be run in the zone of creation! (Creation: ' +\n                        (task.zone || NO_ZONE).name + '; Execution: ' + this.name + ')');\n                }\n                // https://github.com/angular/zone.js/issues/778, sometimes eventTask\n                // will run in notScheduled(canceled) state, we should not try to\n                // run such kind of task but just return\n                if (task.state === notScheduled && (task.type === eventTask || task.type === macroTask)) {\n                    return;\n                }\n                var reEntryGuard = task.state != running;\n                reEntryGuard && task._transitionTo(running, scheduled);\n                task.runCount++;\n                var previousTask = _currentTask;\n                _currentTask = task;\n                _currentZoneFrame = { parent: _currentZoneFrame, zone: this };\n                try {\n                    if (task.type == macroTask && task.data && !task.data.isPeriodic) {\n                        task.cancelFn = undefined;\n                    }\n                    try {\n                        return this._zoneDelegate.invokeTask(this, task, applyThis, applyArgs);\n                    }\n                    catch (error) {\n                        if (this._zoneDelegate.handleError(this, error)) {\n                            throw error;\n                        }\n                    }\n                }\n                finally {\n                    // if the task's state is notScheduled or unknown, then it has already been cancelled\n                    // we should not reset the state to scheduled\n                    if (task.state !== notScheduled && task.state !== unknown) {\n                        if (task.type == eventTask || (task.data && task.data.isPeriodic)) {\n                            reEntryGuard && task._transitionTo(scheduled, running);\n                        }\n                        else {\n                            task.runCount = 0;\n                            this._updateTaskCount(task, -1);\n                            reEntryGuard &&\n                                task._transitionTo(notScheduled, running, notScheduled);\n                        }\n                    }\n                    _currentZoneFrame = _currentZoneFrame.parent;\n                    _currentTask = previousTask;\n                }\n            };\n            Zone.prototype.scheduleTask = function (task) {\n                if (task.zone && task.zone !== this) {\n                    // check if the task was rescheduled, the newZone\n                    // should not be the children of the original zone\n                    var newZone = this;\n                    while (newZone) {\n                        if (newZone === task.zone) {\n                            throw Error(\"can not reschedule task to \".concat(this.name, \" which is descendants of the original zone \").concat(task.zone.name));\n                        }\n                        newZone = newZone.parent;\n                    }\n                }\n                task._transitionTo(scheduling, notScheduled);\n                var zoneDelegates = [];\n                task._zoneDelegates = zoneDelegates;\n                task._zone = this;\n                try {\n                    task = this._zoneDelegate.scheduleTask(this, task);\n                }\n                catch (err) {\n                    // should set task's state to unknown when scheduleTask throw error\n                    // because the err may from reschedule, so the fromState maybe notScheduled\n                    task._transitionTo(unknown, scheduling, notScheduled);\n                    // TODO: @JiaLiPassion, should we check the result from handleError?\n                    this._zoneDelegate.handleError(this, err);\n                    throw err;\n                }\n                if (task._zoneDelegates === zoneDelegates) {\n                    // we have to check because internally the delegate can reschedule the task.\n                    this._updateTaskCount(task, 1);\n                }\n                if (task.state == scheduling) {\n                    task._transitionTo(scheduled, scheduling);\n                }\n                return task;\n            };\n            Zone.prototype.scheduleMicroTask = function (source, callback, data, customSchedule) {\n                return this.scheduleTask(new ZoneTask(microTask, source, callback, data, customSchedule, undefined));\n            };\n            Zone.prototype.scheduleMacroTask = function (source, callback, data, customSchedule, customCancel) {\n                return this.scheduleTask(new ZoneTask(macroTask, source, callback, data, customSchedule, customCancel));\n            };\n            Zone.prototype.scheduleEventTask = function (source, callback, data, customSchedule, customCancel) {\n                return this.scheduleTask(new ZoneTask(eventTask, source, callback, data, customSchedule, customCancel));\n            };\n            Zone.prototype.cancelTask = function (task) {\n                if (task.zone != this)\n                    throw new Error('A task can only be cancelled in the zone of creation! (Creation: ' +\n                        (task.zone || NO_ZONE).name + '; Execution: ' + this.name + ')');\n                task._transitionTo(canceling, scheduled, running);\n                try {\n                    this._zoneDelegate.cancelTask(this, task);\n                }\n                catch (err) {\n                    // if error occurs when cancelTask, transit the state to unknown\n                    task._transitionTo(unknown, canceling);\n                    this._zoneDelegate.handleError(this, err);\n                    throw err;\n                }\n                this._updateTaskCount(task, -1);\n                task._transitionTo(notScheduled, canceling);\n                task.runCount = 0;\n                return task;\n            };\n            Zone.prototype._updateTaskCount = function (task, count) {\n                var zoneDelegates = task._zoneDelegates;\n                if (count == -1) {\n                    task._zoneDelegates = null;\n                }\n                for (var i = 0; i < zoneDelegates.length; i++) {\n                    zoneDelegates[i]._updateTaskCount(task.type, count);\n                }\n            };\n            return Zone;\n        }());\n        // tslint:disable-next-line:require-internal-with-underscore\n        Zone.__symbol__ = __symbol__;\n        var DELEGATE_ZS = {\n            name: '',\n            onHasTask: function (delegate, _, target, hasTaskState) { return delegate.hasTask(target, hasTaskState); },\n            onScheduleTask: function (delegate, _, target, task) { return delegate.scheduleTask(target, task); },\n            onInvokeTask: function (delegate, _, target, task, applyThis, applyArgs) { return delegate.invokeTask(target, task, applyThis, applyArgs); },\n            onCancelTask: function (delegate, _, target, task) { return delegate.cancelTask(target, task); }\n        };\n        var _ZoneDelegate = /** @class */ (function () {\n            function _ZoneDelegate(zone, parentDelegate, zoneSpec) {\n                this._taskCounts = { 'microTask': 0, 'macroTask': 0, 'eventTask': 0 };\n                this.zone = zone;\n                this._parentDelegate = parentDelegate;\n                this._forkZS = zoneSpec && (zoneSpec && zoneSpec.onFork ? zoneSpec : parentDelegate._forkZS);\n                this._forkDlgt = zoneSpec && (zoneSpec.onFork ? parentDelegate : parentDelegate._forkDlgt);\n                this._forkCurrZone =\n                    zoneSpec && (zoneSpec.onFork ? this.zone : parentDelegate._forkCurrZone);\n                this._interceptZS =\n                    zoneSpec && (zoneSpec.onIntercept ? zoneSpec : parentDelegate._interceptZS);\n                this._interceptDlgt =\n                    zoneSpec && (zoneSpec.onIntercept ? parentDelegate : parentDelegate._interceptDlgt);\n                this._interceptCurrZone =\n                    zoneSpec && (zoneSpec.onIntercept ? this.zone : parentDelegate._interceptCurrZone);\n                this._invokeZS = zoneSpec && (zoneSpec.onInvoke ? zoneSpec : parentDelegate._invokeZS);\n                this._invokeDlgt =\n                    zoneSpec && (zoneSpec.onInvoke ? parentDelegate : parentDelegate._invokeDlgt);\n                this._invokeCurrZone =\n                    zoneSpec && (zoneSpec.onInvoke ? this.zone : parentDelegate._invokeCurrZone);\n                this._handleErrorZS =\n                    zoneSpec && (zoneSpec.onHandleError ? zoneSpec : parentDelegate._handleErrorZS);\n                this._handleErrorDlgt =\n                    zoneSpec && (zoneSpec.onHandleError ? parentDelegate : parentDelegate._handleErrorDlgt);\n                this._handleErrorCurrZone =\n                    zoneSpec && (zoneSpec.onHandleError ? this.zone : parentDelegate._handleErrorCurrZone);\n                this._scheduleTaskZS =\n                    zoneSpec && (zoneSpec.onScheduleTask ? zoneSpec : parentDelegate._scheduleTaskZS);\n                this._scheduleTaskDlgt = zoneSpec &&\n                    (zoneSpec.onScheduleTask ? parentDelegate : parentDelegate._scheduleTaskDlgt);\n                this._scheduleTaskCurrZone =\n                    zoneSpec && (zoneSpec.onScheduleTask ? this.zone : parentDelegate._scheduleTaskCurrZone);\n                this._invokeTaskZS =\n                    zoneSpec && (zoneSpec.onInvokeTask ? zoneSpec : parentDelegate._invokeTaskZS);\n                this._invokeTaskDlgt =\n                    zoneSpec && (zoneSpec.onInvokeTask ? parentDelegate : parentDelegate._invokeTaskDlgt);\n                this._invokeTaskCurrZone =\n                    zoneSpec && (zoneSpec.onInvokeTask ? this.zone : parentDelegate._invokeTaskCurrZone);\n                this._cancelTaskZS =\n                    zoneSpec && (zoneSpec.onCancelTask ? zoneSpec : parentDelegate._cancelTaskZS);\n                this._cancelTaskDlgt =\n                    zoneSpec && (zoneSpec.onCancelTask ? parentDelegate : parentDelegate._cancelTaskDlgt);\n                this._cancelTaskCurrZone =\n                    zoneSpec && (zoneSpec.onCancelTask ? this.zone : parentDelegate._cancelTaskCurrZone);\n                this._hasTaskZS = null;\n                this._hasTaskDlgt = null;\n                this._hasTaskDlgtOwner = null;\n                this._hasTaskCurrZone = null;\n                var zoneSpecHasTask = zoneSpec && zoneSpec.onHasTask;\n                var parentHasTask = parentDelegate && parentDelegate._hasTaskZS;\n                if (zoneSpecHasTask || parentHasTask) {\n                    // If we need to report hasTask, than this ZS needs to do ref counting on tasks. In such\n                    // a case all task related interceptors must go through this ZD. We can't short circuit it.\n                    this._hasTaskZS = zoneSpecHasTask ? zoneSpec : DELEGATE_ZS;\n                    this._hasTaskDlgt = parentDelegate;\n                    this._hasTaskDlgtOwner = this;\n                    this._hasTaskCurrZone = zone;\n                    if (!zoneSpec.onScheduleTask) {\n                        this._scheduleTaskZS = DELEGATE_ZS;\n                        this._scheduleTaskDlgt = parentDelegate;\n                        this._scheduleTaskCurrZone = this.zone;\n                    }\n                    if (!zoneSpec.onInvokeTask) {\n                        this._invokeTaskZS = DELEGATE_ZS;\n                        this._invokeTaskDlgt = parentDelegate;\n                        this._invokeTaskCurrZone = this.zone;\n                    }\n                    if (!zoneSpec.onCancelTask) {\n                        this._cancelTaskZS = DELEGATE_ZS;\n                        this._cancelTaskDlgt = parentDelegate;\n                        this._cancelTaskCurrZone = this.zone;\n                    }\n                }\n            }\n            _ZoneDelegate.prototype.fork = function (targetZone, zoneSpec) {\n                return this._forkZS ? this._forkZS.onFork(this._forkDlgt, this.zone, targetZone, zoneSpec) :\n                    new Zone(targetZone, zoneSpec);\n            };\n            _ZoneDelegate.prototype.intercept = function (targetZone, callback, source) {\n                return this._interceptZS ?\n                    this._interceptZS.onIntercept(this._interceptDlgt, this._interceptCurrZone, targetZone, callback, source) :\n                    callback;\n            };\n            _ZoneDelegate.prototype.invoke = function (targetZone, callback, applyThis, applyArgs, source) {\n                return this._invokeZS ? this._invokeZS.onInvoke(this._invokeDlgt, this._invokeCurrZone, targetZone, callback, applyThis, applyArgs, source) :\n                    callback.apply(applyThis, applyArgs);\n            };\n            _ZoneDelegate.prototype.handleError = function (targetZone, error) {\n                return this._handleErrorZS ?\n                    this._handleErrorZS.onHandleError(this._handleErrorDlgt, this._handleErrorCurrZone, targetZone, error) :\n                    true;\n            };\n            _ZoneDelegate.prototype.scheduleTask = function (targetZone, task) {\n                var returnTask = task;\n                if (this._scheduleTaskZS) {\n                    if (this._hasTaskZS) {\n                        returnTask._zoneDelegates.push(this._hasTaskDlgtOwner);\n                    }\n                    // clang-format off\n                    returnTask = this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt, this._scheduleTaskCurrZone, targetZone, task);\n                    // clang-format on\n                    if (!returnTask)\n                        returnTask = task;\n                }\n                else {\n                    if (task.scheduleFn) {\n                        task.scheduleFn(task);\n                    }\n                    else if (task.type == microTask) {\n                        scheduleMicroTask(task);\n                    }\n                    else {\n                        throw new Error('Task is missing scheduleFn.');\n                    }\n                }\n                return returnTask;\n            };\n            _ZoneDelegate.prototype.invokeTask = function (targetZone, task, applyThis, applyArgs) {\n                return this._invokeTaskZS ? this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt, this._invokeTaskCurrZone, targetZone, task, applyThis, applyArgs) :\n                    task.callback.apply(applyThis, applyArgs);\n            };\n            _ZoneDelegate.prototype.cancelTask = function (targetZone, task) {\n                var value;\n                if (this._cancelTaskZS) {\n                    value = this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt, this._cancelTaskCurrZone, targetZone, task);\n                }\n                else {\n                    if (!task.cancelFn) {\n                        throw Error('Task is not cancelable');\n                    }\n                    value = task.cancelFn(task);\n                }\n                return value;\n            };\n            _ZoneDelegate.prototype.hasTask = function (targetZone, isEmpty) {\n                // hasTask should not throw error so other ZoneDelegate\n                // can still trigger hasTask callback\n                try {\n                    this._hasTaskZS &&\n                        this._hasTaskZS.onHasTask(this._hasTaskDlgt, this._hasTaskCurrZone, targetZone, isEmpty);\n                }\n                catch (err) {\n                    this.handleError(targetZone, err);\n                }\n            };\n            // tslint:disable-next-line:require-internal-with-underscore\n            _ZoneDelegate.prototype._updateTaskCount = function (type, count) {\n                var counts = this._taskCounts;\n                var prev = counts[type];\n                var next = counts[type] = prev + count;\n                if (next < 0) {\n                    throw new Error('More tasks executed then were scheduled.');\n                }\n                if (prev == 0 || next == 0) {\n                    var isEmpty = {\n                        microTask: counts['microTask'] > 0,\n                        macroTask: counts['macroTask'] > 0,\n                        eventTask: counts['eventTask'] > 0,\n                        change: type\n                    };\n                    this.hasTask(this.zone, isEmpty);\n                }\n            };\n            return _ZoneDelegate;\n        }());\n        var ZoneTask = /** @class */ (function () {\n            function ZoneTask(type, source, callback, options, scheduleFn, cancelFn) {\n                // tslint:disable-next-line:require-internal-with-underscore\n                this._zone = null;\n                this.runCount = 0;\n                // tslint:disable-next-line:require-internal-with-underscore\n                this._zoneDelegates = null;\n                // tslint:disable-next-line:require-internal-with-underscore\n                this._state = 'notScheduled';\n                this.type = type;\n                this.source = source;\n                this.data = options;\n                this.scheduleFn = scheduleFn;\n                this.cancelFn = cancelFn;\n                if (!callback) {\n                    throw new Error('callback is not defined');\n                }\n                this.callback = callback;\n                var self = this;\n                // TODO: @JiaLiPassion options should have interface\n                if (type === eventTask && options && options.useG) {\n                    this.invoke = ZoneTask.invokeTask;\n                }\n                else {\n                    this.invoke = function () {\n                        return ZoneTask.invokeTask.call(global, self, this, arguments);\n                    };\n                }\n            }\n            ZoneTask.invokeTask = function (task, target, args) {\n                if (!task) {\n                    task = this;\n                }\n                _numberOfNestedTaskFrames++;\n                try {\n                    task.runCount++;\n                    return task.zone.runTask(task, target, args);\n                }\n                finally {\n                    if (_numberOfNestedTaskFrames == 1) {\n                        drainMicroTaskQueue();\n                    }\n                    _numberOfNestedTaskFrames--;\n                }\n            };\n            Object.defineProperty(ZoneTask.prototype, \"zone\", {\n                get: function () {\n                    return this._zone;\n                },\n                enumerable: false,\n                configurable: true\n            });\n            Object.defineProperty(ZoneTask.prototype, \"state\", {\n                get: function () {\n                    return this._state;\n                },\n                enumerable: false,\n                configurable: true\n            });\n            ZoneTask.prototype.cancelScheduleRequest = function () {\n                this._transitionTo(notScheduled, scheduling);\n            };\n            // tslint:disable-next-line:require-internal-with-underscore\n            ZoneTask.prototype._transitionTo = function (toState, fromState1, fromState2) {\n                if (this._state === fromState1 || this._state === fromState2) {\n                    this._state = toState;\n                    if (toState == notScheduled) {\n                        this._zoneDelegates = null;\n                    }\n                }\n                else {\n                    throw new Error(\"\".concat(this.type, \" '\").concat(this.source, \"': can not transition to '\").concat(toState, \"', expecting state '\").concat(fromState1, \"'\").concat(fromState2 ? ' or \\'' + fromState2 + '\\'' : '', \", was '\").concat(this._state, \"'.\"));\n                }\n            };\n            ZoneTask.prototype.toString = function () {\n                if (this.data && typeof this.data.handleId !== 'undefined') {\n                    return this.data.handleId.toString();\n                }\n                else {\n                    return Object.prototype.toString.call(this);\n                }\n            };\n            // add toJSON method to prevent cyclic error when\n            // call JSON.stringify(zoneTask)\n            ZoneTask.prototype.toJSON = function () {\n                return {\n                    type: this.type,\n                    state: this.state,\n                    source: this.source,\n                    zone: this.zone.name,\n                    runCount: this.runCount\n                };\n            };\n            return ZoneTask;\n        }());\n        //////////////////////////////////////////////////////\n        //////////////////////////////////////////////////////\n        ///  MICROTASK QUEUE\n        //////////////////////////////////////////////////////\n        //////////////////////////////////////////////////////\n        var symbolSetTimeout = __symbol__('setTimeout');\n        var symbolPromise = __symbol__('Promise');\n        var symbolThen = __symbol__('then');\n        var _microTaskQueue = [];\n        var _isDrainingMicrotaskQueue = false;\n        var nativeMicroTaskQueuePromise;\n        function nativeScheduleMicroTask(func) {\n            if (!nativeMicroTaskQueuePromise) {\n                if (global[symbolPromise]) {\n                    nativeMicroTaskQueuePromise = global[symbolPromise].resolve(0);\n                }\n            }\n            if (nativeMicroTaskQueuePromise) {\n                var nativeThen = nativeMicroTaskQueuePromise[symbolThen];\n                if (!nativeThen) {\n                    // native Promise is not patchable, we need to use `then` directly\n                    // issue 1078\n                    nativeThen = nativeMicroTaskQueuePromise['then'];\n                }\n                nativeThen.call(nativeMicroTaskQueuePromise, func);\n            }\n            else {\n                global[symbolSetTimeout](func, 0);\n            }\n        }\n        function scheduleMicroTask(task) {\n            // if we are not running in any task, and there has not been anything scheduled\n            // we must bootstrap the initial task creation by manually scheduling the drain\n            if (_numberOfNestedTaskFrames === 0 && _microTaskQueue.length === 0) {\n                // We are not running in Task, so we need to kickstart the microtask queue.\n                nativeScheduleMicroTask(drainMicroTaskQueue);\n            }\n            task && _microTaskQueue.push(task);\n        }\n        function drainMicroTaskQueue() {\n            if (!_isDrainingMicrotaskQueue) {\n                _isDrainingMicrotaskQueue = true;\n                while (_microTaskQueue.length) {\n                    var queue = _microTaskQueue;\n                    _microTaskQueue = [];\n                    for (var i = 0; i < queue.length; i++) {\n                        var task = queue[i];\n                        try {\n                            task.zone.runTask(task, null, null);\n                        }\n                        catch (error) {\n                            _api.onUnhandledError(error);\n                        }\n                    }\n                }\n                _api.microtaskDrainDone();\n                _isDrainingMicrotaskQueue = false;\n            }\n        }\n        //////////////////////////////////////////////////////\n        //////////////////////////////////////////////////////\n        ///  BOOTSTRAP\n        //////////////////////////////////////////////////////\n        //////////////////////////////////////////////////////\n        var NO_ZONE = { name: 'NO ZONE' };\n        var notScheduled = 'notScheduled', scheduling = 'scheduling', scheduled = 'scheduled', running = 'running', canceling = 'canceling', unknown = 'unknown';\n        var microTask = 'microTask', macroTask = 'macroTask', eventTask = 'eventTask';\n        var patches = {};\n        var _api = {\n            symbol: __symbol__,\n            currentZoneFrame: function () { return _currentZoneFrame; },\n            onUnhandledError: noop,\n            microtaskDrainDone: noop,\n            scheduleMicroTask: scheduleMicroTask,\n            showUncaughtError: function () { return !Zone[__symbol__('ignoreConsoleErrorUncaughtError')]; },\n            patchEventTarget: function () { return []; },\n            patchOnProperties: noop,\n            patchMethod: function () { return noop; },\n            bindArguments: function () { return []; },\n            patchThen: function () { return noop; },\n            patchMacroTask: function () { return noop; },\n            patchEventPrototype: function () { return noop; },\n            isIEOrEdge: function () { return false; },\n            getGlobalObjects: function () { return undefined; },\n            ObjectDefineProperty: function () { return noop; },\n            ObjectGetOwnPropertyDescriptor: function () { return undefined; },\n            ObjectCreate: function () { return undefined; },\n            ArraySlice: function () { return []; },\n            patchClass: function () { return noop; },\n            wrapWithCurrentZone: function () { return noop; },\n            filterProperties: function () { return []; },\n            attachOriginToPatched: function () { return noop; },\n            _redefineProperty: function () { return noop; },\n            patchCallbacks: function () { return noop; },\n            nativeScheduleMicroTask: nativeScheduleMicroTask\n        };\n        var _currentZoneFrame = { parent: null, zone: new Zone(null, null) };\n        var _currentTask = null;\n        var _numberOfNestedTaskFrames = 0;\n        function noop() { }\n        performanceMeasure('Zone', 'Zone');\n        return global['Zone'] = Zone;\n    }))(typeof window !== 'undefined' && window || typeof self !== 'undefined' && self || __webpack_require__.g);\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * Suppress closure compiler errors about unknown 'Zone' variable\n     * @fileoverview\n     * @suppress {undefinedVars,globalThis,missingRequire}\n     */\n    /// <reference types=\"node\"/>\n    // issue #989, to reduce bundle size, use short name\n    /** Object.getOwnPropertyDescriptor */\n    var ObjectGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n    /** Object.defineProperty */\n    var ObjectDefineProperty = Object.defineProperty;\n    /** Object.getPrototypeOf */\n    var ObjectGetPrototypeOf = Object.getPrototypeOf;\n    /** Object.create */\n    var ObjectCreate = Object.create;\n    /** Array.prototype.slice */\n    var ArraySlice = Array.prototype.slice;\n    /** addEventListener string const */\n    var ADD_EVENT_LISTENER_STR = 'addEventListener';\n    /** removeEventListener string const */\n    var REMOVE_EVENT_LISTENER_STR = 'removeEventListener';\n    /** zoneSymbol addEventListener */\n    var ZONE_SYMBOL_ADD_EVENT_LISTENER = Zone.__symbol__(ADD_EVENT_LISTENER_STR);\n    /** zoneSymbol removeEventListener */\n    var ZONE_SYMBOL_REMOVE_EVENT_LISTENER = Zone.__symbol__(REMOVE_EVENT_LISTENER_STR);\n    /** true string const */\n    var TRUE_STR = 'true';\n    /** false string const */\n    var FALSE_STR = 'false';\n    /** Zone symbol prefix string const. */\n    var ZONE_SYMBOL_PREFIX = Zone.__symbol__('');\n    function wrapWithCurrentZone(callback, source) {\n        return Zone.current.wrap(callback, source);\n    }\n    function scheduleMacroTaskWithCurrentZone(source, callback, data, customSchedule, customCancel) {\n        return Zone.current.scheduleMacroTask(source, callback, data, customSchedule, customCancel);\n    }\n    var zoneSymbol$1 = Zone.__symbol__;\n    var isWindowExists = typeof window !== 'undefined';\n    var internalWindow = isWindowExists ? window : undefined;\n    var _global = isWindowExists && internalWindow || typeof self === 'object' && self || __webpack_require__.g;\n    var REMOVE_ATTRIBUTE = 'removeAttribute';\n    function bindArguments(args, source) {\n        for (var i = args.length - 1; i >= 0; i--) {\n            if (typeof args[i] === 'function') {\n                args[i] = wrapWithCurrentZone(args[i], source + '_' + i);\n            }\n        }\n        return args;\n    }\n    function patchPrototype(prototype, fnNames) {\n        var source = prototype.constructor['name'];\n        var _loop_1 = function (i) {\n            var name_1 = fnNames[i];\n            var delegate = prototype[name_1];\n            if (delegate) {\n                var prototypeDesc = ObjectGetOwnPropertyDescriptor(prototype, name_1);\n                if (!isPropertyWritable(prototypeDesc)) {\n                    return \"continue\";\n                }\n                prototype[name_1] = (function (delegate) {\n                    var patched = function () {\n                        return delegate.apply(this, bindArguments(arguments, source + '.' + name_1));\n                    };\n                    attachOriginToPatched(patched, delegate);\n                    return patched;\n                })(delegate);\n            }\n        };\n        for (var i = 0; i < fnNames.length; i++) {\n            _loop_1(i);\n        }\n    }\n    function isPropertyWritable(propertyDesc) {\n        if (!propertyDesc) {\n            return true;\n        }\n        if (propertyDesc.writable === false) {\n            return false;\n        }\n        return !(typeof propertyDesc.get === 'function' && typeof propertyDesc.set === 'undefined');\n    }\n    var isWebWorker = (typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope);\n    // Make sure to access `process` through `_global` so that WebPack does not accidentally browserify\n    // this code.\n    var isNode = (!('nw' in _global) && typeof _global.process !== 'undefined' &&\n        {}.toString.call(_global.process) === '[object process]');\n    var isBrowser = !isNode && !isWebWorker && !!(isWindowExists && internalWindow['HTMLElement']);\n    // we are in electron of nw, so we are both browser and nodejs\n    // Make sure to access `process` through `_global` so that WebPack does not accidentally browserify\n    // this code.\n    var isMix = typeof _global.process !== 'undefined' &&\n        {}.toString.call(_global.process) === '[object process]' && !isWebWorker &&\n        !!(isWindowExists && internalWindow['HTMLElement']);\n    var zoneSymbolEventNames$1 = {};\n    var wrapFn = function (event) {\n        // https://github.com/angular/zone.js/issues/911, in IE, sometimes\n        // event will be undefined, so we need to use window.event\n        event = event || _global.event;\n        if (!event) {\n            return;\n        }\n        var eventNameSymbol = zoneSymbolEventNames$1[event.type];\n        if (!eventNameSymbol) {\n            eventNameSymbol = zoneSymbolEventNames$1[event.type] = zoneSymbol$1('ON_PROPERTY' + event.type);\n        }\n        var target = this || event.target || _global;\n        var listener = target[eventNameSymbol];\n        var result;\n        if (isBrowser && target === internalWindow && event.type === 'error') {\n            // window.onerror have different signature\n            // https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onerror#window.onerror\n            // and onerror callback will prevent default when callback return true\n            var errorEvent = event;\n            result = listener &&\n                listener.call(this, errorEvent.message, errorEvent.filename, errorEvent.lineno, errorEvent.colno, errorEvent.error);\n            if (result === true) {\n                event.preventDefault();\n            }\n        }\n        else {\n            result = listener && listener.apply(this, arguments);\n            if (result != undefined && !result) {\n                event.preventDefault();\n            }\n        }\n        return result;\n    };\n    function patchProperty(obj, prop, prototype) {\n        var desc = ObjectGetOwnPropertyDescriptor(obj, prop);\n        if (!desc && prototype) {\n            // when patch window object, use prototype to check prop exist or not\n            var prototypeDesc = ObjectGetOwnPropertyDescriptor(prototype, prop);\n            if (prototypeDesc) {\n                desc = { enumerable: true, configurable: true };\n            }\n        }\n        // if the descriptor not exists or is not configurable\n        // just return\n        if (!desc || !desc.configurable) {\n            return;\n        }\n        var onPropPatchedSymbol = zoneSymbol$1('on' + prop + 'patched');\n        if (obj.hasOwnProperty(onPropPatchedSymbol) && obj[onPropPatchedSymbol]) {\n            return;\n        }\n        // A property descriptor cannot have getter/setter and be writable\n        // deleting the writable and value properties avoids this error:\n        //\n        // TypeError: property descriptors must not specify a value or be writable when a\n        // getter or setter has been specified\n        delete desc.writable;\n        delete desc.value;\n        var originalDescGet = desc.get;\n        var originalDescSet = desc.set;\n        // slice(2) cuz 'onclick' -> 'click', etc\n        var eventName = prop.slice(2);\n        var eventNameSymbol = zoneSymbolEventNames$1[eventName];\n        if (!eventNameSymbol) {\n            eventNameSymbol = zoneSymbolEventNames$1[eventName] = zoneSymbol$1('ON_PROPERTY' + eventName);\n        }\n        desc.set = function (newValue) {\n            // in some of windows's onproperty callback, this is undefined\n            // so we need to check it\n            var target = this;\n            if (!target && obj === _global) {\n                target = _global;\n            }\n            if (!target) {\n                return;\n            }\n            var previousValue = target[eventNameSymbol];\n            if (typeof previousValue === 'function') {\n                target.removeEventListener(eventName, wrapFn);\n            }\n            // issue #978, when onload handler was added before loading zone.js\n            // we should remove it with originalDescSet\n            originalDescSet && originalDescSet.call(target, null);\n            target[eventNameSymbol] = newValue;\n            if (typeof newValue === 'function') {\n                target.addEventListener(eventName, wrapFn, false);\n            }\n        };\n        // The getter would return undefined for unassigned properties but the default value of an\n        // unassigned property is null\n        desc.get = function () {\n            // in some of windows's onproperty callback, this is undefined\n            // so we need to check it\n            var target = this;\n            if (!target && obj === _global) {\n                target = _global;\n            }\n            if (!target) {\n                return null;\n            }\n            var listener = target[eventNameSymbol];\n            if (listener) {\n                return listener;\n            }\n            else if (originalDescGet) {\n                // result will be null when use inline event attribute,\n                // such as <button onclick=\"func();\">OK</button>\n                // because the onclick function is internal raw uncompiled handler\n                // the onclick will be evaluated when first time event was triggered or\n                // the property is accessed, https://github.com/angular/zone.js/issues/525\n                // so we should use original native get to retrieve the handler\n                var value = originalDescGet.call(this);\n                if (value) {\n                    desc.set.call(this, value);\n                    if (typeof target[REMOVE_ATTRIBUTE] === 'function') {\n                        target.removeAttribute(prop);\n                    }\n                    return value;\n                }\n            }\n            return null;\n        };\n        ObjectDefineProperty(obj, prop, desc);\n        obj[onPropPatchedSymbol] = true;\n    }\n    function patchOnProperties(obj, properties, prototype) {\n        if (properties) {\n            for (var i = 0; i < properties.length; i++) {\n                patchProperty(obj, 'on' + properties[i], prototype);\n            }\n        }\n        else {\n            var onProperties = [];\n            for (var prop in obj) {\n                if (prop.slice(0, 2) == 'on') {\n                    onProperties.push(prop);\n                }\n            }\n            for (var j = 0; j < onProperties.length; j++) {\n                patchProperty(obj, onProperties[j], prototype);\n            }\n        }\n    }\n    var originalInstanceKey = zoneSymbol$1('originalInstance');\n    // wrap some native API on `window`\n    function patchClass(className) {\n        var OriginalClass = _global[className];\n        if (!OriginalClass)\n            return;\n        // keep original class in global\n        _global[zoneSymbol$1(className)] = OriginalClass;\n        _global[className] = function () {\n            var a = bindArguments(arguments, className);\n            switch (a.length) {\n                case 0:\n                    this[originalInstanceKey] = new OriginalClass();\n                    break;\n                case 1:\n                    this[originalInstanceKey] = new OriginalClass(a[0]);\n                    break;\n                case 2:\n                    this[originalInstanceKey] = new OriginalClass(a[0], a[1]);\n                    break;\n                case 3:\n                    this[originalInstanceKey] = new OriginalClass(a[0], a[1], a[2]);\n                    break;\n                case 4:\n                    this[originalInstanceKey] = new OriginalClass(a[0], a[1], a[2], a[3]);\n                    break;\n                default:\n                    throw new Error('Arg list too long.');\n            }\n        };\n        // attach original delegate to patched function\n        attachOriginToPatched(_global[className], OriginalClass);\n        var instance = new OriginalClass(function () { });\n        var prop;\n        for (prop in instance) {\n            // https://bugs.webkit.org/show_bug.cgi?id=44721\n            if (className === 'XMLHttpRequest' && prop === 'responseBlob')\n                continue;\n            (function (prop) {\n                if (typeof instance[prop] === 'function') {\n                    _global[className].prototype[prop] = function () {\n                        return this[originalInstanceKey][prop].apply(this[originalInstanceKey], arguments);\n                    };\n                }\n                else {\n                    ObjectDefineProperty(_global[className].prototype, prop, {\n                        set: function (fn) {\n                            if (typeof fn === 'function') {\n                                this[originalInstanceKey][prop] = wrapWithCurrentZone(fn, className + '.' + prop);\n                                // keep callback in wrapped function so we can\n                                // use it in Function.prototype.toString to return\n                                // the native one.\n                                attachOriginToPatched(this[originalInstanceKey][prop], fn);\n                            }\n                            else {\n                                this[originalInstanceKey][prop] = fn;\n                            }\n                        },\n                        get: function () {\n                            return this[originalInstanceKey][prop];\n                        }\n                    });\n                }\n            }(prop));\n        }\n        for (prop in OriginalClass) {\n            if (prop !== 'prototype' && OriginalClass.hasOwnProperty(prop)) {\n                _global[className][prop] = OriginalClass[prop];\n            }\n        }\n    }\n    function patchMethod(target, name, patchFn) {\n        var proto = target;\n        while (proto && !proto.hasOwnProperty(name)) {\n            proto = ObjectGetPrototypeOf(proto);\n        }\n        if (!proto && target[name]) {\n            // somehow we did not find it, but we can see it. This happens on IE for Window properties.\n            proto = target;\n        }\n        var delegateName = zoneSymbol$1(name);\n        var delegate = null;\n        if (proto && (!(delegate = proto[delegateName]) || !proto.hasOwnProperty(delegateName))) {\n            delegate = proto[delegateName] = proto[name];\n            // check whether proto[name] is writable\n            // some property is readonly in safari, such as HtmlCanvasElement.prototype.toBlob\n            var desc = proto && ObjectGetOwnPropertyDescriptor(proto, name);\n            if (isPropertyWritable(desc)) {\n                var patchDelegate_1 = patchFn(delegate, delegateName, name);\n                proto[name] = function () {\n                    return patchDelegate_1(this, arguments);\n                };\n                attachOriginToPatched(proto[name], delegate);\n            }\n        }\n        return delegate;\n    }\n    // TODO: @JiaLiPassion, support cancel task later if necessary\n    function patchMacroTask(obj, funcName, metaCreator) {\n        var setNative = null;\n        function scheduleTask(task) {\n            var data = task.data;\n            data.args[data.cbIdx] = function () {\n                task.invoke.apply(this, arguments);\n            };\n            setNative.apply(data.target, data.args);\n            return task;\n        }\n        setNative = patchMethod(obj, funcName, function (delegate) { return function (self, args) {\n            var meta = metaCreator(self, args);\n            if (meta.cbIdx >= 0 && typeof args[meta.cbIdx] === 'function') {\n                return scheduleMacroTaskWithCurrentZone(meta.name, args[meta.cbIdx], meta, scheduleTask);\n            }\n            else {\n                // cause an error by calling it directly.\n                return delegate.apply(self, args);\n            }\n        }; });\n    }\n    function attachOriginToPatched(patched, original) {\n        patched[zoneSymbol$1('OriginalDelegate')] = original;\n    }\n    var isDetectedIEOrEdge = false;\n    var ieOrEdge = false;\n    function isIE() {\n        try {\n            var ua = internalWindow.navigator.userAgent;\n            if (ua.indexOf('MSIE ') !== -1 || ua.indexOf('Trident/') !== -1) {\n                return true;\n            }\n        }\n        catch (error) {\n        }\n        return false;\n    }\n    function isIEOrEdge() {\n        if (isDetectedIEOrEdge) {\n            return ieOrEdge;\n        }\n        isDetectedIEOrEdge = true;\n        try {\n            var ua = internalWindow.navigator.userAgent;\n            if (ua.indexOf('MSIE ') !== -1 || ua.indexOf('Trident/') !== -1 || ua.indexOf('Edge/') !== -1) {\n                ieOrEdge = true;\n            }\n        }\n        catch (error) {\n        }\n        return ieOrEdge;\n    }\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    Zone.__load_patch('ZoneAwarePromise', function (global, Zone, api) {\n        var ObjectGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n        var ObjectDefineProperty = Object.defineProperty;\n        function readableObjectToString(obj) {\n            if (obj && obj.toString === Object.prototype.toString) {\n                var className = obj.constructor && obj.constructor.name;\n                return (className ? className : '') + ': ' + JSON.stringify(obj);\n            }\n            return obj ? obj.toString() : Object.prototype.toString.call(obj);\n        }\n        var __symbol__ = api.symbol;\n        var _uncaughtPromiseErrors = [];\n        var isDisableWrappingUncaughtPromiseRejection = global[__symbol__('DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION')] === true;\n        var symbolPromise = __symbol__('Promise');\n        var symbolThen = __symbol__('then');\n        var creationTrace = '__creationTrace__';\n        api.onUnhandledError = function (e) {\n            if (api.showUncaughtError()) {\n                var rejection = e && e.rejection;\n                if (rejection) {\n                    console.error('Unhandled Promise rejection:', rejection instanceof Error ? rejection.message : rejection, '; Zone:', e.zone.name, '; Task:', e.task && e.task.source, '; Value:', rejection, rejection instanceof Error ? rejection.stack : undefined);\n                }\n                else {\n                    console.error(e);\n                }\n            }\n        };\n        api.microtaskDrainDone = function () {\n            var _loop_2 = function () {\n                var uncaughtPromiseError = _uncaughtPromiseErrors.shift();\n                try {\n                    uncaughtPromiseError.zone.runGuarded(function () {\n                        if (uncaughtPromiseError.throwOriginal) {\n                            throw uncaughtPromiseError.rejection;\n                        }\n                        throw uncaughtPromiseError;\n                    });\n                }\n                catch (error) {\n                    handleUnhandledRejection(error);\n                }\n            };\n            while (_uncaughtPromiseErrors.length) {\n                _loop_2();\n            }\n        };\n        var UNHANDLED_PROMISE_REJECTION_HANDLER_SYMBOL = __symbol__('unhandledPromiseRejectionHandler');\n        function handleUnhandledRejection(e) {\n            api.onUnhandledError(e);\n            try {\n                var handler = Zone[UNHANDLED_PROMISE_REJECTION_HANDLER_SYMBOL];\n                if (typeof handler === 'function') {\n                    handler.call(this, e);\n                }\n            }\n            catch (err) {\n            }\n        }\n        function isThenable(value) {\n            return value && value.then;\n        }\n        function forwardResolution(value) {\n            return value;\n        }\n        function forwardRejection(rejection) {\n            return ZoneAwarePromise.reject(rejection);\n        }\n        var symbolState = __symbol__('state');\n        var symbolValue = __symbol__('value');\n        var symbolFinally = __symbol__('finally');\n        var symbolParentPromiseValue = __symbol__('parentPromiseValue');\n        var symbolParentPromiseState = __symbol__('parentPromiseState');\n        var source = 'Promise.then';\n        var UNRESOLVED = null;\n        var RESOLVED = true;\n        var REJECTED = false;\n        var REJECTED_NO_CATCH = 0;\n        function makeResolver(promise, state) {\n            return function (v) {\n                try {\n                    resolvePromise(promise, state, v);\n                }\n                catch (err) {\n                    resolvePromise(promise, false, err);\n                }\n                // Do not return value or you will break the Promise spec.\n            };\n        }\n        var once = function () {\n            var wasCalled = false;\n            return function wrapper(wrappedFunction) {\n                return function () {\n                    if (wasCalled) {\n                        return;\n                    }\n                    wasCalled = true;\n                    wrappedFunction.apply(null, arguments);\n                };\n            };\n        };\n        var TYPE_ERROR = 'Promise resolved with itself';\n        var CURRENT_TASK_TRACE_SYMBOL = __symbol__('currentTaskTrace');\n        // Promise Resolution\n        function resolvePromise(promise, state, value) {\n            var onceWrapper = once();\n            if (promise === value) {\n                throw new TypeError(TYPE_ERROR);\n            }\n            if (promise[symbolState] === UNRESOLVED) {\n                // should only get value.then once based on promise spec.\n                var then = null;\n                try {\n                    if (typeof value === 'object' || typeof value === 'function') {\n                        then = value && value.then;\n                    }\n                }\n                catch (err) {\n                    onceWrapper(function () {\n                        resolvePromise(promise, false, err);\n                    })();\n                    return promise;\n                }\n                // if (value instanceof ZoneAwarePromise) {\n                if (state !== REJECTED && value instanceof ZoneAwarePromise &&\n                    value.hasOwnProperty(symbolState) && value.hasOwnProperty(symbolValue) &&\n                    value[symbolState] !== UNRESOLVED) {\n                    clearRejectedNoCatch(value);\n                    resolvePromise(promise, value[symbolState], value[symbolValue]);\n                }\n                else if (state !== REJECTED && typeof then === 'function') {\n                    try {\n                        then.call(value, onceWrapper(makeResolver(promise, state)), onceWrapper(makeResolver(promise, false)));\n                    }\n                    catch (err) {\n                        onceWrapper(function () {\n                            resolvePromise(promise, false, err);\n                        })();\n                    }\n                }\n                else {\n                    promise[symbolState] = state;\n                    var queue = promise[symbolValue];\n                    promise[symbolValue] = value;\n                    if (promise[symbolFinally] === symbolFinally) {\n                        // the promise is generated by Promise.prototype.finally\n                        if (state === RESOLVED) {\n                            // the state is resolved, should ignore the value\n                            // and use parent promise value\n                            promise[symbolState] = promise[symbolParentPromiseState];\n                            promise[symbolValue] = promise[symbolParentPromiseValue];\n                        }\n                    }\n                    // record task information in value when error occurs, so we can\n                    // do some additional work such as render longStackTrace\n                    if (state === REJECTED && value instanceof Error) {\n                        // check if longStackTraceZone is here\n                        var trace = Zone.currentTask && Zone.currentTask.data &&\n                            Zone.currentTask.data[creationTrace];\n                        if (trace) {\n                            // only keep the long stack trace into error when in longStackTraceZone\n                            ObjectDefineProperty(value, CURRENT_TASK_TRACE_SYMBOL, { configurable: true, enumerable: false, writable: true, value: trace });\n                        }\n                    }\n                    for (var i = 0; i < queue.length;) {\n                        scheduleResolveOrReject(promise, queue[i++], queue[i++], queue[i++], queue[i++]);\n                    }\n                    if (queue.length == 0 && state == REJECTED) {\n                        promise[symbolState] = REJECTED_NO_CATCH;\n                        var uncaughtPromiseError = value;\n                        try {\n                            // Here we throws a new Error to print more readable error log\n                            // and if the value is not an error, zone.js builds an `Error`\n                            // Object here to attach the stack information.\n                            throw new Error('Uncaught (in promise): ' + readableObjectToString(value) +\n                                (value && value.stack ? '\\n' + value.stack : ''));\n                        }\n                        catch (err) {\n                            uncaughtPromiseError = err;\n                        }\n                        if (isDisableWrappingUncaughtPromiseRejection) {\n                            // If disable wrapping uncaught promise reject\n                            // use the value instead of wrapping it.\n                            uncaughtPromiseError.throwOriginal = true;\n                        }\n                        uncaughtPromiseError.rejection = value;\n                        uncaughtPromiseError.promise = promise;\n                        uncaughtPromiseError.zone = Zone.current;\n                        uncaughtPromiseError.task = Zone.currentTask;\n                        _uncaughtPromiseErrors.push(uncaughtPromiseError);\n                        api.scheduleMicroTask(); // to make sure that it is running\n                    }\n                }\n            }\n            // Resolving an already resolved promise is a noop.\n            return promise;\n        }\n        var REJECTION_HANDLED_HANDLER = __symbol__('rejectionHandledHandler');\n        function clearRejectedNoCatch(promise) {\n            if (promise[symbolState] === REJECTED_NO_CATCH) {\n                // if the promise is rejected no catch status\n                // and queue.length > 0, means there is a error handler\n                // here to handle the rejected promise, we should trigger\n                // windows.rejectionhandled eventHandler or nodejs rejectionHandled\n                // eventHandler\n                try {\n                    var handler = Zone[REJECTION_HANDLED_HANDLER];\n                    if (handler && typeof handler === 'function') {\n                        handler.call(this, { rejection: promise[symbolValue], promise: promise });\n                    }\n                }\n                catch (err) {\n                }\n                promise[symbolState] = REJECTED;\n                for (var i = 0; i < _uncaughtPromiseErrors.length; i++) {\n                    if (promise === _uncaughtPromiseErrors[i].promise) {\n                        _uncaughtPromiseErrors.splice(i, 1);\n                    }\n                }\n            }\n        }\n        function scheduleResolveOrReject(promise, zone, chainPromise, onFulfilled, onRejected) {\n            clearRejectedNoCatch(promise);\n            var promiseState = promise[symbolState];\n            var delegate = promiseState ?\n                (typeof onFulfilled === 'function') ? onFulfilled : forwardResolution :\n                (typeof onRejected === 'function') ? onRejected :\n                    forwardRejection;\n            zone.scheduleMicroTask(source, function () {\n                try {\n                    var parentPromiseValue = promise[symbolValue];\n                    var isFinallyPromise = !!chainPromise && symbolFinally === chainPromise[symbolFinally];\n                    if (isFinallyPromise) {\n                        // if the promise is generated from finally call, keep parent promise's state and value\n                        chainPromise[symbolParentPromiseValue] = parentPromiseValue;\n                        chainPromise[symbolParentPromiseState] = promiseState;\n                    }\n                    // should not pass value to finally callback\n                    var value = zone.run(delegate, undefined, isFinallyPromise && delegate !== forwardRejection && delegate !== forwardResolution ?\n                        [] :\n                        [parentPromiseValue]);\n                    resolvePromise(chainPromise, true, value);\n                }\n                catch (error) {\n                    // if error occurs, should always return this error\n                    resolvePromise(chainPromise, false, error);\n                }\n            }, chainPromise);\n        }\n        var ZONE_AWARE_PROMISE_TO_STRING = 'function ZoneAwarePromise() { [native code] }';\n        var noop = function () { };\n        var AggregateError = global.AggregateError;\n        var ZoneAwarePromise = /** @class */ (function () {\n            function ZoneAwarePromise(executor) {\n                var promise = this;\n                if (!(promise instanceof ZoneAwarePromise)) {\n                    throw new Error('Must be an instanceof Promise.');\n                }\n                promise[symbolState] = UNRESOLVED;\n                promise[symbolValue] = []; // queue;\n                try {\n                    var onceWrapper = once();\n                    executor &&\n                        executor(onceWrapper(makeResolver(promise, RESOLVED)), onceWrapper(makeResolver(promise, REJECTED)));\n                }\n                catch (error) {\n                    resolvePromise(promise, false, error);\n                }\n            }\n            ZoneAwarePromise.toString = function () {\n                return ZONE_AWARE_PROMISE_TO_STRING;\n            };\n            ZoneAwarePromise.resolve = function (value) {\n                return resolvePromise(new this(null), RESOLVED, value);\n            };\n            ZoneAwarePromise.reject = function (error) {\n                return resolvePromise(new this(null), REJECTED, error);\n            };\n            ZoneAwarePromise.any = function (values) {\n                if (!values || typeof values[Symbol.iterator] !== 'function') {\n                    return Promise.reject(new AggregateError([], 'All promises were rejected'));\n                }\n                var promises = [];\n                var count = 0;\n                try {\n                    for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n                        var v = values_1[_i];\n                        count++;\n                        promises.push(ZoneAwarePromise.resolve(v));\n                    }\n                }\n                catch (err) {\n                    return Promise.reject(new AggregateError([], 'All promises were rejected'));\n                }\n                if (count === 0) {\n                    return Promise.reject(new AggregateError([], 'All promises were rejected'));\n                }\n                var finished = false;\n                var errors = [];\n                return new ZoneAwarePromise(function (resolve, reject) {\n                    for (var i = 0; i < promises.length; i++) {\n                        promises[i].then(function (v) {\n                            if (finished) {\n                                return;\n                            }\n                            finished = true;\n                            resolve(v);\n                        }, function (err) {\n                            errors.push(err);\n                            count--;\n                            if (count === 0) {\n                                finished = true;\n                                reject(new AggregateError(errors, 'All promises were rejected'));\n                            }\n                        });\n                    }\n                });\n            };\n            ;\n            ZoneAwarePromise.race = function (values) {\n                var resolve;\n                var reject;\n                var promise = new this(function (res, rej) {\n                    resolve = res;\n                    reject = rej;\n                });\n                function onResolve(value) {\n                    resolve(value);\n                }\n                function onReject(error) {\n                    reject(error);\n                }\n                for (var _i = 0, values_2 = values; _i < values_2.length; _i++) {\n                    var value = values_2[_i];\n                    if (!isThenable(value)) {\n                        value = this.resolve(value);\n                    }\n                    value.then(onResolve, onReject);\n                }\n                return promise;\n            };\n            ZoneAwarePromise.all = function (values) {\n                return ZoneAwarePromise.allWithCallback(values);\n            };\n            ZoneAwarePromise.allSettled = function (values) {\n                var P = this && this.prototype instanceof ZoneAwarePromise ? this : ZoneAwarePromise;\n                return P.allWithCallback(values, {\n                    thenCallback: function (value) { return ({ status: 'fulfilled', value: value }); },\n                    errorCallback: function (err) { return ({ status: 'rejected', reason: err }); }\n                });\n            };\n            ZoneAwarePromise.allWithCallback = function (values, callback) {\n                var resolve;\n                var reject;\n                var promise = new this(function (res, rej) {\n                    resolve = res;\n                    reject = rej;\n                });\n                // Start at 2 to prevent prematurely resolving if .then is called immediately.\n                var unresolvedCount = 2;\n                var valueIndex = 0;\n                var resolvedValues = [];\n                var _loop_3 = function (value) {\n                    if (!isThenable(value)) {\n                        value = this_1.resolve(value);\n                    }\n                    var curValueIndex = valueIndex;\n                    try {\n                        value.then(function (value) {\n                            resolvedValues[curValueIndex] = callback ? callback.thenCallback(value) : value;\n                            unresolvedCount--;\n                            if (unresolvedCount === 0) {\n                                resolve(resolvedValues);\n                            }\n                        }, function (err) {\n                            if (!callback) {\n                                reject(err);\n                            }\n                            else {\n                                resolvedValues[curValueIndex] = callback.errorCallback(err);\n                                unresolvedCount--;\n                                if (unresolvedCount === 0) {\n                                    resolve(resolvedValues);\n                                }\n                            }\n                        });\n                    }\n                    catch (thenErr) {\n                        reject(thenErr);\n                    }\n                    unresolvedCount++;\n                    valueIndex++;\n                };\n                var this_1 = this;\n                for (var _i = 0, values_3 = values; _i < values_3.length; _i++) {\n                    var value = values_3[_i];\n                    _loop_3(value);\n                }\n                // Make the unresolvedCount zero-based again.\n                unresolvedCount -= 2;\n                if (unresolvedCount === 0) {\n                    resolve(resolvedValues);\n                }\n                return promise;\n            };\n            Object.defineProperty(ZoneAwarePromise.prototype, Symbol.toStringTag, {\n                get: function () {\n                    return 'Promise';\n                },\n                enumerable: false,\n                configurable: true\n            });\n            Object.defineProperty(ZoneAwarePromise.prototype, Symbol.species, {\n                get: function () {\n                    return ZoneAwarePromise;\n                },\n                enumerable: false,\n                configurable: true\n            });\n            ZoneAwarePromise.prototype.then = function (onFulfilled, onRejected) {\n                var _a;\n                // We must read `Symbol.species` safely because `this` may be anything. For instance, `this`\n                // may be an object without a prototype (created through `Object.create(null)`); thus\n                // `this.constructor` will be undefined. One of the use cases is SystemJS creating\n                // prototype-less objects (modules) via `Object.create(null)`. The SystemJS creates an empty\n                // object and copies promise properties into that object (within the `getOrCreateLoad`\n                // function). The zone.js then checks if the resolved value has the `then` method and invokes\n                // it with the `value` context. Otherwise, this will throw an error: `TypeError: Cannot read\n                // properties of undefined (reading 'Symbol(Symbol.species)')`.\n                var C = (_a = this.constructor) === null || _a === void 0 ? void 0 : _a[Symbol.species];\n                if (!C || typeof C !== 'function') {\n                    C = this.constructor || ZoneAwarePromise;\n                }\n                var chainPromise = new C(noop);\n                var zone = Zone.current;\n                if (this[symbolState] == UNRESOLVED) {\n                    this[symbolValue].push(zone, chainPromise, onFulfilled, onRejected);\n                }\n                else {\n                    scheduleResolveOrReject(this, zone, chainPromise, onFulfilled, onRejected);\n                }\n                return chainPromise;\n            };\n            ZoneAwarePromise.prototype.catch = function (onRejected) {\n                return this.then(null, onRejected);\n            };\n            ZoneAwarePromise.prototype.finally = function (onFinally) {\n                var _a;\n                // See comment on the call to `then` about why thee `Symbol.species` is safely accessed.\n                var C = (_a = this.constructor) === null || _a === void 0 ? void 0 : _a[Symbol.species];\n                if (!C || typeof C !== 'function') {\n                    C = ZoneAwarePromise;\n                }\n                var chainPromise = new C(noop);\n                chainPromise[symbolFinally] = symbolFinally;\n                var zone = Zone.current;\n                if (this[symbolState] == UNRESOLVED) {\n                    this[symbolValue].push(zone, chainPromise, onFinally, onFinally);\n                }\n                else {\n                    scheduleResolveOrReject(this, zone, chainPromise, onFinally, onFinally);\n                }\n                return chainPromise;\n            };\n            return ZoneAwarePromise;\n        }());\n        // Protect against aggressive optimizers dropping seemingly unused properties.\n        // E.g. Closure Compiler in advanced mode.\n        ZoneAwarePromise['resolve'] = ZoneAwarePromise.resolve;\n        ZoneAwarePromise['reject'] = ZoneAwarePromise.reject;\n        ZoneAwarePromise['race'] = ZoneAwarePromise.race;\n        ZoneAwarePromise['all'] = ZoneAwarePromise.all;\n        var NativePromise = global[symbolPromise] = global['Promise'];\n        global['Promise'] = ZoneAwarePromise;\n        var symbolThenPatched = __symbol__('thenPatched');\n        function patchThen(Ctor) {\n            var proto = Ctor.prototype;\n            var prop = ObjectGetOwnPropertyDescriptor(proto, 'then');\n            if (prop && (prop.writable === false || !prop.configurable)) {\n                // check Ctor.prototype.then propertyDescriptor is writable or not\n                // in meteor env, writable is false, we should ignore such case\n                return;\n            }\n            var originalThen = proto.then;\n            // Keep a reference to the original method.\n            proto[symbolThen] = originalThen;\n            Ctor.prototype.then = function (onResolve, onReject) {\n                var _this = this;\n                var wrapped = new ZoneAwarePromise(function (resolve, reject) {\n                    originalThen.call(_this, resolve, reject);\n                });\n                return wrapped.then(onResolve, onReject);\n            };\n            Ctor[symbolThenPatched] = true;\n        }\n        api.patchThen = patchThen;\n        function zoneify(fn) {\n            return function (self, args) {\n                var resultPromise = fn.apply(self, args);\n                if (resultPromise instanceof ZoneAwarePromise) {\n                    return resultPromise;\n                }\n                var ctor = resultPromise.constructor;\n                if (!ctor[symbolThenPatched]) {\n                    patchThen(ctor);\n                }\n                return resultPromise;\n            };\n        }\n        if (NativePromise) {\n            patchThen(NativePromise);\n            patchMethod(global, 'fetch', function (delegate) { return zoneify(delegate); });\n        }\n        // This is not part of public API, but it is useful for tests, so we expose it.\n        Promise[Zone.__symbol__('uncaughtPromiseErrors')] = _uncaughtPromiseErrors;\n        return ZoneAwarePromise;\n    });\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    // override Function.prototype.toString to make zone.js patched function\n    // look like native function\n    Zone.__load_patch('toString', function (global) {\n        // patch Func.prototype.toString to let them look like native\n        var originalFunctionToString = Function.prototype.toString;\n        var ORIGINAL_DELEGATE_SYMBOL = zoneSymbol$1('OriginalDelegate');\n        var PROMISE_SYMBOL = zoneSymbol$1('Promise');\n        var ERROR_SYMBOL = zoneSymbol$1('Error');\n        var newFunctionToString = function toString() {\n            if (typeof this === 'function') {\n                var originalDelegate = this[ORIGINAL_DELEGATE_SYMBOL];\n                if (originalDelegate) {\n                    if (typeof originalDelegate === 'function') {\n                        return originalFunctionToString.call(originalDelegate);\n                    }\n                    else {\n                        return Object.prototype.toString.call(originalDelegate);\n                    }\n                }\n                if (this === Promise) {\n                    var nativePromise = global[PROMISE_SYMBOL];\n                    if (nativePromise) {\n                        return originalFunctionToString.call(nativePromise);\n                    }\n                }\n                if (this === Error) {\n                    var nativeError = global[ERROR_SYMBOL];\n                    if (nativeError) {\n                        return originalFunctionToString.call(nativeError);\n                    }\n                }\n            }\n            return originalFunctionToString.call(this);\n        };\n        newFunctionToString[ORIGINAL_DELEGATE_SYMBOL] = originalFunctionToString;\n        Function.prototype.toString = newFunctionToString;\n        // patch Object.prototype.toString to let them look like native\n        var originalObjectToString = Object.prototype.toString;\n        var PROMISE_OBJECT_TO_STRING = '[object Promise]';\n        Object.prototype.toString = function () {\n            if (typeof Promise === 'function' && this instanceof Promise) {\n                return PROMISE_OBJECT_TO_STRING;\n            }\n            return originalObjectToString.call(this);\n        };\n    });\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var passiveSupported = false;\n    if (typeof window !== 'undefined') {\n        try {\n            var options = Object.defineProperty({}, 'passive', {\n                get: function () {\n                    passiveSupported = true;\n                }\n            });\n            // Note: We pass the `options` object as the event handler too. This is not compatible with the\n            // signature of `addEventListener` or `removeEventListener` but enables us to remove the handler\n            // without an actual handler.\n            window.addEventListener('test', options, options);\n            window.removeEventListener('test', options, options);\n        }\n        catch (err) {\n            passiveSupported = false;\n        }\n    }\n    // an identifier to tell ZoneTask do not create a new invoke closure\n    var OPTIMIZED_ZONE_EVENT_TASK_DATA = {\n        useG: true\n    };\n    var zoneSymbolEventNames = {};\n    var globalSources = {};\n    var EVENT_NAME_SYMBOL_REGX = new RegExp('^' + ZONE_SYMBOL_PREFIX + '(\\\\w+)(true|false)$');\n    var IMMEDIATE_PROPAGATION_SYMBOL = zoneSymbol$1('propagationStopped');\n    function prepareEventNames(eventName, eventNameToString) {\n        var falseEventName = (eventNameToString ? eventNameToString(eventName) : eventName) + FALSE_STR;\n        var trueEventName = (eventNameToString ? eventNameToString(eventName) : eventName) + TRUE_STR;\n        var symbol = ZONE_SYMBOL_PREFIX + falseEventName;\n        var symbolCapture = ZONE_SYMBOL_PREFIX + trueEventName;\n        zoneSymbolEventNames[eventName] = {};\n        zoneSymbolEventNames[eventName][FALSE_STR] = symbol;\n        zoneSymbolEventNames[eventName][TRUE_STR] = symbolCapture;\n    }\n    function patchEventTarget(_global, api, apis, patchOptions) {\n        var ADD_EVENT_LISTENER = (patchOptions && patchOptions.add) || ADD_EVENT_LISTENER_STR;\n        var REMOVE_EVENT_LISTENER = (patchOptions && patchOptions.rm) || REMOVE_EVENT_LISTENER_STR;\n        var LISTENERS_EVENT_LISTENER = (patchOptions && patchOptions.listeners) || 'eventListeners';\n        var REMOVE_ALL_LISTENERS_EVENT_LISTENER = (patchOptions && patchOptions.rmAll) || 'removeAllListeners';\n        var zoneSymbolAddEventListener = zoneSymbol$1(ADD_EVENT_LISTENER);\n        var ADD_EVENT_LISTENER_SOURCE = '.' + ADD_EVENT_LISTENER + ':';\n        var PREPEND_EVENT_LISTENER = 'prependListener';\n        var PREPEND_EVENT_LISTENER_SOURCE = '.' + PREPEND_EVENT_LISTENER + ':';\n        var invokeTask = function (task, target, event) {\n            // for better performance, check isRemoved which is set\n            // by removeEventListener\n            if (task.isRemoved) {\n                return;\n            }\n            var delegate = task.callback;\n            if (typeof delegate === 'object' && delegate.handleEvent) {\n                // create the bind version of handleEvent when invoke\n                task.callback = function (event) { return delegate.handleEvent(event); };\n                task.originalDelegate = delegate;\n            }\n            // invoke static task.invoke\n            // need to try/catch error here, otherwise, the error in one event listener\n            // will break the executions of the other event listeners. Also error will\n            // not remove the event listener when `once` options is true.\n            var error;\n            try {\n                task.invoke(task, target, [event]);\n            }\n            catch (err) {\n                error = err;\n            }\n            var options = task.options;\n            if (options && typeof options === 'object' && options.once) {\n                // if options.once is true, after invoke once remove listener here\n                // only browser need to do this, nodejs eventEmitter will cal removeListener\n                // inside EventEmitter.once\n                var delegate_1 = task.originalDelegate ? task.originalDelegate : task.callback;\n                target[REMOVE_EVENT_LISTENER].call(target, event.type, delegate_1, options);\n            }\n            return error;\n        };\n        function globalCallback(context, event, isCapture) {\n            // https://github.com/angular/zone.js/issues/911, in IE, sometimes\n            // event will be undefined, so we need to use window.event\n            event = event || _global.event;\n            if (!event) {\n                return;\n            }\n            // event.target is needed for Samsung TV and SourceBuffer\n            // || global is needed https://github.com/angular/zone.js/issues/190\n            var target = context || event.target || _global;\n            var tasks = target[zoneSymbolEventNames[event.type][isCapture ? TRUE_STR : FALSE_STR]];\n            if (tasks) {\n                var errors = [];\n                // invoke all tasks which attached to current target with given event.type and capture = false\n                // for performance concern, if task.length === 1, just invoke\n                if (tasks.length === 1) {\n                    var err = invokeTask(tasks[0], target, event);\n                    err && errors.push(err);\n                }\n                else {\n                    // https://github.com/angular/zone.js/issues/836\n                    // copy the tasks array before invoke, to avoid\n                    // the callback will remove itself or other listener\n                    var copyTasks = tasks.slice();\n                    for (var i = 0; i < copyTasks.length; i++) {\n                        if (event && event[IMMEDIATE_PROPAGATION_SYMBOL] === true) {\n                            break;\n                        }\n                        var err = invokeTask(copyTasks[i], target, event);\n                        err && errors.push(err);\n                    }\n                }\n                // Since there is only one error, we don't need to schedule microTask\n                // to throw the error.\n                if (errors.length === 1) {\n                    throw errors[0];\n                }\n                else {\n                    var _loop_4 = function (i) {\n                        var err = errors[i];\n                        api.nativeScheduleMicroTask(function () {\n                            throw err;\n                        });\n                    };\n                    for (var i = 0; i < errors.length; i++) {\n                        _loop_4(i);\n                    }\n                }\n            }\n        }\n        // global shared zoneAwareCallback to handle all event callback with capture = false\n        var globalZoneAwareCallback = function (event) {\n            return globalCallback(this, event, false);\n        };\n        // global shared zoneAwareCallback to handle all event callback with capture = true\n        var globalZoneAwareCaptureCallback = function (event) {\n            return globalCallback(this, event, true);\n        };\n        function patchEventTargetMethods(obj, patchOptions) {\n            if (!obj) {\n                return false;\n            }\n            var useGlobalCallback = true;\n            if (patchOptions && patchOptions.useG !== undefined) {\n                useGlobalCallback = patchOptions.useG;\n            }\n            var validateHandler = patchOptions && patchOptions.vh;\n            var checkDuplicate = true;\n            if (patchOptions && patchOptions.chkDup !== undefined) {\n                checkDuplicate = patchOptions.chkDup;\n            }\n            var returnTarget = false;\n            if (patchOptions && patchOptions.rt !== undefined) {\n                returnTarget = patchOptions.rt;\n            }\n            var proto = obj;\n            while (proto && !proto.hasOwnProperty(ADD_EVENT_LISTENER)) {\n                proto = ObjectGetPrototypeOf(proto);\n            }\n            if (!proto && obj[ADD_EVENT_LISTENER]) {\n                // somehow we did not find it, but we can see it. This happens on IE for Window properties.\n                proto = obj;\n            }\n            if (!proto) {\n                return false;\n            }\n            if (proto[zoneSymbolAddEventListener]) {\n                return false;\n            }\n            var eventNameToString = patchOptions && patchOptions.eventNameToString;\n            // a shared global taskData to pass data for scheduleEventTask\n            // so we do not need to create a new object just for pass some data\n            var taskData = {};\n            var nativeAddEventListener = proto[zoneSymbolAddEventListener] = proto[ADD_EVENT_LISTENER];\n            var nativeRemoveEventListener = proto[zoneSymbol$1(REMOVE_EVENT_LISTENER)] =\n                proto[REMOVE_EVENT_LISTENER];\n            var nativeListeners = proto[zoneSymbol$1(LISTENERS_EVENT_LISTENER)] =\n                proto[LISTENERS_EVENT_LISTENER];\n            var nativeRemoveAllListeners = proto[zoneSymbol$1(REMOVE_ALL_LISTENERS_EVENT_LISTENER)] =\n                proto[REMOVE_ALL_LISTENERS_EVENT_LISTENER];\n            var nativePrependEventListener;\n            if (patchOptions && patchOptions.prepend) {\n                nativePrependEventListener = proto[zoneSymbol$1(patchOptions.prepend)] =\n                    proto[patchOptions.prepend];\n            }\n            /**\n             * This util function will build an option object with passive option\n             * to handle all possible input from the user.\n             */\n            function buildEventListenerOptions(options, passive) {\n                if (!passiveSupported && typeof options === 'object' && options) {\n                    // doesn't support passive but user want to pass an object as options.\n                    // this will not work on some old browser, so we just pass a boolean\n                    // as useCapture parameter\n                    return !!options.capture;\n                }\n                if (!passiveSupported || !passive) {\n                    return options;\n                }\n                if (typeof options === 'boolean') {\n                    return { capture: options, passive: true };\n                }\n                if (!options) {\n                    return { passive: true };\n                }\n                if (typeof options === 'object' && options.passive !== false) {\n                    return Object.assign(Object.assign({}, options), { passive: true });\n                }\n                return options;\n            }\n            var customScheduleGlobal = function (task) {\n                // if there is already a task for the eventName + capture,\n                // just return, because we use the shared globalZoneAwareCallback here.\n                if (taskData.isExisting) {\n                    return;\n                }\n                return nativeAddEventListener.call(taskData.target, taskData.eventName, taskData.capture ? globalZoneAwareCaptureCallback : globalZoneAwareCallback, taskData.options);\n            };\n            var customCancelGlobal = function (task) {\n                // if task is not marked as isRemoved, this call is directly\n                // from Zone.prototype.cancelTask, we should remove the task\n                // from tasksList of target first\n                if (!task.isRemoved) {\n                    var symbolEventNames = zoneSymbolEventNames[task.eventName];\n                    var symbolEventName = void 0;\n                    if (symbolEventNames) {\n                        symbolEventName = symbolEventNames[task.capture ? TRUE_STR : FALSE_STR];\n                    }\n                    var existingTasks = symbolEventName && task.target[symbolEventName];\n                    if (existingTasks) {\n                        for (var i = 0; i < existingTasks.length; i++) {\n                            var existingTask = existingTasks[i];\n                            if (existingTask === task) {\n                                existingTasks.splice(i, 1);\n                                // set isRemoved to data for faster invokeTask check\n                                task.isRemoved = true;\n                                if (existingTasks.length === 0) {\n                                    // all tasks for the eventName + capture have gone,\n                                    // remove globalZoneAwareCallback and remove the task cache from target\n                                    task.allRemoved = true;\n                                    task.target[symbolEventName] = null;\n                                }\n                                break;\n                            }\n                        }\n                    }\n                }\n                // if all tasks for the eventName + capture have gone,\n                // we will really remove the global event callback,\n                // if not, return\n                if (!task.allRemoved) {\n                    return;\n                }\n                return nativeRemoveEventListener.call(task.target, task.eventName, task.capture ? globalZoneAwareCaptureCallback : globalZoneAwareCallback, task.options);\n            };\n            var customScheduleNonGlobal = function (task) {\n                return nativeAddEventListener.call(taskData.target, taskData.eventName, task.invoke, taskData.options);\n            };\n            var customSchedulePrepend = function (task) {\n                return nativePrependEventListener.call(taskData.target, taskData.eventName, task.invoke, taskData.options);\n            };\n            var customCancelNonGlobal = function (task) {\n                return nativeRemoveEventListener.call(task.target, task.eventName, task.invoke, task.options);\n            };\n            var customSchedule = useGlobalCallback ? customScheduleGlobal : customScheduleNonGlobal;\n            var customCancel = useGlobalCallback ? customCancelGlobal : customCancelNonGlobal;\n            var compareTaskCallbackVsDelegate = function (task, delegate) {\n                var typeOfDelegate = typeof delegate;\n                return (typeOfDelegate === 'function' && task.callback === delegate) ||\n                    (typeOfDelegate === 'object' && task.originalDelegate === delegate);\n            };\n            var compare = (patchOptions && patchOptions.diff) ? patchOptions.diff : compareTaskCallbackVsDelegate;\n            var unpatchedEvents = Zone[zoneSymbol$1('UNPATCHED_EVENTS')];\n            var passiveEvents = _global[zoneSymbol$1('PASSIVE_EVENTS')];\n            var makeAddListener = function (nativeListener, addSource, customScheduleFn, customCancelFn, returnTarget, prepend) {\n                if (returnTarget === void 0) { returnTarget = false; }\n                if (prepend === void 0) { prepend = false; }\n                return function () {\n                    var target = this || _global;\n                    var eventName = arguments[0];\n                    if (patchOptions && patchOptions.transferEventName) {\n                        eventName = patchOptions.transferEventName(eventName);\n                    }\n                    var delegate = arguments[1];\n                    if (!delegate) {\n                        return nativeListener.apply(this, arguments);\n                    }\n                    if (isNode && eventName === 'uncaughtException') {\n                        // don't patch uncaughtException of nodejs to prevent endless loop\n                        return nativeListener.apply(this, arguments);\n                    }\n                    // don't create the bind delegate function for handleEvent\n                    // case here to improve addEventListener performance\n                    // we will create the bind delegate when invoke\n                    var isHandleEvent = false;\n                    if (typeof delegate !== 'function') {\n                        if (!delegate.handleEvent) {\n                            return nativeListener.apply(this, arguments);\n                        }\n                        isHandleEvent = true;\n                    }\n                    if (validateHandler && !validateHandler(nativeListener, delegate, target, arguments)) {\n                        return;\n                    }\n                    var passive = passiveSupported && !!passiveEvents && passiveEvents.indexOf(eventName) !== -1;\n                    var options = buildEventListenerOptions(arguments[2], passive);\n                    if (unpatchedEvents) {\n                        // check unpatched list\n                        for (var i = 0; i < unpatchedEvents.length; i++) {\n                            if (eventName === unpatchedEvents[i]) {\n                                if (passive) {\n                                    return nativeListener.call(target, eventName, delegate, options);\n                                }\n                                else {\n                                    return nativeListener.apply(this, arguments);\n                                }\n                            }\n                        }\n                    }\n                    var capture = !options ? false : typeof options === 'boolean' ? true : options.capture;\n                    var once = options && typeof options === 'object' ? options.once : false;\n                    var zone = Zone.current;\n                    var symbolEventNames = zoneSymbolEventNames[eventName];\n                    if (!symbolEventNames) {\n                        prepareEventNames(eventName, eventNameToString);\n                        symbolEventNames = zoneSymbolEventNames[eventName];\n                    }\n                    var symbolEventName = symbolEventNames[capture ? TRUE_STR : FALSE_STR];\n                    var existingTasks = target[symbolEventName];\n                    var isExisting = false;\n                    if (existingTasks) {\n                        // already have task registered\n                        isExisting = true;\n                        if (checkDuplicate) {\n                            for (var i = 0; i < existingTasks.length; i++) {\n                                if (compare(existingTasks[i], delegate)) {\n                                    // same callback, same capture, same event name, just return\n                                    return;\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        existingTasks = target[symbolEventName] = [];\n                    }\n                    var source;\n                    var constructorName = target.constructor['name'];\n                    var targetSource = globalSources[constructorName];\n                    if (targetSource) {\n                        source = targetSource[eventName];\n                    }\n                    if (!source) {\n                        source = constructorName + addSource +\n                            (eventNameToString ? eventNameToString(eventName) : eventName);\n                    }\n                    // do not create a new object as task.data to pass those things\n                    // just use the global shared one\n                    taskData.options = options;\n                    if (once) {\n                        // if addEventListener with once options, we don't pass it to\n                        // native addEventListener, instead we keep the once setting\n                        // and handle ourselves.\n                        taskData.options.once = false;\n                    }\n                    taskData.target = target;\n                    taskData.capture = capture;\n                    taskData.eventName = eventName;\n                    taskData.isExisting = isExisting;\n                    var data = useGlobalCallback ? OPTIMIZED_ZONE_EVENT_TASK_DATA : undefined;\n                    // keep taskData into data to allow onScheduleEventTask to access the task information\n                    if (data) {\n                        data.taskData = taskData;\n                    }\n                    var task = zone.scheduleEventTask(source, delegate, data, customScheduleFn, customCancelFn);\n                    // should clear taskData.target to avoid memory leak\n                    // issue, https://github.com/angular/angular/issues/20442\n                    taskData.target = null;\n                    // need to clear up taskData because it is a global object\n                    if (data) {\n                        data.taskData = null;\n                    }\n                    // have to save those information to task in case\n                    // application may call task.zone.cancelTask() directly\n                    if (once) {\n                        options.once = true;\n                    }\n                    if (!(!passiveSupported && typeof task.options === 'boolean')) {\n                        // if not support passive, and we pass an option object\n                        // to addEventListener, we should save the options to task\n                        task.options = options;\n                    }\n                    task.target = target;\n                    task.capture = capture;\n                    task.eventName = eventName;\n                    if (isHandleEvent) {\n                        // save original delegate for compare to check duplicate\n                        task.originalDelegate = delegate;\n                    }\n                    if (!prepend) {\n                        existingTasks.push(task);\n                    }\n                    else {\n                        existingTasks.unshift(task);\n                    }\n                    if (returnTarget) {\n                        return target;\n                    }\n                };\n            };\n            proto[ADD_EVENT_LISTENER] = makeAddListener(nativeAddEventListener, ADD_EVENT_LISTENER_SOURCE, customSchedule, customCancel, returnTarget);\n            if (nativePrependEventListener) {\n                proto[PREPEND_EVENT_LISTENER] = makeAddListener(nativePrependEventListener, PREPEND_EVENT_LISTENER_SOURCE, customSchedulePrepend, customCancel, returnTarget, true);\n            }\n            proto[REMOVE_EVENT_LISTENER] = function () {\n                var target = this || _global;\n                var eventName = arguments[0];\n                if (patchOptions && patchOptions.transferEventName) {\n                    eventName = patchOptions.transferEventName(eventName);\n                }\n                var options = arguments[2];\n                var capture = !options ? false : typeof options === 'boolean' ? true : options.capture;\n                var delegate = arguments[1];\n                if (!delegate) {\n                    return nativeRemoveEventListener.apply(this, arguments);\n                }\n                if (validateHandler &&\n                    !validateHandler(nativeRemoveEventListener, delegate, target, arguments)) {\n                    return;\n                }\n                var symbolEventNames = zoneSymbolEventNames[eventName];\n                var symbolEventName;\n                if (symbolEventNames) {\n                    symbolEventName = symbolEventNames[capture ? TRUE_STR : FALSE_STR];\n                }\n                var existingTasks = symbolEventName && target[symbolEventName];\n                if (existingTasks) {\n                    for (var i = 0; i < existingTasks.length; i++) {\n                        var existingTask = existingTasks[i];\n                        if (compare(existingTask, delegate)) {\n                            existingTasks.splice(i, 1);\n                            // set isRemoved to data for faster invokeTask check\n                            existingTask.isRemoved = true;\n                            if (existingTasks.length === 0) {\n                                // all tasks for the eventName + capture have gone,\n                                // remove globalZoneAwareCallback and remove the task cache from target\n                                existingTask.allRemoved = true;\n                                target[symbolEventName] = null;\n                                // in the target, we have an event listener which is added by on_property\n                                // such as target.onclick = function() {}, so we need to clear this internal\n                                // property too if all delegates all removed\n                                if (typeof eventName === 'string') {\n                                    var onPropertySymbol = ZONE_SYMBOL_PREFIX + 'ON_PROPERTY' + eventName;\n                                    target[onPropertySymbol] = null;\n                                }\n                            }\n                            existingTask.zone.cancelTask(existingTask);\n                            if (returnTarget) {\n                                return target;\n                            }\n                            return;\n                        }\n                    }\n                }\n                // issue 930, didn't find the event name or callback\n                // from zone kept existingTasks, the callback maybe\n                // added outside of zone, we need to call native removeEventListener\n                // to try to remove it.\n                return nativeRemoveEventListener.apply(this, arguments);\n            };\n            proto[LISTENERS_EVENT_LISTENER] = function () {\n                var target = this || _global;\n                var eventName = arguments[0];\n                if (patchOptions && patchOptions.transferEventName) {\n                    eventName = patchOptions.transferEventName(eventName);\n                }\n                var listeners = [];\n                var tasks = findEventTasks(target, eventNameToString ? eventNameToString(eventName) : eventName);\n                for (var i = 0; i < tasks.length; i++) {\n                    var task = tasks[i];\n                    var delegate = task.originalDelegate ? task.originalDelegate : task.callback;\n                    listeners.push(delegate);\n                }\n                return listeners;\n            };\n            proto[REMOVE_ALL_LISTENERS_EVENT_LISTENER] = function () {\n                var target = this || _global;\n                var eventName = arguments[0];\n                if (!eventName) {\n                    var keys = Object.keys(target);\n                    for (var i = 0; i < keys.length; i++) {\n                        var prop = keys[i];\n                        var match = EVENT_NAME_SYMBOL_REGX.exec(prop);\n                        var evtName = match && match[1];\n                        // in nodejs EventEmitter, removeListener event is\n                        // used for monitoring the removeListener call,\n                        // so just keep removeListener eventListener until\n                        // all other eventListeners are removed\n                        if (evtName && evtName !== 'removeListener') {\n                            this[REMOVE_ALL_LISTENERS_EVENT_LISTENER].call(this, evtName);\n                        }\n                    }\n                    // remove removeListener listener finally\n                    this[REMOVE_ALL_LISTENERS_EVENT_LISTENER].call(this, 'removeListener');\n                }\n                else {\n                    if (patchOptions && patchOptions.transferEventName) {\n                        eventName = patchOptions.transferEventName(eventName);\n                    }\n                    var symbolEventNames = zoneSymbolEventNames[eventName];\n                    if (symbolEventNames) {\n                        var symbolEventName = symbolEventNames[FALSE_STR];\n                        var symbolCaptureEventName = symbolEventNames[TRUE_STR];\n                        var tasks = target[symbolEventName];\n                        var captureTasks = target[symbolCaptureEventName];\n                        if (tasks) {\n                            var removeTasks = tasks.slice();\n                            for (var i = 0; i < removeTasks.length; i++) {\n                                var task = removeTasks[i];\n                                var delegate = task.originalDelegate ? task.originalDelegate : task.callback;\n                                this[REMOVE_EVENT_LISTENER].call(this, eventName, delegate, task.options);\n                            }\n                        }\n                        if (captureTasks) {\n                            var removeTasks = captureTasks.slice();\n                            for (var i = 0; i < removeTasks.length; i++) {\n                                var task = removeTasks[i];\n                                var delegate = task.originalDelegate ? task.originalDelegate : task.callback;\n                                this[REMOVE_EVENT_LISTENER].call(this, eventName, delegate, task.options);\n                            }\n                        }\n                    }\n                }\n                if (returnTarget) {\n                    return this;\n                }\n            };\n            // for native toString patch\n            attachOriginToPatched(proto[ADD_EVENT_LISTENER], nativeAddEventListener);\n            attachOriginToPatched(proto[REMOVE_EVENT_LISTENER], nativeRemoveEventListener);\n            if (nativeRemoveAllListeners) {\n                attachOriginToPatched(proto[REMOVE_ALL_LISTENERS_EVENT_LISTENER], nativeRemoveAllListeners);\n            }\n            if (nativeListeners) {\n                attachOriginToPatched(proto[LISTENERS_EVENT_LISTENER], nativeListeners);\n            }\n            return true;\n        }\n        var results = [];\n        for (var i = 0; i < apis.length; i++) {\n            results[i] = patchEventTargetMethods(apis[i], patchOptions);\n        }\n        return results;\n    }\n    function findEventTasks(target, eventName) {\n        if (!eventName) {\n            var foundTasks = [];\n            for (var prop in target) {\n                var match = EVENT_NAME_SYMBOL_REGX.exec(prop);\n                var evtName = match && match[1];\n                if (evtName && (!eventName || evtName === eventName)) {\n                    var tasks = target[prop];\n                    if (tasks) {\n                        for (var i = 0; i < tasks.length; i++) {\n                            foundTasks.push(tasks[i]);\n                        }\n                    }\n                }\n            }\n            return foundTasks;\n        }\n        var symbolEventName = zoneSymbolEventNames[eventName];\n        if (!symbolEventName) {\n            prepareEventNames(eventName);\n            symbolEventName = zoneSymbolEventNames[eventName];\n        }\n        var captureFalseTasks = target[symbolEventName[FALSE_STR]];\n        var captureTrueTasks = target[symbolEventName[TRUE_STR]];\n        if (!captureFalseTasks) {\n            return captureTrueTasks ? captureTrueTasks.slice() : [];\n        }\n        else {\n            return captureTrueTasks ? captureFalseTasks.concat(captureTrueTasks) :\n                captureFalseTasks.slice();\n        }\n    }\n    function patchEventPrototype(global, api) {\n        var Event = global['Event'];\n        if (Event && Event.prototype) {\n            api.patchMethod(Event.prototype, 'stopImmediatePropagation', function (delegate) { return function (self, args) {\n                self[IMMEDIATE_PROPAGATION_SYMBOL] = true;\n                // we need to call the native stopImmediatePropagation\n                // in case in some hybrid application, some part of\n                // application will be controlled by zone, some are not\n                delegate && delegate.apply(self, args);\n            }; });\n        }\n    }\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    function patchCallbacks(api, target, targetName, method, callbacks) {\n        var symbol = Zone.__symbol__(method);\n        if (target[symbol]) {\n            return;\n        }\n        var nativeDelegate = target[symbol] = target[method];\n        target[method] = function (name, opts, options) {\n            if (opts && opts.prototype) {\n                callbacks.forEach(function (callback) {\n                    var source = \"\".concat(targetName, \".\").concat(method, \"::\") + callback;\n                    var prototype = opts.prototype;\n                    // Note: the `patchCallbacks` is used for patching the `document.registerElement` and\n                    // `customElements.define`. We explicitly wrap the patching code into try-catch since\n                    // callbacks may be already patched by other web components frameworks (e.g. LWC), and they\n                    // make those properties non-writable. This means that patching callback will throw an error\n                    // `cannot assign to read-only property`. See this code as an example:\n                    // https://github.com/salesforce/lwc/blob/master/packages/@lwc/engine-core/src/framework/base-bridge-element.ts#L180-L186\n                    // We don't want to stop the application rendering if we couldn't patch some\n                    // callback, e.g. `attributeChangedCallback`.\n                    try {\n                        if (prototype.hasOwnProperty(callback)) {\n                            var descriptor = api.ObjectGetOwnPropertyDescriptor(prototype, callback);\n                            if (descriptor && descriptor.value) {\n                                descriptor.value = api.wrapWithCurrentZone(descriptor.value, source);\n                                api._redefineProperty(opts.prototype, callback, descriptor);\n                            }\n                            else if (prototype[callback]) {\n                                prototype[callback] = api.wrapWithCurrentZone(prototype[callback], source);\n                            }\n                        }\n                        else if (prototype[callback]) {\n                            prototype[callback] = api.wrapWithCurrentZone(prototype[callback], source);\n                        }\n                    }\n                    catch (_a) {\n                        // Note: we leave the catch block empty since there's no way to handle the error related\n                        // to non-writable property.\n                    }\n                });\n            }\n            return nativeDelegate.call(target, name, opts, options);\n        };\n        api.attachOriginToPatched(target[method], nativeDelegate);\n    }\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    function filterProperties(target, onProperties, ignoreProperties) {\n        if (!ignoreProperties || ignoreProperties.length === 0) {\n            return onProperties;\n        }\n        var tip = ignoreProperties.filter(function (ip) { return ip.target === target; });\n        if (!tip || tip.length === 0) {\n            return onProperties;\n        }\n        var targetIgnoreProperties = tip[0].ignoreProperties;\n        return onProperties.filter(function (op) { return targetIgnoreProperties.indexOf(op) === -1; });\n    }\n    function patchFilteredProperties(target, onProperties, ignoreProperties, prototype) {\n        // check whether target is available, sometimes target will be undefined\n        // because different browser or some 3rd party plugin.\n        if (!target) {\n            return;\n        }\n        var filteredProperties = filterProperties(target, onProperties, ignoreProperties);\n        patchOnProperties(target, filteredProperties, prototype);\n    }\n    /**\n     * Get all event name properties which the event name startsWith `on`\n     * from the target object itself, inherited properties are not considered.\n     */\n    function getOnEventNames(target) {\n        return Object.getOwnPropertyNames(target)\n            .filter(function (name) { return name.startsWith('on') && name.length > 2; })\n            .map(function (name) { return name.substring(2); });\n    }\n    function propertyDescriptorPatch(api, _global) {\n        if (isNode && !isMix) {\n            return;\n        }\n        if (Zone[api.symbol('patchEvents')]) {\n            // events are already been patched by legacy patch.\n            return;\n        }\n        var ignoreProperties = _global['__Zone_ignore_on_properties'];\n        // for browsers that we can patch the descriptor:  Chrome & Firefox\n        var patchTargets = [];\n        if (isBrowser) {\n            var internalWindow_1 = window;\n            patchTargets = patchTargets.concat([\n                'Document', 'SVGElement', 'Element', 'HTMLElement', 'HTMLBodyElement', 'HTMLMediaElement',\n                'HTMLFrameSetElement', 'HTMLFrameElement', 'HTMLIFrameElement', 'HTMLMarqueeElement', 'Worker'\n            ]);\n            var ignoreErrorProperties = isIE() ? [{ target: internalWindow_1, ignoreProperties: ['error'] }] : [];\n            // in IE/Edge, onProp not exist in window object, but in WindowPrototype\n            // so we need to pass WindowPrototype to check onProp exist or not\n            patchFilteredProperties(internalWindow_1, getOnEventNames(internalWindow_1), ignoreProperties ? ignoreProperties.concat(ignoreErrorProperties) : ignoreProperties, ObjectGetPrototypeOf(internalWindow_1));\n        }\n        patchTargets = patchTargets.concat([\n            'XMLHttpRequest', 'XMLHttpRequestEventTarget', 'IDBIndex', 'IDBRequest', 'IDBOpenDBRequest',\n            'IDBDatabase', 'IDBTransaction', 'IDBCursor', 'WebSocket'\n        ]);\n        for (var i = 0; i < patchTargets.length; i++) {\n            var target = _global[patchTargets[i]];\n            target && target.prototype &&\n                patchFilteredProperties(target.prototype, getOnEventNames(target.prototype), ignoreProperties);\n        }\n    }\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    Zone.__load_patch('util', function (global, Zone, api) {\n        // Collect native event names by looking at properties\n        // on the global namespace, e.g. 'onclick'.\n        var eventNames = getOnEventNames(global);\n        api.patchOnProperties = patchOnProperties;\n        api.patchMethod = patchMethod;\n        api.bindArguments = bindArguments;\n        api.patchMacroTask = patchMacroTask;\n        // In earlier version of zone.js (<0.9.0), we use env name `__zone_symbol__BLACK_LISTED_EVENTS` to\n        // define which events will not be patched by `Zone.js`.\n        // In newer version (>=0.9.0), we change the env name to `__zone_symbol__UNPATCHED_EVENTS` to keep\n        // the name consistent with angular repo.\n        // The  `__zone_symbol__BLACK_LISTED_EVENTS` is deprecated, but it is still be supported for\n        // backwards compatibility.\n        var SYMBOL_BLACK_LISTED_EVENTS = Zone.__symbol__('BLACK_LISTED_EVENTS');\n        var SYMBOL_UNPATCHED_EVENTS = Zone.__symbol__('UNPATCHED_EVENTS');\n        if (global[SYMBOL_UNPATCHED_EVENTS]) {\n            global[SYMBOL_BLACK_LISTED_EVENTS] = global[SYMBOL_UNPATCHED_EVENTS];\n        }\n        if (global[SYMBOL_BLACK_LISTED_EVENTS]) {\n            Zone[SYMBOL_BLACK_LISTED_EVENTS] = Zone[SYMBOL_UNPATCHED_EVENTS] =\n                global[SYMBOL_BLACK_LISTED_EVENTS];\n        }\n        api.patchEventPrototype = patchEventPrototype;\n        api.patchEventTarget = patchEventTarget;\n        api.isIEOrEdge = isIEOrEdge;\n        api.ObjectDefineProperty = ObjectDefineProperty;\n        api.ObjectGetOwnPropertyDescriptor = ObjectGetOwnPropertyDescriptor;\n        api.ObjectCreate = ObjectCreate;\n        api.ArraySlice = ArraySlice;\n        api.patchClass = patchClass;\n        api.wrapWithCurrentZone = wrapWithCurrentZone;\n        api.filterProperties = filterProperties;\n        api.attachOriginToPatched = attachOriginToPatched;\n        api._redefineProperty = Object.defineProperty;\n        api.patchCallbacks = patchCallbacks;\n        api.getGlobalObjects = function () { return ({\n            globalSources: globalSources,\n            zoneSymbolEventNames: zoneSymbolEventNames,\n            eventNames: eventNames,\n            isBrowser: isBrowser,\n            isMix: isMix,\n            isNode: isNode,\n            TRUE_STR: TRUE_STR,\n            FALSE_STR: FALSE_STR,\n            ZONE_SYMBOL_PREFIX: ZONE_SYMBOL_PREFIX,\n            ADD_EVENT_LISTENER_STR: ADD_EVENT_LISTENER_STR,\n            REMOVE_EVENT_LISTENER_STR: REMOVE_EVENT_LISTENER_STR\n        }); };\n    });\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /*\n     * This is necessary for Chrome and Chrome mobile, to enable\n     * things like redefining `createdCallback` on an element.\n     */\n    var zoneSymbol;\n    var _defineProperty;\n    var _getOwnPropertyDescriptor;\n    var _create;\n    var unconfigurablesKey;\n    function propertyPatch() {\n        zoneSymbol = Zone.__symbol__;\n        _defineProperty = Object[zoneSymbol('defineProperty')] = Object.defineProperty;\n        _getOwnPropertyDescriptor = Object[zoneSymbol('getOwnPropertyDescriptor')] =\n            Object.getOwnPropertyDescriptor;\n        _create = Object.create;\n        unconfigurablesKey = zoneSymbol('unconfigurables');\n        Object.defineProperty = function (obj, prop, desc) {\n            if (isUnconfigurable(obj, prop)) {\n                throw new TypeError('Cannot assign to read only property \\'' + prop + '\\' of ' + obj);\n            }\n            var originalConfigurableFlag = desc.configurable;\n            if (prop !== 'prototype') {\n                desc = rewriteDescriptor(obj, prop, desc);\n            }\n            return _tryDefineProperty(obj, prop, desc, originalConfigurableFlag);\n        };\n        Object.defineProperties = function (obj, props) {\n            Object.keys(props).forEach(function (prop) {\n                Object.defineProperty(obj, prop, props[prop]);\n            });\n            for (var _i = 0, _b = Object.getOwnPropertySymbols(props); _i < _b.length; _i++) {\n                var sym = _b[_i];\n                var desc = Object.getOwnPropertyDescriptor(props, sym);\n                // Since `Object.getOwnPropertySymbols` returns *all* symbols,\n                // including non-enumerable ones, retrieve property descriptor and check\n                // enumerability there. Proceed with the rewrite only when a property is\n                // enumerable to make the logic consistent with the way regular\n                // properties are retrieved (via `Object.keys`, which respects\n                // `enumerable: false` flag). More information:\n                // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Enumerability_and_ownership_of_properties#retrieval\n                if (desc === null || desc === void 0 ? void 0 : desc.enumerable) {\n                    Object.defineProperty(obj, sym, props[sym]);\n                }\n            }\n            return obj;\n        };\n        Object.create = function (proto, propertiesObject) {\n            if (typeof propertiesObject === 'object' && !Object.isFrozen(propertiesObject)) {\n                Object.keys(propertiesObject).forEach(function (prop) {\n                    propertiesObject[prop] = rewriteDescriptor(proto, prop, propertiesObject[prop]);\n                });\n            }\n            return _create(proto, propertiesObject);\n        };\n        Object.getOwnPropertyDescriptor = function (obj, prop) {\n            var desc = _getOwnPropertyDescriptor(obj, prop);\n            if (desc && isUnconfigurable(obj, prop)) {\n                desc.configurable = false;\n            }\n            return desc;\n        };\n    }\n    function _redefineProperty(obj, prop, desc) {\n        var originalConfigurableFlag = desc.configurable;\n        desc = rewriteDescriptor(obj, prop, desc);\n        return _tryDefineProperty(obj, prop, desc, originalConfigurableFlag);\n    }\n    function isUnconfigurable(obj, prop) {\n        return obj && obj[unconfigurablesKey] && obj[unconfigurablesKey][prop];\n    }\n    function rewriteDescriptor(obj, prop, desc) {\n        // issue-927, if the desc is frozen, don't try to change the desc\n        if (!Object.isFrozen(desc)) {\n            desc.configurable = true;\n        }\n        if (!desc.configurable) {\n            // issue-927, if the obj is frozen, don't try to set the desc to obj\n            if (!obj[unconfigurablesKey] && !Object.isFrozen(obj)) {\n                _defineProperty(obj, unconfigurablesKey, { writable: true, value: {} });\n            }\n            if (obj[unconfigurablesKey]) {\n                obj[unconfigurablesKey][prop] = true;\n            }\n        }\n        return desc;\n    }\n    function _tryDefineProperty(obj, prop, desc, originalConfigurableFlag) {\n        try {\n            return _defineProperty(obj, prop, desc);\n        }\n        catch (error) {\n            if (desc.configurable) {\n                // In case of errors, when the configurable flag was likely set by rewriteDescriptor(),\n                // let's retry with the original flag value\n                if (typeof originalConfigurableFlag == 'undefined') {\n                    delete desc.configurable;\n                }\n                else {\n                    desc.configurable = originalConfigurableFlag;\n                }\n                try {\n                    return _defineProperty(obj, prop, desc);\n                }\n                catch (error) {\n                    var swallowError = false;\n                    if (prop === 'createdCallback' || prop === 'attachedCallback' ||\n                        prop === 'detachedCallback' || prop === 'attributeChangedCallback') {\n                        // We only swallow the error in registerElement patch\n                        // this is the work around since some applications\n                        // fail if we throw the error\n                        swallowError = true;\n                    }\n                    if (!swallowError) {\n                        throw error;\n                    }\n                    // TODO: @JiaLiPassion, Some application such as `registerElement` patch\n                    // still need to swallow the error, in the future after these applications\n                    // are updated, the following logic can be removed.\n                    var descJson = null;\n                    try {\n                        descJson = JSON.stringify(desc);\n                    }\n                    catch (error) {\n                        descJson = desc.toString();\n                    }\n                    console.log(\"Attempting to configure '\".concat(prop, \"' with descriptor '\").concat(descJson, \"' on object '\").concat(obj, \"' and got error, giving up: \").concat(error));\n                }\n            }\n            else {\n                throw error;\n            }\n        }\n    }\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    function eventTargetLegacyPatch(_global, api) {\n        var _b = api.getGlobalObjects(), eventNames = _b.eventNames, globalSources = _b.globalSources, zoneSymbolEventNames = _b.zoneSymbolEventNames, TRUE_STR = _b.TRUE_STR, FALSE_STR = _b.FALSE_STR, ZONE_SYMBOL_PREFIX = _b.ZONE_SYMBOL_PREFIX;\n        var WTF_ISSUE_555 = 'Anchor,Area,Audio,BR,Base,BaseFont,Body,Button,Canvas,Content,DList,Directory,Div,Embed,FieldSet,Font,Form,Frame,FrameSet,HR,Head,Heading,Html,IFrame,Image,Input,Keygen,LI,Label,Legend,Link,Map,Marquee,Media,Menu,Meta,Meter,Mod,OList,Object,OptGroup,Option,Output,Paragraph,Pre,Progress,Quote,Script,Select,Source,Span,Style,TableCaption,TableCell,TableCol,Table,TableRow,TableSection,TextArea,Title,Track,UList,Unknown,Video';\n        var NO_EVENT_TARGET = 'ApplicationCache,EventSource,FileReader,InputMethodContext,MediaController,MessagePort,Node,Performance,SVGElementInstance,SharedWorker,TextTrack,TextTrackCue,TextTrackList,WebKitNamedFlow,Window,Worker,WorkerGlobalScope,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload,IDBRequest,IDBOpenDBRequest,IDBDatabase,IDBTransaction,IDBCursor,DBIndex,WebSocket'\n            .split(',');\n        var EVENT_TARGET = 'EventTarget';\n        var apis = [];\n        var isWtf = _global['wtf'];\n        var WTF_ISSUE_555_ARRAY = WTF_ISSUE_555.split(',');\n        if (isWtf) {\n            // Workaround for: https://github.com/google/tracing-framework/issues/555\n            apis = WTF_ISSUE_555_ARRAY.map(function (v) { return 'HTML' + v + 'Element'; }).concat(NO_EVENT_TARGET);\n        }\n        else if (_global[EVENT_TARGET]) {\n            apis.push(EVENT_TARGET);\n        }\n        else {\n            // Note: EventTarget is not available in all browsers,\n            // if it's not available, we instead patch the APIs in the IDL that inherit from EventTarget\n            apis = NO_EVENT_TARGET;\n        }\n        var isDisableIECheck = _global['__Zone_disable_IE_check'] || false;\n        var isEnableCrossContextCheck = _global['__Zone_enable_cross_context_check'] || false;\n        var ieOrEdge = api.isIEOrEdge();\n        var ADD_EVENT_LISTENER_SOURCE = '.addEventListener:';\n        var FUNCTION_WRAPPER = '[object FunctionWrapper]';\n        var BROWSER_TOOLS = 'function __BROWSERTOOLS_CONSOLE_SAFEFUNC() { [native code] }';\n        var pointerEventsMap = {\n            'MSPointerCancel': 'pointercancel',\n            'MSPointerDown': 'pointerdown',\n            'MSPointerEnter': 'pointerenter',\n            'MSPointerHover': 'pointerhover',\n            'MSPointerLeave': 'pointerleave',\n            'MSPointerMove': 'pointermove',\n            'MSPointerOut': 'pointerout',\n            'MSPointerOver': 'pointerover',\n            'MSPointerUp': 'pointerup'\n        };\n        //  predefine all __zone_symbol__ + eventName + true/false string\n        for (var i = 0; i < eventNames.length; i++) {\n            var eventName = eventNames[i];\n            var falseEventName = eventName + FALSE_STR;\n            var trueEventName = eventName + TRUE_STR;\n            var symbol = ZONE_SYMBOL_PREFIX + falseEventName;\n            var symbolCapture = ZONE_SYMBOL_PREFIX + trueEventName;\n            zoneSymbolEventNames[eventName] = {};\n            zoneSymbolEventNames[eventName][FALSE_STR] = symbol;\n            zoneSymbolEventNames[eventName][TRUE_STR] = symbolCapture;\n        }\n        //  predefine all task.source string\n        for (var i = 0; i < WTF_ISSUE_555_ARRAY.length; i++) {\n            var target = WTF_ISSUE_555_ARRAY[i];\n            var targets = globalSources[target] = {};\n            for (var j = 0; j < eventNames.length; j++) {\n                var eventName = eventNames[j];\n                targets[eventName] = target + ADD_EVENT_LISTENER_SOURCE + eventName;\n            }\n        }\n        var checkIEAndCrossContext = function (nativeDelegate, delegate, target, args) {\n            if (!isDisableIECheck && ieOrEdge) {\n                if (isEnableCrossContextCheck) {\n                    try {\n                        var testString = delegate.toString();\n                        if ((testString === FUNCTION_WRAPPER || testString == BROWSER_TOOLS)) {\n                            nativeDelegate.apply(target, args);\n                            return false;\n                        }\n                    }\n                    catch (error) {\n                        nativeDelegate.apply(target, args);\n                        return false;\n                    }\n                }\n                else {\n                    var testString = delegate.toString();\n                    if ((testString === FUNCTION_WRAPPER || testString == BROWSER_TOOLS)) {\n                        nativeDelegate.apply(target, args);\n                        return false;\n                    }\n                }\n            }\n            else if (isEnableCrossContextCheck) {\n                try {\n                    delegate.toString();\n                }\n                catch (error) {\n                    nativeDelegate.apply(target, args);\n                    return false;\n                }\n            }\n            return true;\n        };\n        var apiTypes = [];\n        for (var i = 0; i < apis.length; i++) {\n            var type = _global[apis[i]];\n            apiTypes.push(type && type.prototype);\n        }\n        // vh is validateHandler to check event handler\n        // is valid or not(for security check)\n        api.patchEventTarget(_global, api, apiTypes, {\n            vh: checkIEAndCrossContext,\n            transferEventName: function (eventName) {\n                var pointerEventName = pointerEventsMap[eventName];\n                return pointerEventName || eventName;\n            }\n        });\n        Zone[api.symbol('patchEventTarget')] = !!_global[EVENT_TARGET];\n        return true;\n    }\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    // we have to patch the instance since the proto is non-configurable\n    function apply(api, _global) {\n        var _b = api.getGlobalObjects(), ADD_EVENT_LISTENER_STR = _b.ADD_EVENT_LISTENER_STR, REMOVE_EVENT_LISTENER_STR = _b.REMOVE_EVENT_LISTENER_STR;\n        var WS = _global.WebSocket;\n        // On Safari window.EventTarget doesn't exist so need to patch WS add/removeEventListener\n        // On older Chrome, no need since EventTarget was already patched\n        if (!_global.EventTarget) {\n            api.patchEventTarget(_global, api, [WS.prototype]);\n        }\n        _global.WebSocket = function (x, y) {\n            var socket = arguments.length > 1 ? new WS(x, y) : new WS(x);\n            var proxySocket;\n            var proxySocketProto;\n            // Safari 7.0 has non-configurable own 'onmessage' and friends properties on the socket instance\n            var onmessageDesc = api.ObjectGetOwnPropertyDescriptor(socket, 'onmessage');\n            if (onmessageDesc && onmessageDesc.configurable === false) {\n                proxySocket = api.ObjectCreate(socket);\n                // socket have own property descriptor 'onopen', 'onmessage', 'onclose', 'onerror'\n                // but proxySocket not, so we will keep socket as prototype and pass it to\n                // patchOnProperties method\n                proxySocketProto = socket;\n                [ADD_EVENT_LISTENER_STR, REMOVE_EVENT_LISTENER_STR, 'send', 'close'].forEach(function (propName) {\n                    proxySocket[propName] = function () {\n                        var args = api.ArraySlice.call(arguments);\n                        if (propName === ADD_EVENT_LISTENER_STR || propName === REMOVE_EVENT_LISTENER_STR) {\n                            var eventName = args.length > 0 ? args[0] : undefined;\n                            if (eventName) {\n                                var propertySymbol = Zone.__symbol__('ON_PROPERTY' + eventName);\n                                socket[propertySymbol] = proxySocket[propertySymbol];\n                            }\n                        }\n                        return socket[propName].apply(socket, args);\n                    };\n                });\n            }\n            else {\n                // we can patch the real socket\n                proxySocket = socket;\n            }\n            api.patchOnProperties(proxySocket, ['close', 'error', 'message', 'open'], proxySocketProto);\n            return proxySocket;\n        };\n        var globalWebSocket = _global['WebSocket'];\n        for (var prop in WS) {\n            globalWebSocket[prop] = WS[prop];\n        }\n    }\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    function propertyDescriptorLegacyPatch(api, _global) {\n        var _b = api.getGlobalObjects(), isNode = _b.isNode, isMix = _b.isMix;\n        if (isNode && !isMix) {\n            return;\n        }\n        if (!canPatchViaPropertyDescriptor(api, _global)) {\n            var supportsWebSocket = typeof WebSocket !== 'undefined';\n            // Safari, Android browsers (Jelly Bean)\n            patchViaCapturingAllTheEvents(api);\n            api.patchClass('XMLHttpRequest');\n            if (supportsWebSocket) {\n                apply(api, _global);\n            }\n            Zone[api.symbol('patchEvents')] = true;\n        }\n    }\n    function canPatchViaPropertyDescriptor(api, _global) {\n        var _b = api.getGlobalObjects(), isBrowser = _b.isBrowser, isMix = _b.isMix;\n        if ((isBrowser || isMix) &&\n            !api.ObjectGetOwnPropertyDescriptor(HTMLElement.prototype, 'onclick') &&\n            typeof Element !== 'undefined') {\n            // WebKit https://bugs.webkit.org/show_bug.cgi?id=134364\n            // IDL interface attributes are not configurable\n            var desc = api.ObjectGetOwnPropertyDescriptor(Element.prototype, 'onclick');\n            if (desc && !desc.configurable)\n                return false;\n            // try to use onclick to detect whether we can patch via propertyDescriptor\n            // because XMLHttpRequest is not available in service worker\n            if (desc) {\n                api.ObjectDefineProperty(Element.prototype, 'onclick', {\n                    enumerable: true,\n                    configurable: true,\n                    get: function () {\n                        return true;\n                    }\n                });\n                var div = document.createElement('div');\n                var result = !!div.onclick;\n                api.ObjectDefineProperty(Element.prototype, 'onclick', desc);\n                return result;\n            }\n        }\n        var XMLHttpRequest = _global['XMLHttpRequest'];\n        if (!XMLHttpRequest) {\n            // XMLHttpRequest is not available in service worker\n            return false;\n        }\n        var ON_READY_STATE_CHANGE = 'onreadystatechange';\n        var XMLHttpRequestPrototype = XMLHttpRequest.prototype;\n        var xhrDesc = api.ObjectGetOwnPropertyDescriptor(XMLHttpRequestPrototype, ON_READY_STATE_CHANGE);\n        // add enumerable and configurable here because in opera\n        // by default XMLHttpRequest.prototype.onreadystatechange is undefined\n        // without adding enumerable and configurable will cause onreadystatechange\n        // non-configurable\n        // and if XMLHttpRequest.prototype.onreadystatechange is undefined,\n        // we should set a real desc instead a fake one\n        if (xhrDesc) {\n            api.ObjectDefineProperty(XMLHttpRequestPrototype, ON_READY_STATE_CHANGE, {\n                enumerable: true,\n                configurable: true,\n                get: function () {\n                    return true;\n                }\n            });\n            var req = new XMLHttpRequest();\n            var result = !!req.onreadystatechange;\n            // restore original desc\n            api.ObjectDefineProperty(XMLHttpRequestPrototype, ON_READY_STATE_CHANGE, xhrDesc || {});\n            return result;\n        }\n        else {\n            var SYMBOL_FAKE_ONREADYSTATECHANGE_1 = api.symbol('fake');\n            api.ObjectDefineProperty(XMLHttpRequestPrototype, ON_READY_STATE_CHANGE, {\n                enumerable: true,\n                configurable: true,\n                get: function () {\n                    return this[SYMBOL_FAKE_ONREADYSTATECHANGE_1];\n                },\n                set: function (value) {\n                    this[SYMBOL_FAKE_ONREADYSTATECHANGE_1] = value;\n                }\n            });\n            var req = new XMLHttpRequest();\n            var detectFunc = function () { };\n            req.onreadystatechange = detectFunc;\n            var result = req[SYMBOL_FAKE_ONREADYSTATECHANGE_1] === detectFunc;\n            req.onreadystatechange = null;\n            return result;\n        }\n    }\n    var globalEventHandlersEventNames = [\n        'abort',\n        'animationcancel',\n        'animationend',\n        'animationiteration',\n        'auxclick',\n        'beforeinput',\n        'blur',\n        'cancel',\n        'canplay',\n        'canplaythrough',\n        'change',\n        'compositionstart',\n        'compositionupdate',\n        'compositionend',\n        'cuechange',\n        'click',\n        'close',\n        'contextmenu',\n        'curechange',\n        'dblclick',\n        'drag',\n        'dragend',\n        'dragenter',\n        'dragexit',\n        'dragleave',\n        'dragover',\n        'drop',\n        'durationchange',\n        'emptied',\n        'ended',\n        'error',\n        'focus',\n        'focusin',\n        'focusout',\n        'gotpointercapture',\n        'input',\n        'invalid',\n        'keydown',\n        'keypress',\n        'keyup',\n        'load',\n        'loadstart',\n        'loadeddata',\n        'loadedmetadata',\n        'lostpointercapture',\n        'mousedown',\n        'mouseenter',\n        'mouseleave',\n        'mousemove',\n        'mouseout',\n        'mouseover',\n        'mouseup',\n        'mousewheel',\n        'orientationchange',\n        'pause',\n        'play',\n        'playing',\n        'pointercancel',\n        'pointerdown',\n        'pointerenter',\n        'pointerleave',\n        'pointerlockchange',\n        'mozpointerlockchange',\n        'webkitpointerlockerchange',\n        'pointerlockerror',\n        'mozpointerlockerror',\n        'webkitpointerlockerror',\n        'pointermove',\n        'pointout',\n        'pointerover',\n        'pointerup',\n        'progress',\n        'ratechange',\n        'reset',\n        'resize',\n        'scroll',\n        'seeked',\n        'seeking',\n        'select',\n        'selectionchange',\n        'selectstart',\n        'show',\n        'sort',\n        'stalled',\n        'submit',\n        'suspend',\n        'timeupdate',\n        'volumechange',\n        'touchcancel',\n        'touchmove',\n        'touchstart',\n        'touchend',\n        'transitioncancel',\n        'transitionend',\n        'waiting',\n        'wheel'\n    ];\n    var documentEventNames = [\n        'afterscriptexecute', 'beforescriptexecute', 'DOMContentLoaded', 'freeze', 'fullscreenchange',\n        'mozfullscreenchange', 'webkitfullscreenchange', 'msfullscreenchange', 'fullscreenerror',\n        'mozfullscreenerror', 'webkitfullscreenerror', 'msfullscreenerror', 'readystatechange',\n        'visibilitychange', 'resume'\n    ];\n    var windowEventNames = [\n        'absolutedeviceorientation',\n        'afterinput',\n        'afterprint',\n        'appinstalled',\n        'beforeinstallprompt',\n        'beforeprint',\n        'beforeunload',\n        'devicelight',\n        'devicemotion',\n        'deviceorientation',\n        'deviceorientationabsolute',\n        'deviceproximity',\n        'hashchange',\n        'languagechange',\n        'message',\n        'mozbeforepaint',\n        'offline',\n        'online',\n        'paint',\n        'pageshow',\n        'pagehide',\n        'popstate',\n        'rejectionhandled',\n        'storage',\n        'unhandledrejection',\n        'unload',\n        'userproximity',\n        'vrdisplayconnected',\n        'vrdisplaydisconnected',\n        'vrdisplaypresentchange'\n    ];\n    var htmlElementEventNames = [\n        'beforecopy', 'beforecut', 'beforepaste', 'copy', 'cut', 'paste', 'dragstart', 'loadend',\n        'animationstart', 'search', 'transitionrun', 'transitionstart', 'webkitanimationend',\n        'webkitanimationiteration', 'webkitanimationstart', 'webkittransitionend'\n    ];\n    var ieElementEventNames = [\n        'activate',\n        'afterupdate',\n        'ariarequest',\n        'beforeactivate',\n        'beforedeactivate',\n        'beforeeditfocus',\n        'beforeupdate',\n        'cellchange',\n        'controlselect',\n        'dataavailable',\n        'datasetchanged',\n        'datasetcomplete',\n        'errorupdate',\n        'filterchange',\n        'layoutcomplete',\n        'losecapture',\n        'move',\n        'moveend',\n        'movestart',\n        'propertychange',\n        'resizeend',\n        'resizestart',\n        'rowenter',\n        'rowexit',\n        'rowsdelete',\n        'rowsinserted',\n        'command',\n        'compassneedscalibration',\n        'deactivate',\n        'help',\n        'mscontentzoom',\n        'msmanipulationstatechanged',\n        'msgesturechange',\n        'msgesturedoubletap',\n        'msgestureend',\n        'msgesturehold',\n        'msgesturestart',\n        'msgesturetap',\n        'msgotpointercapture',\n        'msinertiastart',\n        'mslostpointercapture',\n        'mspointercancel',\n        'mspointerdown',\n        'mspointerenter',\n        'mspointerhover',\n        'mspointerleave',\n        'mspointermove',\n        'mspointerout',\n        'mspointerover',\n        'mspointerup',\n        'pointerout',\n        'mssitemodejumplistitemremoved',\n        'msthumbnailclick',\n        'stop',\n        'storagecommit'\n    ];\n    var webglEventNames = ['webglcontextrestored', 'webglcontextlost', 'webglcontextcreationerror'];\n    var formEventNames = ['autocomplete', 'autocompleteerror'];\n    var detailEventNames = ['toggle'];\n    var eventNames = __spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([], globalEventHandlersEventNames, true), webglEventNames, true), formEventNames, true), detailEventNames, true), documentEventNames, true), windowEventNames, true), htmlElementEventNames, true), ieElementEventNames, true);\n    // Whenever any eventListener fires, we check the eventListener target and all parents\n    // for `onwhatever` properties and replace them with zone-bound functions\n    // - Chrome (for now)\n    function patchViaCapturingAllTheEvents(api) {\n        var unboundKey = api.symbol('unbound');\n        var _loop_5 = function (i) {\n            var property = eventNames[i];\n            var onproperty = 'on' + property;\n            self.addEventListener(property, function (event) {\n                var elt = event.target, bound, source;\n                if (elt) {\n                    source = elt.constructor['name'] + '.' + onproperty;\n                }\n                else {\n                    source = 'unknown.' + onproperty;\n                }\n                while (elt) {\n                    if (elt[onproperty] && !elt[onproperty][unboundKey]) {\n                        bound = api.wrapWithCurrentZone(elt[onproperty], source);\n                        bound[unboundKey] = elt[onproperty];\n                        elt[onproperty] = bound;\n                    }\n                    elt = elt.parentElement;\n                }\n            }, true);\n        };\n        for (var i = 0; i < eventNames.length; i++) {\n            _loop_5(i);\n        }\n    }\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    function registerElementPatch(_global, api) {\n        var _b = api.getGlobalObjects(), isBrowser = _b.isBrowser, isMix = _b.isMix;\n        if ((!isBrowser && !isMix) || !('registerElement' in _global.document)) {\n            return;\n        }\n        var callbacks = ['createdCallback', 'attachedCallback', 'detachedCallback', 'attributeChangedCallback'];\n        api.patchCallbacks(api, document, 'Document', 'registerElement', callbacks);\n    }\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    (function (_global) {\n        var symbolPrefix = _global['__Zone_symbol_prefix'] || '__zone_symbol__';\n        function __symbol__(name) {\n            return symbolPrefix + name;\n        }\n        _global[__symbol__('legacyPatch')] = function () {\n            var Zone = _global['Zone'];\n            Zone.__load_patch('defineProperty', function (global, Zone, api) {\n                api._redefineProperty = _redefineProperty;\n                propertyPatch();\n            });\n            Zone.__load_patch('registerElement', function (global, Zone, api) {\n                registerElementPatch(global, api);\n            });\n            Zone.__load_patch('EventTargetLegacy', function (global, Zone, api) {\n                eventTargetLegacyPatch(global, api);\n                propertyDescriptorLegacyPatch(api, global);\n            });\n        };\n    })(typeof window !== 'undefined' ?\n        window :\n        typeof __webpack_require__.g !== 'undefined' ? __webpack_require__.g : typeof self !== 'undefined' ? self : {});\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var taskSymbol = zoneSymbol$1('zoneTask');\n    function patchTimer(window, setName, cancelName, nameSuffix) {\n        var setNative = null;\n        var clearNative = null;\n        setName += nameSuffix;\n        cancelName += nameSuffix;\n        var tasksByHandleId = {};\n        function scheduleTask(task) {\n            var data = task.data;\n            data.args[0] = function () {\n                return task.invoke.apply(this, arguments);\n            };\n            data.handleId = setNative.apply(window, data.args);\n            return task;\n        }\n        function clearTask(task) {\n            return clearNative.call(window, task.data.handleId);\n        }\n        setNative =\n            patchMethod(window, setName, function (delegate) { return function (self, args) {\n                if (typeof args[0] === 'function') {\n                    var options_1 = {\n                        isPeriodic: nameSuffix === 'Interval',\n                        delay: (nameSuffix === 'Timeout' || nameSuffix === 'Interval') ? args[1] || 0 :\n                            undefined,\n                        args: args\n                    };\n                    var callback_1 = args[0];\n                    args[0] = function timer() {\n                        try {\n                            return callback_1.apply(this, arguments);\n                        }\n                        finally {\n                            // issue-934, task will be cancelled\n                            // even it is a periodic task such as\n                            // setInterval\n                            // https://github.com/angular/angular/issues/40387\n                            // Cleanup tasksByHandleId should be handled before scheduleTask\n                            // Since some zoneSpec may intercept and doesn't trigger\n                            // scheduleFn(scheduleTask) provided here.\n                            if (!(options_1.isPeriodic)) {\n                                if (typeof options_1.handleId === 'number') {\n                                    // in non-nodejs env, we remove timerId\n                                    // from local cache\n                                    delete tasksByHandleId[options_1.handleId];\n                                }\n                                else if (options_1.handleId) {\n                                    // Node returns complex objects as handleIds\n                                    // we remove task reference from timer object\n                                    options_1.handleId[taskSymbol] = null;\n                                }\n                            }\n                        }\n                    };\n                    var task = scheduleMacroTaskWithCurrentZone(setName, args[0], options_1, scheduleTask, clearTask);\n                    if (!task) {\n                        return task;\n                    }\n                    // Node.js must additionally support the ref and unref functions.\n                    var handle = task.data.handleId;\n                    if (typeof handle === 'number') {\n                        // for non nodejs env, we save handleId: task\n                        // mapping in local cache for clearTimeout\n                        tasksByHandleId[handle] = task;\n                    }\n                    else if (handle) {\n                        // for nodejs env, we save task\n                        // reference in timerId Object for clearTimeout\n                        handle[taskSymbol] = task;\n                    }\n                    // check whether handle is null, because some polyfill or browser\n                    // may return undefined from setTimeout/setInterval/setImmediate/requestAnimationFrame\n                    if (handle && handle.ref && handle.unref && typeof handle.ref === 'function' &&\n                        typeof handle.unref === 'function') {\n                        task.ref = handle.ref.bind(handle);\n                        task.unref = handle.unref.bind(handle);\n                    }\n                    if (typeof handle === 'number' || handle) {\n                        return handle;\n                    }\n                    return task;\n                }\n                else {\n                    // cause an error by calling it directly.\n                    return delegate.apply(window, args);\n                }\n            }; });\n        clearNative =\n            patchMethod(window, cancelName, function (delegate) { return function (self, args) {\n                var id = args[0];\n                var task;\n                if (typeof id === 'number') {\n                    // non nodejs env.\n                    task = tasksByHandleId[id];\n                }\n                else {\n                    // nodejs env.\n                    task = id && id[taskSymbol];\n                    // other environments.\n                    if (!task) {\n                        task = id;\n                    }\n                }\n                if (task && typeof task.type === 'string') {\n                    if (task.state !== 'notScheduled' &&\n                        (task.cancelFn && task.data.isPeriodic || task.runCount === 0)) {\n                        if (typeof id === 'number') {\n                            delete tasksByHandleId[id];\n                        }\n                        else if (id) {\n                            id[taskSymbol] = null;\n                        }\n                        // Do not cancel already canceled functions\n                        task.zone.cancelTask(task);\n                    }\n                }\n                else {\n                    // cause an error by calling it directly.\n                    delegate.apply(window, args);\n                }\n            }; });\n    }\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    function patchCustomElements(_global, api) {\n        var _b = api.getGlobalObjects(), isBrowser = _b.isBrowser, isMix = _b.isMix;\n        if ((!isBrowser && !isMix) || !_global['customElements'] || !('customElements' in _global)) {\n            return;\n        }\n        var callbacks = ['connectedCallback', 'disconnectedCallback', 'adoptedCallback', 'attributeChangedCallback'];\n        api.patchCallbacks(api, _global.customElements, 'customElements', 'define', callbacks);\n    }\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    function eventTargetPatch(_global, api) {\n        if (Zone[api.symbol('patchEventTarget')]) {\n            // EventTarget is already patched.\n            return;\n        }\n        var _b = api.getGlobalObjects(), eventNames = _b.eventNames, zoneSymbolEventNames = _b.zoneSymbolEventNames, TRUE_STR = _b.TRUE_STR, FALSE_STR = _b.FALSE_STR, ZONE_SYMBOL_PREFIX = _b.ZONE_SYMBOL_PREFIX;\n        //  predefine all __zone_symbol__ + eventName + true/false string\n        for (var i = 0; i < eventNames.length; i++) {\n            var eventName = eventNames[i];\n            var falseEventName = eventName + FALSE_STR;\n            var trueEventName = eventName + TRUE_STR;\n            var symbol = ZONE_SYMBOL_PREFIX + falseEventName;\n            var symbolCapture = ZONE_SYMBOL_PREFIX + trueEventName;\n            zoneSymbolEventNames[eventName] = {};\n            zoneSymbolEventNames[eventName][FALSE_STR] = symbol;\n            zoneSymbolEventNames[eventName][TRUE_STR] = symbolCapture;\n        }\n        var EVENT_TARGET = _global['EventTarget'];\n        if (!EVENT_TARGET || !EVENT_TARGET.prototype) {\n            return;\n        }\n        api.patchEventTarget(_global, api, [EVENT_TARGET && EVENT_TARGET.prototype]);\n        return true;\n    }\n    function patchEvent(global, api) {\n        api.patchEventPrototype(global, api);\n    }\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    Zone.__load_patch('legacy', function (global) {\n        var legacyPatch = global[Zone.__symbol__('legacyPatch')];\n        if (legacyPatch) {\n            legacyPatch();\n        }\n    });\n    Zone.__load_patch('queueMicrotask', function (global, Zone, api) {\n        api.patchMethod(global, 'queueMicrotask', function (delegate) {\n            return function (self, args) {\n                Zone.current.scheduleMicroTask('queueMicrotask', args[0]);\n            };\n        });\n    });\n    Zone.__load_patch('timers', function (global) {\n        var set = 'set';\n        var clear = 'clear';\n        patchTimer(global, set, clear, 'Timeout');\n        patchTimer(global, set, clear, 'Interval');\n        patchTimer(global, set, clear, 'Immediate');\n    });\n    Zone.__load_patch('requestAnimationFrame', function (global) {\n        patchTimer(global, 'request', 'cancel', 'AnimationFrame');\n        patchTimer(global, 'mozRequest', 'mozCancel', 'AnimationFrame');\n        patchTimer(global, 'webkitRequest', 'webkitCancel', 'AnimationFrame');\n    });\n    Zone.__load_patch('blocking', function (global, Zone) {\n        var blockingMethods = ['alert', 'prompt', 'confirm'];\n        for (var i = 0; i < blockingMethods.length; i++) {\n            var name_2 = blockingMethods[i];\n            patchMethod(global, name_2, function (delegate, symbol, name) {\n                return function (s, args) {\n                    return Zone.current.run(delegate, global, args, name);\n                };\n            });\n        }\n    });\n    Zone.__load_patch('EventTarget', function (global, Zone, api) {\n        patchEvent(global, api);\n        eventTargetPatch(global, api);\n        // patch XMLHttpRequestEventTarget's addEventListener/removeEventListener\n        var XMLHttpRequestEventTarget = global['XMLHttpRequestEventTarget'];\n        if (XMLHttpRequestEventTarget && XMLHttpRequestEventTarget.prototype) {\n            api.patchEventTarget(global, api, [XMLHttpRequestEventTarget.prototype]);\n        }\n    });\n    Zone.__load_patch('MutationObserver', function (global, Zone, api) {\n        patchClass('MutationObserver');\n        patchClass('WebKitMutationObserver');\n    });\n    Zone.__load_patch('IntersectionObserver', function (global, Zone, api) {\n        patchClass('IntersectionObserver');\n    });\n    Zone.__load_patch('FileReader', function (global, Zone, api) {\n        patchClass('FileReader');\n    });\n    Zone.__load_patch('on_property', function (global, Zone, api) {\n        propertyDescriptorPatch(api, global);\n    });\n    Zone.__load_patch('customElements', function (global, Zone, api) {\n        patchCustomElements(global, api);\n    });\n    Zone.__load_patch('XHR', function (global, Zone) {\n        // Treat XMLHttpRequest as a macrotask.\n        patchXHR(global);\n        var XHR_TASK = zoneSymbol$1('xhrTask');\n        var XHR_SYNC = zoneSymbol$1('xhrSync');\n        var XHR_LISTENER = zoneSymbol$1('xhrListener');\n        var XHR_SCHEDULED = zoneSymbol$1('xhrScheduled');\n        var XHR_URL = zoneSymbol$1('xhrURL');\n        var XHR_ERROR_BEFORE_SCHEDULED = zoneSymbol$1('xhrErrorBeforeScheduled');\n        function patchXHR(window) {\n            var XMLHttpRequest = window['XMLHttpRequest'];\n            if (!XMLHttpRequest) {\n                // XMLHttpRequest is not available in service worker\n                return;\n            }\n            var XMLHttpRequestPrototype = XMLHttpRequest.prototype;\n            function findPendingTask(target) {\n                return target[XHR_TASK];\n            }\n            var oriAddListener = XMLHttpRequestPrototype[ZONE_SYMBOL_ADD_EVENT_LISTENER];\n            var oriRemoveListener = XMLHttpRequestPrototype[ZONE_SYMBOL_REMOVE_EVENT_LISTENER];\n            if (!oriAddListener) {\n                var XMLHttpRequestEventTarget_1 = window['XMLHttpRequestEventTarget'];\n                if (XMLHttpRequestEventTarget_1) {\n                    var XMLHttpRequestEventTargetPrototype = XMLHttpRequestEventTarget_1.prototype;\n                    oriAddListener = XMLHttpRequestEventTargetPrototype[ZONE_SYMBOL_ADD_EVENT_LISTENER];\n                    oriRemoveListener = XMLHttpRequestEventTargetPrototype[ZONE_SYMBOL_REMOVE_EVENT_LISTENER];\n                }\n            }\n            var READY_STATE_CHANGE = 'readystatechange';\n            var SCHEDULED = 'scheduled';\n            function scheduleTask(task) {\n                var data = task.data;\n                var target = data.target;\n                target[XHR_SCHEDULED] = false;\n                target[XHR_ERROR_BEFORE_SCHEDULED] = false;\n                // remove existing event listener\n                var listener = target[XHR_LISTENER];\n                if (!oriAddListener) {\n                    oriAddListener = target[ZONE_SYMBOL_ADD_EVENT_LISTENER];\n                    oriRemoveListener = target[ZONE_SYMBOL_REMOVE_EVENT_LISTENER];\n                }\n                if (listener) {\n                    oriRemoveListener.call(target, READY_STATE_CHANGE, listener);\n                }\n                var newListener = target[XHR_LISTENER] = function () {\n                    if (target.readyState === target.DONE) {\n                        // sometimes on some browsers XMLHttpRequest will fire onreadystatechange with\n                        // readyState=4 multiple times, so we need to check task state here\n                        if (!data.aborted && target[XHR_SCHEDULED] && task.state === SCHEDULED) {\n                            // check whether the xhr has registered onload listener\n                            // if that is the case, the task should invoke after all\n                            // onload listeners finish.\n                            // Also if the request failed without response (status = 0), the load event handler\n                            // will not be triggered, in that case, we should also invoke the placeholder callback\n                            // to close the XMLHttpRequest::send macroTask.\n                            // https://github.com/angular/angular/issues/38795\n                            var loadTasks = target[Zone.__symbol__('loadfalse')];\n                            if (target.status !== 0 && loadTasks && loadTasks.length > 0) {\n                                var oriInvoke_1 = task.invoke;\n                                task.invoke = function () {\n                                    // need to load the tasks again, because in other\n                                    // load listener, they may remove themselves\n                                    var loadTasks = target[Zone.__symbol__('loadfalse')];\n                                    for (var i = 0; i < loadTasks.length; i++) {\n                                        if (loadTasks[i] === task) {\n                                            loadTasks.splice(i, 1);\n                                        }\n                                    }\n                                    if (!data.aborted && task.state === SCHEDULED) {\n                                        oriInvoke_1.call(task);\n                                    }\n                                };\n                                loadTasks.push(task);\n                            }\n                            else {\n                                task.invoke();\n                            }\n                        }\n                        else if (!data.aborted && target[XHR_SCHEDULED] === false) {\n                            // error occurs when xhr.send()\n                            target[XHR_ERROR_BEFORE_SCHEDULED] = true;\n                        }\n                    }\n                };\n                oriAddListener.call(target, READY_STATE_CHANGE, newListener);\n                var storedTask = target[XHR_TASK];\n                if (!storedTask) {\n                    target[XHR_TASK] = task;\n                }\n                sendNative.apply(target, data.args);\n                target[XHR_SCHEDULED] = true;\n                return task;\n            }\n            function placeholderCallback() { }\n            function clearTask(task) {\n                var data = task.data;\n                // Note - ideally, we would call data.target.removeEventListener here, but it's too late\n                // to prevent it from firing. So instead, we store info for the event listener.\n                data.aborted = true;\n                return abortNative.apply(data.target, data.args);\n            }\n            var openNative = patchMethod(XMLHttpRequestPrototype, 'open', function () { return function (self, args) {\n                self[XHR_SYNC] = args[2] == false;\n                self[XHR_URL] = args[1];\n                return openNative.apply(self, args);\n            }; });\n            var XMLHTTPREQUEST_SOURCE = 'XMLHttpRequest.send';\n            var fetchTaskAborting = zoneSymbol$1('fetchTaskAborting');\n            var fetchTaskScheduling = zoneSymbol$1('fetchTaskScheduling');\n            var sendNative = patchMethod(XMLHttpRequestPrototype, 'send', function () { return function (self, args) {\n                if (Zone.current[fetchTaskScheduling] === true) {\n                    // a fetch is scheduling, so we are using xhr to polyfill fetch\n                    // and because we already schedule macroTask for fetch, we should\n                    // not schedule a macroTask for xhr again\n                    return sendNative.apply(self, args);\n                }\n                if (self[XHR_SYNC]) {\n                    // if the XHR is sync there is no task to schedule, just execute the code.\n                    return sendNative.apply(self, args);\n                }\n                else {\n                    var options = { target: self, url: self[XHR_URL], isPeriodic: false, args: args, aborted: false };\n                    var task = scheduleMacroTaskWithCurrentZone(XMLHTTPREQUEST_SOURCE, placeholderCallback, options, scheduleTask, clearTask);\n                    if (self && self[XHR_ERROR_BEFORE_SCHEDULED] === true && !options.aborted &&\n                        task.state === SCHEDULED) {\n                        // xhr request throw error when send\n                        // we should invoke task instead of leaving a scheduled\n                        // pending macroTask\n                        task.invoke();\n                    }\n                }\n            }; });\n            var abortNative = patchMethod(XMLHttpRequestPrototype, 'abort', function () { return function (self, args) {\n                var task = findPendingTask(self);\n                if (task && typeof task.type == 'string') {\n                    // If the XHR has already completed, do nothing.\n                    // If the XHR has already been aborted, do nothing.\n                    // Fix #569, call abort multiple times before done will cause\n                    // macroTask task count be negative number\n                    if (task.cancelFn == null || (task.data && task.data.aborted)) {\n                        return;\n                    }\n                    task.zone.cancelTask(task);\n                }\n                else if (Zone.current[fetchTaskAborting] === true) {\n                    // the abort is called from fetch polyfill, we need to call native abort of XHR.\n                    return abortNative.apply(self, args);\n                }\n                // Otherwise, we are trying to abort an XHR which has not yet been sent, so there is no\n                // task\n                // to cancel. Do nothing.\n            }; });\n        }\n    });\n    Zone.__load_patch('geolocation', function (global) {\n        /// GEO_LOCATION\n        if (global['navigator'] && global['navigator'].geolocation) {\n            patchPrototype(global['navigator'].geolocation, ['getCurrentPosition', 'watchPosition']);\n        }\n    });\n    Zone.__load_patch('PromiseRejectionEvent', function (global, Zone) {\n        // handle unhandled promise rejection\n        function findPromiseRejectionHandler(evtName) {\n            return function (e) {\n                var eventTasks = findEventTasks(global, evtName);\n                eventTasks.forEach(function (eventTask) {\n                    // windows has added unhandledrejection event listener\n                    // trigger the event listener\n                    var PromiseRejectionEvent = global['PromiseRejectionEvent'];\n                    if (PromiseRejectionEvent) {\n                        var evt = new PromiseRejectionEvent(evtName, { promise: e.promise, reason: e.rejection });\n                        eventTask.invoke(evt);\n                    }\n                });\n            };\n        }\n        if (global['PromiseRejectionEvent']) {\n            Zone[zoneSymbol$1('unhandledPromiseRejectionHandler')] =\n                findPromiseRejectionHandler('unhandledrejection');\n            Zone[zoneSymbol$1('rejectionHandledHandler')] =\n                findPromiseRejectionHandler('rejectionhandled');\n        }\n    });\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvem9uZS5qcy9kaXN0L3pvbmUuanMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3VtdWxvY2l0eS1hc3NldC1vdmVydmlldy13aWRnZXQvLi9ub2RlX21vZHVsZXMvem9uZS5qcy9kaXN0L3pvbmUuanM/ZDEzNSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG52YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG4vKipcbiAqIEBsaWNlbnNlIEFuZ3VsYXIgdjE0LjIuMC1uZXh0LjBcbiAqIChjKSAyMDEwLTIwMjIgR29vZ2xlIExMQy4gaHR0cHM6Ly9hbmd1bGFyLmlvL1xuICogTGljZW5zZTogTUlUXG4gKi9cbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG4gICAgICAgIGZhY3RvcnkoKTtcbn0pKChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIC8qKlxuICAgICAqIEBsaWNlbnNlXG4gICAgICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAgICAgKlxuICAgICAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gICAgICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICAgICAqL1xuICAgICgoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgICB2YXIgcGVyZm9ybWFuY2UgPSBnbG9iYWxbJ3BlcmZvcm1hbmNlJ107XG4gICAgICAgIGZ1bmN0aW9uIG1hcmsobmFtZSkge1xuICAgICAgICAgICAgcGVyZm9ybWFuY2UgJiYgcGVyZm9ybWFuY2VbJ21hcmsnXSAmJiBwZXJmb3JtYW5jZVsnbWFyayddKG5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHBlcmZvcm1hbmNlTWVhc3VyZShuYW1lLCBsYWJlbCkge1xuICAgICAgICAgICAgcGVyZm9ybWFuY2UgJiYgcGVyZm9ybWFuY2VbJ21lYXN1cmUnXSAmJiBwZXJmb3JtYW5jZVsnbWVhc3VyZSddKG5hbWUsIGxhYmVsKTtcbiAgICAgICAgfVxuICAgICAgICBtYXJrKCdab25lJyk7XG4gICAgICAgIC8vIEluaXRpYWxpemUgYmVmb3JlIGl0J3MgYWNjZXNzZWQgYmVsb3cuXG4gICAgICAgIC8vIF9fWm9uZV9zeW1ib2xfcHJlZml4IGdsb2JhbCBjYW4gYmUgdXNlZCB0byBvdmVycmlkZSB0aGUgZGVmYXVsdCB6b25lXG4gICAgICAgIC8vIHN5bWJvbCBwcmVmaXggd2l0aCBhIGN1c3RvbSBvbmUgaWYgbmVlZGVkLlxuICAgICAgICB2YXIgc3ltYm9sUHJlZml4ID0gZ2xvYmFsWydfX1pvbmVfc3ltYm9sX3ByZWZpeCddIHx8ICdfX3pvbmVfc3ltYm9sX18nO1xuICAgICAgICBmdW5jdGlvbiBfX3N5bWJvbF9fKG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBzeW1ib2xQcmVmaXggKyBuYW1lO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjaGVja0R1cGxpY2F0ZSA9IGdsb2JhbFtfX3N5bWJvbF9fKCdmb3JjZUR1cGxpY2F0ZVpvbmVDaGVjaycpXSA9PT0gdHJ1ZTtcbiAgICAgICAgaWYgKGdsb2JhbFsnWm9uZSddKSB7XG4gICAgICAgICAgICAvLyBpZiBnbG9iYWxbJ1pvbmUnXSBhbHJlYWR5IGV4aXN0cyAobWF5YmUgem9uZS5qcyB3YXMgYWxyZWFkeSBsb2FkZWQgb3JcbiAgICAgICAgICAgIC8vIHNvbWUgb3RoZXIgbGliIGFsc28gcmVnaXN0ZXJlZCBhIGdsb2JhbCBvYmplY3QgbmFtZWQgWm9uZSksIHdlIG1heSBuZWVkXG4gICAgICAgICAgICAvLyB0byB0aHJvdyBhbiBlcnJvciwgYnV0IHNvbWV0aW1lcyB1c2VyIG1heSBub3Qgd2FudCB0aGlzIGVycm9yLlxuICAgICAgICAgICAgLy8gRm9yIGV4YW1wbGUsXG4gICAgICAgICAgICAvLyB3ZSBoYXZlIHR3byB3ZWIgcGFnZXMsIHBhZ2UxIGluY2x1ZGVzIHpvbmUuanMsIHBhZ2UyIGRvZXNuJ3QuXG4gICAgICAgICAgICAvLyBhbmQgdGhlIDFzdCB0aW1lIHVzZXIgbG9hZCBwYWdlMSBhbmQgcGFnZTIsIGV2ZXJ5dGhpbmcgd29yayBmaW5lLFxuICAgICAgICAgICAgLy8gYnV0IHdoZW4gdXNlciBsb2FkIHBhZ2UyIGFnYWluLCBlcnJvciBvY2N1cnMgYmVjYXVzZSBnbG9iYWxbJ1pvbmUnXSBhbHJlYWR5IGV4aXN0cy5cbiAgICAgICAgICAgIC8vIHNvIHdlIGFkZCBhIGZsYWcgdG8gbGV0IHVzZXIgY2hvb3NlIHdoZXRoZXIgdG8gdGhyb3cgdGhpcyBlcnJvciBvciBub3QuXG4gICAgICAgICAgICAvLyBCeSBkZWZhdWx0LCBpZiBleGlzdGluZyBab25lIGlzIGZyb20gem9uZS5qcywgd2Ugd2lsbCBub3QgdGhyb3cgdGhlIGVycm9yLlxuICAgICAgICAgICAgaWYgKGNoZWNrRHVwbGljYXRlIHx8IHR5cGVvZiBnbG9iYWxbJ1pvbmUnXS5fX3N5bWJvbF9fICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdab25lIGFscmVhZHkgbG9hZGVkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdsb2JhbFsnWm9uZSddO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBab25lID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gWm9uZShwYXJlbnQsIHpvbmVTcGVjKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgICAgIHRoaXMuX25hbWUgPSB6b25lU3BlYyA/IHpvbmVTcGVjLm5hbWUgfHwgJ3VubmFtZWQnIDogJzxyb290Pic7XG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvcGVydGllcyA9IHpvbmVTcGVjICYmIHpvbmVTcGVjLnByb3BlcnRpZXMgfHwge307XG4gICAgICAgICAgICAgICAgdGhpcy5fem9uZURlbGVnYXRlID1cbiAgICAgICAgICAgICAgICAgICAgbmV3IF9ab25lRGVsZWdhdGUodGhpcywgdGhpcy5fcGFyZW50ICYmIHRoaXMuX3BhcmVudC5fem9uZURlbGVnYXRlLCB6b25lU3BlYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBab25lLmFzc2VydFpvbmVQYXRjaGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChnbG9iYWxbJ1Byb21pc2UnXSAhPT0gcGF0Y2hlc1snWm9uZUF3YXJlUHJvbWlzZSddKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWm9uZS5qcyBoYXMgZGV0ZWN0ZWQgdGhhdCBab25lQXdhcmVQcm9taXNlIGAod2luZG93fGdsb2JhbCkuUHJvbWlzZWAgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGFzIGJlZW4gb3ZlcndyaXR0ZW4uXFxuJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnTW9zdCBsaWtlbHkgY2F1c2UgaXMgdGhhdCBhIFByb21pc2UgcG9seWZpbGwgaGFzIGJlZW4gbG9hZGVkICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2FmdGVyIFpvbmUuanMgKFBvbHlmaWxsaW5nIFByb21pc2UgYXBpIGlzIG5vdCBuZWNlc3Nhcnkgd2hlbiB6b25lLmpzIGlzIGxvYWRlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnSWYgeW91IG11c3QgbG9hZCBvbmUsIGRvIHNvIGJlZm9yZSBsb2FkaW5nIHpvbmUuanMuKScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWm9uZSwgXCJyb290XCIsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHpvbmUgPSBab25lLmN1cnJlbnQ7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICh6b25lLnBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgem9uZSA9IHpvbmUucGFyZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB6b25lO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShab25lLCBcImN1cnJlbnRcIiwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2N1cnJlbnRab25lRnJhbWUuem9uZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWm9uZSwgXCJjdXJyZW50VGFza1wiLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfY3VycmVudFRhc2s7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnJlcXVpcmUtaW50ZXJuYWwtd2l0aC11bmRlcnNjb3JlXG4gICAgICAgICAgICBab25lLl9fbG9hZF9wYXRjaCA9IGZ1bmN0aW9uIChuYW1lLCBmbiwgaWdub3JlRHVwbGljYXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlnbm9yZUR1cGxpY2F0ZSA9PT0gdm9pZCAwKSB7IGlnbm9yZUR1cGxpY2F0ZSA9IGZhbHNlOyB9XG4gICAgICAgICAgICAgICAgaWYgKHBhdGNoZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYGNoZWNrRHVwbGljYXRlYCBvcHRpb24gaXMgZGVmaW5lZCBmcm9tIGdsb2JhbCB2YXJpYWJsZVxuICAgICAgICAgICAgICAgICAgICAvLyBzbyBpdCB3b3JrcyBmb3IgYWxsIG1vZHVsZXMuXG4gICAgICAgICAgICAgICAgICAgIC8vIGBpZ25vcmVEdXBsaWNhdGVgIGNhbiB3b3JrIGZvciB0aGUgc3BlY2lmaWVkIG1vZHVsZVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlnbm9yZUR1cGxpY2F0ZSAmJiBjaGVja0R1cGxpY2F0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0FscmVhZHkgbG9hZGVkIHBhdGNoOiAnICsgbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIWdsb2JhbFsnX19ab25lX2Rpc2FibGVfJyArIG5hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwZXJmTmFtZSA9ICdab25lOicgKyBuYW1lO1xuICAgICAgICAgICAgICAgICAgICBtYXJrKHBlcmZOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgcGF0Y2hlc1tuYW1lXSA9IGZuKGdsb2JhbCwgWm9uZSwgX2FwaSk7XG4gICAgICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlTWVhc3VyZShwZXJmTmFtZSwgcGVyZk5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWm9uZS5wcm90b3R5cGUsIFwicGFyZW50XCIsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWm9uZS5wcm90b3R5cGUsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFpvbmUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgem9uZSA9IHRoaXMuZ2V0Wm9uZVdpdGgoa2V5KTtcbiAgICAgICAgICAgICAgICBpZiAoem9uZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHpvbmUuX3Byb3BlcnRpZXNba2V5XTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBab25lLnByb3RvdHlwZS5nZXRab25lV2l0aCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQuX3Byb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuX3BhcmVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgWm9uZS5wcm90b3R5cGUuZm9yayA9IGZ1bmN0aW9uICh6b25lU3BlYykge1xuICAgICAgICAgICAgICAgIGlmICghem9uZVNwZWMpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWm9uZVNwZWMgcmVxdWlyZWQhJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3pvbmVEZWxlZ2F0ZS5mb3JrKHRoaXMsIHpvbmVTcGVjKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBab25lLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0aW5nIGZ1bmN0aW9uIGdvdDogJyArIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIF9jYWxsYmFjayA9IHRoaXMuX3pvbmVEZWxlZ2F0ZS5pbnRlcmNlcHQodGhpcywgY2FsbGJhY2ssIHNvdXJjZSk7XG4gICAgICAgICAgICAgICAgdmFyIHpvbmUgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB6b25lLnJ1bkd1YXJkZWQoX2NhbGxiYWNrLCB0aGlzLCBhcmd1bWVudHMsIHNvdXJjZSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBab25lLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzLCBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBfY3VycmVudFpvbmVGcmFtZSA9IHsgcGFyZW50OiBfY3VycmVudFpvbmVGcmFtZSwgem9uZTogdGhpcyB9O1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl96b25lRGVsZWdhdGUuaW52b2tlKHRoaXMsIGNhbGxiYWNrLCBhcHBseVRoaXMsIGFwcGx5QXJncywgc291cmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIF9jdXJyZW50Wm9uZUZyYW1lID0gX2N1cnJlbnRab25lRnJhbWUucGFyZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBab25lLnByb3RvdHlwZS5ydW5HdWFyZGVkID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBhcHBseVRoaXMsIGFwcGx5QXJncywgc291cmNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFwcGx5VGhpcyA9PT0gdm9pZCAwKSB7IGFwcGx5VGhpcyA9IG51bGw7IH1cbiAgICAgICAgICAgICAgICBfY3VycmVudFpvbmVGcmFtZSA9IHsgcGFyZW50OiBfY3VycmVudFpvbmVGcmFtZSwgem9uZTogdGhpcyB9O1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fem9uZURlbGVnYXRlLmludm9rZSh0aGlzLCBjYWxsYmFjaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MsIHNvdXJjZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fem9uZURlbGVnYXRlLmhhbmRsZUVycm9yKHRoaXMsIGVycm9yKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBfY3VycmVudFpvbmVGcmFtZSA9IF9jdXJyZW50Wm9uZUZyYW1lLnBhcmVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgWm9uZS5wcm90b3R5cGUucnVuVGFzayA9IGZ1bmN0aW9uICh0YXNrLCBhcHBseVRoaXMsIGFwcGx5QXJncykge1xuICAgICAgICAgICAgICAgIGlmICh0YXNrLnpvbmUgIT0gdGhpcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgdGFzayBjYW4gb25seSBiZSBydW4gaW4gdGhlIHpvbmUgb2YgY3JlYXRpb24hIChDcmVhdGlvbjogJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAodGFzay56b25lIHx8IE5PX1pPTkUpLm5hbWUgKyAnOyBFeGVjdXRpb246ICcgKyB0aGlzLm5hbWUgKyAnKScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci96b25lLmpzL2lzc3Vlcy83NzgsIHNvbWV0aW1lcyBldmVudFRhc2tcbiAgICAgICAgICAgICAgICAvLyB3aWxsIHJ1biBpbiBub3RTY2hlZHVsZWQoY2FuY2VsZWQpIHN0YXRlLCB3ZSBzaG91bGQgbm90IHRyeSB0b1xuICAgICAgICAgICAgICAgIC8vIHJ1biBzdWNoIGtpbmQgb2YgdGFzayBidXQganVzdCByZXR1cm5cbiAgICAgICAgICAgICAgICBpZiAodGFzay5zdGF0ZSA9PT0gbm90U2NoZWR1bGVkICYmICh0YXNrLnR5cGUgPT09IGV2ZW50VGFzayB8fCB0YXNrLnR5cGUgPT09IG1hY3JvVGFzaykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcmVFbnRyeUd1YXJkID0gdGFzay5zdGF0ZSAhPSBydW5uaW5nO1xuICAgICAgICAgICAgICAgIHJlRW50cnlHdWFyZCAmJiB0YXNrLl90cmFuc2l0aW9uVG8ocnVubmluZywgc2NoZWR1bGVkKTtcbiAgICAgICAgICAgICAgICB0YXNrLnJ1bkNvdW50Kys7XG4gICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzVGFzayA9IF9jdXJyZW50VGFzaztcbiAgICAgICAgICAgICAgICBfY3VycmVudFRhc2sgPSB0YXNrO1xuICAgICAgICAgICAgICAgIF9jdXJyZW50Wm9uZUZyYW1lID0geyBwYXJlbnQ6IF9jdXJyZW50Wm9uZUZyYW1lLCB6b25lOiB0aGlzIH07XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhc2sudHlwZSA9PSBtYWNyb1Rhc2sgJiYgdGFzay5kYXRhICYmICF0YXNrLmRhdGEuaXNQZXJpb2RpYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5jYW5jZWxGbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3pvbmVEZWxlZ2F0ZS5pbnZva2VUYXNrKHRoaXMsIHRhc2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl96b25lRGVsZWdhdGUuaGFuZGxlRXJyb3IodGhpcywgZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSB0YXNrJ3Mgc3RhdGUgaXMgbm90U2NoZWR1bGVkIG9yIHVua25vd24sIHRoZW4gaXQgaGFzIGFscmVhZHkgYmVlbiBjYW5jZWxsZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gd2Ugc2hvdWxkIG5vdCByZXNldCB0aGUgc3RhdGUgdG8gc2NoZWR1bGVkXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXNrLnN0YXRlICE9PSBub3RTY2hlZHVsZWQgJiYgdGFzay5zdGF0ZSAhPT0gdW5rbm93bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhc2sudHlwZSA9PSBldmVudFRhc2sgfHwgKHRhc2suZGF0YSAmJiB0YXNrLmRhdGEuaXNQZXJpb2RpYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZUVudHJ5R3VhcmQgJiYgdGFzay5fdHJhbnNpdGlvblRvKHNjaGVkdWxlZCwgcnVubmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLnJ1bkNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVUYXNrQ291bnQodGFzaywgLTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlRW50cnlHdWFyZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLl90cmFuc2l0aW9uVG8obm90U2NoZWR1bGVkLCBydW5uaW5nLCBub3RTY2hlZHVsZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF9jdXJyZW50Wm9uZUZyYW1lID0gX2N1cnJlbnRab25lRnJhbWUucGFyZW50O1xuICAgICAgICAgICAgICAgICAgICBfY3VycmVudFRhc2sgPSBwcmV2aW91c1Rhc2s7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFpvbmUucHJvdG90eXBlLnNjaGVkdWxlVGFzayA9IGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhc2suem9uZSAmJiB0YXNrLnpvbmUgIT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIHRhc2sgd2FzIHJlc2NoZWR1bGVkLCB0aGUgbmV3Wm9uZVxuICAgICAgICAgICAgICAgICAgICAvLyBzaG91bGQgbm90IGJlIHRoZSBjaGlsZHJlbiBvZiB0aGUgb3JpZ2luYWwgem9uZVxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3Wm9uZSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChuZXdab25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3Wm9uZSA9PT0gdGFzay56b25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJjYW4gbm90IHJlc2NoZWR1bGUgdGFzayB0byBcIi5jb25jYXQodGhpcy5uYW1lLCBcIiB3aGljaCBpcyBkZXNjZW5kYW50cyBvZiB0aGUgb3JpZ2luYWwgem9uZSBcIikuY29uY2F0KHRhc2suem9uZS5uYW1lKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdab25lID0gbmV3Wm9uZS5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGFzay5fdHJhbnNpdGlvblRvKHNjaGVkdWxpbmcsIG5vdFNjaGVkdWxlZCk7XG4gICAgICAgICAgICAgICAgdmFyIHpvbmVEZWxlZ2F0ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB0YXNrLl96b25lRGVsZWdhdGVzID0gem9uZURlbGVnYXRlcztcbiAgICAgICAgICAgICAgICB0YXNrLl96b25lID0gdGhpcztcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrID0gdGhpcy5fem9uZURlbGVnYXRlLnNjaGVkdWxlVGFzayh0aGlzLCB0YXNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBzaG91bGQgc2V0IHRhc2sncyBzdGF0ZSB0byB1bmtub3duIHdoZW4gc2NoZWR1bGVUYXNrIHRocm93IGVycm9yXG4gICAgICAgICAgICAgICAgICAgIC8vIGJlY2F1c2UgdGhlIGVyciBtYXkgZnJvbSByZXNjaGVkdWxlLCBzbyB0aGUgZnJvbVN0YXRlIG1heWJlIG5vdFNjaGVkdWxlZFxuICAgICAgICAgICAgICAgICAgICB0YXNrLl90cmFuc2l0aW9uVG8odW5rbm93biwgc2NoZWR1bGluZywgbm90U2NoZWR1bGVkKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogQEppYUxpUGFzc2lvbiwgc2hvdWxkIHdlIGNoZWNrIHRoZSByZXN1bHQgZnJvbSBoYW5kbGVFcnJvcj9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fem9uZURlbGVnYXRlLmhhbmRsZUVycm9yKHRoaXMsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRhc2suX3pvbmVEZWxlZ2F0ZXMgPT09IHpvbmVEZWxlZ2F0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgaGF2ZSB0byBjaGVjayBiZWNhdXNlIGludGVybmFsbHkgdGhlIGRlbGVnYXRlIGNhbiByZXNjaGVkdWxlIHRoZSB0YXNrLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVUYXNrQ291bnQodGFzaywgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0YXNrLnN0YXRlID09IHNjaGVkdWxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5fdHJhbnNpdGlvblRvKHNjaGVkdWxlZCwgc2NoZWR1bGluZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0YXNrO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFpvbmUucHJvdG90eXBlLnNjaGVkdWxlTWljcm9UYXNrID0gZnVuY3Rpb24gKHNvdXJjZSwgY2FsbGJhY2ssIGRhdGEsIGN1c3RvbVNjaGVkdWxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGVUYXNrKG5ldyBab25lVGFzayhtaWNyb1Rhc2ssIHNvdXJjZSwgY2FsbGJhY2ssIGRhdGEsIGN1c3RvbVNjaGVkdWxlLCB1bmRlZmluZWQpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBab25lLnByb3RvdHlwZS5zY2hlZHVsZU1hY3JvVGFzayA9IGZ1bmN0aW9uIChzb3VyY2UsIGNhbGxiYWNrLCBkYXRhLCBjdXN0b21TY2hlZHVsZSwgY3VzdG9tQ2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGVUYXNrKG5ldyBab25lVGFzayhtYWNyb1Rhc2ssIHNvdXJjZSwgY2FsbGJhY2ssIGRhdGEsIGN1c3RvbVNjaGVkdWxlLCBjdXN0b21DYW5jZWwpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBab25lLnByb3RvdHlwZS5zY2hlZHVsZUV2ZW50VGFzayA9IGZ1bmN0aW9uIChzb3VyY2UsIGNhbGxiYWNrLCBkYXRhLCBjdXN0b21TY2hlZHVsZSwgY3VzdG9tQ2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGVUYXNrKG5ldyBab25lVGFzayhldmVudFRhc2ssIHNvdXJjZSwgY2FsbGJhY2ssIGRhdGEsIGN1c3RvbVNjaGVkdWxlLCBjdXN0b21DYW5jZWwpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBab25lLnByb3RvdHlwZS5jYW5jZWxUYXNrID0gZnVuY3Rpb24gKHRhc2spIHtcbiAgICAgICAgICAgICAgICBpZiAodGFzay56b25lICE9IHRoaXMpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQSB0YXNrIGNhbiBvbmx5IGJlIGNhbmNlbGxlZCBpbiB0aGUgem9uZSBvZiBjcmVhdGlvbiEgKENyZWF0aW9uOiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICh0YXNrLnpvbmUgfHwgTk9fWk9ORSkubmFtZSArICc7IEV4ZWN1dGlvbjogJyArIHRoaXMubmFtZSArICcpJyk7XG4gICAgICAgICAgICAgICAgdGFzay5fdHJhbnNpdGlvblRvKGNhbmNlbGluZywgc2NoZWR1bGVkLCBydW5uaW5nKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl96b25lRGVsZWdhdGUuY2FuY2VsVGFzayh0aGlzLCB0YXNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiBlcnJvciBvY2N1cnMgd2hlbiBjYW5jZWxUYXNrLCB0cmFuc2l0IHRoZSBzdGF0ZSB0byB1bmtub3duXG4gICAgICAgICAgICAgICAgICAgIHRhc2suX3RyYW5zaXRpb25Ubyh1bmtub3duLCBjYW5jZWxpbmcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl96b25lRGVsZWdhdGUuaGFuZGxlRXJyb3IodGhpcywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVUYXNrQ291bnQodGFzaywgLTEpO1xuICAgICAgICAgICAgICAgIHRhc2suX3RyYW5zaXRpb25Ubyhub3RTY2hlZHVsZWQsIGNhbmNlbGluZyk7XG4gICAgICAgICAgICAgICAgdGFzay5ydW5Db3VudCA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhc2s7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgWm9uZS5wcm90b3R5cGUuX3VwZGF0ZVRhc2tDb3VudCA9IGZ1bmN0aW9uICh0YXNrLCBjb3VudCkge1xuICAgICAgICAgICAgICAgIHZhciB6b25lRGVsZWdhdGVzID0gdGFzay5fem9uZURlbGVnYXRlcztcbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5fem9uZURlbGVnYXRlcyA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgem9uZURlbGVnYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB6b25lRGVsZWdhdGVzW2ldLl91cGRhdGVUYXNrQ291bnQodGFzay50eXBlLCBjb3VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBab25lO1xuICAgICAgICB9KCkpO1xuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cmVxdWlyZS1pbnRlcm5hbC13aXRoLXVuZGVyc2NvcmVcbiAgICAgICAgWm9uZS5fX3N5bWJvbF9fID0gX19zeW1ib2xfXztcbiAgICAgICAgdmFyIERFTEVHQVRFX1pTID0ge1xuICAgICAgICAgICAgbmFtZTogJycsXG4gICAgICAgICAgICBvbkhhc1Rhc2s6IGZ1bmN0aW9uIChkZWxlZ2F0ZSwgXywgdGFyZ2V0LCBoYXNUYXNrU3RhdGUpIHsgcmV0dXJuIGRlbGVnYXRlLmhhc1Rhc2sodGFyZ2V0LCBoYXNUYXNrU3RhdGUpOyB9LFxuICAgICAgICAgICAgb25TY2hlZHVsZVRhc2s6IGZ1bmN0aW9uIChkZWxlZ2F0ZSwgXywgdGFyZ2V0LCB0YXNrKSB7IHJldHVybiBkZWxlZ2F0ZS5zY2hlZHVsZVRhc2sodGFyZ2V0LCB0YXNrKTsgfSxcbiAgICAgICAgICAgIG9uSW52b2tlVGFzazogZnVuY3Rpb24gKGRlbGVnYXRlLCBfLCB0YXJnZXQsIHRhc2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzKSB7IHJldHVybiBkZWxlZ2F0ZS5pbnZva2VUYXNrKHRhcmdldCwgdGFzaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MpOyB9LFxuICAgICAgICAgICAgb25DYW5jZWxUYXNrOiBmdW5jdGlvbiAoZGVsZWdhdGUsIF8sIHRhcmdldCwgdGFzaykgeyByZXR1cm4gZGVsZWdhdGUuY2FuY2VsVGFzayh0YXJnZXQsIHRhc2spOyB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciBfWm9uZURlbGVnYXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gX1pvbmVEZWxlZ2F0ZSh6b25lLCBwYXJlbnREZWxlZ2F0ZSwgem9uZVNwZWMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90YXNrQ291bnRzID0geyAnbWljcm9UYXNrJzogMCwgJ21hY3JvVGFzayc6IDAsICdldmVudFRhc2snOiAwIH07XG4gICAgICAgICAgICAgICAgdGhpcy56b25lID0gem9uZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXJlbnREZWxlZ2F0ZSA9IHBhcmVudERlbGVnYXRlO1xuICAgICAgICAgICAgICAgIHRoaXMuX2ZvcmtaUyA9IHpvbmVTcGVjICYmICh6b25lU3BlYyAmJiB6b25lU3BlYy5vbkZvcmsgPyB6b25lU3BlYyA6IHBhcmVudERlbGVnYXRlLl9mb3JrWlMpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2ZvcmtEbGd0ID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uRm9yayA/IHBhcmVudERlbGVnYXRlIDogcGFyZW50RGVsZWdhdGUuX2ZvcmtEbGd0KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9mb3JrQ3VyclpvbmUgPVxuICAgICAgICAgICAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25Gb3JrID8gdGhpcy56b25lIDogcGFyZW50RGVsZWdhdGUuX2ZvcmtDdXJyWm9uZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5faW50ZXJjZXB0WlMgPVxuICAgICAgICAgICAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25JbnRlcmNlcHQgPyB6b25lU3BlYyA6IHBhcmVudERlbGVnYXRlLl9pbnRlcmNlcHRaUyk7XG4gICAgICAgICAgICAgICAgdGhpcy5faW50ZXJjZXB0RGxndCA9XG4gICAgICAgICAgICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludGVyY2VwdCA/IHBhcmVudERlbGVnYXRlIDogcGFyZW50RGVsZWdhdGUuX2ludGVyY2VwdERsZ3QpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2ludGVyY2VwdEN1cnJab25lID1cbiAgICAgICAgICAgICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSW50ZXJjZXB0ID8gdGhpcy56b25lIDogcGFyZW50RGVsZWdhdGUuX2ludGVyY2VwdEN1cnJab25lKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnZva2VaUyA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludm9rZSA/IHpvbmVTcGVjIDogcGFyZW50RGVsZWdhdGUuX2ludm9rZVpTKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnZva2VEbGd0ID1cbiAgICAgICAgICAgICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSW52b2tlID8gcGFyZW50RGVsZWdhdGUgOiBwYXJlbnREZWxlZ2F0ZS5faW52b2tlRGxndCk7XG4gICAgICAgICAgICAgICAgdGhpcy5faW52b2tlQ3VyclpvbmUgPVxuICAgICAgICAgICAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25JbnZva2UgPyB0aGlzLnpvbmUgOiBwYXJlbnREZWxlZ2F0ZS5faW52b2tlQ3VyclpvbmUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2hhbmRsZUVycm9yWlMgPVxuICAgICAgICAgICAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25IYW5kbGVFcnJvciA/IHpvbmVTcGVjIDogcGFyZW50RGVsZWdhdGUuX2hhbmRsZUVycm9yWlMpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2hhbmRsZUVycm9yRGxndCA9XG4gICAgICAgICAgICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkhhbmRsZUVycm9yID8gcGFyZW50RGVsZWdhdGUgOiBwYXJlbnREZWxlZ2F0ZS5faGFuZGxlRXJyb3JEbGd0KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVFcnJvckN1cnJab25lID1cbiAgICAgICAgICAgICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSGFuZGxlRXJyb3IgPyB0aGlzLnpvbmUgOiBwYXJlbnREZWxlZ2F0ZS5faGFuZGxlRXJyb3JDdXJyWm9uZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGVUYXNrWlMgPVxuICAgICAgICAgICAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25TY2hlZHVsZVRhc2sgPyB6b25lU3BlYyA6IHBhcmVudERlbGVnYXRlLl9zY2hlZHVsZVRhc2taUyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGVUYXNrRGxndCA9IHpvbmVTcGVjICYmXG4gICAgICAgICAgICAgICAgICAgICh6b25lU3BlYy5vblNjaGVkdWxlVGFzayA/IHBhcmVudERlbGVnYXRlIDogcGFyZW50RGVsZWdhdGUuX3NjaGVkdWxlVGFza0RsZ3QpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3NjaGVkdWxlVGFza0N1cnJab25lID1cbiAgICAgICAgICAgICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uU2NoZWR1bGVUYXNrID8gdGhpcy56b25lIDogcGFyZW50RGVsZWdhdGUuX3NjaGVkdWxlVGFza0N1cnJab25lKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnZva2VUYXNrWlMgPVxuICAgICAgICAgICAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25JbnZva2VUYXNrID8gem9uZVNwZWMgOiBwYXJlbnREZWxlZ2F0ZS5faW52b2tlVGFza1pTKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnZva2VUYXNrRGxndCA9XG4gICAgICAgICAgICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludm9rZVRhc2sgPyBwYXJlbnREZWxlZ2F0ZSA6IHBhcmVudERlbGVnYXRlLl9pbnZva2VUYXNrRGxndCk7XG4gICAgICAgICAgICAgICAgdGhpcy5faW52b2tlVGFza0N1cnJab25lID1cbiAgICAgICAgICAgICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSW52b2tlVGFzayA/IHRoaXMuem9uZSA6IHBhcmVudERlbGVnYXRlLl9pbnZva2VUYXNrQ3VyclpvbmUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhbmNlbFRhc2taUyA9XG4gICAgICAgICAgICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkNhbmNlbFRhc2sgPyB6b25lU3BlYyA6IHBhcmVudERlbGVnYXRlLl9jYW5jZWxUYXNrWlMpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhbmNlbFRhc2tEbGd0ID1cbiAgICAgICAgICAgICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uQ2FuY2VsVGFzayA/IHBhcmVudERlbGVnYXRlIDogcGFyZW50RGVsZWdhdGUuX2NhbmNlbFRhc2tEbGd0KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYW5jZWxUYXNrQ3VyclpvbmUgPVxuICAgICAgICAgICAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25DYW5jZWxUYXNrID8gdGhpcy56b25lIDogcGFyZW50RGVsZWdhdGUuX2NhbmNlbFRhc2tDdXJyWm9uZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5faGFzVGFza1pTID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLl9oYXNUYXNrRGxndCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5faGFzVGFza0RsZ3RPd25lciA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5faGFzVGFza0N1cnJab25lID0gbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgem9uZVNwZWNIYXNUYXNrID0gem9uZVNwZWMgJiYgem9uZVNwZWMub25IYXNUYXNrO1xuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRIYXNUYXNrID0gcGFyZW50RGVsZWdhdGUgJiYgcGFyZW50RGVsZWdhdGUuX2hhc1Rhc2taUztcbiAgICAgICAgICAgICAgICBpZiAoem9uZVNwZWNIYXNUYXNrIHx8IHBhcmVudEhhc1Rhc2spIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgbmVlZCB0byByZXBvcnQgaGFzVGFzaywgdGhhbiB0aGlzIFpTIG5lZWRzIHRvIGRvIHJlZiBjb3VudGluZyBvbiB0YXNrcy4gSW4gc3VjaFxuICAgICAgICAgICAgICAgICAgICAvLyBhIGNhc2UgYWxsIHRhc2sgcmVsYXRlZCBpbnRlcmNlcHRvcnMgbXVzdCBnbyB0aHJvdWdoIHRoaXMgWkQuIFdlIGNhbid0IHNob3J0IGNpcmN1aXQgaXQuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2hhc1Rhc2taUyA9IHpvbmVTcGVjSGFzVGFzayA/IHpvbmVTcGVjIDogREVMRUdBVEVfWlM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2hhc1Rhc2tEbGd0ID0gcGFyZW50RGVsZWdhdGU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2hhc1Rhc2tEbGd0T3duZXIgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9oYXNUYXNrQ3VyclpvbmUgPSB6b25lO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXpvbmVTcGVjLm9uU2NoZWR1bGVUYXNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY2hlZHVsZVRhc2taUyA9IERFTEVHQVRFX1pTO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGVUYXNrRGxndCA9IHBhcmVudERlbGVnYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGVUYXNrQ3VyclpvbmUgPSB0aGlzLnpvbmU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF6b25lU3BlYy5vbkludm9rZVRhc2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2ludm9rZVRhc2taUyA9IERFTEVHQVRFX1pTO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faW52b2tlVGFza0RsZ3QgPSBwYXJlbnREZWxlZ2F0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2ludm9rZVRhc2tDdXJyWm9uZSA9IHRoaXMuem9uZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXpvbmVTcGVjLm9uQ2FuY2VsVGFzaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FuY2VsVGFza1pTID0gREVMRUdBVEVfWlM7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYW5jZWxUYXNrRGxndCA9IHBhcmVudERlbGVnYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FuY2VsVGFza0N1cnJab25lID0gdGhpcy56b25lO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX1pvbmVEZWxlZ2F0ZS5wcm90b3R5cGUuZm9yayA9IGZ1bmN0aW9uICh0YXJnZXRab25lLCB6b25lU3BlYykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9mb3JrWlMgPyB0aGlzLl9mb3JrWlMub25Gb3JrKHRoaXMuX2ZvcmtEbGd0LCB0aGlzLnpvbmUsIHRhcmdldFpvbmUsIHpvbmVTcGVjKSA6XG4gICAgICAgICAgICAgICAgICAgIG5ldyBab25lKHRhcmdldFpvbmUsIHpvbmVTcGVjKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfWm9uZURlbGVnYXRlLnByb3RvdHlwZS5pbnRlcmNlcHQgPSBmdW5jdGlvbiAodGFyZ2V0Wm9uZSwgY2FsbGJhY2ssIHNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbnRlcmNlcHRaUyA/XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2ludGVyY2VwdFpTLm9uSW50ZXJjZXB0KHRoaXMuX2ludGVyY2VwdERsZ3QsIHRoaXMuX2ludGVyY2VwdEN1cnJab25lLCB0YXJnZXRab25lLCBjYWxsYmFjaywgc291cmNlKSA6XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF9ab25lRGVsZWdhdGUucHJvdG90eXBlLmludm9rZSA9IGZ1bmN0aW9uICh0YXJnZXRab25lLCBjYWxsYmFjaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MsIHNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbnZva2VaUyA/IHRoaXMuX2ludm9rZVpTLm9uSW52b2tlKHRoaXMuX2ludm9rZURsZ3QsIHRoaXMuX2ludm9rZUN1cnJab25lLCB0YXJnZXRab25lLCBjYWxsYmFjaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MsIHNvdXJjZSkgOlxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShhcHBseVRoaXMsIGFwcGx5QXJncyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX1pvbmVEZWxlZ2F0ZS5wcm90b3R5cGUuaGFuZGxlRXJyb3IgPSBmdW5jdGlvbiAodGFyZ2V0Wm9uZSwgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faGFuZGxlRXJyb3JaUyA/XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2hhbmRsZUVycm9yWlMub25IYW5kbGVFcnJvcih0aGlzLl9oYW5kbGVFcnJvckRsZ3QsIHRoaXMuX2hhbmRsZUVycm9yQ3VyclpvbmUsIHRhcmdldFpvbmUsIGVycm9yKSA6XG4gICAgICAgICAgICAgICAgICAgIHRydWU7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX1pvbmVEZWxlZ2F0ZS5wcm90b3R5cGUuc2NoZWR1bGVUYXNrID0gZnVuY3Rpb24gKHRhcmdldFpvbmUsIHRhc2spIHtcbiAgICAgICAgICAgICAgICB2YXIgcmV0dXJuVGFzayA9IHRhc2s7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NjaGVkdWxlVGFza1pTKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9oYXNUYXNrWlMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblRhc2suX3pvbmVEZWxlZ2F0ZXMucHVzaCh0aGlzLl9oYXNUYXNrRGxndE93bmVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBjbGFuZy1mb3JtYXQgb2ZmXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblRhc2sgPSB0aGlzLl9zY2hlZHVsZVRhc2taUy5vblNjaGVkdWxlVGFzayh0aGlzLl9zY2hlZHVsZVRhc2tEbGd0LCB0aGlzLl9zY2hlZHVsZVRhc2tDdXJyWm9uZSwgdGFyZ2V0Wm9uZSwgdGFzayk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNsYW5nLWZvcm1hdCBvblxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJldHVyblRhc2spXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5UYXNrID0gdGFzaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXNrLnNjaGVkdWxlRm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suc2NoZWR1bGVGbih0YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0YXNrLnR5cGUgPT0gbWljcm9UYXNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZU1pY3JvVGFzayh0YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGFzayBpcyBtaXNzaW5nIHNjaGVkdWxlRm4uJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldHVyblRhc2s7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgX1pvbmVEZWxlZ2F0ZS5wcm90b3R5cGUuaW52b2tlVGFzayA9IGZ1bmN0aW9uICh0YXJnZXRab25lLCB0YXNrLCBhcHBseVRoaXMsIGFwcGx5QXJncykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbnZva2VUYXNrWlMgPyB0aGlzLl9pbnZva2VUYXNrWlMub25JbnZva2VUYXNrKHRoaXMuX2ludm9rZVRhc2tEbGd0LCB0aGlzLl9pbnZva2VUYXNrQ3VyclpvbmUsIHRhcmdldFpvbmUsIHRhc2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzKSA6XG4gICAgICAgICAgICAgICAgICAgIHRhc2suY2FsbGJhY2suYXBwbHkoYXBwbHlUaGlzLCBhcHBseUFyZ3MpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF9ab25lRGVsZWdhdGUucHJvdG90eXBlLmNhbmNlbFRhc2sgPSBmdW5jdGlvbiAodGFyZ2V0Wm9uZSwgdGFzaykge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fY2FuY2VsVGFza1pTKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5fY2FuY2VsVGFza1pTLm9uQ2FuY2VsVGFzayh0aGlzLl9jYW5jZWxUYXNrRGxndCwgdGhpcy5fY2FuY2VsVGFza0N1cnJab25lLCB0YXJnZXRab25lLCB0YXNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFzay5jYW5jZWxGbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ1Rhc2sgaXMgbm90IGNhbmNlbGFibGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRhc2suY2FuY2VsRm4odGFzayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfWm9uZURlbGVnYXRlLnByb3RvdHlwZS5oYXNUYXNrID0gZnVuY3Rpb24gKHRhcmdldFpvbmUsIGlzRW1wdHkpIHtcbiAgICAgICAgICAgICAgICAvLyBoYXNUYXNrIHNob3VsZCBub3QgdGhyb3cgZXJyb3Igc28gb3RoZXIgWm9uZURlbGVnYXRlXG4gICAgICAgICAgICAgICAgLy8gY2FuIHN0aWxsIHRyaWdnZXIgaGFzVGFzayBjYWxsYmFja1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2hhc1Rhc2taUyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faGFzVGFza1pTLm9uSGFzVGFzayh0aGlzLl9oYXNUYXNrRGxndCwgdGhpcy5faGFzVGFza0N1cnJab25lLCB0YXJnZXRab25lLCBpc0VtcHR5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHRhcmdldFpvbmUsIGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpyZXF1aXJlLWludGVybmFsLXdpdGgtdW5kZXJzY29yZVxuICAgICAgICAgICAgX1pvbmVEZWxlZ2F0ZS5wcm90b3R5cGUuX3VwZGF0ZVRhc2tDb3VudCA9IGZ1bmN0aW9uICh0eXBlLCBjb3VudCkge1xuICAgICAgICAgICAgICAgIHZhciBjb3VudHMgPSB0aGlzLl90YXNrQ291bnRzO1xuICAgICAgICAgICAgICAgIHZhciBwcmV2ID0gY291bnRzW3R5cGVdO1xuICAgICAgICAgICAgICAgIHZhciBuZXh0ID0gY291bnRzW3R5cGVdID0gcHJldiArIGNvdW50O1xuICAgICAgICAgICAgICAgIGlmIChuZXh0IDwgMCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vcmUgdGFza3MgZXhlY3V0ZWQgdGhlbiB3ZXJlIHNjaGVkdWxlZC4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHByZXYgPT0gMCB8fCBuZXh0ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzRW1wdHkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaWNyb1Rhc2s6IGNvdW50c1snbWljcm9UYXNrJ10gPiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFjcm9UYXNrOiBjb3VudHNbJ21hY3JvVGFzayddID4gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VGFzazogY291bnRzWydldmVudFRhc2snXSA+IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2U6IHR5cGVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNUYXNrKHRoaXMuem9uZSwgaXNFbXB0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBfWm9uZURlbGVnYXRlO1xuICAgICAgICB9KCkpO1xuICAgICAgICB2YXIgWm9uZVRhc2sgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBab25lVGFzayh0eXBlLCBzb3VyY2UsIGNhbGxiYWNrLCBvcHRpb25zLCBzY2hlZHVsZUZuLCBjYW5jZWxGbikge1xuICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpyZXF1aXJlLWludGVybmFsLXdpdGgtdW5kZXJzY29yZVxuICAgICAgICAgICAgICAgIHRoaXMuX3pvbmUgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMucnVuQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpyZXF1aXJlLWludGVybmFsLXdpdGgtdW5kZXJzY29yZVxuICAgICAgICAgICAgICAgIHRoaXMuX3pvbmVEZWxlZ2F0ZXMgPSBudWxsO1xuICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpyZXF1aXJlLWludGVybmFsLXdpdGgtdW5kZXJzY29yZVxuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXRlID0gJ25vdFNjaGVkdWxlZCc7XG4gICAgICAgICAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSBvcHRpb25zO1xuICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVGbiA9IHNjaGVkdWxlRm47XG4gICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxGbiA9IGNhbmNlbEZuO1xuICAgICAgICAgICAgICAgIGlmICghY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjYWxsYmFjayBpcyBub3QgZGVmaW5lZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IEBKaWFMaVBhc3Npb24gb3B0aW9ucyBzaG91bGQgaGF2ZSBpbnRlcmZhY2VcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gZXZlbnRUYXNrICYmIG9wdGlvbnMgJiYgb3B0aW9ucy51c2VHKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW52b2tlID0gWm9uZVRhc2suaW52b2tlVGFzaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW52b2tlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFpvbmVUYXNrLmludm9rZVRhc2suY2FsbChnbG9iYWwsIHNlbGYsIHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgWm9uZVRhc2suaW52b2tlVGFzayA9IGZ1bmN0aW9uICh0YXNrLCB0YXJnZXQsIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRhc2spIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzayA9IHRoaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF9udW1iZXJPZk5lc3RlZFRhc2tGcmFtZXMrKztcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrLnJ1bkNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXNrLnpvbmUucnVuVGFzayh0YXNrLCB0YXJnZXQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9udW1iZXJPZk5lc3RlZFRhc2tGcmFtZXMgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJhaW5NaWNyb1Rhc2tRdWV1ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF9udW1iZXJPZk5lc3RlZFRhc2tGcmFtZXMtLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFpvbmVUYXNrLnByb3RvdHlwZSwgXCJ6b25lXCIsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3pvbmU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFpvbmVUYXNrLnByb3RvdHlwZSwgXCJzdGF0ZVwiLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGF0ZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBab25lVGFzay5wcm90b3R5cGUuY2FuY2VsU2NoZWR1bGVSZXF1ZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RyYW5zaXRpb25Ubyhub3RTY2hlZHVsZWQsIHNjaGVkdWxpbmcpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpyZXF1aXJlLWludGVybmFsLXdpdGgtdW5kZXJzY29yZVxuICAgICAgICAgICAgWm9uZVRhc2sucHJvdG90eXBlLl90cmFuc2l0aW9uVG8gPSBmdW5jdGlvbiAodG9TdGF0ZSwgZnJvbVN0YXRlMSwgZnJvbVN0YXRlMikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gZnJvbVN0YXRlMSB8fCB0aGlzLl9zdGF0ZSA9PT0gZnJvbVN0YXRlMikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdGF0ZSA9IHRvU3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b1N0YXRlID09IG5vdFNjaGVkdWxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fem9uZURlbGVnYXRlcyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlwiLmNvbmNhdCh0aGlzLnR5cGUsIFwiICdcIikuY29uY2F0KHRoaXMuc291cmNlLCBcIic6IGNhbiBub3QgdHJhbnNpdGlvbiB0byAnXCIpLmNvbmNhdCh0b1N0YXRlLCBcIicsIGV4cGVjdGluZyBzdGF0ZSAnXCIpLmNvbmNhdChmcm9tU3RhdGUxLCBcIidcIikuY29uY2F0KGZyb21TdGF0ZTIgPyAnIG9yIFxcJycgKyBmcm9tU3RhdGUyICsgJ1xcJycgOiAnJywgXCIsIHdhcyAnXCIpLmNvbmNhdCh0aGlzLl9zdGF0ZSwgXCInLlwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFpvbmVUYXNrLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhICYmIHR5cGVvZiB0aGlzLmRhdGEuaGFuZGxlSWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEuaGFuZGxlSWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIGFkZCB0b0pTT04gbWV0aG9kIHRvIHByZXZlbnQgY3ljbGljIGVycm9yIHdoZW5cbiAgICAgICAgICAgIC8vIGNhbGwgSlNPTi5zdHJpbmdpZnkoem9uZVRhc2spXG4gICAgICAgICAgICBab25lVGFzay5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogdGhpcy5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIHpvbmU6IHRoaXMuem9uZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBydW5Db3VudDogdGhpcy5ydW5Db3VudFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIFpvbmVUYXNrO1xuICAgICAgICB9KCkpO1xuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgIC8vLyAgTUlDUk9UQVNLIFFVRVVFXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgdmFyIHN5bWJvbFNldFRpbWVvdXQgPSBfX3N5bWJvbF9fKCdzZXRUaW1lb3V0Jyk7XG4gICAgICAgIHZhciBzeW1ib2xQcm9taXNlID0gX19zeW1ib2xfXygnUHJvbWlzZScpO1xuICAgICAgICB2YXIgc3ltYm9sVGhlbiA9IF9fc3ltYm9sX18oJ3RoZW4nKTtcbiAgICAgICAgdmFyIF9taWNyb1Rhc2tRdWV1ZSA9IFtdO1xuICAgICAgICB2YXIgX2lzRHJhaW5pbmdNaWNyb3Rhc2tRdWV1ZSA9IGZhbHNlO1xuICAgICAgICB2YXIgbmF0aXZlTWljcm9UYXNrUXVldWVQcm9taXNlO1xuICAgICAgICBmdW5jdGlvbiBuYXRpdmVTY2hlZHVsZU1pY3JvVGFzayhmdW5jKSB7XG4gICAgICAgICAgICBpZiAoIW5hdGl2ZU1pY3JvVGFza1F1ZXVlUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIGlmIChnbG9iYWxbc3ltYm9sUHJvbWlzZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgbmF0aXZlTWljcm9UYXNrUXVldWVQcm9taXNlID0gZ2xvYmFsW3N5bWJvbFByb21pc2VdLnJlc29sdmUoMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5hdGl2ZU1pY3JvVGFza1F1ZXVlUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHZhciBuYXRpdmVUaGVuID0gbmF0aXZlTWljcm9UYXNrUXVldWVQcm9taXNlW3N5bWJvbFRoZW5dO1xuICAgICAgICAgICAgICAgIGlmICghbmF0aXZlVGhlbikge1xuICAgICAgICAgICAgICAgICAgICAvLyBuYXRpdmUgUHJvbWlzZSBpcyBub3QgcGF0Y2hhYmxlLCB3ZSBuZWVkIHRvIHVzZSBgdGhlbmAgZGlyZWN0bHlcbiAgICAgICAgICAgICAgICAgICAgLy8gaXNzdWUgMTA3OFxuICAgICAgICAgICAgICAgICAgICBuYXRpdmVUaGVuID0gbmF0aXZlTWljcm9UYXNrUXVldWVQcm9taXNlWyd0aGVuJ107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5hdGl2ZVRoZW4uY2FsbChuYXRpdmVNaWNyb1Rhc2tRdWV1ZVByb21pc2UsIGZ1bmMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsW3N5bWJvbFNldFRpbWVvdXRdKGZ1bmMsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWljcm9UYXNrKHRhc2spIHtcbiAgICAgICAgICAgIC8vIGlmIHdlIGFyZSBub3QgcnVubmluZyBpbiBhbnkgdGFzaywgYW5kIHRoZXJlIGhhcyBub3QgYmVlbiBhbnl0aGluZyBzY2hlZHVsZWRcbiAgICAgICAgICAgIC8vIHdlIG11c3QgYm9vdHN0cmFwIHRoZSBpbml0aWFsIHRhc2sgY3JlYXRpb24gYnkgbWFudWFsbHkgc2NoZWR1bGluZyB0aGUgZHJhaW5cbiAgICAgICAgICAgIGlmIChfbnVtYmVyT2ZOZXN0ZWRUYXNrRnJhbWVzID09PSAwICYmIF9taWNyb1Rhc2tRdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBhcmUgbm90IHJ1bm5pbmcgaW4gVGFzaywgc28gd2UgbmVlZCB0byBraWNrc3RhcnQgdGhlIG1pY3JvdGFzayBxdWV1ZS5cbiAgICAgICAgICAgICAgICBuYXRpdmVTY2hlZHVsZU1pY3JvVGFzayhkcmFpbk1pY3JvVGFza1F1ZXVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhc2sgJiYgX21pY3JvVGFza1F1ZXVlLnB1c2godGFzayk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZHJhaW5NaWNyb1Rhc2tRdWV1ZSgpIHtcbiAgICAgICAgICAgIGlmICghX2lzRHJhaW5pbmdNaWNyb3Rhc2tRdWV1ZSkge1xuICAgICAgICAgICAgICAgIF9pc0RyYWluaW5nTWljcm90YXNrUXVldWUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHdoaWxlIChfbWljcm9UYXNrUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBxdWV1ZSA9IF9taWNyb1Rhc2tRdWV1ZTtcbiAgICAgICAgICAgICAgICAgICAgX21pY3JvVGFza1F1ZXVlID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXNrID0gcXVldWVbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suem9uZS5ydW5UYXNrKHRhc2ssIG51bGwsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FwaS5vblVuaGFuZGxlZEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfYXBpLm1pY3JvdGFza0RyYWluRG9uZSgpO1xuICAgICAgICAgICAgICAgIF9pc0RyYWluaW5nTWljcm90YXNrUXVldWUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgIC8vLyAgQk9PVFNUUkFQXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgdmFyIE5PX1pPTkUgPSB7IG5hbWU6ICdOTyBaT05FJyB9O1xuICAgICAgICB2YXIgbm90U2NoZWR1bGVkID0gJ25vdFNjaGVkdWxlZCcsIHNjaGVkdWxpbmcgPSAnc2NoZWR1bGluZycsIHNjaGVkdWxlZCA9ICdzY2hlZHVsZWQnLCBydW5uaW5nID0gJ3J1bm5pbmcnLCBjYW5jZWxpbmcgPSAnY2FuY2VsaW5nJywgdW5rbm93biA9ICd1bmtub3duJztcbiAgICAgICAgdmFyIG1pY3JvVGFzayA9ICdtaWNyb1Rhc2snLCBtYWNyb1Rhc2sgPSAnbWFjcm9UYXNrJywgZXZlbnRUYXNrID0gJ2V2ZW50VGFzayc7XG4gICAgICAgIHZhciBwYXRjaGVzID0ge307XG4gICAgICAgIHZhciBfYXBpID0ge1xuICAgICAgICAgICAgc3ltYm9sOiBfX3N5bWJvbF9fLFxuICAgICAgICAgICAgY3VycmVudFpvbmVGcmFtZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gX2N1cnJlbnRab25lRnJhbWU7IH0sXG4gICAgICAgICAgICBvblVuaGFuZGxlZEVycm9yOiBub29wLFxuICAgICAgICAgICAgbWljcm90YXNrRHJhaW5Eb25lOiBub29wLFxuICAgICAgICAgICAgc2NoZWR1bGVNaWNyb1Rhc2s6IHNjaGVkdWxlTWljcm9UYXNrLFxuICAgICAgICAgICAgc2hvd1VuY2F1Z2h0RXJyb3I6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICFab25lW19fc3ltYm9sX18oJ2lnbm9yZUNvbnNvbGVFcnJvclVuY2F1Z2h0RXJyb3InKV07IH0sXG4gICAgICAgICAgICBwYXRjaEV2ZW50VGFyZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBbXTsgfSxcbiAgICAgICAgICAgIHBhdGNoT25Qcm9wZXJ0aWVzOiBub29wLFxuICAgICAgICAgICAgcGF0Y2hNZXRob2Q6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5vb3A7IH0sXG4gICAgICAgICAgICBiaW5kQXJndW1lbnRzOiBmdW5jdGlvbiAoKSB7IHJldHVybiBbXTsgfSxcbiAgICAgICAgICAgIHBhdGNoVGhlbjogZnVuY3Rpb24gKCkgeyByZXR1cm4gbm9vcDsgfSxcbiAgICAgICAgICAgIHBhdGNoTWFjcm9UYXNrOiBmdW5jdGlvbiAoKSB7IHJldHVybiBub29wOyB9LFxuICAgICAgICAgICAgcGF0Y2hFdmVudFByb3RvdHlwZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gbm9vcDsgfSxcbiAgICAgICAgICAgIGlzSUVPckVkZ2U6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlOyB9LFxuICAgICAgICAgICAgZ2V0R2xvYmFsT2JqZWN0czogZnVuY3Rpb24gKCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9LFxuICAgICAgICAgICAgT2JqZWN0RGVmaW5lUHJvcGVydHk6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5vb3A7IH0sXG4gICAgICAgICAgICBPYmplY3RHZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSxcbiAgICAgICAgICAgIE9iamVjdENyZWF0ZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9LFxuICAgICAgICAgICAgQXJyYXlTbGljZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gW107IH0sXG4gICAgICAgICAgICBwYXRjaENsYXNzOiBmdW5jdGlvbiAoKSB7IHJldHVybiBub29wOyB9LFxuICAgICAgICAgICAgd3JhcFdpdGhDdXJyZW50Wm9uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gbm9vcDsgfSxcbiAgICAgICAgICAgIGZpbHRlclByb3BlcnRpZXM6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtdOyB9LFxuICAgICAgICAgICAgYXR0YWNoT3JpZ2luVG9QYXRjaGVkOiBmdW5jdGlvbiAoKSB7IHJldHVybiBub29wOyB9LFxuICAgICAgICAgICAgX3JlZGVmaW5lUHJvcGVydHk6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5vb3A7IH0sXG4gICAgICAgICAgICBwYXRjaENhbGxiYWNrczogZnVuY3Rpb24gKCkgeyByZXR1cm4gbm9vcDsgfSxcbiAgICAgICAgICAgIG5hdGl2ZVNjaGVkdWxlTWljcm9UYXNrOiBuYXRpdmVTY2hlZHVsZU1pY3JvVGFza1xuICAgICAgICB9O1xuICAgICAgICB2YXIgX2N1cnJlbnRab25lRnJhbWUgPSB7IHBhcmVudDogbnVsbCwgem9uZTogbmV3IFpvbmUobnVsbCwgbnVsbCkgfTtcbiAgICAgICAgdmFyIF9jdXJyZW50VGFzayA9IG51bGw7XG4gICAgICAgIHZhciBfbnVtYmVyT2ZOZXN0ZWRUYXNrRnJhbWVzID0gMDtcbiAgICAgICAgZnVuY3Rpb24gbm9vcCgpIHsgfVxuICAgICAgICBwZXJmb3JtYW5jZU1lYXN1cmUoJ1pvbmUnLCAnWm9uZScpO1xuICAgICAgICByZXR1cm4gZ2xvYmFsWydab25lJ10gPSBab25lO1xuICAgIH0pKSh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cgfHwgdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmIHNlbGYgfHwgZ2xvYmFsKTtcbiAgICAvKipcbiAgICAgKiBAbGljZW5zZVxuICAgICAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gICAgICpcbiAgICAgKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICAgICAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBTdXBwcmVzcyBjbG9zdXJlIGNvbXBpbGVyIGVycm9ycyBhYm91dCB1bmtub3duICdab25lJyB2YXJpYWJsZVxuICAgICAqIEBmaWxlb3ZlcnZpZXdcbiAgICAgKiBAc3VwcHJlc3Mge3VuZGVmaW5lZFZhcnMsZ2xvYmFsVGhpcyxtaXNzaW5nUmVxdWlyZX1cbiAgICAgKi9cbiAgICAvLy8gPHJlZmVyZW5jZSB0eXBlcz1cIm5vZGVcIi8+XG4gICAgLy8gaXNzdWUgIzk4OSwgdG8gcmVkdWNlIGJ1bmRsZSBzaXplLCB1c2Ugc2hvcnQgbmFtZVxuICAgIC8qKiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yICovXG4gICAgdmFyIE9iamVjdEdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG4gICAgLyoqIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAqL1xuICAgIHZhciBPYmplY3REZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbiAgICAvKiogT2JqZWN0LmdldFByb3RvdHlwZU9mICovXG4gICAgdmFyIE9iamVjdEdldFByb3RvdHlwZU9mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuICAgIC8qKiBPYmplY3QuY3JlYXRlICovXG4gICAgdmFyIE9iamVjdENyZWF0ZSA9IE9iamVjdC5jcmVhdGU7XG4gICAgLyoqIEFycmF5LnByb3RvdHlwZS5zbGljZSAqL1xuICAgIHZhciBBcnJheVNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xuICAgIC8qKiBhZGRFdmVudExpc3RlbmVyIHN0cmluZyBjb25zdCAqL1xuICAgIHZhciBBRERfRVZFTlRfTElTVEVORVJfU1RSID0gJ2FkZEV2ZW50TGlzdGVuZXInO1xuICAgIC8qKiByZW1vdmVFdmVudExpc3RlbmVyIHN0cmluZyBjb25zdCAqL1xuICAgIHZhciBSRU1PVkVfRVZFTlRfTElTVEVORVJfU1RSID0gJ3JlbW92ZUV2ZW50TGlzdGVuZXInO1xuICAgIC8qKiB6b25lU3ltYm9sIGFkZEV2ZW50TGlzdGVuZXIgKi9cbiAgICB2YXIgWk9ORV9TWU1CT0xfQUREX0VWRU5UX0xJU1RFTkVSID0gWm9uZS5fX3N5bWJvbF9fKEFERF9FVkVOVF9MSVNURU5FUl9TVFIpO1xuICAgIC8qKiB6b25lU3ltYm9sIHJlbW92ZUV2ZW50TGlzdGVuZXIgKi9cbiAgICB2YXIgWk9ORV9TWU1CT0xfUkVNT1ZFX0VWRU5UX0xJU1RFTkVSID0gWm9uZS5fX3N5bWJvbF9fKFJFTU9WRV9FVkVOVF9MSVNURU5FUl9TVFIpO1xuICAgIC8qKiB0cnVlIHN0cmluZyBjb25zdCAqL1xuICAgIHZhciBUUlVFX1NUUiA9ICd0cnVlJztcbiAgICAvKiogZmFsc2Ugc3RyaW5nIGNvbnN0ICovXG4gICAgdmFyIEZBTFNFX1NUUiA9ICdmYWxzZSc7XG4gICAgLyoqIFpvbmUgc3ltYm9sIHByZWZpeCBzdHJpbmcgY29uc3QuICovXG4gICAgdmFyIFpPTkVfU1lNQk9MX1BSRUZJWCA9IFpvbmUuX19zeW1ib2xfXygnJyk7XG4gICAgZnVuY3Rpb24gd3JhcFdpdGhDdXJyZW50Wm9uZShjYWxsYmFjaywgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBab25lLmN1cnJlbnQud3JhcChjYWxsYmFjaywgc291cmNlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNYWNyb1Rhc2tXaXRoQ3VycmVudFpvbmUoc291cmNlLCBjYWxsYmFjaywgZGF0YSwgY3VzdG9tU2NoZWR1bGUsIGN1c3RvbUNhbmNlbCkge1xuICAgICAgICByZXR1cm4gWm9uZS5jdXJyZW50LnNjaGVkdWxlTWFjcm9UYXNrKHNvdXJjZSwgY2FsbGJhY2ssIGRhdGEsIGN1c3RvbVNjaGVkdWxlLCBjdXN0b21DYW5jZWwpO1xuICAgIH1cbiAgICB2YXIgem9uZVN5bWJvbCQxID0gWm9uZS5fX3N5bWJvbF9fO1xuICAgIHZhciBpc1dpbmRvd0V4aXN0cyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xuICAgIHZhciBpbnRlcm5hbFdpbmRvdyA9IGlzV2luZG93RXhpc3RzID8gd2luZG93IDogdW5kZWZpbmVkO1xuICAgIHZhciBfZ2xvYmFsID0gaXNXaW5kb3dFeGlzdHMgJiYgaW50ZXJuYWxXaW5kb3cgfHwgdHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGYgfHwgZ2xvYmFsO1xuICAgIHZhciBSRU1PVkVfQVRUUklCVVRFID0gJ3JlbW92ZUF0dHJpYnV0ZSc7XG4gICAgZnVuY3Rpb24gYmluZEFyZ3VtZW50cyhhcmdzLCBzb3VyY2UpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IGFyZ3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnc1tpXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGFyZ3NbaV0gPSB3cmFwV2l0aEN1cnJlbnRab25lKGFyZ3NbaV0sIHNvdXJjZSArICdfJyArIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcmdzO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwYXRjaFByb3RvdHlwZShwcm90b3R5cGUsIGZuTmFtZXMpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHByb3RvdHlwZS5jb25zdHJ1Y3RvclsnbmFtZSddO1xuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICB2YXIgbmFtZV8xID0gZm5OYW1lc1tpXTtcbiAgICAgICAgICAgIHZhciBkZWxlZ2F0ZSA9IHByb3RvdHlwZVtuYW1lXzFdO1xuICAgICAgICAgICAgaWYgKGRlbGVnYXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3RvdHlwZURlc2MgPSBPYmplY3RHZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocHJvdG90eXBlLCBuYW1lXzEpO1xuICAgICAgICAgICAgICAgIGlmICghaXNQcm9wZXJ0eVdyaXRhYmxlKHByb3RvdHlwZURlc2MpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb3RvdHlwZVtuYW1lXzFdID0gKGZ1bmN0aW9uIChkZWxlZ2F0ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGF0Y2hlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZS5hcHBseSh0aGlzLCBiaW5kQXJndW1lbnRzKGFyZ3VtZW50cywgc291cmNlICsgJy4nICsgbmFtZV8xKSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGF0dGFjaE9yaWdpblRvUGF0Y2hlZChwYXRjaGVkLCBkZWxlZ2F0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXRjaGVkO1xuICAgICAgICAgICAgICAgIH0pKGRlbGVnYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmbk5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBfbG9vcF8xKGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzUHJvcGVydHlXcml0YWJsZShwcm9wZXJ0eURlc2MpIHtcbiAgICAgICAgaWYgKCFwcm9wZXJ0eURlc2MpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0eURlc2Mud3JpdGFibGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEodHlwZW9mIHByb3BlcnR5RGVzYy5nZXQgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHByb3BlcnR5RGVzYy5zZXQgPT09ICd1bmRlZmluZWQnKTtcbiAgICB9XG4gICAgdmFyIGlzV2ViV29ya2VyID0gKHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gJ3VuZGVmaW5lZCcgJiYgc2VsZiBpbnN0YW5jZW9mIFdvcmtlckdsb2JhbFNjb3BlKTtcbiAgICAvLyBNYWtlIHN1cmUgdG8gYWNjZXNzIGBwcm9jZXNzYCB0aHJvdWdoIGBfZ2xvYmFsYCBzbyB0aGF0IFdlYlBhY2sgZG9lcyBub3QgYWNjaWRlbnRhbGx5IGJyb3dzZXJpZnlcbiAgICAvLyB0aGlzIGNvZGUuXG4gICAgdmFyIGlzTm9kZSA9ICghKCdudycgaW4gX2dsb2JhbCkgJiYgdHlwZW9mIF9nbG9iYWwucHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAge30udG9TdHJpbmcuY2FsbChfZ2xvYmFsLnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpO1xuICAgIHZhciBpc0Jyb3dzZXIgPSAhaXNOb2RlICYmICFpc1dlYldvcmtlciAmJiAhIShpc1dpbmRvd0V4aXN0cyAmJiBpbnRlcm5hbFdpbmRvd1snSFRNTEVsZW1lbnQnXSk7XG4gICAgLy8gd2UgYXJlIGluIGVsZWN0cm9uIG9mIG53LCBzbyB3ZSBhcmUgYm90aCBicm93c2VyIGFuZCBub2RlanNcbiAgICAvLyBNYWtlIHN1cmUgdG8gYWNjZXNzIGBwcm9jZXNzYCB0aHJvdWdoIGBfZ2xvYmFsYCBzbyB0aGF0IFdlYlBhY2sgZG9lcyBub3QgYWNjaWRlbnRhbGx5IGJyb3dzZXJpZnlcbiAgICAvLyB0aGlzIGNvZGUuXG4gICAgdmFyIGlzTWl4ID0gdHlwZW9mIF9nbG9iYWwucHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAge30udG9TdHJpbmcuY2FsbChfZ2xvYmFsLnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScgJiYgIWlzV2ViV29ya2VyICYmXG4gICAgICAgICEhKGlzV2luZG93RXhpc3RzICYmIGludGVybmFsV2luZG93WydIVE1MRWxlbWVudCddKTtcbiAgICB2YXIgem9uZVN5bWJvbEV2ZW50TmFtZXMkMSA9IHt9O1xuICAgIHZhciB3cmFwRm4gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvem9uZS5qcy9pc3N1ZXMvOTExLCBpbiBJRSwgc29tZXRpbWVzXG4gICAgICAgIC8vIGV2ZW50IHdpbGwgYmUgdW5kZWZpbmVkLCBzbyB3ZSBuZWVkIHRvIHVzZSB3aW5kb3cuZXZlbnRcbiAgICAgICAgZXZlbnQgPSBldmVudCB8fCBfZ2xvYmFsLmV2ZW50O1xuICAgICAgICBpZiAoIWV2ZW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGV2ZW50TmFtZVN5bWJvbCA9IHpvbmVTeW1ib2xFdmVudE5hbWVzJDFbZXZlbnQudHlwZV07XG4gICAgICAgIGlmICghZXZlbnROYW1lU3ltYm9sKSB7XG4gICAgICAgICAgICBldmVudE5hbWVTeW1ib2wgPSB6b25lU3ltYm9sRXZlbnROYW1lcyQxW2V2ZW50LnR5cGVdID0gem9uZVN5bWJvbCQxKCdPTl9QUk9QRVJUWScgKyBldmVudC50eXBlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcyB8fCBldmVudC50YXJnZXQgfHwgX2dsb2JhbDtcbiAgICAgICAgdmFyIGxpc3RlbmVyID0gdGFyZ2V0W2V2ZW50TmFtZVN5bWJvbF07XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIGlmIChpc0Jyb3dzZXIgJiYgdGFyZ2V0ID09PSBpbnRlcm5hbFdpbmRvdyAmJiBldmVudC50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICAvLyB3aW5kb3cub25lcnJvciBoYXZlIGRpZmZlcmVudCBzaWduYXR1cmVcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9HbG9iYWxFdmVudEhhbmRsZXJzL29uZXJyb3Ijd2luZG93Lm9uZXJyb3JcbiAgICAgICAgICAgIC8vIGFuZCBvbmVycm9yIGNhbGxiYWNrIHdpbGwgcHJldmVudCBkZWZhdWx0IHdoZW4gY2FsbGJhY2sgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIHZhciBlcnJvckV2ZW50ID0gZXZlbnQ7XG4gICAgICAgICAgICByZXN1bHQgPSBsaXN0ZW5lciAmJlxuICAgICAgICAgICAgICAgIGxpc3RlbmVyLmNhbGwodGhpcywgZXJyb3JFdmVudC5tZXNzYWdlLCBlcnJvckV2ZW50LmZpbGVuYW1lLCBlcnJvckV2ZW50LmxpbmVubywgZXJyb3JFdmVudC5jb2xubywgZXJyb3JFdmVudC5lcnJvcik7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGxpc3RlbmVyICYmIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ICE9IHVuZGVmaW5lZCAmJiAhcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgZnVuY3Rpb24gcGF0Y2hQcm9wZXJ0eShvYmosIHByb3AsIHByb3RvdHlwZSkge1xuICAgICAgICB2YXIgZGVzYyA9IE9iamVjdEdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIHByb3ApO1xuICAgICAgICBpZiAoIWRlc2MgJiYgcHJvdG90eXBlKSB7XG4gICAgICAgICAgICAvLyB3aGVuIHBhdGNoIHdpbmRvdyBvYmplY3QsIHVzZSBwcm90b3R5cGUgdG8gY2hlY2sgcHJvcCBleGlzdCBvciBub3RcbiAgICAgICAgICAgIHZhciBwcm90b3R5cGVEZXNjID0gT2JqZWN0R2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvdHlwZSwgcHJvcCk7XG4gICAgICAgICAgICBpZiAocHJvdG90eXBlRGVzYykge1xuICAgICAgICAgICAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGlmIHRoZSBkZXNjcmlwdG9yIG5vdCBleGlzdHMgb3IgaXMgbm90IGNvbmZpZ3VyYWJsZVxuICAgICAgICAvLyBqdXN0IHJldHVyblxuICAgICAgICBpZiAoIWRlc2MgfHwgIWRlc2MuY29uZmlndXJhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9uUHJvcFBhdGNoZWRTeW1ib2wgPSB6b25lU3ltYm9sJDEoJ29uJyArIHByb3AgKyAncGF0Y2hlZCcpO1xuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KG9uUHJvcFBhdGNoZWRTeW1ib2wpICYmIG9ialtvblByb3BQYXRjaGVkU3ltYm9sXSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIEEgcHJvcGVydHkgZGVzY3JpcHRvciBjYW5ub3QgaGF2ZSBnZXR0ZXIvc2V0dGVyIGFuZCBiZSB3cml0YWJsZVxuICAgICAgICAvLyBkZWxldGluZyB0aGUgd3JpdGFibGUgYW5kIHZhbHVlIHByb3BlcnRpZXMgYXZvaWRzIHRoaXMgZXJyb3I6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIFR5cGVFcnJvcjogcHJvcGVydHkgZGVzY3JpcHRvcnMgbXVzdCBub3Qgc3BlY2lmeSBhIHZhbHVlIG9yIGJlIHdyaXRhYmxlIHdoZW4gYVxuICAgICAgICAvLyBnZXR0ZXIgb3Igc2V0dGVyIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgICAgICBkZWxldGUgZGVzYy53cml0YWJsZTtcbiAgICAgICAgZGVsZXRlIGRlc2MudmFsdWU7XG4gICAgICAgIHZhciBvcmlnaW5hbERlc2NHZXQgPSBkZXNjLmdldDtcbiAgICAgICAgdmFyIG9yaWdpbmFsRGVzY1NldCA9IGRlc2Muc2V0O1xuICAgICAgICAvLyBzbGljZSgyKSBjdXogJ29uY2xpY2snIC0+ICdjbGljaycsIGV0Y1xuICAgICAgICB2YXIgZXZlbnROYW1lID0gcHJvcC5zbGljZSgyKTtcbiAgICAgICAgdmFyIGV2ZW50TmFtZVN5bWJvbCA9IHpvbmVTeW1ib2xFdmVudE5hbWVzJDFbZXZlbnROYW1lXTtcbiAgICAgICAgaWYgKCFldmVudE5hbWVTeW1ib2wpIHtcbiAgICAgICAgICAgIGV2ZW50TmFtZVN5bWJvbCA9IHpvbmVTeW1ib2xFdmVudE5hbWVzJDFbZXZlbnROYW1lXSA9IHpvbmVTeW1ib2wkMSgnT05fUFJPUEVSVFknICsgZXZlbnROYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBkZXNjLnNldCA9IGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xuICAgICAgICAgICAgLy8gaW4gc29tZSBvZiB3aW5kb3dzJ3Mgb25wcm9wZXJ0eSBjYWxsYmFjaywgdGhpcyBpcyB1bmRlZmluZWRcbiAgICAgICAgICAgIC8vIHNvIHdlIG5lZWQgdG8gY2hlY2sgaXRcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQgJiYgb2JqID09PSBfZ2xvYmFsKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gX2dsb2JhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByZXZpb3VzVmFsdWUgPSB0YXJnZXRbZXZlbnROYW1lU3ltYm9sXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcHJldmlvdXNWYWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgd3JhcEZuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlzc3VlICM5NzgsIHdoZW4gb25sb2FkIGhhbmRsZXIgd2FzIGFkZGVkIGJlZm9yZSBsb2FkaW5nIHpvbmUuanNcbiAgICAgICAgICAgIC8vIHdlIHNob3VsZCByZW1vdmUgaXQgd2l0aCBvcmlnaW5hbERlc2NTZXRcbiAgICAgICAgICAgIG9yaWdpbmFsRGVzY1NldCAmJiBvcmlnaW5hbERlc2NTZXQuY2FsbCh0YXJnZXQsIG51bGwpO1xuICAgICAgICAgICAgdGFyZ2V0W2V2ZW50TmFtZVN5bWJvbF0gPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbmV3VmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHdyYXBGbiwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBUaGUgZ2V0dGVyIHdvdWxkIHJldHVybiB1bmRlZmluZWQgZm9yIHVuYXNzaWduZWQgcHJvcGVydGllcyBidXQgdGhlIGRlZmF1bHQgdmFsdWUgb2YgYW5cbiAgICAgICAgLy8gdW5hc3NpZ25lZCBwcm9wZXJ0eSBpcyBudWxsXG4gICAgICAgIGRlc2MuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gaW4gc29tZSBvZiB3aW5kb3dzJ3Mgb25wcm9wZXJ0eSBjYWxsYmFjaywgdGhpcyBpcyB1bmRlZmluZWRcbiAgICAgICAgICAgIC8vIHNvIHdlIG5lZWQgdG8gY2hlY2sgaXRcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQgJiYgb2JqID09PSBfZ2xvYmFsKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gX2dsb2JhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbGlzdGVuZXIgPSB0YXJnZXRbZXZlbnROYW1lU3ltYm9sXTtcbiAgICAgICAgICAgIGlmIChsaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9yaWdpbmFsRGVzY0dldCkge1xuICAgICAgICAgICAgICAgIC8vIHJlc3VsdCB3aWxsIGJlIG51bGwgd2hlbiB1c2UgaW5saW5lIGV2ZW50IGF0dHJpYnV0ZSxcbiAgICAgICAgICAgICAgICAvLyBzdWNoIGFzIDxidXR0b24gb25jbGljaz1cImZ1bmMoKTtcIj5PSzwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIC8vIGJlY2F1c2UgdGhlIG9uY2xpY2sgZnVuY3Rpb24gaXMgaW50ZXJuYWwgcmF3IHVuY29tcGlsZWQgaGFuZGxlclxuICAgICAgICAgICAgICAgIC8vIHRoZSBvbmNsaWNrIHdpbGwgYmUgZXZhbHVhdGVkIHdoZW4gZmlyc3QgdGltZSBldmVudCB3YXMgdHJpZ2dlcmVkIG9yXG4gICAgICAgICAgICAgICAgLy8gdGhlIHByb3BlcnR5IGlzIGFjY2Vzc2VkLCBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci96b25lLmpzL2lzc3Vlcy81MjVcbiAgICAgICAgICAgICAgICAvLyBzbyB3ZSBzaG91bGQgdXNlIG9yaWdpbmFsIG5hdGl2ZSBnZXQgdG8gcmV0cmlldmUgdGhlIGhhbmRsZXJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBvcmlnaW5hbERlc2NHZXQuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzYy5zZXQuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0W1JFTU9WRV9BVFRSSUJVVEVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKHByb3ApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgT2JqZWN0RGVmaW5lUHJvcGVydHkob2JqLCBwcm9wLCBkZXNjKTtcbiAgICAgICAgb2JqW29uUHJvcFBhdGNoZWRTeW1ib2xdID0gdHJ1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGF0Y2hPblByb3BlcnRpZXMob2JqLCBwcm9wZXJ0aWVzLCBwcm90b3R5cGUpIHtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHBhdGNoUHJvcGVydHkob2JqLCAnb24nICsgcHJvcGVydGllc1tpXSwgcHJvdG90eXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBvblByb3BlcnRpZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3Auc2xpY2UoMCwgMikgPT0gJ29uJykge1xuICAgICAgICAgICAgICAgICAgICBvblByb3BlcnRpZXMucHVzaChwcm9wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9uUHJvcGVydGllcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHBhdGNoUHJvcGVydHkob2JqLCBvblByb3BlcnRpZXNbal0sIHByb3RvdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIG9yaWdpbmFsSW5zdGFuY2VLZXkgPSB6b25lU3ltYm9sJDEoJ29yaWdpbmFsSW5zdGFuY2UnKTtcbiAgICAvLyB3cmFwIHNvbWUgbmF0aXZlIEFQSSBvbiBgd2luZG93YFxuICAgIGZ1bmN0aW9uIHBhdGNoQ2xhc3MoY2xhc3NOYW1lKSB7XG4gICAgICAgIHZhciBPcmlnaW5hbENsYXNzID0gX2dsb2JhbFtjbGFzc05hbWVdO1xuICAgICAgICBpZiAoIU9yaWdpbmFsQ2xhc3MpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIC8vIGtlZXAgb3JpZ2luYWwgY2xhc3MgaW4gZ2xvYmFsXG4gICAgICAgIF9nbG9iYWxbem9uZVN5bWJvbCQxKGNsYXNzTmFtZSldID0gT3JpZ2luYWxDbGFzcztcbiAgICAgICAgX2dsb2JhbFtjbGFzc05hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGEgPSBiaW5kQXJndW1lbnRzKGFyZ3VtZW50cywgY2xhc3NOYW1lKTtcbiAgICAgICAgICAgIHN3aXRjaCAoYS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbb3JpZ2luYWxJbnN0YW5jZUtleV0gPSBuZXcgT3JpZ2luYWxDbGFzcygpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbb3JpZ2luYWxJbnN0YW5jZUtleV0gPSBuZXcgT3JpZ2luYWxDbGFzcyhhWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICB0aGlzW29yaWdpbmFsSW5zdGFuY2VLZXldID0gbmV3IE9yaWdpbmFsQ2xhc3MoYVswXSwgYVsxXSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgdGhpc1tvcmlnaW5hbEluc3RhbmNlS2V5XSA9IG5ldyBPcmlnaW5hbENsYXNzKGFbMF0sIGFbMV0sIGFbMl0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbb3JpZ2luYWxJbnN0YW5jZUtleV0gPSBuZXcgT3JpZ2luYWxDbGFzcyhhWzBdLCBhWzFdLCBhWzJdLCBhWzNdKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBcmcgbGlzdCB0b28gbG9uZy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gYXR0YWNoIG9yaWdpbmFsIGRlbGVnYXRlIHRvIHBhdGNoZWQgZnVuY3Rpb25cbiAgICAgICAgYXR0YWNoT3JpZ2luVG9QYXRjaGVkKF9nbG9iYWxbY2xhc3NOYW1lXSwgT3JpZ2luYWxDbGFzcyk7XG4gICAgICAgIHZhciBpbnN0YW5jZSA9IG5ldyBPcmlnaW5hbENsYXNzKGZ1bmN0aW9uICgpIHsgfSk7XG4gICAgICAgIHZhciBwcm9wO1xuICAgICAgICBmb3IgKHByb3AgaW4gaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD00NDcyMVxuICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PT0gJ1hNTEh0dHBSZXF1ZXN0JyAmJiBwcm9wID09PSAncmVzcG9uc2VCbG9iJylcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaW5zdGFuY2VbcHJvcF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgX2dsb2JhbFtjbGFzc05hbWVdLnByb3RvdHlwZVtwcm9wXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzW29yaWdpbmFsSW5zdGFuY2VLZXldW3Byb3BdLmFwcGx5KHRoaXNbb3JpZ2luYWxJbnN0YW5jZUtleV0sIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3REZWZpbmVQcm9wZXJ0eShfZ2xvYmFsW2NsYXNzTmFtZV0ucHJvdG90eXBlLCBwcm9wLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1tvcmlnaW5hbEluc3RhbmNlS2V5XVtwcm9wXSA9IHdyYXBXaXRoQ3VycmVudFpvbmUoZm4sIGNsYXNzTmFtZSArICcuJyArIHByb3ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBrZWVwIGNhbGxiYWNrIGluIHdyYXBwZWQgZnVuY3Rpb24gc28gd2UgY2FuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZSBpdCBpbiBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgdG8gcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBuYXRpdmUgb25lLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRhY2hPcmlnaW5Ub1BhdGNoZWQodGhpc1tvcmlnaW5hbEluc3RhbmNlS2V5XVtwcm9wXSwgZm4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1tvcmlnaW5hbEluc3RhbmNlS2V5XVtwcm9wXSA9IGZuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1tvcmlnaW5hbEluc3RhbmNlS2V5XVtwcm9wXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfShwcm9wKSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChwcm9wIGluIE9yaWdpbmFsQ2xhc3MpIHtcbiAgICAgICAgICAgIGlmIChwcm9wICE9PSAncHJvdG90eXBlJyAmJiBPcmlnaW5hbENsYXNzLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICAgICAgICAgICAgX2dsb2JhbFtjbGFzc05hbWVdW3Byb3BdID0gT3JpZ2luYWxDbGFzc1twcm9wXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBwYXRjaE1ldGhvZCh0YXJnZXQsIG5hbWUsIHBhdGNoRm4pIHtcbiAgICAgICAgdmFyIHByb3RvID0gdGFyZ2V0O1xuICAgICAgICB3aGlsZSAocHJvdG8gJiYgIXByb3RvLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICBwcm90byA9IE9iamVjdEdldFByb3RvdHlwZU9mKHByb3RvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXByb3RvICYmIHRhcmdldFtuYW1lXSkge1xuICAgICAgICAgICAgLy8gc29tZWhvdyB3ZSBkaWQgbm90IGZpbmQgaXQsIGJ1dCB3ZSBjYW4gc2VlIGl0LiBUaGlzIGhhcHBlbnMgb24gSUUgZm9yIFdpbmRvdyBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgcHJvdG8gPSB0YXJnZXQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRlbGVnYXRlTmFtZSA9IHpvbmVTeW1ib2wkMShuYW1lKTtcbiAgICAgICAgdmFyIGRlbGVnYXRlID0gbnVsbDtcbiAgICAgICAgaWYgKHByb3RvICYmICghKGRlbGVnYXRlID0gcHJvdG9bZGVsZWdhdGVOYW1lXSkgfHwgIXByb3RvLmhhc093blByb3BlcnR5KGRlbGVnYXRlTmFtZSkpKSB7XG4gICAgICAgICAgICBkZWxlZ2F0ZSA9IHByb3RvW2RlbGVnYXRlTmFtZV0gPSBwcm90b1tuYW1lXTtcbiAgICAgICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgcHJvdG9bbmFtZV0gaXMgd3JpdGFibGVcbiAgICAgICAgICAgIC8vIHNvbWUgcHJvcGVydHkgaXMgcmVhZG9ubHkgaW4gc2FmYXJpLCBzdWNoIGFzIEh0bWxDYW52YXNFbGVtZW50LnByb3RvdHlwZS50b0Jsb2JcbiAgICAgICAgICAgIHZhciBkZXNjID0gcHJvdG8gJiYgT2JqZWN0R2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvLCBuYW1lKTtcbiAgICAgICAgICAgIGlmIChpc1Byb3BlcnR5V3JpdGFibGUoZGVzYykpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGF0Y2hEZWxlZ2F0ZV8xID0gcGF0Y2hGbihkZWxlZ2F0ZSwgZGVsZWdhdGVOYW1lLCBuYW1lKTtcbiAgICAgICAgICAgICAgICBwcm90b1tuYW1lXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhdGNoRGVsZWdhdGVfMSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYXR0YWNoT3JpZ2luVG9QYXRjaGVkKHByb3RvW25hbWVdLCBkZWxlZ2F0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlbGVnYXRlO1xuICAgIH1cbiAgICAvLyBUT0RPOiBASmlhTGlQYXNzaW9uLCBzdXBwb3J0IGNhbmNlbCB0YXNrIGxhdGVyIGlmIG5lY2Vzc2FyeVxuICAgIGZ1bmN0aW9uIHBhdGNoTWFjcm9UYXNrKG9iaiwgZnVuY05hbWUsIG1ldGFDcmVhdG9yKSB7XG4gICAgICAgIHZhciBzZXROYXRpdmUgPSBudWxsO1xuICAgICAgICBmdW5jdGlvbiBzY2hlZHVsZVRhc2sodGFzaykge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB0YXNrLmRhdGE7XG4gICAgICAgICAgICBkYXRhLmFyZ3NbZGF0YS5jYklkeF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGFzay5pbnZva2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzZXROYXRpdmUuYXBwbHkoZGF0YS50YXJnZXQsIGRhdGEuYXJncyk7XG4gICAgICAgICAgICByZXR1cm4gdGFzaztcbiAgICAgICAgfVxuICAgICAgICBzZXROYXRpdmUgPSBwYXRjaE1ldGhvZChvYmosIGZ1bmNOYW1lLCBmdW5jdGlvbiAoZGVsZWdhdGUpIHsgcmV0dXJuIGZ1bmN0aW9uIChzZWxmLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgbWV0YSA9IG1ldGFDcmVhdG9yKHNlbGYsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKG1ldGEuY2JJZHggPj0gMCAmJiB0eXBlb2YgYXJnc1ttZXRhLmNiSWR4XSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZU1hY3JvVGFza1dpdGhDdXJyZW50Wm9uZShtZXRhLm5hbWUsIGFyZ3NbbWV0YS5jYklkeF0sIG1ldGEsIHNjaGVkdWxlVGFzayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBjYXVzZSBhbiBlcnJvciBieSBjYWxsaW5nIGl0IGRpcmVjdGx5LlxuICAgICAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZS5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTsgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGF0dGFjaE9yaWdpblRvUGF0Y2hlZChwYXRjaGVkLCBvcmlnaW5hbCkge1xuICAgICAgICBwYXRjaGVkW3pvbmVTeW1ib2wkMSgnT3JpZ2luYWxEZWxlZ2F0ZScpXSA9IG9yaWdpbmFsO1xuICAgIH1cbiAgICB2YXIgaXNEZXRlY3RlZElFT3JFZGdlID0gZmFsc2U7XG4gICAgdmFyIGllT3JFZGdlID0gZmFsc2U7XG4gICAgZnVuY3Rpb24gaXNJRSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciB1YSA9IGludGVybmFsV2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ7XG4gICAgICAgICAgICBpZiAodWEuaW5kZXhPZignTVNJRSAnKSAhPT0gLTEgfHwgdWEuaW5kZXhPZignVHJpZGVudC8nKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzSUVPckVkZ2UoKSB7XG4gICAgICAgIGlmIChpc0RldGVjdGVkSUVPckVkZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiBpZU9yRWRnZTtcbiAgICAgICAgfVxuICAgICAgICBpc0RldGVjdGVkSUVPckVkZ2UgPSB0cnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHVhID0gaW50ZXJuYWxXaW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgICAgICAgICAgIGlmICh1YS5pbmRleE9mKCdNU0lFICcpICE9PSAtMSB8fCB1YS5pbmRleE9mKCdUcmlkZW50LycpICE9PSAtMSB8fCB1YS5pbmRleE9mKCdFZGdlLycpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGllT3JFZGdlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaWVPckVkZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBsaWNlbnNlXG4gICAgICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAgICAgKlxuICAgICAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gICAgICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICAgICAqL1xuICAgIFpvbmUuX19sb2FkX3BhdGNoKCdab25lQXdhcmVQcm9taXNlJywgZnVuY3Rpb24gKGdsb2JhbCwgWm9uZSwgYXBpKSB7XG4gICAgICAgIHZhciBPYmplY3RHZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuICAgICAgICB2YXIgT2JqZWN0RGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG4gICAgICAgIGZ1bmN0aW9uIHJlYWRhYmxlT2JqZWN0VG9TdHJpbmcob2JqKSB7XG4gICAgICAgICAgICBpZiAob2JqICYmIG9iai50b1N0cmluZyA9PT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZykge1xuICAgICAgICAgICAgICAgIHZhciBjbGFzc05hbWUgPSBvYmouY29uc3RydWN0b3IgJiYgb2JqLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChjbGFzc05hbWUgPyBjbGFzc05hbWUgOiAnJykgKyAnOiAnICsgSlNPTi5zdHJpbmdpZnkob2JqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvYmogPyBvYmoudG9TdHJpbmcoKSA6IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfX3N5bWJvbF9fID0gYXBpLnN5bWJvbDtcbiAgICAgICAgdmFyIF91bmNhdWdodFByb21pc2VFcnJvcnMgPSBbXTtcbiAgICAgICAgdmFyIGlzRGlzYWJsZVdyYXBwaW5nVW5jYXVnaHRQcm9taXNlUmVqZWN0aW9uID0gZ2xvYmFsW19fc3ltYm9sX18oJ0RJU0FCTEVfV1JBUFBJTkdfVU5DQVVHSFRfUFJPTUlTRV9SRUpFQ1RJT04nKV0gPT09IHRydWU7XG4gICAgICAgIHZhciBzeW1ib2xQcm9taXNlID0gX19zeW1ib2xfXygnUHJvbWlzZScpO1xuICAgICAgICB2YXIgc3ltYm9sVGhlbiA9IF9fc3ltYm9sX18oJ3RoZW4nKTtcbiAgICAgICAgdmFyIGNyZWF0aW9uVHJhY2UgPSAnX19jcmVhdGlvblRyYWNlX18nO1xuICAgICAgICBhcGkub25VbmhhbmRsZWRFcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoYXBpLnNob3dVbmNhdWdodEVycm9yKCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVqZWN0aW9uID0gZSAmJiBlLnJlamVjdGlvbjtcbiAgICAgICAgICAgICAgICBpZiAocmVqZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuaGFuZGxlZCBQcm9taXNlIHJlamVjdGlvbjonLCByZWplY3Rpb24gaW5zdGFuY2VvZiBFcnJvciA/IHJlamVjdGlvbi5tZXNzYWdlIDogcmVqZWN0aW9uLCAnOyBab25lOicsIGUuem9uZS5uYW1lLCAnOyBUYXNrOicsIGUudGFzayAmJiBlLnRhc2suc291cmNlLCAnOyBWYWx1ZTonLCByZWplY3Rpb24sIHJlamVjdGlvbiBpbnN0YW5jZW9mIEVycm9yID8gcmVqZWN0aW9uLnN0YWNrIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBhcGkubWljcm90YXNrRHJhaW5Eb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9sb29wXzIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVuY2F1Z2h0UHJvbWlzZUVycm9yID0gX3VuY2F1Z2h0UHJvbWlzZUVycm9ycy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHVuY2F1Z2h0UHJvbWlzZUVycm9yLnpvbmUucnVuR3VhcmRlZChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodW5jYXVnaHRQcm9taXNlRXJyb3IudGhyb3dPcmlnaW5hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHVuY2F1Z2h0UHJvbWlzZUVycm9yLnJlamVjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHVuY2F1Z2h0UHJvbWlzZUVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZVVuaGFuZGxlZFJlamVjdGlvbihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHdoaWxlIChfdW5jYXVnaHRQcm9taXNlRXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIF9sb29wXzIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdmFyIFVOSEFORExFRF9QUk9NSVNFX1JFSkVDVElPTl9IQU5ETEVSX1NZTUJPTCA9IF9fc3ltYm9sX18oJ3VuaGFuZGxlZFByb21pc2VSZWplY3Rpb25IYW5kbGVyJyk7XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVVuaGFuZGxlZFJlamVjdGlvbihlKSB7XG4gICAgICAgICAgICBhcGkub25VbmhhbmRsZWRFcnJvcihlKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBab25lW1VOSEFORExFRF9QUk9NSVNFX1JFSkVDVElPTl9IQU5ETEVSX1NZTUJPTF07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaXNUaGVuYWJsZSh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlICYmIHZhbHVlLnRoZW47XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZm9yd2FyZFJlc29sdXRpb24odmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBmb3J3YXJkUmVqZWN0aW9uKHJlamVjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIFpvbmVBd2FyZVByb21pc2UucmVqZWN0KHJlamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN5bWJvbFN0YXRlID0gX19zeW1ib2xfXygnc3RhdGUnKTtcbiAgICAgICAgdmFyIHN5bWJvbFZhbHVlID0gX19zeW1ib2xfXygndmFsdWUnKTtcbiAgICAgICAgdmFyIHN5bWJvbEZpbmFsbHkgPSBfX3N5bWJvbF9fKCdmaW5hbGx5Jyk7XG4gICAgICAgIHZhciBzeW1ib2xQYXJlbnRQcm9taXNlVmFsdWUgPSBfX3N5bWJvbF9fKCdwYXJlbnRQcm9taXNlVmFsdWUnKTtcbiAgICAgICAgdmFyIHN5bWJvbFBhcmVudFByb21pc2VTdGF0ZSA9IF9fc3ltYm9sX18oJ3BhcmVudFByb21pc2VTdGF0ZScpO1xuICAgICAgICB2YXIgc291cmNlID0gJ1Byb21pc2UudGhlbic7XG4gICAgICAgIHZhciBVTlJFU09MVkVEID0gbnVsbDtcbiAgICAgICAgdmFyIFJFU09MVkVEID0gdHJ1ZTtcbiAgICAgICAgdmFyIFJFSkVDVEVEID0gZmFsc2U7XG4gICAgICAgIHZhciBSRUpFQ1RFRF9OT19DQVRDSCA9IDA7XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VSZXNvbHZlcihwcm9taXNlLCBzdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UocHJvbWlzZSwgc3RhdGUsIHYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKHByb21pc2UsIGZhbHNlLCBlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBEbyBub3QgcmV0dXJuIHZhbHVlIG9yIHlvdSB3aWxsIGJyZWFrIHRoZSBQcm9taXNlIHNwZWMuXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBvbmNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHdhc0NhbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHdyYXBwZXIod3JhcHBlZEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdhc0NhbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHdhc0NhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZWRGdW5jdGlvbi5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICB2YXIgVFlQRV9FUlJPUiA9ICdQcm9taXNlIHJlc29sdmVkIHdpdGggaXRzZWxmJztcbiAgICAgICAgdmFyIENVUlJFTlRfVEFTS19UUkFDRV9TWU1CT0wgPSBfX3N5bWJvbF9fKCdjdXJyZW50VGFza1RyYWNlJyk7XG4gICAgICAgIC8vIFByb21pc2UgUmVzb2x1dGlvblxuICAgICAgICBmdW5jdGlvbiByZXNvbHZlUHJvbWlzZShwcm9taXNlLCBzdGF0ZSwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBvbmNlV3JhcHBlciA9IG9uY2UoKTtcbiAgICAgICAgICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoVFlQRV9FUlJPUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJvbWlzZVtzeW1ib2xTdGF0ZV0gPT09IFVOUkVTT0xWRUQpIHtcbiAgICAgICAgICAgICAgICAvLyBzaG91bGQgb25seSBnZXQgdmFsdWUudGhlbiBvbmNlIGJhc2VkIG9uIHByb21pc2Ugc3BlYy5cbiAgICAgICAgICAgICAgICB2YXIgdGhlbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGVuID0gdmFsdWUgJiYgdmFsdWUudGhlbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uY2VXcmFwcGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKHByb21pc2UsIGZhbHNlLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gaWYgKHZhbHVlIGluc3RhbmNlb2YgWm9uZUF3YXJlUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZSAhPT0gUkVKRUNURUQgJiYgdmFsdWUgaW5zdGFuY2VvZiBab25lQXdhcmVQcm9taXNlICYmXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmhhc093blByb3BlcnR5KHN5bWJvbFN0YXRlKSAmJiB2YWx1ZS5oYXNPd25Qcm9wZXJ0eShzeW1ib2xWYWx1ZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVbc3ltYm9sU3RhdGVdICE9PSBVTlJFU09MVkVEKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyUmVqZWN0ZWROb0NhdGNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UocHJvbWlzZSwgdmFsdWVbc3ltYm9sU3RhdGVdLCB2YWx1ZVtzeW1ib2xWYWx1ZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzdGF0ZSAhPT0gUkVKRUNURUQgJiYgdHlwZW9mIHRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgb25jZVdyYXBwZXIobWFrZVJlc29sdmVyKHByb21pc2UsIHN0YXRlKSksIG9uY2VXcmFwcGVyKG1ha2VSZXNvbHZlcihwcm9taXNlLCBmYWxzZSkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbmNlV3JhcHBlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UocHJvbWlzZSwgZmFsc2UsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlW3N5bWJvbFN0YXRlXSA9IHN0YXRlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcXVldWUgPSBwcm9taXNlW3N5bWJvbFZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZVtzeW1ib2xWYWx1ZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb21pc2Vbc3ltYm9sRmluYWxseV0gPT09IHN5bWJvbEZpbmFsbHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBwcm9taXNlIGlzIGdlbmVyYXRlZCBieSBQcm9taXNlLnByb3RvdHlwZS5maW5hbGx5XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT09IFJFU09MVkVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHN0YXRlIGlzIHJlc29sdmVkLCBzaG91bGQgaWdub3JlIHRoZSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCB1c2UgcGFyZW50IHByb21pc2UgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlW3N5bWJvbFN0YXRlXSA9IHByb21pc2Vbc3ltYm9sUGFyZW50UHJvbWlzZVN0YXRlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlW3N5bWJvbFZhbHVlXSA9IHByb21pc2Vbc3ltYm9sUGFyZW50UHJvbWlzZVZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyByZWNvcmQgdGFzayBpbmZvcm1hdGlvbiBpbiB2YWx1ZSB3aGVuIGVycm9yIG9jY3Vycywgc28gd2UgY2FuXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvIHNvbWUgYWRkaXRpb25hbCB3b3JrIHN1Y2ggYXMgcmVuZGVyIGxvbmdTdGFja1RyYWNlXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gUkVKRUNURUQgJiYgdmFsdWUgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgbG9uZ1N0YWNrVHJhY2Vab25lIGlzIGhlcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFjZSA9IFpvbmUuY3VycmVudFRhc2sgJiYgWm9uZS5jdXJyZW50VGFzay5kYXRhICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWm9uZS5jdXJyZW50VGFzay5kYXRhW2NyZWF0aW9uVHJhY2VdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25seSBrZWVwIHRoZSBsb25nIHN0YWNrIHRyYWNlIGludG8gZXJyb3Igd2hlbiBpbiBsb25nU3RhY2tUcmFjZVpvbmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3REZWZpbmVQcm9wZXJ0eSh2YWx1ZSwgQ1VSUkVOVF9UQVNLX1RSQUNFX1NZTUJPTCwgeyBjb25maWd1cmFibGU6IHRydWUsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IHRyYWNlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVSZXNvbHZlT3JSZWplY3QocHJvbWlzZSwgcXVldWVbaSsrXSwgcXVldWVbaSsrXSwgcXVldWVbaSsrXSwgcXVldWVbaSsrXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PSAwICYmIHN0YXRlID09IFJFSkVDVEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlW3N5bWJvbFN0YXRlXSA9IFJFSkVDVEVEX05PX0NBVENIO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVuY2F1Z2h0UHJvbWlzZUVycm9yID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhlcmUgd2UgdGhyb3dzIGEgbmV3IEVycm9yIHRvIHByaW50IG1vcmUgcmVhZGFibGUgZXJyb3IgbG9nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGlmIHRoZSB2YWx1ZSBpcyBub3QgYW4gZXJyb3IsIHpvbmUuanMgYnVpbGRzIGFuIGBFcnJvcmBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPYmplY3QgaGVyZSB0byBhdHRhY2ggdGhlIHN0YWNrIGluZm9ybWF0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5jYXVnaHQgKGluIHByb21pc2UpOiAnICsgcmVhZGFibGVPYmplY3RUb1N0cmluZyh2YWx1ZSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodmFsdWUgJiYgdmFsdWUuc3RhY2sgPyAnXFxuJyArIHZhbHVlLnN0YWNrIDogJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmNhdWdodFByb21pc2VFcnJvciA9IGVycjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0Rpc2FibGVXcmFwcGluZ1VuY2F1Z2h0UHJvbWlzZVJlamVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGRpc2FibGUgd3JhcHBpbmcgdW5jYXVnaHQgcHJvbWlzZSByZWplY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2UgdGhlIHZhbHVlIGluc3RlYWQgb2Ygd3JhcHBpbmcgaXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5jYXVnaHRQcm9taXNlRXJyb3IudGhyb3dPcmlnaW5hbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmNhdWdodFByb21pc2VFcnJvci5yZWplY3Rpb24gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuY2F1Z2h0UHJvbWlzZUVycm9yLnByb21pc2UgPSBwcm9taXNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5jYXVnaHRQcm9taXNlRXJyb3Iuem9uZSA9IFpvbmUuY3VycmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuY2F1Z2h0UHJvbWlzZUVycm9yLnRhc2sgPSBab25lLmN1cnJlbnRUYXNrO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3VuY2F1Z2h0UHJvbWlzZUVycm9ycy5wdXNoKHVuY2F1Z2h0UHJvbWlzZUVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5zY2hlZHVsZU1pY3JvVGFzaygpOyAvLyB0byBtYWtlIHN1cmUgdGhhdCBpdCBpcyBydW5uaW5nXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXNvbHZpbmcgYW4gYWxyZWFkeSByZXNvbHZlZCBwcm9taXNlIGlzIGEgbm9vcC5cbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBSRUpFQ1RJT05fSEFORExFRF9IQU5ETEVSID0gX19zeW1ib2xfXygncmVqZWN0aW9uSGFuZGxlZEhhbmRsZXInKTtcbiAgICAgICAgZnVuY3Rpb24gY2xlYXJSZWplY3RlZE5vQ2F0Y2gocHJvbWlzZSkge1xuICAgICAgICAgICAgaWYgKHByb21pc2Vbc3ltYm9sU3RhdGVdID09PSBSRUpFQ1RFRF9OT19DQVRDSCkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIG5vIGNhdGNoIHN0YXR1c1xuICAgICAgICAgICAgICAgIC8vIGFuZCBxdWV1ZS5sZW5ndGggPiAwLCBtZWFucyB0aGVyZSBpcyBhIGVycm9yIGhhbmRsZXJcbiAgICAgICAgICAgICAgICAvLyBoZXJlIHRvIGhhbmRsZSB0aGUgcmVqZWN0ZWQgcHJvbWlzZSwgd2Ugc2hvdWxkIHRyaWdnZXJcbiAgICAgICAgICAgICAgICAvLyB3aW5kb3dzLnJlamVjdGlvbmhhbmRsZWQgZXZlbnRIYW5kbGVyIG9yIG5vZGVqcyByZWplY3Rpb25IYW5kbGVkXG4gICAgICAgICAgICAgICAgLy8gZXZlbnRIYW5kbGVyXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBab25lW1JFSkVDVElPTl9IQU5ETEVEX0hBTkRMRVJdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlciAmJiB0eXBlb2YgaGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIHsgcmVqZWN0aW9uOiBwcm9taXNlW3N5bWJvbFZhbHVlXSwgcHJvbWlzZTogcHJvbWlzZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb21pc2Vbc3ltYm9sU3RhdGVdID0gUkVKRUNURUQ7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfdW5jYXVnaHRQcm9taXNlRXJyb3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9taXNlID09PSBfdW5jYXVnaHRQcm9taXNlRXJyb3JzW2ldLnByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF91bmNhdWdodFByb21pc2VFcnJvcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHNjaGVkdWxlUmVzb2x2ZU9yUmVqZWN0KHByb21pc2UsIHpvbmUsIGNoYWluUHJvbWlzZSwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgICAgICAgICAgIGNsZWFyUmVqZWN0ZWROb0NhdGNoKHByb21pc2UpO1xuICAgICAgICAgICAgdmFyIHByb21pc2VTdGF0ZSA9IHByb21pc2Vbc3ltYm9sU3RhdGVdO1xuICAgICAgICAgICAgdmFyIGRlbGVnYXRlID0gcHJvbWlzZVN0YXRlID9cbiAgICAgICAgICAgICAgICAodHlwZW9mIG9uRnVsZmlsbGVkID09PSAnZnVuY3Rpb24nKSA/IG9uRnVsZmlsbGVkIDogZm9yd2FyZFJlc29sdXRpb24gOlxuICAgICAgICAgICAgICAgICh0eXBlb2Ygb25SZWplY3RlZCA9PT0gJ2Z1bmN0aW9uJykgPyBvblJlamVjdGVkIDpcbiAgICAgICAgICAgICAgICAgICAgZm9yd2FyZFJlamVjdGlvbjtcbiAgICAgICAgICAgIHpvbmUuc2NoZWR1bGVNaWNyb1Rhc2soc291cmNlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudFByb21pc2VWYWx1ZSA9IHByb21pc2Vbc3ltYm9sVmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXNGaW5hbGx5UHJvbWlzZSA9ICEhY2hhaW5Qcm9taXNlICYmIHN5bWJvbEZpbmFsbHkgPT09IGNoYWluUHJvbWlzZVtzeW1ib2xGaW5hbGx5XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRmluYWxseVByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBwcm9taXNlIGlzIGdlbmVyYXRlZCBmcm9tIGZpbmFsbHkgY2FsbCwga2VlcCBwYXJlbnQgcHJvbWlzZSdzIHN0YXRlIGFuZCB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5Qcm9taXNlW3N5bWJvbFBhcmVudFByb21pc2VWYWx1ZV0gPSBwYXJlbnRQcm9taXNlVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpblByb21pc2Vbc3ltYm9sUGFyZW50UHJvbWlzZVN0YXRlXSA9IHByb21pc2VTdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBzaG91bGQgbm90IHBhc3MgdmFsdWUgdG8gZmluYWxseSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB6b25lLnJ1bihkZWxlZ2F0ZSwgdW5kZWZpbmVkLCBpc0ZpbmFsbHlQcm9taXNlICYmIGRlbGVnYXRlICE9PSBmb3J3YXJkUmVqZWN0aW9uICYmIGRlbGVnYXRlICE9PSBmb3J3YXJkUmVzb2x1dGlvbiA/XG4gICAgICAgICAgICAgICAgICAgICAgICBbXSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBbcGFyZW50UHJvbWlzZVZhbHVlXSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKGNoYWluUHJvbWlzZSwgdHJ1ZSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgZXJyb3Igb2NjdXJzLCBzaG91bGQgYWx3YXlzIHJldHVybiB0aGlzIGVycm9yXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKGNoYWluUHJvbWlzZSwgZmFsc2UsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBjaGFpblByb21pc2UpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBaT05FX0FXQVJFX1BST01JU0VfVE9fU1RSSU5HID0gJ2Z1bmN0aW9uIFpvbmVBd2FyZVByb21pc2UoKSB7IFtuYXRpdmUgY29kZV0gfSc7XG4gICAgICAgIHZhciBub29wID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgICAgICB2YXIgQWdncmVnYXRlRXJyb3IgPSBnbG9iYWwuQWdncmVnYXRlRXJyb3I7XG4gICAgICAgIHZhciBab25lQXdhcmVQcm9taXNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZnVuY3Rpb24gWm9uZUF3YXJlUHJvbWlzZShleGVjdXRvcikge1xuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICAgICAgICAgICAgICBpZiAoIShwcm9taXNlIGluc3RhbmNlb2YgWm9uZUF3YXJlUHJvbWlzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IGJlIGFuIGluc3RhbmNlb2YgUHJvbWlzZS4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJvbWlzZVtzeW1ib2xTdGF0ZV0gPSBVTlJFU09MVkVEO1xuICAgICAgICAgICAgICAgIHByb21pc2Vbc3ltYm9sVmFsdWVdID0gW107IC8vIHF1ZXVlO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvbmNlV3JhcHBlciA9IG9uY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0b3IgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWN1dG9yKG9uY2VXcmFwcGVyKG1ha2VSZXNvbHZlcihwcm9taXNlLCBSRVNPTFZFRCkpLCBvbmNlV3JhcHBlcihtYWtlUmVzb2x2ZXIocHJvbWlzZSwgUkVKRUNURUQpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlUHJvbWlzZShwcm9taXNlLCBmYWxzZSwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFpvbmVBd2FyZVByb21pc2UudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpPTkVfQVdBUkVfUFJPTUlTRV9UT19TVFJJTkc7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgWm9uZUF3YXJlUHJvbWlzZS5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVQcm9taXNlKG5ldyB0aGlzKG51bGwpLCBSRVNPTFZFRCwgdmFsdWUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFpvbmVBd2FyZVByb21pc2UucmVqZWN0ID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVQcm9taXNlKG5ldyB0aGlzKG51bGwpLCBSRUpFQ1RFRCwgZXJyb3IpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFpvbmVBd2FyZVByb21pc2UuYW55ID0gZnVuY3Rpb24gKHZhbHVlcykge1xuICAgICAgICAgICAgICAgIGlmICghdmFsdWVzIHx8IHR5cGVvZiB2YWx1ZXNbU3ltYm9sLml0ZXJhdG9yXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEFnZ3JlZ2F0ZUVycm9yKFtdLCAnQWxsIHByb21pc2VzIHdlcmUgcmVqZWN0ZWQnKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB2YWx1ZXNfMSA9IHZhbHVlczsgX2kgPCB2YWx1ZXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ID0gdmFsdWVzXzFbX2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goWm9uZUF3YXJlUHJvbWlzZS5yZXNvbHZlKHYpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgQWdncmVnYXRlRXJyb3IoW10sICdBbGwgcHJvbWlzZXMgd2VyZSByZWplY3RlZCcpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgQWdncmVnYXRlRXJyb3IoW10sICdBbGwgcHJvbWlzZXMgd2VyZSByZWplY3RlZCcpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGZpbmlzaGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9ycyA9IFtdO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgWm9uZUF3YXJlUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvbWlzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VzW2ldLnRoZW4oZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmluaXNoZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5pc2hlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50LS07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBBZ2dyZWdhdGVFcnJvcihlcnJvcnMsICdBbGwgcHJvbWlzZXMgd2VyZSByZWplY3RlZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIFpvbmVBd2FyZVByb21pc2UucmFjZSA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzb2x2ZTtcbiAgICAgICAgICAgICAgICB2YXIgcmVqZWN0O1xuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gbmV3IHRoaXMoZnVuY3Rpb24gKHJlcywgcmVqKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUgPSByZXM7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCA9IHJlajtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvblJlc29sdmUodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uUmVqZWN0KGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgdmFsdWVzXzIgPSB2YWx1ZXM7IF9pIDwgdmFsdWVzXzIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHZhbHVlc18yW19pXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1RoZW5hYmxlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnJlc29sdmUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLnRoZW4ob25SZXNvbHZlLCBvblJlamVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFpvbmVBd2FyZVByb21pc2UuYWxsID0gZnVuY3Rpb24gKHZhbHVlcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBab25lQXdhcmVQcm9taXNlLmFsbFdpdGhDYWxsYmFjayh2YWx1ZXMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFpvbmVBd2FyZVByb21pc2UuYWxsU2V0dGxlZCA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgUCA9IHRoaXMgJiYgdGhpcy5wcm90b3R5cGUgaW5zdGFuY2VvZiBab25lQXdhcmVQcm9taXNlID8gdGhpcyA6IFpvbmVBd2FyZVByb21pc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFAuYWxsV2l0aENhbGxiYWNrKHZhbHVlcywge1xuICAgICAgICAgICAgICAgICAgICB0aGVuQ2FsbGJhY2s6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gKHsgc3RhdHVzOiAnZnVsZmlsbGVkJywgdmFsdWU6IHZhbHVlIH0pOyB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrOiBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiAoeyBzdGF0dXM6ICdyZWplY3RlZCcsIHJlYXNvbjogZXJyIH0pOyB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgWm9uZUF3YXJlUHJvbWlzZS5hbGxXaXRoQ2FsbGJhY2sgPSBmdW5jdGlvbiAodmFsdWVzLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHZhciByZXNvbHZlO1xuICAgICAgICAgICAgICAgIHZhciByZWplY3Q7XG4gICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgdGhpcyhmdW5jdGlvbiAocmVzLCByZWopIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSA9IHJlcztcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0ID0gcmVqO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIFN0YXJ0IGF0IDIgdG8gcHJldmVudCBwcmVtYXR1cmVseSByZXNvbHZpbmcgaWYgLnRoZW4gaXMgY2FsbGVkIGltbWVkaWF0ZWx5LlxuICAgICAgICAgICAgICAgIHZhciB1bnJlc29sdmVkQ291bnQgPSAyO1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZUluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgcmVzb2x2ZWRWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgX2xvb3BfMyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVGhlbmFibGUodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXNfMS5yZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyVmFsdWVJbmRleCA9IHZhbHVlSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVkVmFsdWVzW2N1clZhbHVlSW5kZXhdID0gY2FsbGJhY2sgPyBjYWxsYmFjay50aGVuQ2FsbGJhY2sodmFsdWUpIDogdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5yZXNvbHZlZENvdW50LS07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVucmVzb2x2ZWRDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc29sdmVkVmFsdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVkVmFsdWVzW2N1clZhbHVlSW5kZXhdID0gY2FsbGJhY2suZXJyb3JDYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnJlc29sdmVkQ291bnQtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVucmVzb2x2ZWRDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNvbHZlZFZhbHVlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAodGhlbkVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHRoZW5FcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHVucmVzb2x2ZWRDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZUluZGV4Kys7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgdGhpc18xID0gdGhpcztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHZhbHVlc18zID0gdmFsdWVzOyBfaSA8IHZhbHVlc18zLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZXNfM1tfaV07XG4gICAgICAgICAgICAgICAgICAgIF9sb29wXzModmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBNYWtlIHRoZSB1bnJlc29sdmVkQ291bnQgemVyby1iYXNlZCBhZ2Fpbi5cbiAgICAgICAgICAgICAgICB1bnJlc29sdmVkQ291bnQgLT0gMjtcbiAgICAgICAgICAgICAgICBpZiAodW5yZXNvbHZlZENvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzb2x2ZWRWYWx1ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWm9uZUF3YXJlUHJvbWlzZS5wcm90b3R5cGUsIFN5bWJvbC50b1N0cmluZ1RhZywge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1Byb21pc2UnO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShab25lQXdhcmVQcm9taXNlLnByb3RvdHlwZSwgU3ltYm9sLnNwZWNpZXMsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFpvbmVBd2FyZVByb21pc2U7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgWm9uZUF3YXJlUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uIChvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAvLyBXZSBtdXN0IHJlYWQgYFN5bWJvbC5zcGVjaWVzYCBzYWZlbHkgYmVjYXVzZSBgdGhpc2AgbWF5IGJlIGFueXRoaW5nLiBGb3IgaW5zdGFuY2UsIGB0aGlzYFxuICAgICAgICAgICAgICAgIC8vIG1heSBiZSBhbiBvYmplY3Qgd2l0aG91dCBhIHByb3RvdHlwZSAoY3JlYXRlZCB0aHJvdWdoIGBPYmplY3QuY3JlYXRlKG51bGwpYCk7IHRodXNcbiAgICAgICAgICAgICAgICAvLyBgdGhpcy5jb25zdHJ1Y3RvcmAgd2lsbCBiZSB1bmRlZmluZWQuIE9uZSBvZiB0aGUgdXNlIGNhc2VzIGlzIFN5c3RlbUpTIGNyZWF0aW5nXG4gICAgICAgICAgICAgICAgLy8gcHJvdG90eXBlLWxlc3Mgb2JqZWN0cyAobW9kdWxlcykgdmlhIGBPYmplY3QuY3JlYXRlKG51bGwpYC4gVGhlIFN5c3RlbUpTIGNyZWF0ZXMgYW4gZW1wdHlcbiAgICAgICAgICAgICAgICAvLyBvYmplY3QgYW5kIGNvcGllcyBwcm9taXNlIHByb3BlcnRpZXMgaW50byB0aGF0IG9iamVjdCAod2l0aGluIHRoZSBgZ2V0T3JDcmVhdGVMb2FkYFxuICAgICAgICAgICAgICAgIC8vIGZ1bmN0aW9uKS4gVGhlIHpvbmUuanMgdGhlbiBjaGVja3MgaWYgdGhlIHJlc29sdmVkIHZhbHVlIGhhcyB0aGUgYHRoZW5gIG1ldGhvZCBhbmQgaW52b2tlc1xuICAgICAgICAgICAgICAgIC8vIGl0IHdpdGggdGhlIGB2YWx1ZWAgY29udGV4dC4gT3RoZXJ3aXNlLCB0aGlzIHdpbGwgdGhyb3cgYW4gZXJyb3I6IGBUeXBlRXJyb3I6IENhbm5vdCByZWFkXG4gICAgICAgICAgICAgICAgLy8gcHJvcGVydGllcyBvZiB1bmRlZmluZWQgKHJlYWRpbmcgJ1N5bWJvbChTeW1ib2wuc3BlY2llcyknKWAuXG4gICAgICAgICAgICAgICAgdmFyIEMgPSAoX2EgPSB0aGlzLmNvbnN0cnVjdG9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbU3ltYm9sLnNwZWNpZXNdO1xuICAgICAgICAgICAgICAgIGlmICghQyB8fCB0eXBlb2YgQyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBDID0gdGhpcy5jb25zdHJ1Y3RvciB8fCBab25lQXdhcmVQcm9taXNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2hhaW5Qcm9taXNlID0gbmV3IEMobm9vcCk7XG4gICAgICAgICAgICAgICAgdmFyIHpvbmUgPSBab25lLmN1cnJlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXNbc3ltYm9sU3RhdGVdID09IFVOUkVTT0xWRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1tzeW1ib2xWYWx1ZV0ucHVzaCh6b25lLCBjaGFpblByb21pc2UsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlUmVzb2x2ZU9yUmVqZWN0KHRoaXMsIHpvbmUsIGNoYWluUHJvbWlzZSwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhaW5Qcm9taXNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFpvbmVBd2FyZVByb21pc2UucHJvdG90eXBlLmNhdGNoID0gZnVuY3Rpb24gKG9uUmVqZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0ZWQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFpvbmVBd2FyZVByb21pc2UucHJvdG90eXBlLmZpbmFsbHkgPSBmdW5jdGlvbiAob25GaW5hbGx5KSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIC8vIFNlZSBjb21tZW50IG9uIHRoZSBjYWxsIHRvIGB0aGVuYCBhYm91dCB3aHkgdGhlZSBgU3ltYm9sLnNwZWNpZXNgIGlzIHNhZmVseSBhY2Nlc3NlZC5cbiAgICAgICAgICAgICAgICB2YXIgQyA9IChfYSA9IHRoaXMuY29uc3RydWN0b3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVtTeW1ib2wuc3BlY2llc107XG4gICAgICAgICAgICAgICAgaWYgKCFDIHx8IHR5cGVvZiBDICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIEMgPSBab25lQXdhcmVQcm9taXNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2hhaW5Qcm9taXNlID0gbmV3IEMobm9vcCk7XG4gICAgICAgICAgICAgICAgY2hhaW5Qcm9taXNlW3N5bWJvbEZpbmFsbHldID0gc3ltYm9sRmluYWxseTtcbiAgICAgICAgICAgICAgICB2YXIgem9uZSA9IFpvbmUuY3VycmVudDtcbiAgICAgICAgICAgICAgICBpZiAodGhpc1tzeW1ib2xTdGF0ZV0gPT0gVU5SRVNPTFZFRCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzW3N5bWJvbFZhbHVlXS5wdXNoKHpvbmUsIGNoYWluUHJvbWlzZSwgb25GaW5hbGx5LCBvbkZpbmFsbHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVSZXNvbHZlT3JSZWplY3QodGhpcywgem9uZSwgY2hhaW5Qcm9taXNlLCBvbkZpbmFsbHksIG9uRmluYWxseSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBjaGFpblByb21pc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIFpvbmVBd2FyZVByb21pc2U7XG4gICAgICAgIH0oKSk7XG4gICAgICAgIC8vIFByb3RlY3QgYWdhaW5zdCBhZ2dyZXNzaXZlIG9wdGltaXplcnMgZHJvcHBpbmcgc2VlbWluZ2x5IHVudXNlZCBwcm9wZXJ0aWVzLlxuICAgICAgICAvLyBFLmcuIENsb3N1cmUgQ29tcGlsZXIgaW4gYWR2YW5jZWQgbW9kZS5cbiAgICAgICAgWm9uZUF3YXJlUHJvbWlzZVsncmVzb2x2ZSddID0gWm9uZUF3YXJlUHJvbWlzZS5yZXNvbHZlO1xuICAgICAgICBab25lQXdhcmVQcm9taXNlWydyZWplY3QnXSA9IFpvbmVBd2FyZVByb21pc2UucmVqZWN0O1xuICAgICAgICBab25lQXdhcmVQcm9taXNlWydyYWNlJ10gPSBab25lQXdhcmVQcm9taXNlLnJhY2U7XG4gICAgICAgIFpvbmVBd2FyZVByb21pc2VbJ2FsbCddID0gWm9uZUF3YXJlUHJvbWlzZS5hbGw7XG4gICAgICAgIHZhciBOYXRpdmVQcm9taXNlID0gZ2xvYmFsW3N5bWJvbFByb21pc2VdID0gZ2xvYmFsWydQcm9taXNlJ107XG4gICAgICAgIGdsb2JhbFsnUHJvbWlzZSddID0gWm9uZUF3YXJlUHJvbWlzZTtcbiAgICAgICAgdmFyIHN5bWJvbFRoZW5QYXRjaGVkID0gX19zeW1ib2xfXygndGhlblBhdGNoZWQnKTtcbiAgICAgICAgZnVuY3Rpb24gcGF0Y2hUaGVuKEN0b3IpIHtcbiAgICAgICAgICAgIHZhciBwcm90byA9IEN0b3IucHJvdG90eXBlO1xuICAgICAgICAgICAgdmFyIHByb3AgPSBPYmplY3RHZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocHJvdG8sICd0aGVuJyk7XG4gICAgICAgICAgICBpZiAocHJvcCAmJiAocHJvcC53cml0YWJsZSA9PT0gZmFsc2UgfHwgIXByb3AuY29uZmlndXJhYmxlKSkge1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIEN0b3IucHJvdG90eXBlLnRoZW4gcHJvcGVydHlEZXNjcmlwdG9yIGlzIHdyaXRhYmxlIG9yIG5vdFxuICAgICAgICAgICAgICAgIC8vIGluIG1ldGVvciBlbnYsIHdyaXRhYmxlIGlzIGZhbHNlLCB3ZSBzaG91bGQgaWdub3JlIHN1Y2ggY2FzZVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvcmlnaW5hbFRoZW4gPSBwcm90by50aGVuO1xuICAgICAgICAgICAgLy8gS2VlcCBhIHJlZmVyZW5jZSB0byB0aGUgb3JpZ2luYWwgbWV0aG9kLlxuICAgICAgICAgICAgcHJvdG9bc3ltYm9sVGhlbl0gPSBvcmlnaW5hbFRoZW47XG4gICAgICAgICAgICBDdG9yLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24gKG9uUmVzb2x2ZSwgb25SZWplY3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHZhciB3cmFwcGVkID0gbmV3IFpvbmVBd2FyZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFRoZW4uY2FsbChfdGhpcywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3JhcHBlZC50aGVuKG9uUmVzb2x2ZSwgb25SZWplY3QpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIEN0b3Jbc3ltYm9sVGhlblBhdGNoZWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBhcGkucGF0Y2hUaGVuID0gcGF0Y2hUaGVuO1xuICAgICAgICBmdW5jdGlvbiB6b25laWZ5KGZuKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNlbGYsIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0UHJvbWlzZSA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRQcm9taXNlIGluc3RhbmNlb2YgWm9uZUF3YXJlUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0UHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGN0b3IgPSByZXN1bHRQcm9taXNlLmNvbnN0cnVjdG9yO1xuICAgICAgICAgICAgICAgIGlmICghY3RvcltzeW1ib2xUaGVuUGF0Y2hlZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgcGF0Y2hUaGVuKGN0b3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0UHJvbWlzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE5hdGl2ZVByb21pc2UpIHtcbiAgICAgICAgICAgIHBhdGNoVGhlbihOYXRpdmVQcm9taXNlKTtcbiAgICAgICAgICAgIHBhdGNoTWV0aG9kKGdsb2JhbCwgJ2ZldGNoJywgZnVuY3Rpb24gKGRlbGVnYXRlKSB7IHJldHVybiB6b25laWZ5KGRlbGVnYXRlKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhpcyBpcyBub3QgcGFydCBvZiBwdWJsaWMgQVBJLCBidXQgaXQgaXMgdXNlZnVsIGZvciB0ZXN0cywgc28gd2UgZXhwb3NlIGl0LlxuICAgICAgICBQcm9taXNlW1pvbmUuX19zeW1ib2xfXygndW5jYXVnaHRQcm9taXNlRXJyb3JzJyldID0gX3VuY2F1Z2h0UHJvbWlzZUVycm9ycztcbiAgICAgICAgcmV0dXJuIFpvbmVBd2FyZVByb21pc2U7XG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogQGxpY2Vuc2VcbiAgICAgKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICAgICAqXG4gICAgICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAgICAgKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gICAgICovXG4gICAgLy8gb3ZlcnJpZGUgRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nIHRvIG1ha2Ugem9uZS5qcyBwYXRjaGVkIGZ1bmN0aW9uXG4gICAgLy8gbG9vayBsaWtlIG5hdGl2ZSBmdW5jdGlvblxuICAgIFpvbmUuX19sb2FkX3BhdGNoKCd0b1N0cmluZycsIGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgICAgICAgLy8gcGF0Y2ggRnVuYy5wcm90b3R5cGUudG9TdHJpbmcgdG8gbGV0IHRoZW0gbG9vayBsaWtlIG5hdGl2ZVxuICAgICAgICB2YXIgb3JpZ2luYWxGdW5jdGlvblRvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xuICAgICAgICB2YXIgT1JJR0lOQUxfREVMRUdBVEVfU1lNQk9MID0gem9uZVN5bWJvbCQxKCdPcmlnaW5hbERlbGVnYXRlJyk7XG4gICAgICAgIHZhciBQUk9NSVNFX1NZTUJPTCA9IHpvbmVTeW1ib2wkMSgnUHJvbWlzZScpO1xuICAgICAgICB2YXIgRVJST1JfU1lNQk9MID0gem9uZVN5bWJvbCQxKCdFcnJvcicpO1xuICAgICAgICB2YXIgbmV3RnVuY3Rpb25Ub1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsRGVsZWdhdGUgPSB0aGlzW09SSUdJTkFMX0RFTEVHQVRFX1NZTUJPTF07XG4gICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsRGVsZWdhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvcmlnaW5hbERlbGVnYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxGdW5jdGlvblRvU3RyaW5nLmNhbGwob3JpZ2luYWxEZWxlZ2F0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9yaWdpbmFsRGVsZWdhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzID09PSBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuYXRpdmVQcm9taXNlID0gZ2xvYmFsW1BST01JU0VfU1lNQk9MXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hdGl2ZVByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbEZ1bmN0aW9uVG9TdHJpbmcuY2FsbChuYXRpdmVQcm9taXNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcyA9PT0gRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5hdGl2ZUVycm9yID0gZ2xvYmFsW0VSUk9SX1NZTUJPTF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChuYXRpdmVFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsRnVuY3Rpb25Ub1N0cmluZy5jYWxsKG5hdGl2ZUVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbEZ1bmN0aW9uVG9TdHJpbmcuY2FsbCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgbmV3RnVuY3Rpb25Ub1N0cmluZ1tPUklHSU5BTF9ERUxFR0FURV9TWU1CT0xdID0gb3JpZ2luYWxGdW5jdGlvblRvU3RyaW5nO1xuICAgICAgICBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBuZXdGdW5jdGlvblRvU3RyaW5nO1xuICAgICAgICAvLyBwYXRjaCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nIHRvIGxldCB0aGVtIGxvb2sgbGlrZSBuYXRpdmVcbiAgICAgICAgdmFyIG9yaWdpbmFsT2JqZWN0VG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuICAgICAgICB2YXIgUFJPTUlTRV9PQkpFQ1RfVE9fU1RSSU5HID0gJ1tvYmplY3QgUHJvbWlzZV0nO1xuICAgICAgICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBQcm9taXNlID09PSAnZnVuY3Rpb24nICYmIHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBST01JU0VfT0JKRUNUX1RPX1NUUklORztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbE9iamVjdFRvU3RyaW5nLmNhbGwodGhpcyk7XG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogQGxpY2Vuc2VcbiAgICAgKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICAgICAqXG4gICAgICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAgICAgKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gICAgICovXG4gICAgdmFyIHBhc3NpdmVTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAncGFzc2l2ZScsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFzc2l2ZVN1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBOb3RlOiBXZSBwYXNzIHRoZSBgb3B0aW9uc2Agb2JqZWN0IGFzIHRoZSBldmVudCBoYW5kbGVyIHRvby4gVGhpcyBpcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZVxuICAgICAgICAgICAgLy8gc2lnbmF0dXJlIG9mIGBhZGRFdmVudExpc3RlbmVyYCBvciBgcmVtb3ZlRXZlbnRMaXN0ZW5lcmAgYnV0IGVuYWJsZXMgdXMgdG8gcmVtb3ZlIHRoZSBoYW5kbGVyXG4gICAgICAgICAgICAvLyB3aXRob3V0IGFuIGFjdHVhbCBoYW5kbGVyLlxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBvcHRpb25zLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0ZXN0Jywgb3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcGFzc2l2ZVN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGFuIGlkZW50aWZpZXIgdG8gdGVsbCBab25lVGFzayBkbyBub3QgY3JlYXRlIGEgbmV3IGludm9rZSBjbG9zdXJlXG4gICAgdmFyIE9QVElNSVpFRF9aT05FX0VWRU5UX1RBU0tfREFUQSA9IHtcbiAgICAgICAgdXNlRzogdHJ1ZVxuICAgIH07XG4gICAgdmFyIHpvbmVTeW1ib2xFdmVudE5hbWVzID0ge307XG4gICAgdmFyIGdsb2JhbFNvdXJjZXMgPSB7fTtcbiAgICB2YXIgRVZFTlRfTkFNRV9TWU1CT0xfUkVHWCA9IG5ldyBSZWdFeHAoJ14nICsgWk9ORV9TWU1CT0xfUFJFRklYICsgJyhcXFxcdyspKHRydWV8ZmFsc2UpJCcpO1xuICAgIHZhciBJTU1FRElBVEVfUFJPUEFHQVRJT05fU1lNQk9MID0gem9uZVN5bWJvbCQxKCdwcm9wYWdhdGlvblN0b3BwZWQnKTtcbiAgICBmdW5jdGlvbiBwcmVwYXJlRXZlbnROYW1lcyhldmVudE5hbWUsIGV2ZW50TmFtZVRvU3RyaW5nKSB7XG4gICAgICAgIHZhciBmYWxzZUV2ZW50TmFtZSA9IChldmVudE5hbWVUb1N0cmluZyA/IGV2ZW50TmFtZVRvU3RyaW5nKGV2ZW50TmFtZSkgOiBldmVudE5hbWUpICsgRkFMU0VfU1RSO1xuICAgICAgICB2YXIgdHJ1ZUV2ZW50TmFtZSA9IChldmVudE5hbWVUb1N0cmluZyA/IGV2ZW50TmFtZVRvU3RyaW5nKGV2ZW50TmFtZSkgOiBldmVudE5hbWUpICsgVFJVRV9TVFI7XG4gICAgICAgIHZhciBzeW1ib2wgPSBaT05FX1NZTUJPTF9QUkVGSVggKyBmYWxzZUV2ZW50TmFtZTtcbiAgICAgICAgdmFyIHN5bWJvbENhcHR1cmUgPSBaT05FX1NZTUJPTF9QUkVGSVggKyB0cnVlRXZlbnROYW1lO1xuICAgICAgICB6b25lU3ltYm9sRXZlbnROYW1lc1tldmVudE5hbWVdID0ge307XG4gICAgICAgIHpvbmVTeW1ib2xFdmVudE5hbWVzW2V2ZW50TmFtZV1bRkFMU0VfU1RSXSA9IHN5bWJvbDtcbiAgICAgICAgem9uZVN5bWJvbEV2ZW50TmFtZXNbZXZlbnROYW1lXVtUUlVFX1NUUl0gPSBzeW1ib2xDYXB0dXJlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwYXRjaEV2ZW50VGFyZ2V0KF9nbG9iYWwsIGFwaSwgYXBpcywgcGF0Y2hPcHRpb25zKSB7XG4gICAgICAgIHZhciBBRERfRVZFTlRfTElTVEVORVIgPSAocGF0Y2hPcHRpb25zICYmIHBhdGNoT3B0aW9ucy5hZGQpIHx8IEFERF9FVkVOVF9MSVNURU5FUl9TVFI7XG4gICAgICAgIHZhciBSRU1PVkVfRVZFTlRfTElTVEVORVIgPSAocGF0Y2hPcHRpb25zICYmIHBhdGNoT3B0aW9ucy5ybSkgfHwgUkVNT1ZFX0VWRU5UX0xJU1RFTkVSX1NUUjtcbiAgICAgICAgdmFyIExJU1RFTkVSU19FVkVOVF9MSVNURU5FUiA9IChwYXRjaE9wdGlvbnMgJiYgcGF0Y2hPcHRpb25zLmxpc3RlbmVycykgfHwgJ2V2ZW50TGlzdGVuZXJzJztcbiAgICAgICAgdmFyIFJFTU9WRV9BTExfTElTVEVORVJTX0VWRU5UX0xJU1RFTkVSID0gKHBhdGNoT3B0aW9ucyAmJiBwYXRjaE9wdGlvbnMucm1BbGwpIHx8ICdyZW1vdmVBbGxMaXN0ZW5lcnMnO1xuICAgICAgICB2YXIgem9uZVN5bWJvbEFkZEV2ZW50TGlzdGVuZXIgPSB6b25lU3ltYm9sJDEoQUREX0VWRU5UX0xJU1RFTkVSKTtcbiAgICAgICAgdmFyIEFERF9FVkVOVF9MSVNURU5FUl9TT1VSQ0UgPSAnLicgKyBBRERfRVZFTlRfTElTVEVORVIgKyAnOic7XG4gICAgICAgIHZhciBQUkVQRU5EX0VWRU5UX0xJU1RFTkVSID0gJ3ByZXBlbmRMaXN0ZW5lcic7XG4gICAgICAgIHZhciBQUkVQRU5EX0VWRU5UX0xJU1RFTkVSX1NPVVJDRSA9ICcuJyArIFBSRVBFTkRfRVZFTlRfTElTVEVORVIgKyAnOic7XG4gICAgICAgIHZhciBpbnZva2VUYXNrID0gZnVuY3Rpb24gKHRhc2ssIHRhcmdldCwgZXZlbnQpIHtcbiAgICAgICAgICAgIC8vIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UsIGNoZWNrIGlzUmVtb3ZlZCB3aGljaCBpcyBzZXRcbiAgICAgICAgICAgIC8vIGJ5IHJlbW92ZUV2ZW50TGlzdGVuZXJcbiAgICAgICAgICAgIGlmICh0YXNrLmlzUmVtb3ZlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkZWxlZ2F0ZSA9IHRhc2suY2FsbGJhY2s7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRlbGVnYXRlID09PSAnb2JqZWN0JyAmJiBkZWxlZ2F0ZS5oYW5kbGVFdmVudCkge1xuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgYmluZCB2ZXJzaW9uIG9mIGhhbmRsZUV2ZW50IHdoZW4gaW52b2tlXG4gICAgICAgICAgICAgICAgdGFzay5jYWxsYmFjayA9IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gZGVsZWdhdGUuaGFuZGxlRXZlbnQoZXZlbnQpOyB9O1xuICAgICAgICAgICAgICAgIHRhc2sub3JpZ2luYWxEZWxlZ2F0ZSA9IGRlbGVnYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaW52b2tlIHN0YXRpYyB0YXNrLmludm9rZVxuICAgICAgICAgICAgLy8gbmVlZCB0byB0cnkvY2F0Y2ggZXJyb3IgaGVyZSwgb3RoZXJ3aXNlLCB0aGUgZXJyb3IgaW4gb25lIGV2ZW50IGxpc3RlbmVyXG4gICAgICAgICAgICAvLyB3aWxsIGJyZWFrIHRoZSBleGVjdXRpb25zIG9mIHRoZSBvdGhlciBldmVudCBsaXN0ZW5lcnMuIEFsc28gZXJyb3Igd2lsbFxuICAgICAgICAgICAgLy8gbm90IHJlbW92ZSB0aGUgZXZlbnQgbGlzdGVuZXIgd2hlbiBgb25jZWAgb3B0aW9ucyBpcyB0cnVlLlxuICAgICAgICAgICAgdmFyIGVycm9yO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0YXNrLmludm9rZSh0YXNrLCB0YXJnZXQsIFtldmVudF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGVycm9yID0gZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB0YXNrLm9wdGlvbnM7XG4gICAgICAgICAgICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucyA9PT0gJ29iamVjdCcgJiYgb3B0aW9ucy5vbmNlKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgb3B0aW9ucy5vbmNlIGlzIHRydWUsIGFmdGVyIGludm9rZSBvbmNlIHJlbW92ZSBsaXN0ZW5lciBoZXJlXG4gICAgICAgICAgICAgICAgLy8gb25seSBicm93c2VyIG5lZWQgdG8gZG8gdGhpcywgbm9kZWpzIGV2ZW50RW1pdHRlciB3aWxsIGNhbCByZW1vdmVMaXN0ZW5lclxuICAgICAgICAgICAgICAgIC8vIGluc2lkZSBFdmVudEVtaXR0ZXIub25jZVxuICAgICAgICAgICAgICAgIHZhciBkZWxlZ2F0ZV8xID0gdGFzay5vcmlnaW5hbERlbGVnYXRlID8gdGFzay5vcmlnaW5hbERlbGVnYXRlIDogdGFzay5jYWxsYmFjaztcbiAgICAgICAgICAgICAgICB0YXJnZXRbUkVNT1ZFX0VWRU5UX0xJU1RFTkVSXS5jYWxsKHRhcmdldCwgZXZlbnQudHlwZSwgZGVsZWdhdGVfMSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIGdsb2JhbENhbGxiYWNrKGNvbnRleHQsIGV2ZW50LCBpc0NhcHR1cmUpIHtcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3pvbmUuanMvaXNzdWVzLzkxMSwgaW4gSUUsIHNvbWV0aW1lc1xuICAgICAgICAgICAgLy8gZXZlbnQgd2lsbCBiZSB1bmRlZmluZWQsIHNvIHdlIG5lZWQgdG8gdXNlIHdpbmRvdy5ldmVudFxuICAgICAgICAgICAgZXZlbnQgPSBldmVudCB8fCBfZ2xvYmFsLmV2ZW50O1xuICAgICAgICAgICAgaWYgKCFldmVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGV2ZW50LnRhcmdldCBpcyBuZWVkZWQgZm9yIFNhbXN1bmcgVFYgYW5kIFNvdXJjZUJ1ZmZlclxuICAgICAgICAgICAgLy8gfHwgZ2xvYmFsIGlzIG5lZWRlZCBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci96b25lLmpzL2lzc3Vlcy8xOTBcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBjb250ZXh0IHx8IGV2ZW50LnRhcmdldCB8fCBfZ2xvYmFsO1xuICAgICAgICAgICAgdmFyIHRhc2tzID0gdGFyZ2V0W3pvbmVTeW1ib2xFdmVudE5hbWVzW2V2ZW50LnR5cGVdW2lzQ2FwdHVyZSA/IFRSVUVfU1RSIDogRkFMU0VfU1RSXV07XG4gICAgICAgICAgICBpZiAodGFza3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3JzID0gW107XG4gICAgICAgICAgICAgICAgLy8gaW52b2tlIGFsbCB0YXNrcyB3aGljaCBhdHRhY2hlZCB0byBjdXJyZW50IHRhcmdldCB3aXRoIGdpdmVuIGV2ZW50LnR5cGUgYW5kIGNhcHR1cmUgPSBmYWxzZVxuICAgICAgICAgICAgICAgIC8vIGZvciBwZXJmb3JtYW5jZSBjb25jZXJuLCBpZiB0YXNrLmxlbmd0aCA9PT0gMSwganVzdCBpbnZva2VcbiAgICAgICAgICAgICAgICBpZiAodGFza3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnIgPSBpbnZva2VUYXNrKHRhc2tzWzBdLCB0YXJnZXQsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgZXJyICYmIGVycm9ycy5wdXNoKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci96b25lLmpzL2lzc3Vlcy84MzZcbiAgICAgICAgICAgICAgICAgICAgLy8gY29weSB0aGUgdGFza3MgYXJyYXkgYmVmb3JlIGludm9rZSwgdG8gYXZvaWRcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGNhbGxiYWNrIHdpbGwgcmVtb3ZlIGl0c2VsZiBvciBvdGhlciBsaXN0ZW5lclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29weVRhc2tzID0gdGFza3Muc2xpY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3B5VGFza3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudCAmJiBldmVudFtJTU1FRElBVEVfUFJPUEFHQVRJT05fU1lNQk9MXSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVyciA9IGludm9rZVRhc2soY29weVRhc2tzW2ldLCB0YXJnZXQsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVyciAmJiBlcnJvcnMucHVzaChlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFNpbmNlIHRoZXJlIGlzIG9ubHkgb25lIGVycm9yLCB3ZSBkb24ndCBuZWVkIHRvIHNjaGVkdWxlIG1pY3JvVGFza1xuICAgICAgICAgICAgICAgIC8vIHRvIHRocm93IHRoZSBlcnJvci5cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3JzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcnNbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2xvb3BfNCA9IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyID0gZXJyb3JzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBpLm5hdGl2ZVNjaGVkdWxlTWljcm9UYXNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlcnJvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9sb29wXzQoaSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZ2xvYmFsIHNoYXJlZCB6b25lQXdhcmVDYWxsYmFjayB0byBoYW5kbGUgYWxsIGV2ZW50IGNhbGxiYWNrIHdpdGggY2FwdHVyZSA9IGZhbHNlXG4gICAgICAgIHZhciBnbG9iYWxab25lQXdhcmVDYWxsYmFjayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGdsb2JhbENhbGxiYWNrKHRoaXMsIGV2ZW50LCBmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIGdsb2JhbCBzaGFyZWQgem9uZUF3YXJlQ2FsbGJhY2sgdG8gaGFuZGxlIGFsbCBldmVudCBjYWxsYmFjayB3aXRoIGNhcHR1cmUgPSB0cnVlXG4gICAgICAgIHZhciBnbG9iYWxab25lQXdhcmVDYXB0dXJlQ2FsbGJhY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBnbG9iYWxDYWxsYmFjayh0aGlzLCBldmVudCwgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIHBhdGNoRXZlbnRUYXJnZXRNZXRob2RzKG9iaiwgcGF0Y2hPcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoIW9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB1c2VHbG9iYWxDYWxsYmFjayA9IHRydWU7XG4gICAgICAgICAgICBpZiAocGF0Y2hPcHRpb25zICYmIHBhdGNoT3B0aW9ucy51c2VHICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB1c2VHbG9iYWxDYWxsYmFjayA9IHBhdGNoT3B0aW9ucy51c2VHO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHZhbGlkYXRlSGFuZGxlciA9IHBhdGNoT3B0aW9ucyAmJiBwYXRjaE9wdGlvbnMudmg7XG4gICAgICAgICAgICB2YXIgY2hlY2tEdXBsaWNhdGUgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHBhdGNoT3B0aW9ucyAmJiBwYXRjaE9wdGlvbnMuY2hrRHVwICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjaGVja0R1cGxpY2F0ZSA9IHBhdGNoT3B0aW9ucy5jaGtEdXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmV0dXJuVGFyZ2V0ID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAocGF0Y2hPcHRpb25zICYmIHBhdGNoT3B0aW9ucy5ydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuVGFyZ2V0ID0gcGF0Y2hPcHRpb25zLnJ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByb3RvID0gb2JqO1xuICAgICAgICAgICAgd2hpbGUgKHByb3RvICYmICFwcm90by5oYXNPd25Qcm9wZXJ0eShBRERfRVZFTlRfTElTVEVORVIpKSB7XG4gICAgICAgICAgICAgICAgcHJvdG8gPSBPYmplY3RHZXRQcm90b3R5cGVPZihwcm90byk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXByb3RvICYmIG9ialtBRERfRVZFTlRfTElTVEVORVJdKSB7XG4gICAgICAgICAgICAgICAgLy8gc29tZWhvdyB3ZSBkaWQgbm90IGZpbmQgaXQsIGJ1dCB3ZSBjYW4gc2VlIGl0LiBUaGlzIGhhcHBlbnMgb24gSUUgZm9yIFdpbmRvdyBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgICAgIHByb3RvID0gb2JqO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFwcm90bykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcm90b1t6b25lU3ltYm9sQWRkRXZlbnRMaXN0ZW5lcl0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZXZlbnROYW1lVG9TdHJpbmcgPSBwYXRjaE9wdGlvbnMgJiYgcGF0Y2hPcHRpb25zLmV2ZW50TmFtZVRvU3RyaW5nO1xuICAgICAgICAgICAgLy8gYSBzaGFyZWQgZ2xvYmFsIHRhc2tEYXRhIHRvIHBhc3MgZGF0YSBmb3Igc2NoZWR1bGVFdmVudFRhc2tcbiAgICAgICAgICAgIC8vIHNvIHdlIGRvIG5vdCBuZWVkIHRvIGNyZWF0ZSBhIG5ldyBvYmplY3QganVzdCBmb3IgcGFzcyBzb21lIGRhdGFcbiAgICAgICAgICAgIHZhciB0YXNrRGF0YSA9IHt9O1xuICAgICAgICAgICAgdmFyIG5hdGl2ZUFkZEV2ZW50TGlzdGVuZXIgPSBwcm90b1t6b25lU3ltYm9sQWRkRXZlbnRMaXN0ZW5lcl0gPSBwcm90b1tBRERfRVZFTlRfTElTVEVORVJdO1xuICAgICAgICAgICAgdmFyIG5hdGl2ZVJlbW92ZUV2ZW50TGlzdGVuZXIgPSBwcm90b1t6b25lU3ltYm9sJDEoUkVNT1ZFX0VWRU5UX0xJU1RFTkVSKV0gPVxuICAgICAgICAgICAgICAgIHByb3RvW1JFTU9WRV9FVkVOVF9MSVNURU5FUl07XG4gICAgICAgICAgICB2YXIgbmF0aXZlTGlzdGVuZXJzID0gcHJvdG9bem9uZVN5bWJvbCQxKExJU1RFTkVSU19FVkVOVF9MSVNURU5FUildID1cbiAgICAgICAgICAgICAgICBwcm90b1tMSVNURU5FUlNfRVZFTlRfTElTVEVORVJdO1xuICAgICAgICAgICAgdmFyIG5hdGl2ZVJlbW92ZUFsbExpc3RlbmVycyA9IHByb3RvW3pvbmVTeW1ib2wkMShSRU1PVkVfQUxMX0xJU1RFTkVSU19FVkVOVF9MSVNURU5FUildID1cbiAgICAgICAgICAgICAgICBwcm90b1tSRU1PVkVfQUxMX0xJU1RFTkVSU19FVkVOVF9MSVNURU5FUl07XG4gICAgICAgICAgICB2YXIgbmF0aXZlUHJlcGVuZEV2ZW50TGlzdGVuZXI7XG4gICAgICAgICAgICBpZiAocGF0Y2hPcHRpb25zICYmIHBhdGNoT3B0aW9ucy5wcmVwZW5kKSB7XG4gICAgICAgICAgICAgICAgbmF0aXZlUHJlcGVuZEV2ZW50TGlzdGVuZXIgPSBwcm90b1t6b25lU3ltYm9sJDEocGF0Y2hPcHRpb25zLnByZXBlbmQpXSA9XG4gICAgICAgICAgICAgICAgICAgIHByb3RvW3BhdGNoT3B0aW9ucy5wcmVwZW5kXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhpcyB1dGlsIGZ1bmN0aW9uIHdpbGwgYnVpbGQgYW4gb3B0aW9uIG9iamVjdCB3aXRoIHBhc3NpdmUgb3B0aW9uXG4gICAgICAgICAgICAgKiB0byBoYW5kbGUgYWxsIHBvc3NpYmxlIGlucHV0IGZyb20gdGhlIHVzZXIuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkRXZlbnRMaXN0ZW5lck9wdGlvbnMob3B0aW9ucywgcGFzc2l2ZSkge1xuICAgICAgICAgICAgICAgIGlmICghcGFzc2l2ZVN1cHBvcnRlZCAmJiB0eXBlb2Ygb3B0aW9ucyA9PT0gJ29iamVjdCcgJiYgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAvLyBkb2Vzbid0IHN1cHBvcnQgcGFzc2l2ZSBidXQgdXNlciB3YW50IHRvIHBhc3MgYW4gb2JqZWN0IGFzIG9wdGlvbnMuXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgd2lsbCBub3Qgd29yayBvbiBzb21lIG9sZCBicm93c2VyLCBzbyB3ZSBqdXN0IHBhc3MgYSBib29sZWFuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIHVzZUNhcHR1cmUgcGFyYW1ldGVyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhIW9wdGlvbnMuY2FwdHVyZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFwYXNzaXZlU3VwcG9ydGVkIHx8ICFwYXNzaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBjYXB0dXJlOiBvcHRpb25zLCBwYXNzaXZlOiB0cnVlIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBwYXNzaXZlOiB0cnVlIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ29iamVjdCcgJiYgb3B0aW9ucy5wYXNzaXZlICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjdXN0b21TY2hlZHVsZUdsb2JhbCA9IGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYWxyZWFkeSBhIHRhc2sgZm9yIHRoZSBldmVudE5hbWUgKyBjYXB0dXJlLFxuICAgICAgICAgICAgICAgIC8vIGp1c3QgcmV0dXJuLCBiZWNhdXNlIHdlIHVzZSB0aGUgc2hhcmVkIGdsb2JhbFpvbmVBd2FyZUNhbGxiYWNrIGhlcmUuXG4gICAgICAgICAgICAgICAgaWYgKHRhc2tEYXRhLmlzRXhpc3RpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmF0aXZlQWRkRXZlbnRMaXN0ZW5lci5jYWxsKHRhc2tEYXRhLnRhcmdldCwgdGFza0RhdGEuZXZlbnROYW1lLCB0YXNrRGF0YS5jYXB0dXJlID8gZ2xvYmFsWm9uZUF3YXJlQ2FwdHVyZUNhbGxiYWNrIDogZ2xvYmFsWm9uZUF3YXJlQ2FsbGJhY2ssIHRhc2tEYXRhLm9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBjdXN0b21DYW5jZWxHbG9iYWwgPSBmdW5jdGlvbiAodGFzaykge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRhc2sgaXMgbm90IG1hcmtlZCBhcyBpc1JlbW92ZWQsIHRoaXMgY2FsbCBpcyBkaXJlY3RseVxuICAgICAgICAgICAgICAgIC8vIGZyb20gWm9uZS5wcm90b3R5cGUuY2FuY2VsVGFzaywgd2Ugc2hvdWxkIHJlbW92ZSB0aGUgdGFza1xuICAgICAgICAgICAgICAgIC8vIGZyb20gdGFza3NMaXN0IG9mIHRhcmdldCBmaXJzdFxuICAgICAgICAgICAgICAgIGlmICghdGFzay5pc1JlbW92ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN5bWJvbEV2ZW50TmFtZXMgPSB6b25lU3ltYm9sRXZlbnROYW1lc1t0YXNrLmV2ZW50TmFtZV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBzeW1ib2xFdmVudE5hbWUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzeW1ib2xFdmVudE5hbWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2xFdmVudE5hbWUgPSBzeW1ib2xFdmVudE5hbWVzW3Rhc2suY2FwdHVyZSA/IFRSVUVfU1RSIDogRkFMU0VfU1RSXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdUYXNrcyA9IHN5bWJvbEV2ZW50TmFtZSAmJiB0YXNrLnRhcmdldFtzeW1ib2xFdmVudE5hbWVdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdUYXNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleGlzdGluZ1Rhc2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4aXN0aW5nVGFzayA9IGV4aXN0aW5nVGFza3NbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nVGFzayA9PT0gdGFzaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ1Rhc2tzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGlzUmVtb3ZlZCB0byBkYXRhIGZvciBmYXN0ZXIgaW52b2tlVGFzayBjaGVja1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLmlzUmVtb3ZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ1Rhc2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxsIHRhc2tzIGZvciB0aGUgZXZlbnROYW1lICsgY2FwdHVyZSBoYXZlIGdvbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgZ2xvYmFsWm9uZUF3YXJlQ2FsbGJhY2sgYW5kIHJlbW92ZSB0aGUgdGFzayBjYWNoZSBmcm9tIHRhcmdldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5hbGxSZW1vdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sudGFyZ2V0W3N5bWJvbEV2ZW50TmFtZV0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBpZiBhbGwgdGFza3MgZm9yIHRoZSBldmVudE5hbWUgKyBjYXB0dXJlIGhhdmUgZ29uZSxcbiAgICAgICAgICAgICAgICAvLyB3ZSB3aWxsIHJlYWxseSByZW1vdmUgdGhlIGdsb2JhbCBldmVudCBjYWxsYmFjayxcbiAgICAgICAgICAgICAgICAvLyBpZiBub3QsIHJldHVyblxuICAgICAgICAgICAgICAgIGlmICghdGFzay5hbGxSZW1vdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZVJlbW92ZUV2ZW50TGlzdGVuZXIuY2FsbCh0YXNrLnRhcmdldCwgdGFzay5ldmVudE5hbWUsIHRhc2suY2FwdHVyZSA/IGdsb2JhbFpvbmVBd2FyZUNhcHR1cmVDYWxsYmFjayA6IGdsb2JhbFpvbmVBd2FyZUNhbGxiYWNrLCB0YXNrLm9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBjdXN0b21TY2hlZHVsZU5vbkdsb2JhbCA9IGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZUFkZEV2ZW50TGlzdGVuZXIuY2FsbCh0YXNrRGF0YS50YXJnZXQsIHRhc2tEYXRhLmV2ZW50TmFtZSwgdGFzay5pbnZva2UsIHRhc2tEYXRhLm9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBjdXN0b21TY2hlZHVsZVByZXBlbmQgPSBmdW5jdGlvbiAodGFzaykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuYXRpdmVQcmVwZW5kRXZlbnRMaXN0ZW5lci5jYWxsKHRhc2tEYXRhLnRhcmdldCwgdGFza0RhdGEuZXZlbnROYW1lLCB0YXNrLmludm9rZSwgdGFza0RhdGEub3B0aW9ucyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGN1c3RvbUNhbmNlbE5vbkdsb2JhbCA9IGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZVJlbW92ZUV2ZW50TGlzdGVuZXIuY2FsbCh0YXNrLnRhcmdldCwgdGFzay5ldmVudE5hbWUsIHRhc2suaW52b2tlLCB0YXNrLm9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBjdXN0b21TY2hlZHVsZSA9IHVzZUdsb2JhbENhbGxiYWNrID8gY3VzdG9tU2NoZWR1bGVHbG9iYWwgOiBjdXN0b21TY2hlZHVsZU5vbkdsb2JhbDtcbiAgICAgICAgICAgIHZhciBjdXN0b21DYW5jZWwgPSB1c2VHbG9iYWxDYWxsYmFjayA/IGN1c3RvbUNhbmNlbEdsb2JhbCA6IGN1c3RvbUNhbmNlbE5vbkdsb2JhbDtcbiAgICAgICAgICAgIHZhciBjb21wYXJlVGFza0NhbGxiYWNrVnNEZWxlZ2F0ZSA9IGZ1bmN0aW9uICh0YXNrLCBkZWxlZ2F0ZSkge1xuICAgICAgICAgICAgICAgIHZhciB0eXBlT2ZEZWxlZ2F0ZSA9IHR5cGVvZiBkZWxlZ2F0ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHR5cGVPZkRlbGVnYXRlID09PSAnZnVuY3Rpb24nICYmIHRhc2suY2FsbGJhY2sgPT09IGRlbGVnYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAodHlwZU9mRGVsZWdhdGUgPT09ICdvYmplY3QnICYmIHRhc2sub3JpZ2luYWxEZWxlZ2F0ZSA9PT0gZGVsZWdhdGUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBjb21wYXJlID0gKHBhdGNoT3B0aW9ucyAmJiBwYXRjaE9wdGlvbnMuZGlmZikgPyBwYXRjaE9wdGlvbnMuZGlmZiA6IGNvbXBhcmVUYXNrQ2FsbGJhY2tWc0RlbGVnYXRlO1xuICAgICAgICAgICAgdmFyIHVucGF0Y2hlZEV2ZW50cyA9IFpvbmVbem9uZVN5bWJvbCQxKCdVTlBBVENIRURfRVZFTlRTJyldO1xuICAgICAgICAgICAgdmFyIHBhc3NpdmVFdmVudHMgPSBfZ2xvYmFsW3pvbmVTeW1ib2wkMSgnUEFTU0lWRV9FVkVOVFMnKV07XG4gICAgICAgICAgICB2YXIgbWFrZUFkZExpc3RlbmVyID0gZnVuY3Rpb24gKG5hdGl2ZUxpc3RlbmVyLCBhZGRTb3VyY2UsIGN1c3RvbVNjaGVkdWxlRm4sIGN1c3RvbUNhbmNlbEZuLCByZXR1cm5UYXJnZXQsIHByZXBlbmQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmV0dXJuVGFyZ2V0ID09PSB2b2lkIDApIHsgcmV0dXJuVGFyZ2V0ID0gZmFsc2U7IH1cbiAgICAgICAgICAgICAgICBpZiAocHJlcGVuZCA9PT0gdm9pZCAwKSB7IHByZXBlbmQgPSBmYWxzZTsgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzIHx8IF9nbG9iYWw7XG4gICAgICAgICAgICAgICAgICAgIHZhciBldmVudE5hbWUgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXRjaE9wdGlvbnMgJiYgcGF0Y2hPcHRpb25zLnRyYW5zZmVyRXZlbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudE5hbWUgPSBwYXRjaE9wdGlvbnMudHJhbnNmZXJFdmVudE5hbWUoZXZlbnROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgZGVsZWdhdGUgPSBhcmd1bWVudHNbMV07XG4gICAgICAgICAgICAgICAgICAgIGlmICghZGVsZWdhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYXRpdmVMaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc05vZGUgJiYgZXZlbnROYW1lID09PSAndW5jYXVnaHRFeGNlcHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBwYXRjaCB1bmNhdWdodEV4Y2VwdGlvbiBvZiBub2RlanMgdG8gcHJldmVudCBlbmRsZXNzIGxvb3BcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYXRpdmVMaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IGNyZWF0ZSB0aGUgYmluZCBkZWxlZ2F0ZSBmdW5jdGlvbiBmb3IgaGFuZGxlRXZlbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSBoZXJlIHRvIGltcHJvdmUgYWRkRXZlbnRMaXN0ZW5lciBwZXJmb3JtYW5jZVxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSB3aWxsIGNyZWF0ZSB0aGUgYmluZCBkZWxlZ2F0ZSB3aGVuIGludm9rZVxuICAgICAgICAgICAgICAgICAgICB2YXIgaXNIYW5kbGVFdmVudCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRlbGVnYXRlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRlbGVnYXRlLmhhbmRsZUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZUxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0hhbmRsZUV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGVIYW5kbGVyICYmICF2YWxpZGF0ZUhhbmRsZXIobmF0aXZlTGlzdGVuZXIsIGRlbGVnYXRlLCB0YXJnZXQsIGFyZ3VtZW50cykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFzc2l2ZSA9IHBhc3NpdmVTdXBwb3J0ZWQgJiYgISFwYXNzaXZlRXZlbnRzICYmIHBhc3NpdmVFdmVudHMuaW5kZXhPZihldmVudE5hbWUpICE9PSAtMTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBidWlsZEV2ZW50TGlzdGVuZXJPcHRpb25zKGFyZ3VtZW50c1syXSwgcGFzc2l2ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1bnBhdGNoZWRFdmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIHVucGF0Y2hlZCBsaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVucGF0Y2hlZEV2ZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudE5hbWUgPT09IHVucGF0Y2hlZEV2ZW50c1tpXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFzc2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZUxpc3RlbmVyLmNhbGwodGFyZ2V0LCBldmVudE5hbWUsIGRlbGVnYXRlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYXRpdmVMaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBjYXB0dXJlID0gIW9wdGlvbnMgPyBmYWxzZSA6IHR5cGVvZiBvcHRpb25zID09PSAnYm9vbGVhbicgPyB0cnVlIDogb3B0aW9ucy5jYXB0dXJlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgb25jZSA9IG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnID8gb3B0aW9ucy5vbmNlIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHZhciB6b25lID0gWm9uZS5jdXJyZW50O1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3ltYm9sRXZlbnROYW1lcyA9IHpvbmVTeW1ib2xFdmVudE5hbWVzW2V2ZW50TmFtZV07XG4gICAgICAgICAgICAgICAgICAgIGlmICghc3ltYm9sRXZlbnROYW1lcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJlcGFyZUV2ZW50TmFtZXMoZXZlbnROYW1lLCBldmVudE5hbWVUb1N0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2xFdmVudE5hbWVzID0gem9uZVN5bWJvbEV2ZW50TmFtZXNbZXZlbnROYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgc3ltYm9sRXZlbnROYW1lID0gc3ltYm9sRXZlbnROYW1lc1tjYXB0dXJlID8gVFJVRV9TVFIgOiBGQUxTRV9TVFJdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdUYXNrcyA9IHRhcmdldFtzeW1ib2xFdmVudE5hbWVdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXNFeGlzdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdUYXNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxyZWFkeSBoYXZlIHRhc2sgcmVnaXN0ZXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNFeGlzdGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tEdXBsaWNhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4aXN0aW5nVGFza3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXBhcmUoZXhpc3RpbmdUYXNrc1tpXSwgZGVsZWdhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzYW1lIGNhbGxiYWNrLCBzYW1lIGNhcHR1cmUsIHNhbWUgZXZlbnQgbmFtZSwganVzdCByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nVGFza3MgPSB0YXJnZXRbc3ltYm9sRXZlbnROYW1lXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25zdHJ1Y3Rvck5hbWUgPSB0YXJnZXQuY29uc3RydWN0b3JbJ25hbWUnXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldFNvdXJjZSA9IGdsb2JhbFNvdXJjZXNbY29uc3RydWN0b3JOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlID0gdGFyZ2V0U291cmNlW2V2ZW50TmFtZV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZSA9IGNvbnN0cnVjdG9yTmFtZSArIGFkZFNvdXJjZSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGV2ZW50TmFtZVRvU3RyaW5nID8gZXZlbnROYW1lVG9TdHJpbmcoZXZlbnROYW1lKSA6IGV2ZW50TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90IGNyZWF0ZSBhIG5ldyBvYmplY3QgYXMgdGFzay5kYXRhIHRvIHBhc3MgdGhvc2UgdGhpbmdzXG4gICAgICAgICAgICAgICAgICAgIC8vIGp1c3QgdXNlIHRoZSBnbG9iYWwgc2hhcmVkIG9uZVxuICAgICAgICAgICAgICAgICAgICB0YXNrRGF0YS5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9uY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGFkZEV2ZW50TGlzdGVuZXIgd2l0aCBvbmNlIG9wdGlvbnMsIHdlIGRvbid0IHBhc3MgaXQgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5hdGl2ZSBhZGRFdmVudExpc3RlbmVyLCBpbnN0ZWFkIHdlIGtlZXAgdGhlIG9uY2Ugc2V0dGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGhhbmRsZSBvdXJzZWx2ZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrRGF0YS5vcHRpb25zLm9uY2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0YXNrRGF0YS50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tEYXRhLmNhcHR1cmUgPSBjYXB0dXJlO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRGF0YS5ldmVudE5hbWUgPSBldmVudE5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tEYXRhLmlzRXhpc3RpbmcgPSBpc0V4aXN0aW5nO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHVzZUdsb2JhbENhbGxiYWNrID8gT1BUSU1JWkVEX1pPTkVfRVZFTlRfVEFTS19EQVRBIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAvLyBrZWVwIHRhc2tEYXRhIGludG8gZGF0YSB0byBhbGxvdyBvblNjaGVkdWxlRXZlbnRUYXNrIHRvIGFjY2VzcyB0aGUgdGFzayBpbmZvcm1hdGlvblxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS50YXNrRGF0YSA9IHRhc2tEYXRhO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXNrID0gem9uZS5zY2hlZHVsZUV2ZW50VGFzayhzb3VyY2UsIGRlbGVnYXRlLCBkYXRhLCBjdXN0b21TY2hlZHVsZUZuLCBjdXN0b21DYW5jZWxGbik7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNob3VsZCBjbGVhciB0YXNrRGF0YS50YXJnZXQgdG8gYXZvaWQgbWVtb3J5IGxlYWtcbiAgICAgICAgICAgICAgICAgICAgLy8gaXNzdWUsIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIvaXNzdWVzLzIwNDQyXG4gICAgICAgICAgICAgICAgICAgIHRhc2tEYXRhLnRhcmdldCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIC8vIG5lZWQgdG8gY2xlYXIgdXAgdGFza0RhdGEgYmVjYXVzZSBpdCBpcyBhIGdsb2JhbCBvYmplY3RcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudGFza0RhdGEgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGhhdmUgdG8gc2F2ZSB0aG9zZSBpbmZvcm1hdGlvbiB0byB0YXNrIGluIGNhc2VcbiAgICAgICAgICAgICAgICAgICAgLy8gYXBwbGljYXRpb24gbWF5IGNhbGwgdGFzay56b25lLmNhbmNlbFRhc2soKSBkaXJlY3RseVxuICAgICAgICAgICAgICAgICAgICBpZiAob25jZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5vbmNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoISghcGFzc2l2ZVN1cHBvcnRlZCAmJiB0eXBlb2YgdGFzay5vcHRpb25zID09PSAnYm9vbGVhbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBub3Qgc3VwcG9ydCBwYXNzaXZlLCBhbmQgd2UgcGFzcyBhbiBvcHRpb24gb2JqZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0byBhZGRFdmVudExpc3RlbmVyLCB3ZSBzaG91bGQgc2F2ZSB0aGUgb3B0aW9ucyB0byB0YXNrXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRhc2sudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICB0YXNrLmNhcHR1cmUgPSBjYXB0dXJlO1xuICAgICAgICAgICAgICAgICAgICB0YXNrLmV2ZW50TmFtZSA9IGV2ZW50TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSGFuZGxlRXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNhdmUgb3JpZ2luYWwgZGVsZWdhdGUgZm9yIGNvbXBhcmUgdG8gY2hlY2sgZHVwbGljYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrLm9yaWdpbmFsRGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXByZXBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nVGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nVGFza3MudW5zaGlmdCh0YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocmV0dXJuVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBwcm90b1tBRERfRVZFTlRfTElTVEVORVJdID0gbWFrZUFkZExpc3RlbmVyKG5hdGl2ZUFkZEV2ZW50TGlzdGVuZXIsIEFERF9FVkVOVF9MSVNURU5FUl9TT1VSQ0UsIGN1c3RvbVNjaGVkdWxlLCBjdXN0b21DYW5jZWwsIHJldHVyblRhcmdldCk7XG4gICAgICAgICAgICBpZiAobmF0aXZlUHJlcGVuZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICBwcm90b1tQUkVQRU5EX0VWRU5UX0xJU1RFTkVSXSA9IG1ha2VBZGRMaXN0ZW5lcihuYXRpdmVQcmVwZW5kRXZlbnRMaXN0ZW5lciwgUFJFUEVORF9FVkVOVF9MSVNURU5FUl9TT1VSQ0UsIGN1c3RvbVNjaGVkdWxlUHJlcGVuZCwgY3VzdG9tQ2FuY2VsLCByZXR1cm5UYXJnZXQsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJvdG9bUkVNT1ZFX0VWRU5UX0xJU1RFTkVSXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcyB8fCBfZ2xvYmFsO1xuICAgICAgICAgICAgICAgIHZhciBldmVudE5hbWUgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICAgICAgaWYgKHBhdGNoT3B0aW9ucyAmJiBwYXRjaE9wdGlvbnMudHJhbnNmZXJFdmVudE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnROYW1lID0gcGF0Y2hPcHRpb25zLnRyYW5zZmVyRXZlbnROYW1lKGV2ZW50TmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzWzJdO1xuICAgICAgICAgICAgICAgIHZhciBjYXB0dXJlID0gIW9wdGlvbnMgPyBmYWxzZSA6IHR5cGVvZiBvcHRpb25zID09PSAnYm9vbGVhbicgPyB0cnVlIDogb3B0aW9ucy5jYXB0dXJlO1xuICAgICAgICAgICAgICAgIHZhciBkZWxlZ2F0ZSA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgICAgICAgICBpZiAoIWRlbGVnYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuYXRpdmVSZW1vdmVFdmVudExpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0ZUhhbmRsZXIgJiZcbiAgICAgICAgICAgICAgICAgICAgIXZhbGlkYXRlSGFuZGxlcihuYXRpdmVSZW1vdmVFdmVudExpc3RlbmVyLCBkZWxlZ2F0ZSwgdGFyZ2V0LCBhcmd1bWVudHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHN5bWJvbEV2ZW50TmFtZXMgPSB6b25lU3ltYm9sRXZlbnROYW1lc1tldmVudE5hbWVdO1xuICAgICAgICAgICAgICAgIHZhciBzeW1ib2xFdmVudE5hbWU7XG4gICAgICAgICAgICAgICAgaWYgKHN5bWJvbEV2ZW50TmFtZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ltYm9sRXZlbnROYW1lID0gc3ltYm9sRXZlbnROYW1lc1tjYXB0dXJlID8gVFJVRV9TVFIgOiBGQUxTRV9TVFJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdUYXNrcyA9IHN5bWJvbEV2ZW50TmFtZSAmJiB0YXJnZXRbc3ltYm9sRXZlbnROYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdUYXNrcykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4aXN0aW5nVGFza3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ1Rhc2sgPSBleGlzdGluZ1Rhc2tzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXBhcmUoZXhpc3RpbmdUYXNrLCBkZWxlZ2F0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ1Rhc2tzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgaXNSZW1vdmVkIHRvIGRhdGEgZm9yIGZhc3RlciBpbnZva2VUYXNrIGNoZWNrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdUYXNrLmlzUmVtb3ZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nVGFza3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsbCB0YXNrcyBmb3IgdGhlIGV2ZW50TmFtZSArIGNhcHR1cmUgaGF2ZSBnb25lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgZ2xvYmFsWm9uZUF3YXJlQ2FsbGJhY2sgYW5kIHJlbW92ZSB0aGUgdGFzayBjYWNoZSBmcm9tIHRhcmdldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ1Rhc2suYWxsUmVtb3ZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFtzeW1ib2xFdmVudE5hbWVdID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gdGhlIHRhcmdldCwgd2UgaGF2ZSBhbiBldmVudCBsaXN0ZW5lciB3aGljaCBpcyBhZGRlZCBieSBvbl9wcm9wZXJ0eVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdWNoIGFzIHRhcmdldC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7fSwgc28gd2UgbmVlZCB0byBjbGVhciB0aGlzIGludGVybmFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByb3BlcnR5IHRvbyBpZiBhbGwgZGVsZWdhdGVzIGFsbCByZW1vdmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXZlbnROYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9uUHJvcGVydHlTeW1ib2wgPSBaT05FX1NZTUJPTF9QUkVGSVggKyAnT05fUFJPUEVSVFknICsgZXZlbnROYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W29uUHJvcGVydHlTeW1ib2xdID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ1Rhc2suem9uZS5jYW5jZWxUYXNrKGV4aXN0aW5nVGFzayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldHVyblRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gaXNzdWUgOTMwLCBkaWRuJ3QgZmluZCB0aGUgZXZlbnQgbmFtZSBvciBjYWxsYmFja1xuICAgICAgICAgICAgICAgIC8vIGZyb20gem9uZSBrZXB0IGV4aXN0aW5nVGFza3MsIHRoZSBjYWxsYmFjayBtYXliZVxuICAgICAgICAgICAgICAgIC8vIGFkZGVkIG91dHNpZGUgb2Ygem9uZSwgd2UgbmVlZCB0byBjYWxsIG5hdGl2ZSByZW1vdmVFdmVudExpc3RlbmVyXG4gICAgICAgICAgICAgICAgLy8gdG8gdHJ5IHRvIHJlbW92ZSBpdC5cbiAgICAgICAgICAgICAgICByZXR1cm4gbmF0aXZlUmVtb3ZlRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHByb3RvW0xJU1RFTkVSU19FVkVOVF9MSVNURU5FUl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMgfHwgX2dsb2JhbDtcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnROYW1lID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgICAgIGlmIChwYXRjaE9wdGlvbnMgJiYgcGF0Y2hPcHRpb25zLnRyYW5zZmVyRXZlbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50TmFtZSA9IHBhdGNoT3B0aW9ucy50cmFuc2ZlckV2ZW50TmFtZShldmVudE5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbGlzdGVuZXJzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIHRhc2tzID0gZmluZEV2ZW50VGFza3ModGFyZ2V0LCBldmVudE5hbWVUb1N0cmluZyA/IGV2ZW50TmFtZVRvU3RyaW5nKGV2ZW50TmFtZSkgOiBldmVudE5hbWUpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFza3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlbGVnYXRlID0gdGFzay5vcmlnaW5hbERlbGVnYXRlID8gdGFzay5vcmlnaW5hbERlbGVnYXRlIDogdGFzay5jYWxsYmFjaztcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzLnB1c2goZGVsZWdhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdGVuZXJzO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHByb3RvW1JFTU9WRV9BTExfTElTVEVORVJTX0VWRU5UX0xJU1RFTkVSXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcyB8fCBfZ2xvYmFsO1xuICAgICAgICAgICAgICAgIHZhciBldmVudE5hbWUgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICAgICAgaWYgKCFldmVudE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0ga2V5c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IEVWRU5UX05BTUVfU1lNQk9MX1JFR1guZXhlYyhwcm9wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBldnROYW1lID0gbWF0Y2ggJiYgbWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbiBub2RlanMgRXZlbnRFbWl0dGVyLCByZW1vdmVMaXN0ZW5lciBldmVudCBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlZCBmb3IgbW9uaXRvcmluZyB0aGUgcmVtb3ZlTGlzdGVuZXIgY2FsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIGp1c3Qga2VlcCByZW1vdmVMaXN0ZW5lciBldmVudExpc3RlbmVyIHVudGlsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGwgb3RoZXIgZXZlbnRMaXN0ZW5lcnMgYXJlIHJlbW92ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldnROYW1lICYmIGV2dE5hbWUgIT09ICdyZW1vdmVMaXN0ZW5lcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW1JFTU9WRV9BTExfTElTVEVORVJTX0VWRU5UX0xJU1RFTkVSXS5jYWxsKHRoaXMsIGV2dE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSByZW1vdmVMaXN0ZW5lciBsaXN0ZW5lciBmaW5hbGx5XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbUkVNT1ZFX0FMTF9MSVNURU5FUlNfRVZFTlRfTElTVEVORVJdLmNhbGwodGhpcywgJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGF0Y2hPcHRpb25zICYmIHBhdGNoT3B0aW9ucy50cmFuc2ZlckV2ZW50TmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnROYW1lID0gcGF0Y2hPcHRpb25zLnRyYW5zZmVyRXZlbnROYW1lKGV2ZW50TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHN5bWJvbEV2ZW50TmFtZXMgPSB6b25lU3ltYm9sRXZlbnROYW1lc1tldmVudE5hbWVdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3ltYm9sRXZlbnROYW1lcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN5bWJvbEV2ZW50TmFtZSA9IHN5bWJvbEV2ZW50TmFtZXNbRkFMU0VfU1RSXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzeW1ib2xDYXB0dXJlRXZlbnROYW1lID0gc3ltYm9sRXZlbnROYW1lc1tUUlVFX1NUUl07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFza3MgPSB0YXJnZXRbc3ltYm9sRXZlbnROYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYXB0dXJlVGFza3MgPSB0YXJnZXRbc3ltYm9sQ2FwdHVyZUV2ZW50TmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFza3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlVGFza3MgPSB0YXNrcy5zbGljZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVtb3ZlVGFza3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhc2sgPSByZW1vdmVUYXNrc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbGVnYXRlID0gdGFzay5vcmlnaW5hbERlbGVnYXRlID8gdGFzay5vcmlnaW5hbERlbGVnYXRlIDogdGFzay5jYWxsYmFjaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1tSRU1PVkVfRVZFTlRfTElTVEVORVJdLmNhbGwodGhpcywgZXZlbnROYW1lLCBkZWxlZ2F0ZSwgdGFzay5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FwdHVyZVRhc2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlbW92ZVRhc2tzID0gY2FwdHVyZVRhc2tzLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZW1vdmVUYXNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFzayA9IHJlbW92ZVRhc2tzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsZWdhdGUgPSB0YXNrLm9yaWdpbmFsRGVsZWdhdGUgPyB0YXNrLm9yaWdpbmFsRGVsZWdhdGUgOiB0YXNrLmNhbGxiYWNrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW1JFTU9WRV9FVkVOVF9MSVNURU5FUl0uY2FsbCh0aGlzLCBldmVudE5hbWUsIGRlbGVnYXRlLCB0YXNrLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmV0dXJuVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBmb3IgbmF0aXZlIHRvU3RyaW5nIHBhdGNoXG4gICAgICAgICAgICBhdHRhY2hPcmlnaW5Ub1BhdGNoZWQocHJvdG9bQUREX0VWRU5UX0xJU1RFTkVSXSwgbmF0aXZlQWRkRXZlbnRMaXN0ZW5lcik7XG4gICAgICAgICAgICBhdHRhY2hPcmlnaW5Ub1BhdGNoZWQocHJvdG9bUkVNT1ZFX0VWRU5UX0xJU1RFTkVSXSwgbmF0aXZlUmVtb3ZlRXZlbnRMaXN0ZW5lcik7XG4gICAgICAgICAgICBpZiAobmF0aXZlUmVtb3ZlQWxsTGlzdGVuZXJzKSB7XG4gICAgICAgICAgICAgICAgYXR0YWNoT3JpZ2luVG9QYXRjaGVkKHByb3RvW1JFTU9WRV9BTExfTElTVEVORVJTX0VWRU5UX0xJU1RFTkVSXSwgbmF0aXZlUmVtb3ZlQWxsTGlzdGVuZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuYXRpdmVMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgICAgICBhdHRhY2hPcmlnaW5Ub1BhdGNoZWQocHJvdG9bTElTVEVORVJTX0VWRU5UX0xJU1RFTkVSXSwgbmF0aXZlTGlzdGVuZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXN1bHRzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXBpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcmVzdWx0c1tpXSA9IHBhdGNoRXZlbnRUYXJnZXRNZXRob2RzKGFwaXNbaV0sIHBhdGNoT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZpbmRFdmVudFRhc2tzKHRhcmdldCwgZXZlbnROYW1lKSB7XG4gICAgICAgIGlmICghZXZlbnROYW1lKSB7XG4gICAgICAgICAgICB2YXIgZm91bmRUYXNrcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBFVkVOVF9OQU1FX1NZTUJPTF9SRUdYLmV4ZWMocHJvcCk7XG4gICAgICAgICAgICAgICAgdmFyIGV2dE5hbWUgPSBtYXRjaCAmJiBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICBpZiAoZXZ0TmFtZSAmJiAoIWV2ZW50TmFtZSB8fCBldnROYW1lID09PSBldmVudE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXNrcyA9IHRhcmdldFtwcm9wXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhc2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhc2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRUYXNrcy5wdXNoKHRhc2tzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmb3VuZFRhc2tzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzeW1ib2xFdmVudE5hbWUgPSB6b25lU3ltYm9sRXZlbnROYW1lc1tldmVudE5hbWVdO1xuICAgICAgICBpZiAoIXN5bWJvbEV2ZW50TmFtZSkge1xuICAgICAgICAgICAgcHJlcGFyZUV2ZW50TmFtZXMoZXZlbnROYW1lKTtcbiAgICAgICAgICAgIHN5bWJvbEV2ZW50TmFtZSA9IHpvbmVTeW1ib2xFdmVudE5hbWVzW2V2ZW50TmFtZV07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNhcHR1cmVGYWxzZVRhc2tzID0gdGFyZ2V0W3N5bWJvbEV2ZW50TmFtZVtGQUxTRV9TVFJdXTtcbiAgICAgICAgdmFyIGNhcHR1cmVUcnVlVGFza3MgPSB0YXJnZXRbc3ltYm9sRXZlbnROYW1lW1RSVUVfU1RSXV07XG4gICAgICAgIGlmICghY2FwdHVyZUZhbHNlVGFza3MpIHtcbiAgICAgICAgICAgIHJldHVybiBjYXB0dXJlVHJ1ZVRhc2tzID8gY2FwdHVyZVRydWVUYXNrcy5zbGljZSgpIDogW107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gY2FwdHVyZVRydWVUYXNrcyA/IGNhcHR1cmVGYWxzZVRhc2tzLmNvbmNhdChjYXB0dXJlVHJ1ZVRhc2tzKSA6XG4gICAgICAgICAgICAgICAgY2FwdHVyZUZhbHNlVGFza3Muc2xpY2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBwYXRjaEV2ZW50UHJvdG90eXBlKGdsb2JhbCwgYXBpKSB7XG4gICAgICAgIHZhciBFdmVudCA9IGdsb2JhbFsnRXZlbnQnXTtcbiAgICAgICAgaWYgKEV2ZW50ICYmIEV2ZW50LnByb3RvdHlwZSkge1xuICAgICAgICAgICAgYXBpLnBhdGNoTWV0aG9kKEV2ZW50LnByb3RvdHlwZSwgJ3N0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbicsIGZ1bmN0aW9uIChkZWxlZ2F0ZSkgeyByZXR1cm4gZnVuY3Rpb24gKHNlbGYsIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICBzZWxmW0lNTUVESUFURV9QUk9QQUdBVElPTl9TWU1CT0xdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIGNhbGwgdGhlIG5hdGl2ZSBzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb25cbiAgICAgICAgICAgICAgICAvLyBpbiBjYXNlIGluIHNvbWUgaHlicmlkIGFwcGxpY2F0aW9uLCBzb21lIHBhcnQgb2ZcbiAgICAgICAgICAgICAgICAvLyBhcHBsaWNhdGlvbiB3aWxsIGJlIGNvbnRyb2xsZWQgYnkgem9uZSwgc29tZSBhcmUgbm90XG4gICAgICAgICAgICAgICAgZGVsZWdhdGUgJiYgZGVsZWdhdGUuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgICB9OyB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbGljZW5zZVxuICAgICAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gICAgICpcbiAgICAgKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICAgICAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwYXRjaENhbGxiYWNrcyhhcGksIHRhcmdldCwgdGFyZ2V0TmFtZSwgbWV0aG9kLCBjYWxsYmFja3MpIHtcbiAgICAgICAgdmFyIHN5bWJvbCA9IFpvbmUuX19zeW1ib2xfXyhtZXRob2QpO1xuICAgICAgICBpZiAodGFyZ2V0W3N5bWJvbF0pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmF0aXZlRGVsZWdhdGUgPSB0YXJnZXRbc3ltYm9sXSA9IHRhcmdldFttZXRob2RdO1xuICAgICAgICB0YXJnZXRbbWV0aG9kXSA9IGZ1bmN0aW9uIChuYW1lLCBvcHRzLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAob3B0cyAmJiBvcHRzLnByb3RvdHlwZSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gXCJcIi5jb25jYXQodGFyZ2V0TmFtZSwgXCIuXCIpLmNvbmNhdChtZXRob2QsIFwiOjpcIikgKyBjYWxsYmFjaztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3RvdHlwZSA9IG9wdHMucHJvdG90eXBlO1xuICAgICAgICAgICAgICAgICAgICAvLyBOb3RlOiB0aGUgYHBhdGNoQ2FsbGJhY2tzYCBpcyB1c2VkIGZvciBwYXRjaGluZyB0aGUgYGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudGAgYW5kXG4gICAgICAgICAgICAgICAgICAgIC8vIGBjdXN0b21FbGVtZW50cy5kZWZpbmVgLiBXZSBleHBsaWNpdGx5IHdyYXAgdGhlIHBhdGNoaW5nIGNvZGUgaW50byB0cnktY2F0Y2ggc2luY2VcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGJhY2tzIG1heSBiZSBhbHJlYWR5IHBhdGNoZWQgYnkgb3RoZXIgd2ViIGNvbXBvbmVudHMgZnJhbWV3b3JrcyAoZS5nLiBMV0MpLCBhbmQgdGhleVxuICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHRob3NlIHByb3BlcnRpZXMgbm9uLXdyaXRhYmxlLiBUaGlzIG1lYW5zIHRoYXQgcGF0Y2hpbmcgY2FsbGJhY2sgd2lsbCB0aHJvdyBhbiBlcnJvclxuICAgICAgICAgICAgICAgICAgICAvLyBgY2Fubm90IGFzc2lnbiB0byByZWFkLW9ubHkgcHJvcGVydHlgLiBTZWUgdGhpcyBjb2RlIGFzIGFuIGV4YW1wbGU6XG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zYWxlc2ZvcmNlL2x3Yy9ibG9iL21hc3Rlci9wYWNrYWdlcy9AbHdjL2VuZ2luZS1jb3JlL3NyYy9mcmFtZXdvcmsvYmFzZS1icmlkZ2UtZWxlbWVudC50cyNMMTgwLUwxODZcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3Qgd2FudCB0byBzdG9wIHRoZSBhcHBsaWNhdGlvbiByZW5kZXJpbmcgaWYgd2UgY291bGRuJ3QgcGF0Y2ggc29tZVxuICAgICAgICAgICAgICAgICAgICAvLyBjYWxsYmFjaywgZS5nLiBgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrYC5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm90b3R5cGUuaGFzT3duUHJvcGVydHkoY2FsbGJhY2spKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBhcGkuT2JqZWN0R2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvdHlwZSwgY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXNjcmlwdG9yICYmIGRlc2NyaXB0b3IudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRvci52YWx1ZSA9IGFwaS53cmFwV2l0aEN1cnJlbnRab25lKGRlc2NyaXB0b3IudmFsdWUsIHNvdXJjZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5fcmVkZWZpbmVQcm9wZXJ0eShvcHRzLnByb3RvdHlwZSwgY2FsbGJhY2ssIGRlc2NyaXB0b3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm90b3R5cGVbY2FsbGJhY2tdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3RvdHlwZVtjYWxsYmFja10gPSBhcGkud3JhcFdpdGhDdXJyZW50Wm9uZShwcm90b3R5cGVbY2FsbGJhY2tdLCBzb3VyY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHByb3RvdHlwZVtjYWxsYmFja10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm90b3R5cGVbY2FsbGJhY2tdID0gYXBpLndyYXBXaXRoQ3VycmVudFpvbmUocHJvdG90eXBlW2NhbGxiYWNrXSwgc291cmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdGU6IHdlIGxlYXZlIHRoZSBjYXRjaCBibG9jayBlbXB0eSBzaW5jZSB0aGVyZSdzIG5vIHdheSB0byBoYW5kbGUgdGhlIGVycm9yIHJlbGF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIG5vbi13cml0YWJsZSBwcm9wZXJ0eS5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZURlbGVnYXRlLmNhbGwodGFyZ2V0LCBuYW1lLCBvcHRzLCBvcHRpb25zKTtcbiAgICAgICAgfTtcbiAgICAgICAgYXBpLmF0dGFjaE9yaWdpblRvUGF0Y2hlZCh0YXJnZXRbbWV0aG9kXSwgbmF0aXZlRGVsZWdhdGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbGljZW5zZVxuICAgICAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gICAgICpcbiAgICAgKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICAgICAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmaWx0ZXJQcm9wZXJ0aWVzKHRhcmdldCwgb25Qcm9wZXJ0aWVzLCBpZ25vcmVQcm9wZXJ0aWVzKSB7XG4gICAgICAgIGlmICghaWdub3JlUHJvcGVydGllcyB8fCBpZ25vcmVQcm9wZXJ0aWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG9uUHJvcGVydGllcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGlwID0gaWdub3JlUHJvcGVydGllcy5maWx0ZXIoZnVuY3Rpb24gKGlwKSB7IHJldHVybiBpcC50YXJnZXQgPT09IHRhcmdldDsgfSk7XG4gICAgICAgIGlmICghdGlwIHx8IHRpcC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBvblByb3BlcnRpZXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRhcmdldElnbm9yZVByb3BlcnRpZXMgPSB0aXBbMF0uaWdub3JlUHJvcGVydGllcztcbiAgICAgICAgcmV0dXJuIG9uUHJvcGVydGllcy5maWx0ZXIoZnVuY3Rpb24gKG9wKSB7IHJldHVybiB0YXJnZXRJZ25vcmVQcm9wZXJ0aWVzLmluZGV4T2Yob3ApID09PSAtMTsgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBhdGNoRmlsdGVyZWRQcm9wZXJ0aWVzKHRhcmdldCwgb25Qcm9wZXJ0aWVzLCBpZ25vcmVQcm9wZXJ0aWVzLCBwcm90b3R5cGUpIHtcbiAgICAgICAgLy8gY2hlY2sgd2hldGhlciB0YXJnZXQgaXMgYXZhaWxhYmxlLCBzb21ldGltZXMgdGFyZ2V0IHdpbGwgYmUgdW5kZWZpbmVkXG4gICAgICAgIC8vIGJlY2F1c2UgZGlmZmVyZW50IGJyb3dzZXIgb3Igc29tZSAzcmQgcGFydHkgcGx1Z2luLlxuICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmaWx0ZXJlZFByb3BlcnRpZXMgPSBmaWx0ZXJQcm9wZXJ0aWVzKHRhcmdldCwgb25Qcm9wZXJ0aWVzLCBpZ25vcmVQcm9wZXJ0aWVzKTtcbiAgICAgICAgcGF0Y2hPblByb3BlcnRpZXModGFyZ2V0LCBmaWx0ZXJlZFByb3BlcnRpZXMsIHByb3RvdHlwZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgZXZlbnQgbmFtZSBwcm9wZXJ0aWVzIHdoaWNoIHRoZSBldmVudCBuYW1lIHN0YXJ0c1dpdGggYG9uYFxuICAgICAqIGZyb20gdGhlIHRhcmdldCBvYmplY3QgaXRzZWxmLCBpbmhlcml0ZWQgcHJvcGVydGllcyBhcmUgbm90IGNvbnNpZGVyZWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0T25FdmVudE5hbWVzKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gbmFtZS5zdGFydHNXaXRoKCdvbicpICYmIG5hbWUubGVuZ3RoID4gMjsgfSlcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIG5hbWUuc3Vic3RyaW5nKDIpOyB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJvcGVydHlEZXNjcmlwdG9yUGF0Y2goYXBpLCBfZ2xvYmFsKSB7XG4gICAgICAgIGlmIChpc05vZGUgJiYgIWlzTWl4KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFpvbmVbYXBpLnN5bWJvbCgncGF0Y2hFdmVudHMnKV0pIHtcbiAgICAgICAgICAgIC8vIGV2ZW50cyBhcmUgYWxyZWFkeSBiZWVuIHBhdGNoZWQgYnkgbGVnYWN5IHBhdGNoLlxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpZ25vcmVQcm9wZXJ0aWVzID0gX2dsb2JhbFsnX19ab25lX2lnbm9yZV9vbl9wcm9wZXJ0aWVzJ107XG4gICAgICAgIC8vIGZvciBicm93c2VycyB0aGF0IHdlIGNhbiBwYXRjaCB0aGUgZGVzY3JpcHRvcjogIENocm9tZSAmIEZpcmVmb3hcbiAgICAgICAgdmFyIHBhdGNoVGFyZ2V0cyA9IFtdO1xuICAgICAgICBpZiAoaXNCcm93c2VyKSB7XG4gICAgICAgICAgICB2YXIgaW50ZXJuYWxXaW5kb3dfMSA9IHdpbmRvdztcbiAgICAgICAgICAgIHBhdGNoVGFyZ2V0cyA9IHBhdGNoVGFyZ2V0cy5jb25jYXQoW1xuICAgICAgICAgICAgICAgICdEb2N1bWVudCcsICdTVkdFbGVtZW50JywgJ0VsZW1lbnQnLCAnSFRNTEVsZW1lbnQnLCAnSFRNTEJvZHlFbGVtZW50JywgJ0hUTUxNZWRpYUVsZW1lbnQnLFxuICAgICAgICAgICAgICAgICdIVE1MRnJhbWVTZXRFbGVtZW50JywgJ0hUTUxGcmFtZUVsZW1lbnQnLCAnSFRNTElGcmFtZUVsZW1lbnQnLCAnSFRNTE1hcnF1ZWVFbGVtZW50JywgJ1dvcmtlcidcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgdmFyIGlnbm9yZUVycm9yUHJvcGVydGllcyA9IGlzSUUoKSA/IFt7IHRhcmdldDogaW50ZXJuYWxXaW5kb3dfMSwgaWdub3JlUHJvcGVydGllczogWydlcnJvciddIH1dIDogW107XG4gICAgICAgICAgICAvLyBpbiBJRS9FZGdlLCBvblByb3Agbm90IGV4aXN0IGluIHdpbmRvdyBvYmplY3QsIGJ1dCBpbiBXaW5kb3dQcm90b3R5cGVcbiAgICAgICAgICAgIC8vIHNvIHdlIG5lZWQgdG8gcGFzcyBXaW5kb3dQcm90b3R5cGUgdG8gY2hlY2sgb25Qcm9wIGV4aXN0IG9yIG5vdFxuICAgICAgICAgICAgcGF0Y2hGaWx0ZXJlZFByb3BlcnRpZXMoaW50ZXJuYWxXaW5kb3dfMSwgZ2V0T25FdmVudE5hbWVzKGludGVybmFsV2luZG93XzEpLCBpZ25vcmVQcm9wZXJ0aWVzID8gaWdub3JlUHJvcGVydGllcy5jb25jYXQoaWdub3JlRXJyb3JQcm9wZXJ0aWVzKSA6IGlnbm9yZVByb3BlcnRpZXMsIE9iamVjdEdldFByb3RvdHlwZU9mKGludGVybmFsV2luZG93XzEpKTtcbiAgICAgICAgfVxuICAgICAgICBwYXRjaFRhcmdldHMgPSBwYXRjaFRhcmdldHMuY29uY2F0KFtcbiAgICAgICAgICAgICdYTUxIdHRwUmVxdWVzdCcsICdYTUxIdHRwUmVxdWVzdEV2ZW50VGFyZ2V0JywgJ0lEQkluZGV4JywgJ0lEQlJlcXVlc3QnLCAnSURCT3BlbkRCUmVxdWVzdCcsXG4gICAgICAgICAgICAnSURCRGF0YWJhc2UnLCAnSURCVHJhbnNhY3Rpb24nLCAnSURCQ3Vyc29yJywgJ1dlYlNvY2tldCdcbiAgICAgICAgXSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0Y2hUYXJnZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gX2dsb2JhbFtwYXRjaFRhcmdldHNbaV1dO1xuICAgICAgICAgICAgdGFyZ2V0ICYmIHRhcmdldC5wcm90b3R5cGUgJiZcbiAgICAgICAgICAgICAgICBwYXRjaEZpbHRlcmVkUHJvcGVydGllcyh0YXJnZXQucHJvdG90eXBlLCBnZXRPbkV2ZW50TmFtZXModGFyZ2V0LnByb3RvdHlwZSksIGlnbm9yZVByb3BlcnRpZXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBsaWNlbnNlXG4gICAgICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAgICAgKlxuICAgICAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gICAgICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICAgICAqL1xuICAgIFpvbmUuX19sb2FkX3BhdGNoKCd1dGlsJywgZnVuY3Rpb24gKGdsb2JhbCwgWm9uZSwgYXBpKSB7XG4gICAgICAgIC8vIENvbGxlY3QgbmF0aXZlIGV2ZW50IG5hbWVzIGJ5IGxvb2tpbmcgYXQgcHJvcGVydGllc1xuICAgICAgICAvLyBvbiB0aGUgZ2xvYmFsIG5hbWVzcGFjZSwgZS5nLiAnb25jbGljaycuXG4gICAgICAgIHZhciBldmVudE5hbWVzID0gZ2V0T25FdmVudE5hbWVzKGdsb2JhbCk7XG4gICAgICAgIGFwaS5wYXRjaE9uUHJvcGVydGllcyA9IHBhdGNoT25Qcm9wZXJ0aWVzO1xuICAgICAgICBhcGkucGF0Y2hNZXRob2QgPSBwYXRjaE1ldGhvZDtcbiAgICAgICAgYXBpLmJpbmRBcmd1bWVudHMgPSBiaW5kQXJndW1lbnRzO1xuICAgICAgICBhcGkucGF0Y2hNYWNyb1Rhc2sgPSBwYXRjaE1hY3JvVGFzaztcbiAgICAgICAgLy8gSW4gZWFybGllciB2ZXJzaW9uIG9mIHpvbmUuanMgKDwwLjkuMCksIHdlIHVzZSBlbnYgbmFtZSBgX196b25lX3N5bWJvbF9fQkxBQ0tfTElTVEVEX0VWRU5UU2AgdG9cbiAgICAgICAgLy8gZGVmaW5lIHdoaWNoIGV2ZW50cyB3aWxsIG5vdCBiZSBwYXRjaGVkIGJ5IGBab25lLmpzYC5cbiAgICAgICAgLy8gSW4gbmV3ZXIgdmVyc2lvbiAoPj0wLjkuMCksIHdlIGNoYW5nZSB0aGUgZW52IG5hbWUgdG8gYF9fem9uZV9zeW1ib2xfX1VOUEFUQ0hFRF9FVkVOVFNgIHRvIGtlZXBcbiAgICAgICAgLy8gdGhlIG5hbWUgY29uc2lzdGVudCB3aXRoIGFuZ3VsYXIgcmVwby5cbiAgICAgICAgLy8gVGhlICBgX196b25lX3N5bWJvbF9fQkxBQ0tfTElTVEVEX0VWRU5UU2AgaXMgZGVwcmVjYXRlZCwgYnV0IGl0IGlzIHN0aWxsIGJlIHN1cHBvcnRlZCBmb3JcbiAgICAgICAgLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gICAgICAgIHZhciBTWU1CT0xfQkxBQ0tfTElTVEVEX0VWRU5UUyA9IFpvbmUuX19zeW1ib2xfXygnQkxBQ0tfTElTVEVEX0VWRU5UUycpO1xuICAgICAgICB2YXIgU1lNQk9MX1VOUEFUQ0hFRF9FVkVOVFMgPSBab25lLl9fc3ltYm9sX18oJ1VOUEFUQ0hFRF9FVkVOVFMnKTtcbiAgICAgICAgaWYgKGdsb2JhbFtTWU1CT0xfVU5QQVRDSEVEX0VWRU5UU10pIHtcbiAgICAgICAgICAgIGdsb2JhbFtTWU1CT0xfQkxBQ0tfTElTVEVEX0VWRU5UU10gPSBnbG9iYWxbU1lNQk9MX1VOUEFUQ0hFRF9FVkVOVFNdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnbG9iYWxbU1lNQk9MX0JMQUNLX0xJU1RFRF9FVkVOVFNdKSB7XG4gICAgICAgICAgICBab25lW1NZTUJPTF9CTEFDS19MSVNURURfRVZFTlRTXSA9IFpvbmVbU1lNQk9MX1VOUEFUQ0hFRF9FVkVOVFNdID1cbiAgICAgICAgICAgICAgICBnbG9iYWxbU1lNQk9MX0JMQUNLX0xJU1RFRF9FVkVOVFNdO1xuICAgICAgICB9XG4gICAgICAgIGFwaS5wYXRjaEV2ZW50UHJvdG90eXBlID0gcGF0Y2hFdmVudFByb3RvdHlwZTtcbiAgICAgICAgYXBpLnBhdGNoRXZlbnRUYXJnZXQgPSBwYXRjaEV2ZW50VGFyZ2V0O1xuICAgICAgICBhcGkuaXNJRU9yRWRnZSA9IGlzSUVPckVkZ2U7XG4gICAgICAgIGFwaS5PYmplY3REZWZpbmVQcm9wZXJ0eSA9IE9iamVjdERlZmluZVByb3BlcnR5O1xuICAgICAgICBhcGkuT2JqZWN0R2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0R2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuICAgICAgICBhcGkuT2JqZWN0Q3JlYXRlID0gT2JqZWN0Q3JlYXRlO1xuICAgICAgICBhcGkuQXJyYXlTbGljZSA9IEFycmF5U2xpY2U7XG4gICAgICAgIGFwaS5wYXRjaENsYXNzID0gcGF0Y2hDbGFzcztcbiAgICAgICAgYXBpLndyYXBXaXRoQ3VycmVudFpvbmUgPSB3cmFwV2l0aEN1cnJlbnRab25lO1xuICAgICAgICBhcGkuZmlsdGVyUHJvcGVydGllcyA9IGZpbHRlclByb3BlcnRpZXM7XG4gICAgICAgIGFwaS5hdHRhY2hPcmlnaW5Ub1BhdGNoZWQgPSBhdHRhY2hPcmlnaW5Ub1BhdGNoZWQ7XG4gICAgICAgIGFwaS5fcmVkZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbiAgICAgICAgYXBpLnBhdGNoQ2FsbGJhY2tzID0gcGF0Y2hDYWxsYmFja3M7XG4gICAgICAgIGFwaS5nZXRHbG9iYWxPYmplY3RzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICAgICAgICAgIGdsb2JhbFNvdXJjZXM6IGdsb2JhbFNvdXJjZXMsXG4gICAgICAgICAgICB6b25lU3ltYm9sRXZlbnROYW1lczogem9uZVN5bWJvbEV2ZW50TmFtZXMsXG4gICAgICAgICAgICBldmVudE5hbWVzOiBldmVudE5hbWVzLFxuICAgICAgICAgICAgaXNCcm93c2VyOiBpc0Jyb3dzZXIsXG4gICAgICAgICAgICBpc01peDogaXNNaXgsXG4gICAgICAgICAgICBpc05vZGU6IGlzTm9kZSxcbiAgICAgICAgICAgIFRSVUVfU1RSOiBUUlVFX1NUUixcbiAgICAgICAgICAgIEZBTFNFX1NUUjogRkFMU0VfU1RSLFxuICAgICAgICAgICAgWk9ORV9TWU1CT0xfUFJFRklYOiBaT05FX1NZTUJPTF9QUkVGSVgsXG4gICAgICAgICAgICBBRERfRVZFTlRfTElTVEVORVJfU1RSOiBBRERfRVZFTlRfTElTVEVORVJfU1RSLFxuICAgICAgICAgICAgUkVNT1ZFX0VWRU5UX0xJU1RFTkVSX1NUUjogUkVNT1ZFX0VWRU5UX0xJU1RFTkVSX1NUUlxuICAgICAgICB9KTsgfTtcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBAbGljZW5zZVxuICAgICAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gICAgICpcbiAgICAgKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICAgICAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAgICAgKi9cbiAgICAvKlxuICAgICAqIFRoaXMgaXMgbmVjZXNzYXJ5IGZvciBDaHJvbWUgYW5kIENocm9tZSBtb2JpbGUsIHRvIGVuYWJsZVxuICAgICAqIHRoaW5ncyBsaWtlIHJlZGVmaW5pbmcgYGNyZWF0ZWRDYWxsYmFja2Agb24gYW4gZWxlbWVudC5cbiAgICAgKi9cbiAgICB2YXIgem9uZVN5bWJvbDtcbiAgICB2YXIgX2RlZmluZVByb3BlcnR5O1xuICAgIHZhciBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuICAgIHZhciBfY3JlYXRlO1xuICAgIHZhciB1bmNvbmZpZ3VyYWJsZXNLZXk7XG4gICAgZnVuY3Rpb24gcHJvcGVydHlQYXRjaCgpIHtcbiAgICAgICAgem9uZVN5bWJvbCA9IFpvbmUuX19zeW1ib2xfXztcbiAgICAgICAgX2RlZmluZVByb3BlcnR5ID0gT2JqZWN0W3pvbmVTeW1ib2woJ2RlZmluZVByb3BlcnR5JyldID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xuICAgICAgICBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0W3pvbmVTeW1ib2woJ2dldE93blByb3BlcnR5RGVzY3JpcHRvcicpXSA9XG4gICAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuICAgICAgICBfY3JlYXRlID0gT2JqZWN0LmNyZWF0ZTtcbiAgICAgICAgdW5jb25maWd1cmFibGVzS2V5ID0gem9uZVN5bWJvbCgndW5jb25maWd1cmFibGVzJyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIChvYmosIHByb3AsIGRlc2MpIHtcbiAgICAgICAgICAgIGlmIChpc1VuY29uZmlndXJhYmxlKG9iaiwgcHJvcCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgYXNzaWduIHRvIHJlYWQgb25seSBwcm9wZXJ0eSBcXCcnICsgcHJvcCArICdcXCcgb2YgJyArIG9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb3JpZ2luYWxDb25maWd1cmFibGVGbGFnID0gZGVzYy5jb25maWd1cmFibGU7XG4gICAgICAgICAgICBpZiAocHJvcCAhPT0gJ3Byb3RvdHlwZScpIHtcbiAgICAgICAgICAgICAgICBkZXNjID0gcmV3cml0ZURlc2NyaXB0b3Iob2JqLCBwcm9wLCBkZXNjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdHJ5RGVmaW5lUHJvcGVydHkob2JqLCBwcm9wLCBkZXNjLCBvcmlnaW5hbENvbmZpZ3VyYWJsZUZsYWcpO1xuICAgICAgICB9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyA9IGZ1bmN0aW9uIChvYmosIHByb3BzKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhwcm9wcykuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIHByb3BzW3Byb3BdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocHJvcHMpOyBfaSA8IF9iLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBzeW0gPSBfYltfaV07XG4gICAgICAgICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3BzLCBzeW0pO1xuICAgICAgICAgICAgICAgIC8vIFNpbmNlIGBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzYCByZXR1cm5zICphbGwqIHN5bWJvbHMsXG4gICAgICAgICAgICAgICAgLy8gaW5jbHVkaW5nIG5vbi1lbnVtZXJhYmxlIG9uZXMsIHJldHJpZXZlIHByb3BlcnR5IGRlc2NyaXB0b3IgYW5kIGNoZWNrXG4gICAgICAgICAgICAgICAgLy8gZW51bWVyYWJpbGl0eSB0aGVyZS4gUHJvY2VlZCB3aXRoIHRoZSByZXdyaXRlIG9ubHkgd2hlbiBhIHByb3BlcnR5IGlzXG4gICAgICAgICAgICAgICAgLy8gZW51bWVyYWJsZSB0byBtYWtlIHRoZSBsb2dpYyBjb25zaXN0ZW50IHdpdGggdGhlIHdheSByZWd1bGFyXG4gICAgICAgICAgICAgICAgLy8gcHJvcGVydGllcyBhcmUgcmV0cmlldmVkICh2aWEgYE9iamVjdC5rZXlzYCwgd2hpY2ggcmVzcGVjdHNcbiAgICAgICAgICAgICAgICAvLyBgZW51bWVyYWJsZTogZmFsc2VgIGZsYWcpLiBNb3JlIGluZm9ybWF0aW9uOlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvRW51bWVyYWJpbGl0eV9hbmRfb3duZXJzaGlwX29mX3Byb3BlcnRpZXMjcmV0cmlldmFsXG4gICAgICAgICAgICAgICAgaWYgKGRlc2MgPT09IG51bGwgfHwgZGVzYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVzYy5lbnVtZXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHN5bSwgcHJvcHNbc3ltXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfTtcbiAgICAgICAgT2JqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChwcm90bywgcHJvcGVydGllc09iamVjdCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwcm9wZXJ0aWVzT2JqZWN0ID09PSAnb2JqZWN0JyAmJiAhT2JqZWN0LmlzRnJvemVuKHByb3BlcnRpZXNPYmplY3QpKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMocHJvcGVydGllc09iamVjdCkuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzT2JqZWN0W3Byb3BdID0gcmV3cml0ZURlc2NyaXB0b3IocHJvdG8sIHByb3AsIHByb3BlcnRpZXNPYmplY3RbcHJvcF0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9jcmVhdGUocHJvdG8sIHByb3BlcnRpZXNPYmplY3QpO1xuICAgICAgICB9O1xuICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gZnVuY3Rpb24gKG9iaiwgcHJvcCkge1xuICAgICAgICAgICAgdmFyIGRlc2MgPSBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgcHJvcCk7XG4gICAgICAgICAgICBpZiAoZGVzYyAmJiBpc1VuY29uZmlndXJhYmxlKG9iaiwgcHJvcCkpIHtcbiAgICAgICAgICAgICAgICBkZXNjLmNvbmZpZ3VyYWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRlc2M7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIF9yZWRlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwgZGVzYykge1xuICAgICAgICB2YXIgb3JpZ2luYWxDb25maWd1cmFibGVGbGFnID0gZGVzYy5jb25maWd1cmFibGU7XG4gICAgICAgIGRlc2MgPSByZXdyaXRlRGVzY3JpcHRvcihvYmosIHByb3AsIGRlc2MpO1xuICAgICAgICByZXR1cm4gX3RyeURlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwgZGVzYywgb3JpZ2luYWxDb25maWd1cmFibGVGbGFnKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNVbmNvbmZpZ3VyYWJsZShvYmosIHByb3ApIHtcbiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmpbdW5jb25maWd1cmFibGVzS2V5XSAmJiBvYmpbdW5jb25maWd1cmFibGVzS2V5XVtwcm9wXTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmV3cml0ZURlc2NyaXB0b3Iob2JqLCBwcm9wLCBkZXNjKSB7XG4gICAgICAgIC8vIGlzc3VlLTkyNywgaWYgdGhlIGRlc2MgaXMgZnJvemVuLCBkb24ndCB0cnkgdG8gY2hhbmdlIHRoZSBkZXNjXG4gICAgICAgIGlmICghT2JqZWN0LmlzRnJvemVuKGRlc2MpKSB7XG4gICAgICAgICAgICBkZXNjLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkZXNjLmNvbmZpZ3VyYWJsZSkge1xuICAgICAgICAgICAgLy8gaXNzdWUtOTI3LCBpZiB0aGUgb2JqIGlzIGZyb3plbiwgZG9uJ3QgdHJ5IHRvIHNldCB0aGUgZGVzYyB0byBvYmpcbiAgICAgICAgICAgIGlmICghb2JqW3VuY29uZmlndXJhYmxlc0tleV0gJiYgIU9iamVjdC5pc0Zyb3plbihvYmopKSB7XG4gICAgICAgICAgICAgICAgX2RlZmluZVByb3BlcnR5KG9iaiwgdW5jb25maWd1cmFibGVzS2V5LCB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZToge30gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2JqW3VuY29uZmlndXJhYmxlc0tleV0pIHtcbiAgICAgICAgICAgICAgICBvYmpbdW5jb25maWd1cmFibGVzS2V5XVtwcm9wXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlc2M7XG4gICAgfVxuICAgIGZ1bmN0aW9uIF90cnlEZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIGRlc2MsIG9yaWdpbmFsQ29uZmlndXJhYmxlRmxhZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIF9kZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIGRlc2MpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGRlc2MuY29uZmlndXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgLy8gSW4gY2FzZSBvZiBlcnJvcnMsIHdoZW4gdGhlIGNvbmZpZ3VyYWJsZSBmbGFnIHdhcyBsaWtlbHkgc2V0IGJ5IHJld3JpdGVEZXNjcmlwdG9yKCksXG4gICAgICAgICAgICAgICAgLy8gbGV0J3MgcmV0cnkgd2l0aCB0aGUgb3JpZ2luYWwgZmxhZyB2YWx1ZVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3JpZ2luYWxDb25maWd1cmFibGVGbGFnID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBkZXNjLmNvbmZpZ3VyYWJsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlc2MuY29uZmlndXJhYmxlID0gb3JpZ2luYWxDb25maWd1cmFibGVGbGFnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2RlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwgZGVzYyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3dhbGxvd0Vycm9yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSAnY3JlYXRlZENhbGxiYWNrJyB8fCBwcm9wID09PSAnYXR0YWNoZWRDYWxsYmFjaycgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3AgPT09ICdkZXRhY2hlZENhbGxiYWNrJyB8fCBwcm9wID09PSAnYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2Ugb25seSBzd2FsbG93IHRoZSBlcnJvciBpbiByZWdpc3RlckVsZW1lbnQgcGF0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgdGhlIHdvcmsgYXJvdW5kIHNpbmNlIHNvbWUgYXBwbGljYXRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmYWlsIGlmIHdlIHRocm93IHRoZSBlcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dhbGxvd0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXN3YWxsb3dFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogQEppYUxpUGFzc2lvbiwgU29tZSBhcHBsaWNhdGlvbiBzdWNoIGFzIGByZWdpc3RlckVsZW1lbnRgIHBhdGNoXG4gICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIG5lZWQgdG8gc3dhbGxvdyB0aGUgZXJyb3IsIGluIHRoZSBmdXR1cmUgYWZ0ZXIgdGhlc2UgYXBwbGljYXRpb25zXG4gICAgICAgICAgICAgICAgICAgIC8vIGFyZSB1cGRhdGVkLCB0aGUgZm9sbG93aW5nIGxvZ2ljIGNhbiBiZSByZW1vdmVkLlxuICAgICAgICAgICAgICAgICAgICB2YXIgZGVzY0pzb24gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY0pzb24gPSBKU09OLnN0cmluZ2lmeShkZXNjKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NKc29uID0gZGVzYy50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXR0ZW1wdGluZyB0byBjb25maWd1cmUgJ1wiLmNvbmNhdChwcm9wLCBcIicgd2l0aCBkZXNjcmlwdG9yICdcIikuY29uY2F0KGRlc2NKc29uLCBcIicgb24gb2JqZWN0ICdcIikuY29uY2F0KG9iaiwgXCInIGFuZCBnb3QgZXJyb3IsIGdpdmluZyB1cDogXCIpLmNvbmNhdChlcnJvcikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBsaWNlbnNlXG4gICAgICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAgICAgKlxuICAgICAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gICAgICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGV2ZW50VGFyZ2V0TGVnYWN5UGF0Y2goX2dsb2JhbCwgYXBpKSB7XG4gICAgICAgIHZhciBfYiA9IGFwaS5nZXRHbG9iYWxPYmplY3RzKCksIGV2ZW50TmFtZXMgPSBfYi5ldmVudE5hbWVzLCBnbG9iYWxTb3VyY2VzID0gX2IuZ2xvYmFsU291cmNlcywgem9uZVN5bWJvbEV2ZW50TmFtZXMgPSBfYi56b25lU3ltYm9sRXZlbnROYW1lcywgVFJVRV9TVFIgPSBfYi5UUlVFX1NUUiwgRkFMU0VfU1RSID0gX2IuRkFMU0VfU1RSLCBaT05FX1NZTUJPTF9QUkVGSVggPSBfYi5aT05FX1NZTUJPTF9QUkVGSVg7XG4gICAgICAgIHZhciBXVEZfSVNTVUVfNTU1ID0gJ0FuY2hvcixBcmVhLEF1ZGlvLEJSLEJhc2UsQmFzZUZvbnQsQm9keSxCdXR0b24sQ2FudmFzLENvbnRlbnQsRExpc3QsRGlyZWN0b3J5LERpdixFbWJlZCxGaWVsZFNldCxGb250LEZvcm0sRnJhbWUsRnJhbWVTZXQsSFIsSGVhZCxIZWFkaW5nLEh0bWwsSUZyYW1lLEltYWdlLElucHV0LEtleWdlbixMSSxMYWJlbCxMZWdlbmQsTGluayxNYXAsTWFycXVlZSxNZWRpYSxNZW51LE1ldGEsTWV0ZXIsTW9kLE9MaXN0LE9iamVjdCxPcHRHcm91cCxPcHRpb24sT3V0cHV0LFBhcmFncmFwaCxQcmUsUHJvZ3Jlc3MsUXVvdGUsU2NyaXB0LFNlbGVjdCxTb3VyY2UsU3BhbixTdHlsZSxUYWJsZUNhcHRpb24sVGFibGVDZWxsLFRhYmxlQ29sLFRhYmxlLFRhYmxlUm93LFRhYmxlU2VjdGlvbixUZXh0QXJlYSxUaXRsZSxUcmFjayxVTGlzdCxVbmtub3duLFZpZGVvJztcbiAgICAgICAgdmFyIE5PX0VWRU5UX1RBUkdFVCA9ICdBcHBsaWNhdGlvbkNhY2hlLEV2ZW50U291cmNlLEZpbGVSZWFkZXIsSW5wdXRNZXRob2RDb250ZXh0LE1lZGlhQ29udHJvbGxlcixNZXNzYWdlUG9ydCxOb2RlLFBlcmZvcm1hbmNlLFNWR0VsZW1lbnRJbnN0YW5jZSxTaGFyZWRXb3JrZXIsVGV4dFRyYWNrLFRleHRUcmFja0N1ZSxUZXh0VHJhY2tMaXN0LFdlYktpdE5hbWVkRmxvdyxXaW5kb3csV29ya2VyLFdvcmtlckdsb2JhbFNjb3BlLFhNTEh0dHBSZXF1ZXN0LFhNTEh0dHBSZXF1ZXN0RXZlbnRUYXJnZXQsWE1MSHR0cFJlcXVlc3RVcGxvYWQsSURCUmVxdWVzdCxJREJPcGVuREJSZXF1ZXN0LElEQkRhdGFiYXNlLElEQlRyYW5zYWN0aW9uLElEQkN1cnNvcixEQkluZGV4LFdlYlNvY2tldCdcbiAgICAgICAgICAgIC5zcGxpdCgnLCcpO1xuICAgICAgICB2YXIgRVZFTlRfVEFSR0VUID0gJ0V2ZW50VGFyZ2V0JztcbiAgICAgICAgdmFyIGFwaXMgPSBbXTtcbiAgICAgICAgdmFyIGlzV3RmID0gX2dsb2JhbFsnd3RmJ107XG4gICAgICAgIHZhciBXVEZfSVNTVUVfNTU1X0FSUkFZID0gV1RGX0lTU1VFXzU1NS5zcGxpdCgnLCcpO1xuICAgICAgICBpZiAoaXNXdGYpIHtcbiAgICAgICAgICAgIC8vIFdvcmthcm91bmQgZm9yOiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL3RyYWNpbmctZnJhbWV3b3JrL2lzc3Vlcy81NTVcbiAgICAgICAgICAgIGFwaXMgPSBXVEZfSVNTVUVfNTU1X0FSUkFZLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gJ0hUTUwnICsgdiArICdFbGVtZW50JzsgfSkuY29uY2F0KE5PX0VWRU5UX1RBUkdFVCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoX2dsb2JhbFtFVkVOVF9UQVJHRVRdKSB7XG4gICAgICAgICAgICBhcGlzLnB1c2goRVZFTlRfVEFSR0VUKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vdGU6IEV2ZW50VGFyZ2V0IGlzIG5vdCBhdmFpbGFibGUgaW4gYWxsIGJyb3dzZXJzLFxuICAgICAgICAgICAgLy8gaWYgaXQncyBub3QgYXZhaWxhYmxlLCB3ZSBpbnN0ZWFkIHBhdGNoIHRoZSBBUElzIGluIHRoZSBJREwgdGhhdCBpbmhlcml0IGZyb20gRXZlbnRUYXJnZXRcbiAgICAgICAgICAgIGFwaXMgPSBOT19FVkVOVF9UQVJHRVQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlzRGlzYWJsZUlFQ2hlY2sgPSBfZ2xvYmFsWydfX1pvbmVfZGlzYWJsZV9JRV9jaGVjayddIHx8IGZhbHNlO1xuICAgICAgICB2YXIgaXNFbmFibGVDcm9zc0NvbnRleHRDaGVjayA9IF9nbG9iYWxbJ19fWm9uZV9lbmFibGVfY3Jvc3NfY29udGV4dF9jaGVjayddIHx8IGZhbHNlO1xuICAgICAgICB2YXIgaWVPckVkZ2UgPSBhcGkuaXNJRU9yRWRnZSgpO1xuICAgICAgICB2YXIgQUREX0VWRU5UX0xJU1RFTkVSX1NPVVJDRSA9ICcuYWRkRXZlbnRMaXN0ZW5lcjonO1xuICAgICAgICB2YXIgRlVOQ1RJT05fV1JBUFBFUiA9ICdbb2JqZWN0IEZ1bmN0aW9uV3JhcHBlcl0nO1xuICAgICAgICB2YXIgQlJPV1NFUl9UT09MUyA9ICdmdW5jdGlvbiBfX0JST1dTRVJUT09MU19DT05TT0xFX1NBRkVGVU5DKCkgeyBbbmF0aXZlIGNvZGVdIH0nO1xuICAgICAgICB2YXIgcG9pbnRlckV2ZW50c01hcCA9IHtcbiAgICAgICAgICAgICdNU1BvaW50ZXJDYW5jZWwnOiAncG9pbnRlcmNhbmNlbCcsXG4gICAgICAgICAgICAnTVNQb2ludGVyRG93bic6ICdwb2ludGVyZG93bicsXG4gICAgICAgICAgICAnTVNQb2ludGVyRW50ZXInOiAncG9pbnRlcmVudGVyJyxcbiAgICAgICAgICAgICdNU1BvaW50ZXJIb3Zlcic6ICdwb2ludGVyaG92ZXInLFxuICAgICAgICAgICAgJ01TUG9pbnRlckxlYXZlJzogJ3BvaW50ZXJsZWF2ZScsXG4gICAgICAgICAgICAnTVNQb2ludGVyTW92ZSc6ICdwb2ludGVybW92ZScsXG4gICAgICAgICAgICAnTVNQb2ludGVyT3V0JzogJ3BvaW50ZXJvdXQnLFxuICAgICAgICAgICAgJ01TUG9pbnRlck92ZXInOiAncG9pbnRlcm92ZXInLFxuICAgICAgICAgICAgJ01TUG9pbnRlclVwJzogJ3BvaW50ZXJ1cCdcbiAgICAgICAgfTtcbiAgICAgICAgLy8gIHByZWRlZmluZSBhbGwgX196b25lX3N5bWJvbF9fICsgZXZlbnROYW1lICsgdHJ1ZS9mYWxzZSBzdHJpbmdcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudE5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnROYW1lID0gZXZlbnROYW1lc1tpXTtcbiAgICAgICAgICAgIHZhciBmYWxzZUV2ZW50TmFtZSA9IGV2ZW50TmFtZSArIEZBTFNFX1NUUjtcbiAgICAgICAgICAgIHZhciB0cnVlRXZlbnROYW1lID0gZXZlbnROYW1lICsgVFJVRV9TVFI7XG4gICAgICAgICAgICB2YXIgc3ltYm9sID0gWk9ORV9TWU1CT0xfUFJFRklYICsgZmFsc2VFdmVudE5hbWU7XG4gICAgICAgICAgICB2YXIgc3ltYm9sQ2FwdHVyZSA9IFpPTkVfU1lNQk9MX1BSRUZJWCArIHRydWVFdmVudE5hbWU7XG4gICAgICAgICAgICB6b25lU3ltYm9sRXZlbnROYW1lc1tldmVudE5hbWVdID0ge307XG4gICAgICAgICAgICB6b25lU3ltYm9sRXZlbnROYW1lc1tldmVudE5hbWVdW0ZBTFNFX1NUUl0gPSBzeW1ib2w7XG4gICAgICAgICAgICB6b25lU3ltYm9sRXZlbnROYW1lc1tldmVudE5hbWVdW1RSVUVfU1RSXSA9IHN5bWJvbENhcHR1cmU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gIHByZWRlZmluZSBhbGwgdGFzay5zb3VyY2Ugc3RyaW5nXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgV1RGX0lTU1VFXzU1NV9BUlJBWS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IFdURl9JU1NVRV81NTVfQVJSQVlbaV07XG4gICAgICAgICAgICB2YXIgdGFyZ2V0cyA9IGdsb2JhbFNvdXJjZXNbdGFyZ2V0XSA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBldmVudE5hbWVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV2ZW50TmFtZSA9IGV2ZW50TmFtZXNbal07XG4gICAgICAgICAgICAgICAgdGFyZ2V0c1tldmVudE5hbWVdID0gdGFyZ2V0ICsgQUREX0VWRU5UX0xJU1RFTkVSX1NPVVJDRSArIGV2ZW50TmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgY2hlY2tJRUFuZENyb3NzQ29udGV4dCA9IGZ1bmN0aW9uIChuYXRpdmVEZWxlZ2F0ZSwgZGVsZWdhdGUsIHRhcmdldCwgYXJncykge1xuICAgICAgICAgICAgaWYgKCFpc0Rpc2FibGVJRUNoZWNrICYmIGllT3JFZGdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzRW5hYmxlQ3Jvc3NDb250ZXh0Q2hlY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZXN0U3RyaW5nID0gZGVsZWdhdGUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodGVzdFN0cmluZyA9PT0gRlVOQ1RJT05fV1JBUFBFUiB8fCB0ZXN0U3RyaW5nID09IEJST1dTRVJfVE9PTFMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF0aXZlRGVsZWdhdGUuYXBwbHkodGFyZ2V0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYXRpdmVEZWxlZ2F0ZS5hcHBseSh0YXJnZXQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGVzdFN0cmluZyA9IGRlbGVnYXRlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgodGVzdFN0cmluZyA9PT0gRlVOQ1RJT05fV1JBUFBFUiB8fCB0ZXN0U3RyaW5nID09IEJST1dTRVJfVE9PTFMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYXRpdmVEZWxlZ2F0ZS5hcHBseSh0YXJnZXQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNFbmFibGVDcm9zc0NvbnRleHRDaGVjaykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGVnYXRlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBuYXRpdmVEZWxlZ2F0ZS5hcHBseSh0YXJnZXQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBhcGlUeXBlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFwaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0eXBlID0gX2dsb2JhbFthcGlzW2ldXTtcbiAgICAgICAgICAgIGFwaVR5cGVzLnB1c2godHlwZSAmJiB0eXBlLnByb3RvdHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdmggaXMgdmFsaWRhdGVIYW5kbGVyIHRvIGNoZWNrIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgLy8gaXMgdmFsaWQgb3Igbm90KGZvciBzZWN1cml0eSBjaGVjaylcbiAgICAgICAgYXBpLnBhdGNoRXZlbnRUYXJnZXQoX2dsb2JhbCwgYXBpLCBhcGlUeXBlcywge1xuICAgICAgICAgICAgdmg6IGNoZWNrSUVBbmRDcm9zc0NvbnRleHQsXG4gICAgICAgICAgICB0cmFuc2ZlckV2ZW50TmFtZTogZnVuY3Rpb24gKGV2ZW50TmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciBwb2ludGVyRXZlbnROYW1lID0gcG9pbnRlckV2ZW50c01hcFtldmVudE5hbWVdO1xuICAgICAgICAgICAgICAgIHJldHVybiBwb2ludGVyRXZlbnROYW1lIHx8IGV2ZW50TmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFpvbmVbYXBpLnN5bWJvbCgncGF0Y2hFdmVudFRhcmdldCcpXSA9ICEhX2dsb2JhbFtFVkVOVF9UQVJHRVRdO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGxpY2Vuc2VcbiAgICAgKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICAgICAqXG4gICAgICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAgICAgKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gICAgICovXG4gICAgLy8gd2UgaGF2ZSB0byBwYXRjaCB0aGUgaW5zdGFuY2Ugc2luY2UgdGhlIHByb3RvIGlzIG5vbi1jb25maWd1cmFibGVcbiAgICBmdW5jdGlvbiBhcHBseShhcGksIF9nbG9iYWwpIHtcbiAgICAgICAgdmFyIF9iID0gYXBpLmdldEdsb2JhbE9iamVjdHMoKSwgQUREX0VWRU5UX0xJU1RFTkVSX1NUUiA9IF9iLkFERF9FVkVOVF9MSVNURU5FUl9TVFIsIFJFTU9WRV9FVkVOVF9MSVNURU5FUl9TVFIgPSBfYi5SRU1PVkVfRVZFTlRfTElTVEVORVJfU1RSO1xuICAgICAgICB2YXIgV1MgPSBfZ2xvYmFsLldlYlNvY2tldDtcbiAgICAgICAgLy8gT24gU2FmYXJpIHdpbmRvdy5FdmVudFRhcmdldCBkb2Vzbid0IGV4aXN0IHNvIG5lZWQgdG8gcGF0Y2ggV1MgYWRkL3JlbW92ZUV2ZW50TGlzdGVuZXJcbiAgICAgICAgLy8gT24gb2xkZXIgQ2hyb21lLCBubyBuZWVkIHNpbmNlIEV2ZW50VGFyZ2V0IHdhcyBhbHJlYWR5IHBhdGNoZWRcbiAgICAgICAgaWYgKCFfZ2xvYmFsLkV2ZW50VGFyZ2V0KSB7XG4gICAgICAgICAgICBhcGkucGF0Y2hFdmVudFRhcmdldChfZ2xvYmFsLCBhcGksIFtXUy5wcm90b3R5cGVdKTtcbiAgICAgICAgfVxuICAgICAgICBfZ2xvYmFsLldlYlNvY2tldCA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgICAgICB2YXIgc29ja2V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBuZXcgV1MoeCwgeSkgOiBuZXcgV1MoeCk7XG4gICAgICAgICAgICB2YXIgcHJveHlTb2NrZXQ7XG4gICAgICAgICAgICB2YXIgcHJveHlTb2NrZXRQcm90bztcbiAgICAgICAgICAgIC8vIFNhZmFyaSA3LjAgaGFzIG5vbi1jb25maWd1cmFibGUgb3duICdvbm1lc3NhZ2UnIGFuZCBmcmllbmRzIHByb3BlcnRpZXMgb24gdGhlIHNvY2tldCBpbnN0YW5jZVxuICAgICAgICAgICAgdmFyIG9ubWVzc2FnZURlc2MgPSBhcGkuT2JqZWN0R2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvY2tldCwgJ29ubWVzc2FnZScpO1xuICAgICAgICAgICAgaWYgKG9ubWVzc2FnZURlc2MgJiYgb25tZXNzYWdlRGVzYy5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcHJveHlTb2NrZXQgPSBhcGkuT2JqZWN0Q3JlYXRlKHNvY2tldCk7XG4gICAgICAgICAgICAgICAgLy8gc29ja2V0IGhhdmUgb3duIHByb3BlcnR5IGRlc2NyaXB0b3IgJ29ub3BlbicsICdvbm1lc3NhZ2UnLCAnb25jbG9zZScsICdvbmVycm9yJ1xuICAgICAgICAgICAgICAgIC8vIGJ1dCBwcm94eVNvY2tldCBub3QsIHNvIHdlIHdpbGwga2VlcCBzb2NrZXQgYXMgcHJvdG90eXBlIGFuZCBwYXNzIGl0IHRvXG4gICAgICAgICAgICAgICAgLy8gcGF0Y2hPblByb3BlcnRpZXMgbWV0aG9kXG4gICAgICAgICAgICAgICAgcHJveHlTb2NrZXRQcm90byA9IHNvY2tldDtcbiAgICAgICAgICAgICAgICBbQUREX0VWRU5UX0xJU1RFTkVSX1NUUiwgUkVNT1ZFX0VWRU5UX0xJU1RFTkVSX1NUUiwgJ3NlbmQnLCAnY2xvc2UnXS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBwcm94eVNvY2tldFtwcm9wTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFwaS5BcnJheVNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wTmFtZSA9PT0gQUREX0VWRU5UX0xJU1RFTkVSX1NUUiB8fCBwcm9wTmFtZSA9PT0gUkVNT1ZFX0VWRU5UX0xJU1RFTkVSX1NUUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBldmVudE5hbWUgPSBhcmdzLmxlbmd0aCA+IDAgPyBhcmdzWzBdIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb3BlcnR5U3ltYm9sID0gWm9uZS5fX3N5bWJvbF9fKCdPTl9QUk9QRVJUWScgKyBldmVudE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb2NrZXRbcHJvcGVydHlTeW1ib2xdID0gcHJveHlTb2NrZXRbcHJvcGVydHlTeW1ib2xdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzb2NrZXRbcHJvcE5hbWVdLmFwcGx5KHNvY2tldCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB3ZSBjYW4gcGF0Y2ggdGhlIHJlYWwgc29ja2V0XG4gICAgICAgICAgICAgICAgcHJveHlTb2NrZXQgPSBzb2NrZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcGkucGF0Y2hPblByb3BlcnRpZXMocHJveHlTb2NrZXQsIFsnY2xvc2UnLCAnZXJyb3InLCAnbWVzc2FnZScsICdvcGVuJ10sIHByb3h5U29ja2V0UHJvdG8pO1xuICAgICAgICAgICAgcmV0dXJuIHByb3h5U29ja2V0O1xuICAgICAgICB9O1xuICAgICAgICB2YXIgZ2xvYmFsV2ViU29ja2V0ID0gX2dsb2JhbFsnV2ViU29ja2V0J107XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gV1MpIHtcbiAgICAgICAgICAgIGdsb2JhbFdlYlNvY2tldFtwcm9wXSA9IFdTW3Byb3BdO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBsaWNlbnNlXG4gICAgICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAgICAgKlxuICAgICAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gICAgICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHByb3BlcnR5RGVzY3JpcHRvckxlZ2FjeVBhdGNoKGFwaSwgX2dsb2JhbCkge1xuICAgICAgICB2YXIgX2IgPSBhcGkuZ2V0R2xvYmFsT2JqZWN0cygpLCBpc05vZGUgPSBfYi5pc05vZGUsIGlzTWl4ID0gX2IuaXNNaXg7XG4gICAgICAgIGlmIChpc05vZGUgJiYgIWlzTWl4KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjYW5QYXRjaFZpYVByb3BlcnR5RGVzY3JpcHRvcihhcGksIF9nbG9iYWwpKSB7XG4gICAgICAgICAgICB2YXIgc3VwcG9ydHNXZWJTb2NrZXQgPSB0eXBlb2YgV2ViU29ja2V0ICE9PSAndW5kZWZpbmVkJztcbiAgICAgICAgICAgIC8vIFNhZmFyaSwgQW5kcm9pZCBicm93c2VycyAoSmVsbHkgQmVhbilcbiAgICAgICAgICAgIHBhdGNoVmlhQ2FwdHVyaW5nQWxsVGhlRXZlbnRzKGFwaSk7XG4gICAgICAgICAgICBhcGkucGF0Y2hDbGFzcygnWE1MSHR0cFJlcXVlc3QnKTtcbiAgICAgICAgICAgIGlmIChzdXBwb3J0c1dlYlNvY2tldCkge1xuICAgICAgICAgICAgICAgIGFwcGx5KGFwaSwgX2dsb2JhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBab25lW2FwaS5zeW1ib2woJ3BhdGNoRXZlbnRzJyldID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBjYW5QYXRjaFZpYVByb3BlcnR5RGVzY3JpcHRvcihhcGksIF9nbG9iYWwpIHtcbiAgICAgICAgdmFyIF9iID0gYXBpLmdldEdsb2JhbE9iamVjdHMoKSwgaXNCcm93c2VyID0gX2IuaXNCcm93c2VyLCBpc01peCA9IF9iLmlzTWl4O1xuICAgICAgICBpZiAoKGlzQnJvd3NlciB8fCBpc01peCkgJiZcbiAgICAgICAgICAgICFhcGkuT2JqZWN0R2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgJ29uY2xpY2snKSAmJlxuICAgICAgICAgICAgdHlwZW9mIEVsZW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAvLyBXZWJLaXQgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzNDM2NFxuICAgICAgICAgICAgLy8gSURMIGludGVyZmFjZSBhdHRyaWJ1dGVzIGFyZSBub3QgY29uZmlndXJhYmxlXG4gICAgICAgICAgICB2YXIgZGVzYyA9IGFwaS5PYmplY3RHZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoRWxlbWVudC5wcm90b3R5cGUsICdvbmNsaWNrJyk7XG4gICAgICAgICAgICBpZiAoZGVzYyAmJiAhZGVzYy5jb25maWd1cmFibGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgLy8gdHJ5IHRvIHVzZSBvbmNsaWNrIHRvIGRldGVjdCB3aGV0aGVyIHdlIGNhbiBwYXRjaCB2aWEgcHJvcGVydHlEZXNjcmlwdG9yXG4gICAgICAgICAgICAvLyBiZWNhdXNlIFhNTEh0dHBSZXF1ZXN0IGlzIG5vdCBhdmFpbGFibGUgaW4gc2VydmljZSB3b3JrZXJcbiAgICAgICAgICAgIGlmIChkZXNjKSB7XG4gICAgICAgICAgICAgICAgYXBpLk9iamVjdERlZmluZVByb3BlcnR5KEVsZW1lbnQucHJvdG90eXBlLCAnb25jbGljaycsIHtcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSAhIWRpdi5vbmNsaWNrO1xuICAgICAgICAgICAgICAgIGFwaS5PYmplY3REZWZpbmVQcm9wZXJ0eShFbGVtZW50LnByb3RvdHlwZSwgJ29uY2xpY2snLCBkZXNjKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBYTUxIdHRwUmVxdWVzdCA9IF9nbG9iYWxbJ1hNTEh0dHBSZXF1ZXN0J107XG4gICAgICAgIGlmICghWE1MSHR0cFJlcXVlc3QpIHtcbiAgICAgICAgICAgIC8vIFhNTEh0dHBSZXF1ZXN0IGlzIG5vdCBhdmFpbGFibGUgaW4gc2VydmljZSB3b3JrZXJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgT05fUkVBRFlfU1RBVEVfQ0hBTkdFID0gJ29ucmVhZHlzdGF0ZWNoYW5nZSc7XG4gICAgICAgIHZhciBYTUxIdHRwUmVxdWVzdFByb3RvdHlwZSA9IFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZTtcbiAgICAgICAgdmFyIHhockRlc2MgPSBhcGkuT2JqZWN0R2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKFhNTEh0dHBSZXF1ZXN0UHJvdG90eXBlLCBPTl9SRUFEWV9TVEFURV9DSEFOR0UpO1xuICAgICAgICAvLyBhZGQgZW51bWVyYWJsZSBhbmQgY29uZmlndXJhYmxlIGhlcmUgYmVjYXVzZSBpbiBvcGVyYVxuICAgICAgICAvLyBieSBkZWZhdWx0IFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5vbnJlYWR5c3RhdGVjaGFuZ2UgaXMgdW5kZWZpbmVkXG4gICAgICAgIC8vIHdpdGhvdXQgYWRkaW5nIGVudW1lcmFibGUgYW5kIGNvbmZpZ3VyYWJsZSB3aWxsIGNhdXNlIG9ucmVhZHlzdGF0ZWNoYW5nZVxuICAgICAgICAvLyBub24tY29uZmlndXJhYmxlXG4gICAgICAgIC8vIGFuZCBpZiBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub25yZWFkeXN0YXRlY2hhbmdlIGlzIHVuZGVmaW5lZCxcbiAgICAgICAgLy8gd2Ugc2hvdWxkIHNldCBhIHJlYWwgZGVzYyBpbnN0ZWFkIGEgZmFrZSBvbmVcbiAgICAgICAgaWYgKHhockRlc2MpIHtcbiAgICAgICAgICAgIGFwaS5PYmplY3REZWZpbmVQcm9wZXJ0eShYTUxIdHRwUmVxdWVzdFByb3RvdHlwZSwgT05fUkVBRFlfU1RBVEVfQ0hBTkdFLCB7XG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9ICEhcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZTtcbiAgICAgICAgICAgIC8vIHJlc3RvcmUgb3JpZ2luYWwgZGVzY1xuICAgICAgICAgICAgYXBpLk9iamVjdERlZmluZVByb3BlcnR5KFhNTEh0dHBSZXF1ZXN0UHJvdG90eXBlLCBPTl9SRUFEWV9TVEFURV9DSEFOR0UsIHhockRlc2MgfHwge30pO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBTWU1CT0xfRkFLRV9PTlJFQURZU1RBVEVDSEFOR0VfMSA9IGFwaS5zeW1ib2woJ2Zha2UnKTtcbiAgICAgICAgICAgIGFwaS5PYmplY3REZWZpbmVQcm9wZXJ0eShYTUxIdHRwUmVxdWVzdFByb3RvdHlwZSwgT05fUkVBRFlfU1RBVEVfQ0hBTkdFLCB7XG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzW1NZTUJPTF9GQUtFX09OUkVBRFlTVEFURUNIQU5HRV8xXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbU1lNQk9MX0ZBS0VfT05SRUFEWVNUQVRFQ0hBTkdFXzFdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB2YXIgZGV0ZWN0RnVuYyA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAgICAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBkZXRlY3RGdW5jO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHJlcVtTWU1CT0xfRkFLRV9PTlJFQURZU1RBVEVDSEFOR0VfMV0gPT09IGRldGVjdEZ1bmM7XG4gICAgICAgICAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGdsb2JhbEV2ZW50SGFuZGxlcnNFdmVudE5hbWVzID0gW1xuICAgICAgICAnYWJvcnQnLFxuICAgICAgICAnYW5pbWF0aW9uY2FuY2VsJyxcbiAgICAgICAgJ2FuaW1hdGlvbmVuZCcsXG4gICAgICAgICdhbmltYXRpb25pdGVyYXRpb24nLFxuICAgICAgICAnYXV4Y2xpY2snLFxuICAgICAgICAnYmVmb3JlaW5wdXQnLFxuICAgICAgICAnYmx1cicsXG4gICAgICAgICdjYW5jZWwnLFxuICAgICAgICAnY2FucGxheScsXG4gICAgICAgICdjYW5wbGF5dGhyb3VnaCcsXG4gICAgICAgICdjaGFuZ2UnLFxuICAgICAgICAnY29tcG9zaXRpb25zdGFydCcsXG4gICAgICAgICdjb21wb3NpdGlvbnVwZGF0ZScsXG4gICAgICAgICdjb21wb3NpdGlvbmVuZCcsXG4gICAgICAgICdjdWVjaGFuZ2UnLFxuICAgICAgICAnY2xpY2snLFxuICAgICAgICAnY2xvc2UnLFxuICAgICAgICAnY29udGV4dG1lbnUnLFxuICAgICAgICAnY3VyZWNoYW5nZScsXG4gICAgICAgICdkYmxjbGljaycsXG4gICAgICAgICdkcmFnJyxcbiAgICAgICAgJ2RyYWdlbmQnLFxuICAgICAgICAnZHJhZ2VudGVyJyxcbiAgICAgICAgJ2RyYWdleGl0JyxcbiAgICAgICAgJ2RyYWdsZWF2ZScsXG4gICAgICAgICdkcmFnb3ZlcicsXG4gICAgICAgICdkcm9wJyxcbiAgICAgICAgJ2R1cmF0aW9uY2hhbmdlJyxcbiAgICAgICAgJ2VtcHRpZWQnLFxuICAgICAgICAnZW5kZWQnLFxuICAgICAgICAnZXJyb3InLFxuICAgICAgICAnZm9jdXMnLFxuICAgICAgICAnZm9jdXNpbicsXG4gICAgICAgICdmb2N1c291dCcsXG4gICAgICAgICdnb3Rwb2ludGVyY2FwdHVyZScsXG4gICAgICAgICdpbnB1dCcsXG4gICAgICAgICdpbnZhbGlkJyxcbiAgICAgICAgJ2tleWRvd24nLFxuICAgICAgICAna2V5cHJlc3MnLFxuICAgICAgICAna2V5dXAnLFxuICAgICAgICAnbG9hZCcsXG4gICAgICAgICdsb2Fkc3RhcnQnLFxuICAgICAgICAnbG9hZGVkZGF0YScsXG4gICAgICAgICdsb2FkZWRtZXRhZGF0YScsXG4gICAgICAgICdsb3N0cG9pbnRlcmNhcHR1cmUnLFxuICAgICAgICAnbW91c2Vkb3duJyxcbiAgICAgICAgJ21vdXNlZW50ZXInLFxuICAgICAgICAnbW91c2VsZWF2ZScsXG4gICAgICAgICdtb3VzZW1vdmUnLFxuICAgICAgICAnbW91c2VvdXQnLFxuICAgICAgICAnbW91c2VvdmVyJyxcbiAgICAgICAgJ21vdXNldXAnLFxuICAgICAgICAnbW91c2V3aGVlbCcsXG4gICAgICAgICdvcmllbnRhdGlvbmNoYW5nZScsXG4gICAgICAgICdwYXVzZScsXG4gICAgICAgICdwbGF5JyxcbiAgICAgICAgJ3BsYXlpbmcnLFxuICAgICAgICAncG9pbnRlcmNhbmNlbCcsXG4gICAgICAgICdwb2ludGVyZG93bicsXG4gICAgICAgICdwb2ludGVyZW50ZXInLFxuICAgICAgICAncG9pbnRlcmxlYXZlJyxcbiAgICAgICAgJ3BvaW50ZXJsb2NrY2hhbmdlJyxcbiAgICAgICAgJ21venBvaW50ZXJsb2NrY2hhbmdlJyxcbiAgICAgICAgJ3dlYmtpdHBvaW50ZXJsb2NrZXJjaGFuZ2UnLFxuICAgICAgICAncG9pbnRlcmxvY2tlcnJvcicsXG4gICAgICAgICdtb3pwb2ludGVybG9ja2Vycm9yJyxcbiAgICAgICAgJ3dlYmtpdHBvaW50ZXJsb2NrZXJyb3InLFxuICAgICAgICAncG9pbnRlcm1vdmUnLFxuICAgICAgICAncG9pbnRvdXQnLFxuICAgICAgICAncG9pbnRlcm92ZXInLFxuICAgICAgICAncG9pbnRlcnVwJyxcbiAgICAgICAgJ3Byb2dyZXNzJyxcbiAgICAgICAgJ3JhdGVjaGFuZ2UnLFxuICAgICAgICAncmVzZXQnLFxuICAgICAgICAncmVzaXplJyxcbiAgICAgICAgJ3Njcm9sbCcsXG4gICAgICAgICdzZWVrZWQnLFxuICAgICAgICAnc2Vla2luZycsXG4gICAgICAgICdzZWxlY3QnLFxuICAgICAgICAnc2VsZWN0aW9uY2hhbmdlJyxcbiAgICAgICAgJ3NlbGVjdHN0YXJ0JyxcbiAgICAgICAgJ3Nob3cnLFxuICAgICAgICAnc29ydCcsXG4gICAgICAgICdzdGFsbGVkJyxcbiAgICAgICAgJ3N1Ym1pdCcsXG4gICAgICAgICdzdXNwZW5kJyxcbiAgICAgICAgJ3RpbWV1cGRhdGUnLFxuICAgICAgICAndm9sdW1lY2hhbmdlJyxcbiAgICAgICAgJ3RvdWNoY2FuY2VsJyxcbiAgICAgICAgJ3RvdWNobW92ZScsXG4gICAgICAgICd0b3VjaHN0YXJ0JyxcbiAgICAgICAgJ3RvdWNoZW5kJyxcbiAgICAgICAgJ3RyYW5zaXRpb25jYW5jZWwnLFxuICAgICAgICAndHJhbnNpdGlvbmVuZCcsXG4gICAgICAgICd3YWl0aW5nJyxcbiAgICAgICAgJ3doZWVsJ1xuICAgIF07XG4gICAgdmFyIGRvY3VtZW50RXZlbnROYW1lcyA9IFtcbiAgICAgICAgJ2FmdGVyc2NyaXB0ZXhlY3V0ZScsICdiZWZvcmVzY3JpcHRleGVjdXRlJywgJ0RPTUNvbnRlbnRMb2FkZWQnLCAnZnJlZXplJywgJ2Z1bGxzY3JlZW5jaGFuZ2UnLFxuICAgICAgICAnbW96ZnVsbHNjcmVlbmNoYW5nZScsICd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJywgJ21zZnVsbHNjcmVlbmNoYW5nZScsICdmdWxsc2NyZWVuZXJyb3InLFxuICAgICAgICAnbW96ZnVsbHNjcmVlbmVycm9yJywgJ3dlYmtpdGZ1bGxzY3JlZW5lcnJvcicsICdtc2Z1bGxzY3JlZW5lcnJvcicsICdyZWFkeXN0YXRlY2hhbmdlJyxcbiAgICAgICAgJ3Zpc2liaWxpdHljaGFuZ2UnLCAncmVzdW1lJ1xuICAgIF07XG4gICAgdmFyIHdpbmRvd0V2ZW50TmFtZXMgPSBbXG4gICAgICAgICdhYnNvbHV0ZWRldmljZW9yaWVudGF0aW9uJyxcbiAgICAgICAgJ2FmdGVyaW5wdXQnLFxuICAgICAgICAnYWZ0ZXJwcmludCcsXG4gICAgICAgICdhcHBpbnN0YWxsZWQnLFxuICAgICAgICAnYmVmb3JlaW5zdGFsbHByb21wdCcsXG4gICAgICAgICdiZWZvcmVwcmludCcsXG4gICAgICAgICdiZWZvcmV1bmxvYWQnLFxuICAgICAgICAnZGV2aWNlbGlnaHQnLFxuICAgICAgICAnZGV2aWNlbW90aW9uJyxcbiAgICAgICAgJ2RldmljZW9yaWVudGF0aW9uJyxcbiAgICAgICAgJ2RldmljZW9yaWVudGF0aW9uYWJzb2x1dGUnLFxuICAgICAgICAnZGV2aWNlcHJveGltaXR5JyxcbiAgICAgICAgJ2hhc2hjaGFuZ2UnLFxuICAgICAgICAnbGFuZ3VhZ2VjaGFuZ2UnLFxuICAgICAgICAnbWVzc2FnZScsXG4gICAgICAgICdtb3piZWZvcmVwYWludCcsXG4gICAgICAgICdvZmZsaW5lJyxcbiAgICAgICAgJ29ubGluZScsXG4gICAgICAgICdwYWludCcsXG4gICAgICAgICdwYWdlc2hvdycsXG4gICAgICAgICdwYWdlaGlkZScsXG4gICAgICAgICdwb3BzdGF0ZScsXG4gICAgICAgICdyZWplY3Rpb25oYW5kbGVkJyxcbiAgICAgICAgJ3N0b3JhZ2UnLFxuICAgICAgICAndW5oYW5kbGVkcmVqZWN0aW9uJyxcbiAgICAgICAgJ3VubG9hZCcsXG4gICAgICAgICd1c2VycHJveGltaXR5JyxcbiAgICAgICAgJ3ZyZGlzcGxheWNvbm5lY3RlZCcsXG4gICAgICAgICd2cmRpc3BsYXlkaXNjb25uZWN0ZWQnLFxuICAgICAgICAndnJkaXNwbGF5cHJlc2VudGNoYW5nZSdcbiAgICBdO1xuICAgIHZhciBodG1sRWxlbWVudEV2ZW50TmFtZXMgPSBbXG4gICAgICAgICdiZWZvcmVjb3B5JywgJ2JlZm9yZWN1dCcsICdiZWZvcmVwYXN0ZScsICdjb3B5JywgJ2N1dCcsICdwYXN0ZScsICdkcmFnc3RhcnQnLCAnbG9hZGVuZCcsXG4gICAgICAgICdhbmltYXRpb25zdGFydCcsICdzZWFyY2gnLCAndHJhbnNpdGlvbnJ1bicsICd0cmFuc2l0aW9uc3RhcnQnLCAnd2Via2l0YW5pbWF0aW9uZW5kJyxcbiAgICAgICAgJ3dlYmtpdGFuaW1hdGlvbml0ZXJhdGlvbicsICd3ZWJraXRhbmltYXRpb25zdGFydCcsICd3ZWJraXR0cmFuc2l0aW9uZW5kJ1xuICAgIF07XG4gICAgdmFyIGllRWxlbWVudEV2ZW50TmFtZXMgPSBbXG4gICAgICAgICdhY3RpdmF0ZScsXG4gICAgICAgICdhZnRlcnVwZGF0ZScsXG4gICAgICAgICdhcmlhcmVxdWVzdCcsXG4gICAgICAgICdiZWZvcmVhY3RpdmF0ZScsXG4gICAgICAgICdiZWZvcmVkZWFjdGl2YXRlJyxcbiAgICAgICAgJ2JlZm9yZWVkaXRmb2N1cycsXG4gICAgICAgICdiZWZvcmV1cGRhdGUnLFxuICAgICAgICAnY2VsbGNoYW5nZScsXG4gICAgICAgICdjb250cm9sc2VsZWN0JyxcbiAgICAgICAgJ2RhdGFhdmFpbGFibGUnLFxuICAgICAgICAnZGF0YXNldGNoYW5nZWQnLFxuICAgICAgICAnZGF0YXNldGNvbXBsZXRlJyxcbiAgICAgICAgJ2Vycm9ydXBkYXRlJyxcbiAgICAgICAgJ2ZpbHRlcmNoYW5nZScsXG4gICAgICAgICdsYXlvdXRjb21wbGV0ZScsXG4gICAgICAgICdsb3NlY2FwdHVyZScsXG4gICAgICAgICdtb3ZlJyxcbiAgICAgICAgJ21vdmVlbmQnLFxuICAgICAgICAnbW92ZXN0YXJ0JyxcbiAgICAgICAgJ3Byb3BlcnR5Y2hhbmdlJyxcbiAgICAgICAgJ3Jlc2l6ZWVuZCcsXG4gICAgICAgICdyZXNpemVzdGFydCcsXG4gICAgICAgICdyb3dlbnRlcicsXG4gICAgICAgICdyb3dleGl0JyxcbiAgICAgICAgJ3Jvd3NkZWxldGUnLFxuICAgICAgICAncm93c2luc2VydGVkJyxcbiAgICAgICAgJ2NvbW1hbmQnLFxuICAgICAgICAnY29tcGFzc25lZWRzY2FsaWJyYXRpb24nLFxuICAgICAgICAnZGVhY3RpdmF0ZScsXG4gICAgICAgICdoZWxwJyxcbiAgICAgICAgJ21zY29udGVudHpvb20nLFxuICAgICAgICAnbXNtYW5pcHVsYXRpb25zdGF0ZWNoYW5nZWQnLFxuICAgICAgICAnbXNnZXN0dXJlY2hhbmdlJyxcbiAgICAgICAgJ21zZ2VzdHVyZWRvdWJsZXRhcCcsXG4gICAgICAgICdtc2dlc3R1cmVlbmQnLFxuICAgICAgICAnbXNnZXN0dXJlaG9sZCcsXG4gICAgICAgICdtc2dlc3R1cmVzdGFydCcsXG4gICAgICAgICdtc2dlc3R1cmV0YXAnLFxuICAgICAgICAnbXNnb3Rwb2ludGVyY2FwdHVyZScsXG4gICAgICAgICdtc2luZXJ0aWFzdGFydCcsXG4gICAgICAgICdtc2xvc3Rwb2ludGVyY2FwdHVyZScsXG4gICAgICAgICdtc3BvaW50ZXJjYW5jZWwnLFxuICAgICAgICAnbXNwb2ludGVyZG93bicsXG4gICAgICAgICdtc3BvaW50ZXJlbnRlcicsXG4gICAgICAgICdtc3BvaW50ZXJob3ZlcicsXG4gICAgICAgICdtc3BvaW50ZXJsZWF2ZScsXG4gICAgICAgICdtc3BvaW50ZXJtb3ZlJyxcbiAgICAgICAgJ21zcG9pbnRlcm91dCcsXG4gICAgICAgICdtc3BvaW50ZXJvdmVyJyxcbiAgICAgICAgJ21zcG9pbnRlcnVwJyxcbiAgICAgICAgJ3BvaW50ZXJvdXQnLFxuICAgICAgICAnbXNzaXRlbW9kZWp1bXBsaXN0aXRlbXJlbW92ZWQnLFxuICAgICAgICAnbXN0aHVtYm5haWxjbGljaycsXG4gICAgICAgICdzdG9wJyxcbiAgICAgICAgJ3N0b3JhZ2Vjb21taXQnXG4gICAgXTtcbiAgICB2YXIgd2ViZ2xFdmVudE5hbWVzID0gWyd3ZWJnbGNvbnRleHRyZXN0b3JlZCcsICd3ZWJnbGNvbnRleHRsb3N0JywgJ3dlYmdsY29udGV4dGNyZWF0aW9uZXJyb3InXTtcbiAgICB2YXIgZm9ybUV2ZW50TmFtZXMgPSBbJ2F1dG9jb21wbGV0ZScsICdhdXRvY29tcGxldGVlcnJvciddO1xuICAgIHZhciBkZXRhaWxFdmVudE5hbWVzID0gWyd0b2dnbGUnXTtcbiAgICB2YXIgZXZlbnROYW1lcyA9IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgZ2xvYmFsRXZlbnRIYW5kbGVyc0V2ZW50TmFtZXMsIHRydWUpLCB3ZWJnbEV2ZW50TmFtZXMsIHRydWUpLCBmb3JtRXZlbnROYW1lcywgdHJ1ZSksIGRldGFpbEV2ZW50TmFtZXMsIHRydWUpLCBkb2N1bWVudEV2ZW50TmFtZXMsIHRydWUpLCB3aW5kb3dFdmVudE5hbWVzLCB0cnVlKSwgaHRtbEVsZW1lbnRFdmVudE5hbWVzLCB0cnVlKSwgaWVFbGVtZW50RXZlbnROYW1lcywgdHJ1ZSk7XG4gICAgLy8gV2hlbmV2ZXIgYW55IGV2ZW50TGlzdGVuZXIgZmlyZXMsIHdlIGNoZWNrIHRoZSBldmVudExpc3RlbmVyIHRhcmdldCBhbmQgYWxsIHBhcmVudHNcbiAgICAvLyBmb3IgYG9ud2hhdGV2ZXJgIHByb3BlcnRpZXMgYW5kIHJlcGxhY2UgdGhlbSB3aXRoIHpvbmUtYm91bmQgZnVuY3Rpb25zXG4gICAgLy8gLSBDaHJvbWUgKGZvciBub3cpXG4gICAgZnVuY3Rpb24gcGF0Y2hWaWFDYXB0dXJpbmdBbGxUaGVFdmVudHMoYXBpKSB7XG4gICAgICAgIHZhciB1bmJvdW5kS2V5ID0gYXBpLnN5bWJvbCgndW5ib3VuZCcpO1xuICAgICAgICB2YXIgX2xvb3BfNSA9IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICB2YXIgcHJvcGVydHkgPSBldmVudE5hbWVzW2ldO1xuICAgICAgICAgICAgdmFyIG9ucHJvcGVydHkgPSAnb24nICsgcHJvcGVydHk7XG4gICAgICAgICAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIocHJvcGVydHksIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIHZhciBlbHQgPSBldmVudC50YXJnZXQsIGJvdW5kLCBzb3VyY2U7XG4gICAgICAgICAgICAgICAgaWYgKGVsdCkge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2UgPSBlbHQuY29uc3RydWN0b3JbJ25hbWUnXSArICcuJyArIG9ucHJvcGVydHk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2UgPSAndW5rbm93bi4nICsgb25wcm9wZXJ0eTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgd2hpbGUgKGVsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWx0W29ucHJvcGVydHldICYmICFlbHRbb25wcm9wZXJ0eV1bdW5ib3VuZEtleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvdW5kID0gYXBpLndyYXBXaXRoQ3VycmVudFpvbmUoZWx0W29ucHJvcGVydHldLCBzb3VyY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm91bmRbdW5ib3VuZEtleV0gPSBlbHRbb25wcm9wZXJ0eV07XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHRbb25wcm9wZXJ0eV0gPSBib3VuZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHQgPSBlbHQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudE5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBfbG9vcF81KGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBsaWNlbnNlXG4gICAgICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAgICAgKlxuICAgICAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gICAgICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyRWxlbWVudFBhdGNoKF9nbG9iYWwsIGFwaSkge1xuICAgICAgICB2YXIgX2IgPSBhcGkuZ2V0R2xvYmFsT2JqZWN0cygpLCBpc0Jyb3dzZXIgPSBfYi5pc0Jyb3dzZXIsIGlzTWl4ID0gX2IuaXNNaXg7XG4gICAgICAgIGlmICgoIWlzQnJvd3NlciAmJiAhaXNNaXgpIHx8ICEoJ3JlZ2lzdGVyRWxlbWVudCcgaW4gX2dsb2JhbC5kb2N1bWVudCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2FsbGJhY2tzID0gWydjcmVhdGVkQ2FsbGJhY2snLCAnYXR0YWNoZWRDYWxsYmFjaycsICdkZXRhY2hlZENhbGxiYWNrJywgJ2F0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayddO1xuICAgICAgICBhcGkucGF0Y2hDYWxsYmFja3MoYXBpLCBkb2N1bWVudCwgJ0RvY3VtZW50JywgJ3JlZ2lzdGVyRWxlbWVudCcsIGNhbGxiYWNrcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBsaWNlbnNlXG4gICAgICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAgICAgKlxuICAgICAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gICAgICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICAgICAqL1xuICAgIChmdW5jdGlvbiAoX2dsb2JhbCkge1xuICAgICAgICB2YXIgc3ltYm9sUHJlZml4ID0gX2dsb2JhbFsnX19ab25lX3N5bWJvbF9wcmVmaXgnXSB8fCAnX196b25lX3N5bWJvbF9fJztcbiAgICAgICAgZnVuY3Rpb24gX19zeW1ib2xfXyhuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gc3ltYm9sUHJlZml4ICsgbmFtZTtcbiAgICAgICAgfVxuICAgICAgICBfZ2xvYmFsW19fc3ltYm9sX18oJ2xlZ2FjeVBhdGNoJyldID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIFpvbmUgPSBfZ2xvYmFsWydab25lJ107XG4gICAgICAgICAgICBab25lLl9fbG9hZF9wYXRjaCgnZGVmaW5lUHJvcGVydHknLCBmdW5jdGlvbiAoZ2xvYmFsLCBab25lLCBhcGkpIHtcbiAgICAgICAgICAgICAgICBhcGkuX3JlZGVmaW5lUHJvcGVydHkgPSBfcmVkZWZpbmVQcm9wZXJ0eTtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eVBhdGNoKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFpvbmUuX19sb2FkX3BhdGNoKCdyZWdpc3RlckVsZW1lbnQnLCBmdW5jdGlvbiAoZ2xvYmFsLCBab25lLCBhcGkpIHtcbiAgICAgICAgICAgICAgICByZWdpc3RlckVsZW1lbnRQYXRjaChnbG9iYWwsIGFwaSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFpvbmUuX19sb2FkX3BhdGNoKCdFdmVudFRhcmdldExlZ2FjeScsIGZ1bmN0aW9uIChnbG9iYWwsIFpvbmUsIGFwaSkge1xuICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0TGVnYWN5UGF0Y2goZ2xvYmFsLCBhcGkpO1xuICAgICAgICAgICAgICAgIHByb3BlcnR5RGVzY3JpcHRvckxlZ2FjeVBhdGNoKGFwaSwgZ2xvYmFsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH0pKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID9cbiAgICAgICAgd2luZG93IDpcbiAgICAgICAgdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDoge30pO1xuICAgIC8qKlxuICAgICAqIEBsaWNlbnNlXG4gICAgICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAgICAgKlxuICAgICAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gICAgICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICAgICAqL1xuICAgIHZhciB0YXNrU3ltYm9sID0gem9uZVN5bWJvbCQxKCd6b25lVGFzaycpO1xuICAgIGZ1bmN0aW9uIHBhdGNoVGltZXIod2luZG93LCBzZXROYW1lLCBjYW5jZWxOYW1lLCBuYW1lU3VmZml4KSB7XG4gICAgICAgIHZhciBzZXROYXRpdmUgPSBudWxsO1xuICAgICAgICB2YXIgY2xlYXJOYXRpdmUgPSBudWxsO1xuICAgICAgICBzZXROYW1lICs9IG5hbWVTdWZmaXg7XG4gICAgICAgIGNhbmNlbE5hbWUgKz0gbmFtZVN1ZmZpeDtcbiAgICAgICAgdmFyIHRhc2tzQnlIYW5kbGVJZCA9IHt9O1xuICAgICAgICBmdW5jdGlvbiBzY2hlZHVsZVRhc2sodGFzaykge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB0YXNrLmRhdGE7XG4gICAgICAgICAgICBkYXRhLmFyZ3NbMF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhc2suaW52b2tlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZGF0YS5oYW5kbGVJZCA9IHNldE5hdGl2ZS5hcHBseSh3aW5kb3csIGRhdGEuYXJncyk7XG4gICAgICAgICAgICByZXR1cm4gdGFzaztcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBjbGVhclRhc2sodGFzaykge1xuICAgICAgICAgICAgcmV0dXJuIGNsZWFyTmF0aXZlLmNhbGwod2luZG93LCB0YXNrLmRhdGEuaGFuZGxlSWQpO1xuICAgICAgICB9XG4gICAgICAgIHNldE5hdGl2ZSA9XG4gICAgICAgICAgICBwYXRjaE1ldGhvZCh3aW5kb3csIHNldE5hbWUsIGZ1bmN0aW9uIChkZWxlZ2F0ZSkgeyByZXR1cm4gZnVuY3Rpb24gKHNlbGYsIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnNfMSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUGVyaW9kaWM6IG5hbWVTdWZmaXggPT09ICdJbnRlcnZhbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxheTogKG5hbWVTdWZmaXggPT09ICdUaW1lb3V0JyB8fCBuYW1lU3VmZml4ID09PSAnSW50ZXJ2YWwnKSA/IGFyZ3NbMV0gfHwgMCA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogYXJnc1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2tfMSA9IGFyZ3NbMF07XG4gICAgICAgICAgICAgICAgICAgIGFyZ3NbMF0gPSBmdW5jdGlvbiB0aW1lcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrXzEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzc3VlLTkzNCwgdGFzayB3aWxsIGJlIGNhbmNlbGxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV2ZW4gaXQgaXMgYSBwZXJpb2RpYyB0YXNrIHN1Y2ggYXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXRJbnRlcnZhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIvaXNzdWVzLzQwMzg3XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYW51cCB0YXNrc0J5SGFuZGxlSWQgc2hvdWxkIGJlIGhhbmRsZWQgYmVmb3JlIHNjaGVkdWxlVGFza1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIHNvbWUgem9uZVNwZWMgbWF5IGludGVyY2VwdCBhbmQgZG9lc24ndCB0cmlnZ2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2NoZWR1bGVGbihzY2hlZHVsZVRhc2spIHByb3ZpZGVkIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEob3B0aW9uc18xLmlzUGVyaW9kaWMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc18xLmhhbmRsZUlkID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gbm9uLW5vZGVqcyBlbnYsIHdlIHJlbW92ZSB0aW1lcklkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmcm9tIGxvY2FsIGNhY2hlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZUlkW29wdGlvbnNfMS5oYW5kbGVJZF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob3B0aW9uc18xLmhhbmRsZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb2RlIHJldHVybnMgY29tcGxleCBvYmplY3RzIGFzIGhhbmRsZUlkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgcmVtb3ZlIHRhc2sgcmVmZXJlbmNlIGZyb20gdGltZXIgb2JqZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zXzEuaGFuZGxlSWRbdGFza1N5bWJvbF0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFzayA9IHNjaGVkdWxlTWFjcm9UYXNrV2l0aEN1cnJlbnRab25lKHNldE5hbWUsIGFyZ3NbMF0sIG9wdGlvbnNfMSwgc2NoZWR1bGVUYXNrLCBjbGVhclRhc2spO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhc2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXNrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIE5vZGUuanMgbXVzdCBhZGRpdGlvbmFsbHkgc3VwcG9ydCB0aGUgcmVmIGFuZCB1bnJlZiBmdW5jdGlvbnMuXG4gICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGUgPSB0YXNrLmRhdGEuaGFuZGxlSWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaGFuZGxlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIG5vbiBub2RlanMgZW52LCB3ZSBzYXZlIGhhbmRsZUlkOiB0YXNrXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXBwaW5nIGluIGxvY2FsIGNhY2hlIGZvciBjbGVhclRpbWVvdXRcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tzQnlIYW5kbGVJZFtoYW5kbGVdID0gdGFzaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChoYW5kbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciBub2RlanMgZW52LCB3ZSBzYXZlIHRhc2tcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSBpbiB0aW1lcklkIE9iamVjdCBmb3IgY2xlYXJUaW1lb3V0XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVbdGFza1N5bWJvbF0gPSB0YXNrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgaGFuZGxlIGlzIG51bGwsIGJlY2F1c2Ugc29tZSBwb2x5ZmlsbCBvciBicm93c2VyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1heSByZXR1cm4gdW5kZWZpbmVkIGZyb20gc2V0VGltZW91dC9zZXRJbnRlcnZhbC9zZXRJbW1lZGlhdGUvcmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGUgJiYgaGFuZGxlLnJlZiAmJiBoYW5kbGUudW5yZWYgJiYgdHlwZW9mIGhhbmRsZS5yZWYgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBoYW5kbGUudW5yZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sucmVmID0gaGFuZGxlLnJlZi5iaW5kKGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrLnVucmVmID0gaGFuZGxlLnVucmVmLmJpbmQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGhhbmRsZSA9PT0gJ251bWJlcicgfHwgaGFuZGxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXNrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2F1c2UgYW4gZXJyb3IgYnkgY2FsbGluZyBpdCBkaXJlY3RseS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlbGVnYXRlLmFwcGx5KHdpbmRvdywgYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTsgfSk7XG4gICAgICAgIGNsZWFyTmF0aXZlID1cbiAgICAgICAgICAgIHBhdGNoTWV0aG9kKHdpbmRvdywgY2FuY2VsTmFtZSwgZnVuY3Rpb24gKGRlbGVnYXRlKSB7IHJldHVybiBmdW5jdGlvbiAoc2VsZiwgYXJncykge1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IGFyZ3NbMF07XG4gICAgICAgICAgICAgICAgdmFyIHRhc2s7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbm9uIG5vZGVqcyBlbnYuXG4gICAgICAgICAgICAgICAgICAgIHRhc2sgPSB0YXNrc0J5SGFuZGxlSWRbaWRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbm9kZWpzIGVudi5cbiAgICAgICAgICAgICAgICAgICAgdGFzayA9IGlkICYmIGlkW3Rhc2tTeW1ib2xdO1xuICAgICAgICAgICAgICAgICAgICAvLyBvdGhlciBlbnZpcm9ubWVudHMuXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFzaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFzayA9IGlkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0YXNrICYmIHR5cGVvZiB0YXNrLnR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXNrLnN0YXRlICE9PSAnbm90U2NoZWR1bGVkJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKHRhc2suY2FuY2VsRm4gJiYgdGFzay5kYXRhLmlzUGVyaW9kaWMgfHwgdGFzay5ydW5Db3VudCA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaWQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVJZFtpZF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkW3Rhc2tTeW1ib2xdID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdCBjYW5jZWwgYWxyZWFkeSBjYW5jZWxlZCBmdW5jdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suem9uZS5jYW5jZWxUYXNrKHRhc2spO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBjYXVzZSBhbiBlcnJvciBieSBjYWxsaW5nIGl0IGRpcmVjdGx5LlxuICAgICAgICAgICAgICAgICAgICBkZWxlZ2F0ZS5hcHBseSh3aW5kb3csIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07IH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbGljZW5zZVxuICAgICAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gICAgICpcbiAgICAgKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICAgICAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwYXRjaEN1c3RvbUVsZW1lbnRzKF9nbG9iYWwsIGFwaSkge1xuICAgICAgICB2YXIgX2IgPSBhcGkuZ2V0R2xvYmFsT2JqZWN0cygpLCBpc0Jyb3dzZXIgPSBfYi5pc0Jyb3dzZXIsIGlzTWl4ID0gX2IuaXNNaXg7XG4gICAgICAgIGlmICgoIWlzQnJvd3NlciAmJiAhaXNNaXgpIHx8ICFfZ2xvYmFsWydjdXN0b21FbGVtZW50cyddIHx8ICEoJ2N1c3RvbUVsZW1lbnRzJyBpbiBfZ2xvYmFsKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjYWxsYmFja3MgPSBbJ2Nvbm5lY3RlZENhbGxiYWNrJywgJ2Rpc2Nvbm5lY3RlZENhbGxiYWNrJywgJ2Fkb3B0ZWRDYWxsYmFjaycsICdhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2snXTtcbiAgICAgICAgYXBpLnBhdGNoQ2FsbGJhY2tzKGFwaSwgX2dsb2JhbC5jdXN0b21FbGVtZW50cywgJ2N1c3RvbUVsZW1lbnRzJywgJ2RlZmluZScsIGNhbGxiYWNrcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBsaWNlbnNlXG4gICAgICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAgICAgKlxuICAgICAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gICAgICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGV2ZW50VGFyZ2V0UGF0Y2goX2dsb2JhbCwgYXBpKSB7XG4gICAgICAgIGlmIChab25lW2FwaS5zeW1ib2woJ3BhdGNoRXZlbnRUYXJnZXQnKV0pIHtcbiAgICAgICAgICAgIC8vIEV2ZW50VGFyZ2V0IGlzIGFscmVhZHkgcGF0Y2hlZC5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX2IgPSBhcGkuZ2V0R2xvYmFsT2JqZWN0cygpLCBldmVudE5hbWVzID0gX2IuZXZlbnROYW1lcywgem9uZVN5bWJvbEV2ZW50TmFtZXMgPSBfYi56b25lU3ltYm9sRXZlbnROYW1lcywgVFJVRV9TVFIgPSBfYi5UUlVFX1NUUiwgRkFMU0VfU1RSID0gX2IuRkFMU0VfU1RSLCBaT05FX1NZTUJPTF9QUkVGSVggPSBfYi5aT05FX1NZTUJPTF9QUkVGSVg7XG4gICAgICAgIC8vICBwcmVkZWZpbmUgYWxsIF9fem9uZV9zeW1ib2xfXyArIGV2ZW50TmFtZSArIHRydWUvZmFsc2Ugc3RyaW5nXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnROYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGV2ZW50TmFtZSA9IGV2ZW50TmFtZXNbaV07XG4gICAgICAgICAgICB2YXIgZmFsc2VFdmVudE5hbWUgPSBldmVudE5hbWUgKyBGQUxTRV9TVFI7XG4gICAgICAgICAgICB2YXIgdHJ1ZUV2ZW50TmFtZSA9IGV2ZW50TmFtZSArIFRSVUVfU1RSO1xuICAgICAgICAgICAgdmFyIHN5bWJvbCA9IFpPTkVfU1lNQk9MX1BSRUZJWCArIGZhbHNlRXZlbnROYW1lO1xuICAgICAgICAgICAgdmFyIHN5bWJvbENhcHR1cmUgPSBaT05FX1NZTUJPTF9QUkVGSVggKyB0cnVlRXZlbnROYW1lO1xuICAgICAgICAgICAgem9uZVN5bWJvbEV2ZW50TmFtZXNbZXZlbnROYW1lXSA9IHt9O1xuICAgICAgICAgICAgem9uZVN5bWJvbEV2ZW50TmFtZXNbZXZlbnROYW1lXVtGQUxTRV9TVFJdID0gc3ltYm9sO1xuICAgICAgICAgICAgem9uZVN5bWJvbEV2ZW50TmFtZXNbZXZlbnROYW1lXVtUUlVFX1NUUl0gPSBzeW1ib2xDYXB0dXJlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBFVkVOVF9UQVJHRVQgPSBfZ2xvYmFsWydFdmVudFRhcmdldCddO1xuICAgICAgICBpZiAoIUVWRU5UX1RBUkdFVCB8fCAhRVZFTlRfVEFSR0VULnByb3RvdHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGFwaS5wYXRjaEV2ZW50VGFyZ2V0KF9nbG9iYWwsIGFwaSwgW0VWRU5UX1RBUkdFVCAmJiBFVkVOVF9UQVJHRVQucHJvdG90eXBlXSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwYXRjaEV2ZW50KGdsb2JhbCwgYXBpKSB7XG4gICAgICAgIGFwaS5wYXRjaEV2ZW50UHJvdG90eXBlKGdsb2JhbCwgYXBpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGxpY2Vuc2VcbiAgICAgKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICAgICAqXG4gICAgICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAgICAgKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gICAgICovXG4gICAgWm9uZS5fX2xvYWRfcGF0Y2goJ2xlZ2FjeScsIGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgICAgICAgdmFyIGxlZ2FjeVBhdGNoID0gZ2xvYmFsW1pvbmUuX19zeW1ib2xfXygnbGVnYWN5UGF0Y2gnKV07XG4gICAgICAgIGlmIChsZWdhY3lQYXRjaCkge1xuICAgICAgICAgICAgbGVnYWN5UGF0Y2goKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIFpvbmUuX19sb2FkX3BhdGNoKCdxdWV1ZU1pY3JvdGFzaycsIGZ1bmN0aW9uIChnbG9iYWwsIFpvbmUsIGFwaSkge1xuICAgICAgICBhcGkucGF0Y2hNZXRob2QoZ2xvYmFsLCAncXVldWVNaWNyb3Rhc2snLCBmdW5jdGlvbiAoZGVsZWdhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoc2VsZiwgYXJncykge1xuICAgICAgICAgICAgICAgIFpvbmUuY3VycmVudC5zY2hlZHVsZU1pY3JvVGFzaygncXVldWVNaWNyb3Rhc2snLCBhcmdzWzBdKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIFpvbmUuX19sb2FkX3BhdGNoKCd0aW1lcnMnLCBmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICAgICAgIHZhciBzZXQgPSAnc2V0JztcbiAgICAgICAgdmFyIGNsZWFyID0gJ2NsZWFyJztcbiAgICAgICAgcGF0Y2hUaW1lcihnbG9iYWwsIHNldCwgY2xlYXIsICdUaW1lb3V0Jyk7XG4gICAgICAgIHBhdGNoVGltZXIoZ2xvYmFsLCBzZXQsIGNsZWFyLCAnSW50ZXJ2YWwnKTtcbiAgICAgICAgcGF0Y2hUaW1lcihnbG9iYWwsIHNldCwgY2xlYXIsICdJbW1lZGlhdGUnKTtcbiAgICB9KTtcbiAgICBab25lLl9fbG9hZF9wYXRjaCgncmVxdWVzdEFuaW1hdGlvbkZyYW1lJywgZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgICBwYXRjaFRpbWVyKGdsb2JhbCwgJ3JlcXVlc3QnLCAnY2FuY2VsJywgJ0FuaW1hdGlvbkZyYW1lJyk7XG4gICAgICAgIHBhdGNoVGltZXIoZ2xvYmFsLCAnbW96UmVxdWVzdCcsICdtb3pDYW5jZWwnLCAnQW5pbWF0aW9uRnJhbWUnKTtcbiAgICAgICAgcGF0Y2hUaW1lcihnbG9iYWwsICd3ZWJraXRSZXF1ZXN0JywgJ3dlYmtpdENhbmNlbCcsICdBbmltYXRpb25GcmFtZScpO1xuICAgIH0pO1xuICAgIFpvbmUuX19sb2FkX3BhdGNoKCdibG9ja2luZycsIGZ1bmN0aW9uIChnbG9iYWwsIFpvbmUpIHtcbiAgICAgICAgdmFyIGJsb2NraW5nTWV0aG9kcyA9IFsnYWxlcnQnLCAncHJvbXB0JywgJ2NvbmZpcm0nXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBibG9ja2luZ01ldGhvZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBuYW1lXzIgPSBibG9ja2luZ01ldGhvZHNbaV07XG4gICAgICAgICAgICBwYXRjaE1ldGhvZChnbG9iYWwsIG5hbWVfMiwgZnVuY3Rpb24gKGRlbGVnYXRlLCBzeW1ib2wsIG5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHMsIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFpvbmUuY3VycmVudC5ydW4oZGVsZWdhdGUsIGdsb2JhbCwgYXJncywgbmFtZSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgWm9uZS5fX2xvYWRfcGF0Y2goJ0V2ZW50VGFyZ2V0JywgZnVuY3Rpb24gKGdsb2JhbCwgWm9uZSwgYXBpKSB7XG4gICAgICAgIHBhdGNoRXZlbnQoZ2xvYmFsLCBhcGkpO1xuICAgICAgICBldmVudFRhcmdldFBhdGNoKGdsb2JhbCwgYXBpKTtcbiAgICAgICAgLy8gcGF0Y2ggWE1MSHR0cFJlcXVlc3RFdmVudFRhcmdldCdzIGFkZEV2ZW50TGlzdGVuZXIvcmVtb3ZlRXZlbnRMaXN0ZW5lclxuICAgICAgICB2YXIgWE1MSHR0cFJlcXVlc3RFdmVudFRhcmdldCA9IGdsb2JhbFsnWE1MSHR0cFJlcXVlc3RFdmVudFRhcmdldCddO1xuICAgICAgICBpZiAoWE1MSHR0cFJlcXVlc3RFdmVudFRhcmdldCAmJiBYTUxIdHRwUmVxdWVzdEV2ZW50VGFyZ2V0LnByb3RvdHlwZSkge1xuICAgICAgICAgICAgYXBpLnBhdGNoRXZlbnRUYXJnZXQoZ2xvYmFsLCBhcGksIFtYTUxIdHRwUmVxdWVzdEV2ZW50VGFyZ2V0LnByb3RvdHlwZV0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgWm9uZS5fX2xvYWRfcGF0Y2goJ011dGF0aW9uT2JzZXJ2ZXInLCBmdW5jdGlvbiAoZ2xvYmFsLCBab25lLCBhcGkpIHtcbiAgICAgICAgcGF0Y2hDbGFzcygnTXV0YXRpb25PYnNlcnZlcicpO1xuICAgICAgICBwYXRjaENsYXNzKCdXZWJLaXRNdXRhdGlvbk9ic2VydmVyJyk7XG4gICAgfSk7XG4gICAgWm9uZS5fX2xvYWRfcGF0Y2goJ0ludGVyc2VjdGlvbk9ic2VydmVyJywgZnVuY3Rpb24gKGdsb2JhbCwgWm9uZSwgYXBpKSB7XG4gICAgICAgIHBhdGNoQ2xhc3MoJ0ludGVyc2VjdGlvbk9ic2VydmVyJyk7XG4gICAgfSk7XG4gICAgWm9uZS5fX2xvYWRfcGF0Y2goJ0ZpbGVSZWFkZXInLCBmdW5jdGlvbiAoZ2xvYmFsLCBab25lLCBhcGkpIHtcbiAgICAgICAgcGF0Y2hDbGFzcygnRmlsZVJlYWRlcicpO1xuICAgIH0pO1xuICAgIFpvbmUuX19sb2FkX3BhdGNoKCdvbl9wcm9wZXJ0eScsIGZ1bmN0aW9uIChnbG9iYWwsIFpvbmUsIGFwaSkge1xuICAgICAgICBwcm9wZXJ0eURlc2NyaXB0b3JQYXRjaChhcGksIGdsb2JhbCk7XG4gICAgfSk7XG4gICAgWm9uZS5fX2xvYWRfcGF0Y2goJ2N1c3RvbUVsZW1lbnRzJywgZnVuY3Rpb24gKGdsb2JhbCwgWm9uZSwgYXBpKSB7XG4gICAgICAgIHBhdGNoQ3VzdG9tRWxlbWVudHMoZ2xvYmFsLCBhcGkpO1xuICAgIH0pO1xuICAgIFpvbmUuX19sb2FkX3BhdGNoKCdYSFInLCBmdW5jdGlvbiAoZ2xvYmFsLCBab25lKSB7XG4gICAgICAgIC8vIFRyZWF0IFhNTEh0dHBSZXF1ZXN0IGFzIGEgbWFjcm90YXNrLlxuICAgICAgICBwYXRjaFhIUihnbG9iYWwpO1xuICAgICAgICB2YXIgWEhSX1RBU0sgPSB6b25lU3ltYm9sJDEoJ3hoclRhc2snKTtcbiAgICAgICAgdmFyIFhIUl9TWU5DID0gem9uZVN5bWJvbCQxKCd4aHJTeW5jJyk7XG4gICAgICAgIHZhciBYSFJfTElTVEVORVIgPSB6b25lU3ltYm9sJDEoJ3hockxpc3RlbmVyJyk7XG4gICAgICAgIHZhciBYSFJfU0NIRURVTEVEID0gem9uZVN5bWJvbCQxKCd4aHJTY2hlZHVsZWQnKTtcbiAgICAgICAgdmFyIFhIUl9VUkwgPSB6b25lU3ltYm9sJDEoJ3hoclVSTCcpO1xuICAgICAgICB2YXIgWEhSX0VSUk9SX0JFRk9SRV9TQ0hFRFVMRUQgPSB6b25lU3ltYm9sJDEoJ3hockVycm9yQmVmb3JlU2NoZWR1bGVkJyk7XG4gICAgICAgIGZ1bmN0aW9uIHBhdGNoWEhSKHdpbmRvdykge1xuICAgICAgICAgICAgdmFyIFhNTEh0dHBSZXF1ZXN0ID0gd2luZG93WydYTUxIdHRwUmVxdWVzdCddO1xuICAgICAgICAgICAgaWYgKCFYTUxIdHRwUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgIC8vIFhNTEh0dHBSZXF1ZXN0IGlzIG5vdCBhdmFpbGFibGUgaW4gc2VydmljZSB3b3JrZXJcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgWE1MSHR0cFJlcXVlc3RQcm90b3R5cGUgPSBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGU7XG4gICAgICAgICAgICBmdW5jdGlvbiBmaW5kUGVuZGluZ1Rhc2sodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtYSFJfVEFTS107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb3JpQWRkTGlzdGVuZXIgPSBYTUxIdHRwUmVxdWVzdFByb3RvdHlwZVtaT05FX1NZTUJPTF9BRERfRVZFTlRfTElTVEVORVJdO1xuICAgICAgICAgICAgdmFyIG9yaVJlbW92ZUxpc3RlbmVyID0gWE1MSHR0cFJlcXVlc3RQcm90b3R5cGVbWk9ORV9TWU1CT0xfUkVNT1ZFX0VWRU5UX0xJU1RFTkVSXTtcbiAgICAgICAgICAgIGlmICghb3JpQWRkTGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgWE1MSHR0cFJlcXVlc3RFdmVudFRhcmdldF8xID0gd2luZG93WydYTUxIdHRwUmVxdWVzdEV2ZW50VGFyZ2V0J107XG4gICAgICAgICAgICAgICAgaWYgKFhNTEh0dHBSZXF1ZXN0RXZlbnRUYXJnZXRfMSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgWE1MSHR0cFJlcXVlc3RFdmVudFRhcmdldFByb3RvdHlwZSA9IFhNTEh0dHBSZXF1ZXN0RXZlbnRUYXJnZXRfMS5wcm90b3R5cGU7XG4gICAgICAgICAgICAgICAgICAgIG9yaUFkZExpc3RlbmVyID0gWE1MSHR0cFJlcXVlc3RFdmVudFRhcmdldFByb3RvdHlwZVtaT05FX1NZTUJPTF9BRERfRVZFTlRfTElTVEVORVJdO1xuICAgICAgICAgICAgICAgICAgICBvcmlSZW1vdmVMaXN0ZW5lciA9IFhNTEh0dHBSZXF1ZXN0RXZlbnRUYXJnZXRQcm90b3R5cGVbWk9ORV9TWU1CT0xfUkVNT1ZFX0VWRU5UX0xJU1RFTkVSXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgUkVBRFlfU1RBVEVfQ0hBTkdFID0gJ3JlYWR5c3RhdGVjaGFuZ2UnO1xuICAgICAgICAgICAgdmFyIFNDSEVEVUxFRCA9ICdzY2hlZHVsZWQnO1xuICAgICAgICAgICAgZnVuY3Rpb24gc2NoZWR1bGVUYXNrKHRhc2spIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHRhc2suZGF0YTtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZGF0YS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W1hIUl9TQ0hFRFVMRURdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W1hIUl9FUlJPUl9CRUZPUkVfU0NIRURVTEVEXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBleGlzdGluZyBldmVudCBsaXN0ZW5lclxuICAgICAgICAgICAgICAgIHZhciBsaXN0ZW5lciA9IHRhcmdldFtYSFJfTElTVEVORVJdO1xuICAgICAgICAgICAgICAgIGlmICghb3JpQWRkTGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgb3JpQWRkTGlzdGVuZXIgPSB0YXJnZXRbWk9ORV9TWU1CT0xfQUREX0VWRU5UX0xJU1RFTkVSXTtcbiAgICAgICAgICAgICAgICAgICAgb3JpUmVtb3ZlTGlzdGVuZXIgPSB0YXJnZXRbWk9ORV9TWU1CT0xfUkVNT1ZFX0VWRU5UX0xJU1RFTkVSXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIG9yaVJlbW92ZUxpc3RlbmVyLmNhbGwodGFyZ2V0LCBSRUFEWV9TVEFURV9DSEFOR0UsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIG5ld0xpc3RlbmVyID0gdGFyZ2V0W1hIUl9MSVNURU5FUl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQucmVhZHlTdGF0ZSA9PT0gdGFyZ2V0LkRPTkUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvbWV0aW1lcyBvbiBzb21lIGJyb3dzZXJzIFhNTEh0dHBSZXF1ZXN0IHdpbGwgZmlyZSBvbnJlYWR5c3RhdGVjaGFuZ2Ugd2l0aFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVhZHlTdGF0ZT00IG11bHRpcGxlIHRpbWVzLCBzbyB3ZSBuZWVkIHRvIGNoZWNrIHRhc2sgc3RhdGUgaGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhLmFib3J0ZWQgJiYgdGFyZ2V0W1hIUl9TQ0hFRFVMRURdICYmIHRhc2suc3RhdGUgPT09IFNDSEVEVUxFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgdGhlIHhociBoYXMgcmVnaXN0ZXJlZCBvbmxvYWQgbGlzdGVuZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGF0IGlzIHRoZSBjYXNlLCB0aGUgdGFzayBzaG91bGQgaW52b2tlIGFmdGVyIGFsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9ubG9hZCBsaXN0ZW5lcnMgZmluaXNoLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsc28gaWYgdGhlIHJlcXVlc3QgZmFpbGVkIHdpdGhvdXQgcmVzcG9uc2UgKHN0YXR1cyA9IDApLCB0aGUgbG9hZCBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2lsbCBub3QgYmUgdHJpZ2dlcmVkLCBpbiB0aGF0IGNhc2UsIHdlIHNob3VsZCBhbHNvIGludm9rZSB0aGUgcGxhY2Vob2xkZXIgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0byBjbG9zZSB0aGUgWE1MSHR0cFJlcXVlc3Q6OnNlbmQgbWFjcm9UYXNrLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIvaXNzdWVzLzM4Nzk1XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxvYWRUYXNrcyA9IHRhcmdldFtab25lLl9fc3ltYm9sX18oJ2xvYWRmYWxzZScpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LnN0YXR1cyAhPT0gMCAmJiBsb2FkVGFza3MgJiYgbG9hZFRhc2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yaUludm9rZV8xID0gdGFzay5pbnZva2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suaW52b2tlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZCB0byBsb2FkIHRoZSB0YXNrcyBhZ2FpbiwgYmVjYXVzZSBpbiBvdGhlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9hZCBsaXN0ZW5lciwgdGhleSBtYXkgcmVtb3ZlIHRoZW1zZWx2ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsb2FkVGFza3MgPSB0YXJnZXRbWm9uZS5fX3N5bWJvbF9fKCdsb2FkZmFsc2UnKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxvYWRUYXNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2FkVGFza3NbaV0gPT09IHRhc2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZFRhc2tzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEuYWJvcnRlZCAmJiB0YXNrLnN0YXRlID09PSBTQ0hFRFVMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlJbnZva2VfMS5jYWxsKHRhc2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkVGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suaW52b2tlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWRhdGEuYWJvcnRlZCAmJiB0YXJnZXRbWEhSX1NDSEVEVUxFRF0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXJyb3Igb2NjdXJzIHdoZW4geGhyLnNlbmQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFtYSFJfRVJST1JfQkVGT1JFX1NDSEVEVUxFRF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBvcmlBZGRMaXN0ZW5lci5jYWxsKHRhcmdldCwgUkVBRFlfU1RBVEVfQ0hBTkdFLCBuZXdMaXN0ZW5lcik7XG4gICAgICAgICAgICAgICAgdmFyIHN0b3JlZFRhc2sgPSB0YXJnZXRbWEhSX1RBU0tdO1xuICAgICAgICAgICAgICAgIGlmICghc3RvcmVkVGFzaykge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRbWEhSX1RBU0tdID0gdGFzaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2VuZE5hdGl2ZS5hcHBseSh0YXJnZXQsIGRhdGEuYXJncyk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W1hIUl9TQ0hFRFVMRURdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFzaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIHBsYWNlaG9sZGVyQ2FsbGJhY2soKSB7IH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNsZWFyVGFzayh0YXNrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB0YXNrLmRhdGE7XG4gICAgICAgICAgICAgICAgLy8gTm90ZSAtIGlkZWFsbHksIHdlIHdvdWxkIGNhbGwgZGF0YS50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lciBoZXJlLCBidXQgaXQncyB0b28gbGF0ZVxuICAgICAgICAgICAgICAgIC8vIHRvIHByZXZlbnQgaXQgZnJvbSBmaXJpbmcuIFNvIGluc3RlYWQsIHdlIHN0b3JlIGluZm8gZm9yIHRoZSBldmVudCBsaXN0ZW5lci5cbiAgICAgICAgICAgICAgICBkYXRhLmFib3J0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBhYm9ydE5hdGl2ZS5hcHBseShkYXRhLnRhcmdldCwgZGF0YS5hcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvcGVuTmF0aXZlID0gcGF0Y2hNZXRob2QoWE1MSHR0cFJlcXVlc3RQcm90b3R5cGUsICdvcGVuJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gZnVuY3Rpb24gKHNlbGYsIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICBzZWxmW1hIUl9TWU5DXSA9IGFyZ3NbMl0gPT0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc2VsZltYSFJfVVJMXSA9IGFyZ3NbMV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wZW5OYXRpdmUuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgICB9OyB9KTtcbiAgICAgICAgICAgIHZhciBYTUxIVFRQUkVRVUVTVF9TT1VSQ0UgPSAnWE1MSHR0cFJlcXVlc3Quc2VuZCc7XG4gICAgICAgICAgICB2YXIgZmV0Y2hUYXNrQWJvcnRpbmcgPSB6b25lU3ltYm9sJDEoJ2ZldGNoVGFza0Fib3J0aW5nJyk7XG4gICAgICAgICAgICB2YXIgZmV0Y2hUYXNrU2NoZWR1bGluZyA9IHpvbmVTeW1ib2wkMSgnZmV0Y2hUYXNrU2NoZWR1bGluZycpO1xuICAgICAgICAgICAgdmFyIHNlbmROYXRpdmUgPSBwYXRjaE1ldGhvZChYTUxIdHRwUmVxdWVzdFByb3RvdHlwZSwgJ3NlbmQnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBmdW5jdGlvbiAoc2VsZiwgYXJncykge1xuICAgICAgICAgICAgICAgIGlmIChab25lLmN1cnJlbnRbZmV0Y2hUYXNrU2NoZWR1bGluZ10gPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBmZXRjaCBpcyBzY2hlZHVsaW5nLCBzbyB3ZSBhcmUgdXNpbmcgeGhyIHRvIHBvbHlmaWxsIGZldGNoXG4gICAgICAgICAgICAgICAgICAgIC8vIGFuZCBiZWNhdXNlIHdlIGFscmVhZHkgc2NoZWR1bGUgbWFjcm9UYXNrIGZvciBmZXRjaCwgd2Ugc2hvdWxkXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBzY2hlZHVsZSBhIG1hY3JvVGFzayBmb3IgeGhyIGFnYWluXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZW5kTmF0aXZlLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2VsZltYSFJfU1lOQ10pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIFhIUiBpcyBzeW5jIHRoZXJlIGlzIG5vIHRhc2sgdG8gc2NoZWR1bGUsIGp1c3QgZXhlY3V0ZSB0aGUgY29kZS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbmROYXRpdmUuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHsgdGFyZ2V0OiBzZWxmLCB1cmw6IHNlbGZbWEhSX1VSTF0sIGlzUGVyaW9kaWM6IGZhbHNlLCBhcmdzOiBhcmdzLCBhYm9ydGVkOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFzayA9IHNjaGVkdWxlTWFjcm9UYXNrV2l0aEN1cnJlbnRab25lKFhNTEhUVFBSRVFVRVNUX1NPVVJDRSwgcGxhY2Vob2xkZXJDYWxsYmFjaywgb3B0aW9ucywgc2NoZWR1bGVUYXNrLCBjbGVhclRhc2spO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZiAmJiBzZWxmW1hIUl9FUlJPUl9CRUZPUkVfU0NIRURVTEVEXSA9PT0gdHJ1ZSAmJiAhb3B0aW9ucy5hYm9ydGVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrLnN0YXRlID09PSBTQ0hFRFVMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHhociByZXF1ZXN0IHRocm93IGVycm9yIHdoZW4gc2VuZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2Ugc2hvdWxkIGludm9rZSB0YXNrIGluc3RlYWQgb2YgbGVhdmluZyBhIHNjaGVkdWxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGVuZGluZyBtYWNyb1Rhc2tcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suaW52b2tlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9OyB9KTtcbiAgICAgICAgICAgIHZhciBhYm9ydE5hdGl2ZSA9IHBhdGNoTWV0aG9kKFhNTEh0dHBSZXF1ZXN0UHJvdG90eXBlLCAnYWJvcnQnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBmdW5jdGlvbiAoc2VsZiwgYXJncykge1xuICAgICAgICAgICAgICAgIHZhciB0YXNrID0gZmluZFBlbmRpbmdUYXNrKHNlbGYpO1xuICAgICAgICAgICAgICAgIGlmICh0YXNrICYmIHR5cGVvZiB0YXNrLnR5cGUgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIFhIUiBoYXMgYWxyZWFkeSBjb21wbGV0ZWQsIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBYSFIgaGFzIGFscmVhZHkgYmVlbiBhYm9ydGVkLCBkbyBub3RoaW5nLlxuICAgICAgICAgICAgICAgICAgICAvLyBGaXggIzU2OSwgY2FsbCBhYm9ydCBtdWx0aXBsZSB0aW1lcyBiZWZvcmUgZG9uZSB3aWxsIGNhdXNlXG4gICAgICAgICAgICAgICAgICAgIC8vIG1hY3JvVGFzayB0YXNrIGNvdW50IGJlIG5lZ2F0aXZlIG51bWJlclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFzay5jYW5jZWxGbiA9PSBudWxsIHx8ICh0YXNrLmRhdGEgJiYgdGFzay5kYXRhLmFib3J0ZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGFzay56b25lLmNhbmNlbFRhc2sodGFzayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFpvbmUuY3VycmVudFtmZXRjaFRhc2tBYm9ydGluZ10gPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGFib3J0IGlzIGNhbGxlZCBmcm9tIGZldGNoIHBvbHlmaWxsLCB3ZSBuZWVkIHRvIGNhbGwgbmF0aXZlIGFib3J0IG9mIFhIUi5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFib3J0TmF0aXZlLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIHdlIGFyZSB0cnlpbmcgdG8gYWJvcnQgYW4gWEhSIHdoaWNoIGhhcyBub3QgeWV0IGJlZW4gc2VudCwgc28gdGhlcmUgaXMgbm9cbiAgICAgICAgICAgICAgICAvLyB0YXNrXG4gICAgICAgICAgICAgICAgLy8gdG8gY2FuY2VsLiBEbyBub3RoaW5nLlxuICAgICAgICAgICAgfTsgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBab25lLl9fbG9hZF9wYXRjaCgnZ2VvbG9jYXRpb24nLCBmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICAgICAgIC8vLyBHRU9fTE9DQVRJT05cbiAgICAgICAgaWYgKGdsb2JhbFsnbmF2aWdhdG9yJ10gJiYgZ2xvYmFsWyduYXZpZ2F0b3InXS5nZW9sb2NhdGlvbikge1xuICAgICAgICAgICAgcGF0Y2hQcm90b3R5cGUoZ2xvYmFsWyduYXZpZ2F0b3InXS5nZW9sb2NhdGlvbiwgWydnZXRDdXJyZW50UG9zaXRpb24nLCAnd2F0Y2hQb3NpdGlvbiddKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIFpvbmUuX19sb2FkX3BhdGNoKCdQcm9taXNlUmVqZWN0aW9uRXZlbnQnLCBmdW5jdGlvbiAoZ2xvYmFsLCBab25lKSB7XG4gICAgICAgIC8vIGhhbmRsZSB1bmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb25cbiAgICAgICAgZnVuY3Rpb24gZmluZFByb21pc2VSZWplY3Rpb25IYW5kbGVyKGV2dE5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBldmVudFRhc2tzID0gZmluZEV2ZW50VGFza3MoZ2xvYmFsLCBldnROYW1lKTtcbiAgICAgICAgICAgICAgICBldmVudFRhc2tzLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50VGFzaykge1xuICAgICAgICAgICAgICAgICAgICAvLyB3aW5kb3dzIGhhcyBhZGRlZCB1bmhhbmRsZWRyZWplY3Rpb24gZXZlbnQgbGlzdGVuZXJcbiAgICAgICAgICAgICAgICAgICAgLy8gdHJpZ2dlciB0aGUgZXZlbnQgbGlzdGVuZXJcbiAgICAgICAgICAgICAgICAgICAgdmFyIFByb21pc2VSZWplY3Rpb25FdmVudCA9IGdsb2JhbFsnUHJvbWlzZVJlamVjdGlvbkV2ZW50J107XG4gICAgICAgICAgICAgICAgICAgIGlmIChQcm9taXNlUmVqZWN0aW9uRXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBldnQgPSBuZXcgUHJvbWlzZVJlamVjdGlvbkV2ZW50KGV2dE5hbWUsIHsgcHJvbWlzZTogZS5wcm9taXNlLCByZWFzb246IGUucmVqZWN0aW9uIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRUYXNrLmludm9rZShldnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChnbG9iYWxbJ1Byb21pc2VSZWplY3Rpb25FdmVudCddKSB7XG4gICAgICAgICAgICBab25lW3pvbmVTeW1ib2wkMSgndW5oYW5kbGVkUHJvbWlzZVJlamVjdGlvbkhhbmRsZXInKV0gPVxuICAgICAgICAgICAgICAgIGZpbmRQcm9taXNlUmVqZWN0aW9uSGFuZGxlcigndW5oYW5kbGVkcmVqZWN0aW9uJyk7XG4gICAgICAgICAgICBab25lW3pvbmVTeW1ib2wkMSgncmVqZWN0aW9uSGFuZGxlZEhhbmRsZXInKV0gPVxuICAgICAgICAgICAgICAgIGZpbmRQcm9taXNlUmVqZWN0aW9uSGFuZGxlcigncmVqZWN0aW9uaGFuZGxlZCcpO1xuICAgICAgICB9XG4gICAgfSk7XG59KSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/zone.js/dist/zone.js\n");

/***/ }),

/***/ "./node_modules/@c8y/ngx-components/fesm2020/c8y-ngx-components-assets-navigator.mjs":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@c8y/ngx-components/fesm2020/c8y-ngx-components-assets-navigator.mjs ***!
  \*******************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("var _angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache;\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ASSET_NAVIGATOR_CONFIG\": function() { return /* binding */ ASSET_NAVIGATOR_CONFIG; },\n/* harmony export */   \"Action\": function() { return /* binding */ Action; },\n/* harmony export */   \"AssetNode\": function() { return /* binding */ AssetNode; },\n/* harmony export */   \"AssetNodeFactory\": function() { return /* binding */ AssetNodeFactory; },\n/* harmony export */   \"AssetNodeService\": function() { return /* binding */ AssetNodeService; },\n/* harmony export */   \"AssetSelectorComponent\": function() { return /* binding */ AssetSelectorComponent; },\n/* harmony export */   \"AssetSelectorModule\": function() { return /* binding */ AssetSelectorModule; },\n/* harmony export */   \"AssetSelectorNodeComponent\": function() { return /* binding */ AssetSelectorNodeComponent; },\n/* harmony export */   \"AssetsNavigatorModule\": function() { return /* binding */ AssetsNavigatorModule; },\n/* harmony export */   \"CONFIG_OPTIONS_DEFAULT\": function() { return /* binding */ CONFIG_OPTIONS_DEFAULT; },\n/* harmony export */   \"DeviceGroupService\": function() { return /* binding */ DeviceGroupService; },\n/* harmony export */   \"DynamicGroupNode\": function() { return /* binding */ DynamicGroupNode; },\n/* harmony export */   \"GroupNode\": function() { return /* binding */ GroupNode; },\n/* harmony export */   \"GroupNodeService\": function() { return /* binding */ GroupNodeService; },\n/* harmony export */   \"LoadMoreNode\": function() { return /* binding */ LoadMoreNode; },\n/* harmony export */   \"MillerViewComponent\": function() { return /* binding */ MillerViewComponent; }\n/* harmony export */ });\n/* harmony import */ var _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @c8y/ngx-components */ \"webpack/sharing/consume/default/@c8y/ngx-components/@c8y/ngx-components\");\n/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es */ \"webpack/sharing/consume/default/lodash-es/lodash-es\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs */ \"webpack/sharing/consume/default/rxjs/rxjs\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ \"webpack/sharing/consume/default/@angular/core/@angular/core\");\n/* harmony import */ var _c8y_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @c8y/client */ \"webpack/sharing/consume/default/@c8y/client/@c8y/client\");\n/* harmony import */ var _c8y_ngx_components_api__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @c8y/ngx-components/api */ \"./node_modules/@c8y/ngx-components/fesm2020/c8y-ngx-components-api.mjs\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ \"webpack/sharing/consume/default/rxjs/operators/rxjs/operators\");\n/* harmony import */ var ngx_bootstrap_collapse__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-bootstrap/collapse */ \"webpack/sharing/consume/default/ngx-bootstrap/collapse/ngx-bootstrap/collapse\");\n/* harmony import */ var ngx_bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-bootstrap/dropdown */ \"webpack/sharing/consume/default/ngx-bootstrap/dropdown/ngx-bootstrap/dropdown\");\n/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ngx-translate/core */ \"webpack/sharing/consume/default/@ngx-translate/core/@ngx-translate/core\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ \"webpack/sharing/consume/default/@angular/common/@angular/common\");\n/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/forms */ \"webpack/sharing/consume/default/@angular/forms/@angular/forms\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Action;\n(function (Action) {\n  Action[Action[\"FETCH\"] = 0] = \"FETCH\";\n  Action[Action[\"NEXT\"] = 1] = \"NEXT\";\n  Action[Action[\"REFRESH\"] = 2] = \"REFRESH\";\n  Action[Action[\"LOADING_DONE\"] = 3] = \"LOADING_DONE\";\n})(Action || (Action = {}));\nclass LoadMoreNode extends _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.NavigatorNode {\n  constructor() {\n    super();\n    this.label = (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.gettext)('Load more');\n    this.icon = 'plus';\n    this.droppable = true;\n    this.priority = -Infinity;\n  }\n  toString() {\n    return LoadMoreNode.NAME;\n  }\n  isGroup() {\n    return false;\n  }\n}\nLoadMoreNode.NAME = 'LoadMoreNode';\nclass AssetNode extends _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.NavigatorNode {\n  constructor(service, config = {}) {\n    var _this$service, _this$service$moduleC, _this$service2, _this$service2$module;\n    super(config);\n    this.service = service;\n    this.config = config;\n    this.hideDevices = false;\n    this.filterQuery$ = new rxjs__WEBPACK_IMPORTED_MODULE_2__.BehaviorSubject('');\n    this.showChildDevices = false;\n    /**\n     * Asset node children (subentries).\n     */\n    this.children = [];\n    this.nodesFetched = new rxjs__WEBPACK_IMPORTED_MODULE_2__.Subject();\n    this.root = this.root || false;\n    this.hideDevices = config.hideDevices ?? this.hideDevices;\n    this.mo = this.mo || {};\n    this.path = this.getPath();\n    this.draggable = !((_this$service = this.service) !== null && _this$service !== void 0 && (_this$service$moduleC = _this$service.moduleConfig) !== null && _this$service$moduleC !== void 0 && _this$service$moduleC.disableDragAndDrop) && !this.root;\n    this.droppable = !((_this$service2 = this.service) !== null && _this$service2 !== void 0 && (_this$service2$module = _this$service2.moduleConfig) !== null && _this$service2$module !== void 0 && _this$service2$module.disableDragAndDrop) && !this.isDeviceOrProbablyChildDevice;\n    this.routerLinkExact = this.root;\n    this.updateIcon(false);\n    this.onUpdateSubscription = this.service.onUpdate(this).subscribe(({\n      data,\n      method\n    }) => this.refresh(data, method));\n    this.setLabel();\n    this.iconComponent = this.isDeviceOrProbablyChildDevice ? _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.DeviceStatusComponent : undefined;\n  }\n  get hasChildren() {\n    return this.root || this.service.isGroup(this.mo);\n  }\n  get isDevice() {\n    return !!this.mo.c8y_IsDevice;\n  }\n  get isDeviceOrProbablyChildDevice() {\n    return this.isDevice || this.isNeitherDeviceOrGroup;\n  }\n  get isNeitherDeviceOrGroup() {\n    return !this.service.isGroup(this.mo) && !this.service.isDynamicGroup(this.mo) && !this.isDevice && !this.root;\n  }\n  getPath() {\n    if (this.config.path) {\n      return this.config.path;\n    }\n    return this.root ? 'group' : this.isDeviceOrProbablyChildDevice ? `device/${this.mo.id}` : `group/${this.mo.id}`;\n  }\n  openOnStart(url) {\n    const urlRegex = /^\\/group\\//;\n    if (this.root) {\n      if (this.service.moduleConfig.openOnStart || urlRegex.test(url)) {\n        return true;\n      }\n    }\n    const matches = url.match(/\\/(group)\\/(\\d+)/);\n    let isMatch = false;\n    if (matches) {\n      const id = matches[2];\n      isMatch = [].concat((0,lodash_es__WEBPACK_IMPORTED_MODULE_1__.get)(this.mo, 'childAssets.references', [])).some(({\n        managedObject\n      }) => managedObject.id === id);\n      return isMatch;\n    }\n    return false;\n  }\n  refresh(mo = {}, method = 'GET') {\n    if ((mo === null || mo === void 0 ? void 0 : mo.id) === this.mo.id) {\n      this.mo = mo;\n      this.setLabel();\n    } else if (method === 'DELETE') {\n      this.parents.forEach(node => node.refresh());\n      return;\n    }\n    if (this.events) {\n      this.events.next(Action.REFRESH);\n    }\n  }\n  setLabel() {\n    this.label = this.config.label || this.root && (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.gettext)('Groups') || this.mo.name || '--';\n  }\n  click(options = {}) {\n    if (this.isDeviceOrProbablyChildDevice && !this.showChildDevices) {\n      this.service.preferBreadcrumb(this.parents);\n      return;\n    }\n    this.hookEvents();\n    this.updateIcon(options.open);\n    if (options.open) {\n      this.events.next(Action.FETCH);\n    }\n  }\n  sort() {\n    this.children.sort((a, b) => {\n      if (a.priority > b.priority) {\n        return -1;\n      } else if (a.priority < b.priority) {\n        return 1;\n      } else {\n        return 0;\n      }\n    });\n  }\n  addManagedObject(mo) {\n    const {\n      childAdditions\n    } = this.mo;\n    if (!this.isChildAddition(childAdditions, mo)) {\n      this.add(this.service.createChildNode(mo, {\n        hideDevices: this.hideDevices\n      }));\n    }\n  }\n  isChildAddition(childAdditions, mo) {\n    return childAdditions && childAdditions.references.some(({\n      managedObject: {\n        id\n      }\n    }) => id === mo.id);\n  }\n  destroy() {\n    this.onUpdateSubscription.unsubscribe();\n  }\n  get canDrop() {\n    const nodeToMove = this.service.draggedData;\n    if (nodeToMove) {\n      const shouldGetChildOfItsOwn = !!nodeToMove.find(child => child === this);\n      const isAlreadyChild = this.children.some(child => child.mo && child.mo.id === nodeToMove.mo.id);\n      const preventMove = this === nodeToMove || shouldGetChildOfItsOwn || isAlreadyChild;\n      return this.droppable && !preventMove && this.service.canDropNode(this.root);\n    }\n    return this.droppable;\n  }\n  dragStart($event) {\n    super.dragStart($event);\n    this.service.draggedData = this;\n    this.service.rootNode.droppable = !this.isDeviceOrProbablyChildDevice;\n  }\n  dragEnd($event) {\n    super.dragEnd($event);\n  }\n  drop($event) {\n    var _superprop_getDrop = () => super.drop,\n      _this = this;\n    return _asyncToGenerator(function* () {\n      const nodeToMove = _this.service.draggedData;\n      // TODO remove when asset type node can be used on the root level.\n      if (_this.root && _this.isAsset(nodeToMove)) {\n        _this.service.alert.info((0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.gettext)('Asset type node cannot become root node.'));\n        _this.draggedHover = false;\n        _this.service.draggedData = undefined;\n        return;\n      }\n      _superprop_getDrop().call(_this, $event);\n      if (_this.canDrop) {\n        yield _this.moveNode(nodeToMove);\n      } else {\n        _this.draggedHover = false;\n        _this.service.draggedData = undefined;\n      }\n    })();\n  }\n  hookEvents() {\n    if (!this.events) {\n      this.events = new rxjs__WEBPACK_IMPORTED_MODULE_2__.Subject();\n      this.events.subscribe(evt => {\n        if (!this.loading) {\n          this.handleEvent(evt);\n        }\n      });\n    }\n  }\n  toString() {\n    return AssetNode.NAME;\n  }\n  /**\n   * Checks if the current node has child devices.\n   */\n  hasChildDevices() {\n    return this.mo && this.mo.c8y_IsDevice && this.mo.childDevices.references.length > 0;\n  }\n  fetch() {\n    return this.root ? this.service.getRootNodes() : this.service.getGroupItems(this.mo.id, this.hideDevices ? {\n      query: `$filter=(has(${_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.GroupFragment.groupFragmentType}))$orderby=name`\n    } : {});\n  }\n  countChildren() {\n    return this.children.length;\n  }\n  handleEvent(evt) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this2.countChildren() && evt === Action.FETCH) {\n        _this2.loading = true;\n        _this2.addNodes(yield _this2.fetch());\n        _this2.loading = false;\n      } else if (evt === Action.NEXT) {\n        _this2.loadMoreNode.loading = true;\n        _this2.addNodes(yield _this2.paging.next());\n        _this2.loadMoreNode.loading = false;\n      } else if (evt === Action.REFRESH) {\n        _this2.loading = false;\n        _this2.paging = undefined;\n        _this2.loadMoreNode = undefined;\n        _this2.empty();\n        _this2.events.next(Action.FETCH);\n      }\n    })();\n  }\n  addNodes(res) {\n    if (res.paging) {\n      const {\n        currentPage,\n        nextPage,\n        pageSize\n      } = this.paging = res.paging;\n      if (currentPage === 1) {\n        this.empty();\n      }\n      const itemsCount = res.data.length;\n      const moreItemsAvailable = !!nextPage && itemsCount === pageSize;\n      this.toggleLoadMore(moreItemsAvailable);\n    }\n    (res.data || res).map(mo => {\n      return this.addManagedObject(mo);\n    });\n    this.events.next(Action.LOADING_DONE);\n    this.nodesFetched.next();\n  }\n  toggleLoadMore(show) {\n    if (!this.loadMoreNode && show) {\n      this.loadMoreNode = new LoadMoreNode();\n      this.add(this.loadMoreNode);\n      this.loadMoreNode.click = (0,lodash_es__WEBPACK_IMPORTED_MODULE_1__.debounce)(() => this.events.next(Action.NEXT), 300, {\n        leading: true,\n        trailing: false\n      });\n    }\n    if (this.loadMoreNode) {\n      this.loadMoreNode.hidden = !show;\n    }\n  }\n  moveNode(nodeToMove) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const isCopy = yield _this3.showDropConfirm(nodeToMove);\n        yield _this3.verifyNodeAccess(nodeToMove);\n        yield _this3.addMovedNode(nodeToMove);\n        if (!isCopy) {\n          yield _this3.removeMovedNode(nodeToMove);\n        }\n        _this3.expand();\n      } catch (ex) {\n        if (ex) {\n          _this3.service.alert.addServerFailure(ex);\n        }\n      } finally {\n        _this3.draggedHover = false;\n        _this3.service.draggedData = undefined;\n      }\n    })();\n  }\n  showDropConfirm(nodeToMove) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      _this4.confirm.title = (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.gettext)('Move');\n      _this4.confirm.message = (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.gettext)('Do you want to move the group?');\n      const buttons = [{\n        label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.gettext)('Cancel'),\n        action: () => Promise.reject()\n      }, {\n        label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.gettext)('Move'),\n        status: 'default',\n        action: () => Promise.resolve(false)\n      }];\n      if (nodeToMove.isDeviceOrProbablyChildDevice) {\n        _this4.confirm.title = (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.gettext)('Move or add');\n        _this4.confirm.message = (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.gettext)('Do you want to move or add the device?');\n        buttons.push({\n          label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.gettext)('Add'),\n          status: 'primary',\n          action: () => Promise.resolve(true)\n        });\n      }\n      return _this4.confirm.show(buttons);\n    })();\n  }\n  verifyNodeAccess(nodeToMove) {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      return _this5.service.inventory.update({\n        id: nodeToMove.mo.id\n      });\n    })();\n  }\n  addMovedNode(nodeToMove) {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      let mo;\n      if (_this6.root && !_this6.isAsset(nodeToMove)) {\n        mo = (yield _this6.service.inventory.update({\n          id: nodeToMove.mo.id,\n          type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.GroupFragment.groupType\n        })).data;\n        _this6.addManagedObject(mo);\n        return;\n      }\n      mo = (yield _this6.service.inventory.childAssetsAdd(nodeToMove.mo, _this6.mo)).data;\n      _this6.addManagedObject(mo);\n    })();\n  }\n  isAsset(nodeToMove) {\n    var _nodeToMove$mo;\n    // TODO use isAsset check when https://github.softwareag.com/IOTA/cumulocity-ui/pull/690 is merged.\n    // Do not override asset type!\n    return (_nodeToMove$mo = nodeToMove.mo) === null || _nodeToMove$mo === void 0 ? void 0 : _nodeToMove$mo.c8y_IsAsset;\n  }\n  removeMovedNode(nodeToMove) {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      for (const parent of nodeToMove.parents) {\n        if (parent.mo && parent.mo.type === _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.GroupFragment.dynamicGroupType) {\n          break; // smart groups don't need to be changed\n        }\n\n        if (parent.root && !_this7.isAsset(nodeToMove)) {\n          yield _this7.service.inventory.update({\n            id: nodeToMove.mo.id,\n            type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.GroupFragment.subGroupType\n          });\n        }\n        if (!parent.root) {\n          yield _this7.service.inventory.childAssetsRemove(nodeToMove.mo, parent.mo);\n        }\n        parent.remove(nodeToMove);\n      }\n    })();\n  }\n  updateIcon(open) {\n    var _this8 = this;\n    return _asyncToGenerator(function* () {\n      _this8.icon = yield _this8.service.icon(\n      // if it's root we are going to pass a fake mo to get the same icon as groups\n      _this8.root ? {\n        c8y_IsDeviceGroup: {}\n      } : _this8.mo, open);\n    })();\n  }\n}\nAssetNode.NAME = 'AssetNode';\nclass DynamicGroupNode extends AssetNode {\n  constructor(service, config = {}) {\n    super(service, config);\n    this.service = service;\n    this.draggable = false;\n    this.droppable = false;\n  }\n  get hasChildren() {\n    return true;\n  }\n  get query() {\n    return this.mo.c8y_DeviceQueryString;\n  }\n  fetch() {\n    return this.service.getDynamicGroupItems(this.query);\n  }\n}\nconst ASSET_NAVIGATOR_CONFIG = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.InjectionToken('AssetNodeConfig');\n\n/**\n * @deprecated\n * Original service was moved to core/common.\n * This service is deprecated and serves as a proxy to maintain backward compatibility.\n */\nclass DeviceGroupService {\n  constructor(migratedDeviceGroupService) {\n    this.migratedDeviceGroupService = migratedDeviceGroupService;\n  }\n  icon(mo, open = false) {\n    return this.migratedDeviceGroupService.getIcon(mo, open);\n  }\n  isGroup(mo) {\n    return this.migratedDeviceGroupService.isGroup(mo);\n  }\n  isDynamicGroup(mo) {\n    return this.migratedDeviceGroupService.isDynamicGroup(mo);\n  }\n  isDataBroker(mo) {\n    return this.migratedDeviceGroupService.isDataBroker(mo);\n  }\n  isDataBrokerActive(mo) {\n    return this.migratedDeviceGroupService.isDataBrokerActive(mo);\n  }\n  isAsset(mo) {\n    return this.migratedDeviceGroupService.isAsset(mo);\n  }\n  isAnyGroup(mo) {\n    return this.migratedDeviceGroupService.isAnyGroup(mo);\n  }\n  isDevice(mo) {\n    return this.migratedDeviceGroupService.isDevice(mo);\n  }\n}\nDeviceGroupService.fac = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: DeviceGroupService,\n  deps: [{\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.GroupService\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"FactoryTarget\"].Injectable\n});\nDeviceGroupService.prov = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareInjectable\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: DeviceGroupService,\n  providedIn: 'root'\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: DeviceGroupService,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.GroupService\n    }];\n  }\n});\nclass AssetNodeService {\n  constructor(inventory, apiService, modal, alert, breadcrumbService, user, appState, optionsService, moduleConfig, deviceGroupService) {\n    this.inventory = inventory;\n    this.apiService = apiService;\n    this.modal = modal;\n    this.alert = alert;\n    this.breadcrumbService = breadcrumbService;\n    this.user = user;\n    this.appState = appState;\n    this.optionsService = optionsService;\n    this.moduleConfig = moduleConfig;\n    this.deviceGroupService = deviceGroupService;\n    this.firstUrl = true;\n    this.PAGE_SIZE = 20;\n    this.moduleConfig = {\n      rootNodePriority: 2000,\n      ...(moduleConfig || {})\n    };\n    this.queriesUtil = new _c8y_client__WEBPACK_IMPORTED_MODULE_4__.QueriesUtil();\n  }\n  icon(mo, open) {\n    return this.deviceGroupService.icon(mo, open);\n  }\n  isGroup(mo) {\n    return this.deviceGroupService.isGroup(mo);\n  }\n  isDynamicGroup(mo) {\n    return this.deviceGroupService.isDynamicGroup(mo);\n  }\n  isDataBroker(mo) {\n    return this.deviceGroupService.isDataBroker(mo);\n  }\n  isDataBrokerActive(mo) {\n    return this.deviceGroupService.isDataBrokerActive(mo);\n  }\n  isAsset(mo) {\n    return this.deviceGroupService.isAsset(mo);\n  }\n  isAnyGroup(mo) {\n    return this.deviceGroupService.isAnyGroup(mo);\n  }\n  isDevice(mo) {\n    return this.deviceGroupService.isDevice(mo);\n  }\n  createRootNode(config = {}) {\n    this.rootNode = this.createAssetNode({\n      root: true,\n      ...config,\n      priority: this.moduleConfig.rootNodePriority,\n      featureId: 'groups'\n    });\n    return this.rootNode;\n  }\n  createDynamicGroupNode(config) {\n    return new DynamicGroupNode(this, config);\n  }\n  createAssetNode(config) {\n    return new AssetNode(this, config);\n  }\n  createChildNode(managedObject, config) {\n    const {\n      type\n    } = managedObject;\n    config.mo = managedObject;\n    if (type === _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.GroupFragment.dynamicGroupType) {\n      return this.createDynamicGroupNode(config);\n    }\n    return this.createAssetNode(config);\n  }\n  getRootNodes(customFilter) {\n    const defaultFilter = {\n      pageSize: this.PAGE_SIZE,\n      withChildren: false,\n      onlyRoots: !this.optionsService.disableOnlyRootsQuery,\n      query: this.queriesUtil.buildQuery(this.navRootQueryFilter())\n    };\n    const groupFilter = {\n      ...defaultFilter,\n      ...customFilter\n    };\n    // due to BE performance limitations we do not allow filtering and sorting for a user without inventory roles\n    if (!this.user.hasRole(this.appState.currentUser.value, 'ROLE_INVENTORY_READ')) {\n      delete groupFilter.query;\n      Object.assign(groupFilter, {\n        fragmentType: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.GroupFragment.groupFragmentType,\n        onlyRoots: true\n      });\n    }\n    return this.inventory.list(this.createFilter(groupFilter));\n  }\n  getAllInventories(customFilter) {\n    const defaultFilter = {\n      pageSize: this.PAGE_SIZE,\n      withChildren: false\n    };\n    const groupFilter = {\n      ...defaultFilter,\n      ...customFilter\n    };\n    return this.inventory.list(this.createFilter(groupFilter));\n  }\n  getGroupItems(moId, extraFilter = {}, withChildren = false, filterQuery = '') {\n    const queryFilter = {\n      withChildren,\n      pageSize: this.PAGE_SIZE,\n      query: this.groupQueryFilter(moId, filterQuery)\n    };\n    return this.inventory.childAssetsList(moId, {\n      ...queryFilter,\n      ...extraFilter\n    });\n  }\n  getUnassignedDevices(withChildren = false, filterQuery = '') {\n    const queryFilter = {\n      fragmentType: 'c8y_IsDevice',\n      onlyRoots: true,\n      withChildren,\n      pageSize: this.PAGE_SIZE,\n      q: this.getUnassignedDevicesQueryStr(filterQuery)\n    };\n    return this.inventory.list(this.createFilter(queryFilter));\n  }\n  getDynamicGroupItems(groupQuery, filterObj = {}) {\n    const {\n      query,\n      ...queryParams\n    } = filterObj;\n    const orderByQuery = query;\n    const queryFilter = {\n      q: this.buildCombinedQuery(groupQuery, orderByQuery),\n      ...queryParams\n    };\n    return this.inventory.list(this.createFilter(queryFilter));\n  }\n  getDeviceChildren(moId, extraFilter = {}, filterQuery = '', withChildren = false) {\n    const queryFilter = {\n      withChildren,\n      pageSize: this.PAGE_SIZE,\n      query: this.groupQueryFilter(moId, filterQuery)\n    };\n    return this.inventory.childDevicesList(moId, {\n      ...queryFilter,\n      ...extraFilter\n    });\n  }\n  getUnassignedDevicesQueryStr(filterQuery) {\n    const hasGroupId = filterQuery.includes('bygroupid');\n    // Fetch all unassigned devices.\n    const defaultQueryStr = '$orderby=name';\n    // filterQuery is a custom query to fetch unassigned devices filtered by name.\n    return hasGroupId || !filterQuery ? defaultQueryStr : filterQuery;\n  }\n  groupQueryFilter(moId, filterQuery) {\n    if (!filterQuery) {\n      return `$filter=(bygroupid(${moId}))$orderby=name`;\n    }\n    return filterQuery;\n  }\n  navRootQueryFilter() {\n    const navRootFilter = this.rootQueryFilter();\n    navRootFilter.__orderby = [{\n      name: 1\n    }];\n    return navRootFilter;\n  }\n  rootQueryFilter() {\n    const {\n      moduleConfig\n    } = this;\n    const rootFilter = this.optionsService.disableOnlyRootsQuery ? {\n      __filter: {\n        type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.GroupFragment.groupType\n      },\n      __orderby: []\n    } : {\n      __filter: {\n        __has: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.GroupFragment.groupFragmentType\n      },\n      __orderby: []\n    };\n    if (moduleConfig.smartGroups) {\n      const queryFilter = {\n        __filter: {\n          __and: [{\n            type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.GroupFragment.dynamicGroupType\n          }, {\n            __has: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.GroupFragment.dynamicGroupFragment\n          }, {\n            __not: {\n              __has: `${_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.GroupFragment.dynamicGroupFragment}.invisible`\n            }\n          }]\n        }\n      };\n      this.queriesUtil.addOrFilter(rootFilter, queryFilter);\n    }\n    return rootFilter;\n  }\n  onUpdate({\n    mo,\n    root\n  }) {\n    if (mo.id) {\n      return this.apiService.hookResponse(({\n        url,\n        method\n      }) => ['PUT', 'DELETE', 'POST'].includes(method) && RegExp(`((inventory/managedObjects)|(service/smartgroup/smartgroups))/${mo.id}`).test(url)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.filter)(() => !this.draggedData), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.mergeMap)(this.apiService.resolveData), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.filter)(response => {\n        var _response$data;\n        return !(response !== null && response !== void 0 && (_response$data = response.data) !== null && _response$data !== void 0 && _response$data.c8y_Dashboard);\n      }));\n    } else if (root) {\n      return this.apiService.hookResponse(({\n        url,\n        method\n      }) => RegExp('((inventory/managedObjects)|(service/smartgroup/smartgroups))/?$').test(url) && method === 'POST').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.mergeMap)(this.apiService.resolveData), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.filter)(response => this.isNewManagedObjectRoot(response)));\n    } else {\n      return (0,rxjs__WEBPACK_IMPORTED_MODULE_2__.empty)();\n    }\n  }\n  isNewManagedObjectRoot(response = {}) {\n    const {\n      data\n    } = response;\n    let isRootAsset = false;\n    if (typeof data === 'object') {\n      isRootAsset = !!data[_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.GroupFragment.groupFragmentType];\n      if (!isRootAsset && this.moduleConfig.smartGroups) {\n        isRootAsset = !!data[_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.GroupFragment.dynamicGroupFragment];\n      }\n    }\n    return isRootAsset;\n  }\n  /**\n   * Check if it is possible to drop a node after dragging.\n   * @param dropOnRoot Is the drop performed on the root node\n   */\n  canDropNode(dropOnRoot) {\n    return !dropOnRoot || this.user.hasRole(this.appState.currentUser.value, 'ROLE_INVENTORY_ADMIN');\n  }\n  /**\n   * There could be multiple breadcrumbs for devices,\n   * so we set a preferred one on click on a device.\n   * @param parents The parent nodes of the device to select the prefered one.\n   */\n  preferBreadcrumb(parents) {\n    if (parents.length === 1) {\n      this.breadcrumbService.selectPreferredByPath(parents[0].path);\n    }\n  }\n  createFilter(extraParams = {}) {\n    const params = {\n      currentPage: 1,\n      withTotalPages: true,\n      pageSize: 10\n    };\n    return {\n      ...params,\n      ...extraParams\n    };\n  }\n  buildCombinedQuery(queryA, queryB) {\n    let combinedQuery;\n    if (queryA && queryB) {\n      const filterQuery = this.queriesUtil.buildQuery([{\n        __useFilterQueryString: queryA\n      }, {\n        __useFilterQueryString: queryB\n      }]);\n      const orberByQuery = this.queriesUtil.extractAndMergeOrderBys([queryA, queryB]);\n      combinedQuery = `${filterQuery} ${orberByQuery}`;\n    } else {\n      combinedQuery = queryA || queryB || '';\n    }\n    return combinedQuery;\n  }\n}\nAssetNodeService.fac = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetNodeService,\n  deps: [{\n    token: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n  }, {\n    token: _c8y_ngx_components_api__WEBPACK_IMPORTED_MODULE_12__.ApiService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.ModalService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.AlertService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.BreadcrumbService\n  }, {\n    token: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.UserService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.AppStateService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.OptionsService\n  }, {\n    token: ASSET_NAVIGATOR_CONFIG,\n    optional: true\n  }, {\n    token: DeviceGroupService\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"FactoryTarget\"].Injectable\n});\nAssetNodeService.prov = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareInjectable\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetNodeService,\n  providedIn: 'root'\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetNodeService,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n    }, {\n      type: _c8y_ngx_components_api__WEBPACK_IMPORTED_MODULE_12__.ApiService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.ModalService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.AlertService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.BreadcrumbService\n    }, {\n      type: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.UserService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.AppStateService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.OptionsService\n    }, {\n      type: undefined,\n      decorators: [{\n        type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Optional\n      }, {\n        type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Inject,\n        args: [ASSET_NAVIGATOR_CONFIG]\n      }]\n    }, {\n      type: DeviceGroupService\n    }];\n  }\n});\nclass AssetNodeFactory {\n  constructor(service, moduleConfig) {\n    this.service = service;\n    this.moduleConfig = moduleConfig;\n  }\n  get() {\n    const rootNavigatorNode = (0,lodash_es__WEBPACK_IMPORTED_MODULE_1__.get)(this.moduleConfig, 'rootNavigatorNode') ?? true;\n    let {\n      rootNode\n    } = this.service;\n    if (rootNavigatorNode === false) {\n      return;\n    }\n    if (!rootNode) {\n      rootNode = this.service.createRootNode(rootNavigatorNode === true ? {} : rootNavigatorNode);\n    }\n    return rootNode;\n  }\n}\nAssetNodeFactory.fac = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetNodeFactory,\n  deps: [{\n    token: AssetNodeService\n  }, {\n    token: ASSET_NAVIGATOR_CONFIG,\n    optional: true\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"FactoryTarget\"].Injectable\n});\nAssetNodeFactory.prov = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareInjectable\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetNodeFactory\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetNodeFactory,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Injectable\n  }],\n  ctorParameters: function () {\n    return [{\n      type: AssetNodeService\n    }, {\n      type: undefined,\n      decorators: [{\n        type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Optional\n      }, {\n        type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Inject,\n        args: [ASSET_NAVIGATOR_CONFIG]\n      }]\n    }];\n  }\n});\nclass GroupNode extends AssetNode {\n  /**\n   * Creates a new node which shows only groups.\n   *\n   * @param service The service to use.\n   * @param config  The default configuration of the node.\n   * @param groupsOnly Set this true, if only groups should be shown.\n   * @param selectable Set this true, if it is selectable.\n   */\n  constructor(service, config = {}) {\n    super(service, config);\n    this.service = service;\n    /**\n     * Set this true, if only groups should be shown.\n     */\n    this.groupsOnly = false;\n    /**\n     * Set this true, if it groups are also selectable.\n     */\n    this.groupsSelectable = false;\n    /**\n     * Devices with children can be selected to show their child devices.\n     */\n    this.showChildDevices = false;\n    /**\n     * Group node children (subentries).\n     */\n    this.children = [];\n    this.groupsOnly = config.groupsOnly || false;\n    this.groupsSelectable = config.groupsSelectable || false;\n    this.showChildDevices = config.showChildDevices || false;\n  }\n  /**\n   * Adds the MO as a child node.\n   * @param mo ManagedObject\n   */\n  addManagedObject(mo) {\n    const {\n      childAdditions\n    } = this.mo;\n    if (!this.isChildAddition(childAdditions, mo)) {\n      this.add(this.service.createChildNode({\n        mo,\n        groupsOnly: this.groupsOnly,\n        groupsSelectable: this.groupsSelectable,\n        showChildDevices: this.showChildDevices\n      }));\n    }\n  }\n  /**\n   * Counts the number of children for the current node (with the exception of the UnassignedDevicesNode).\n   */\n  countChildren() {\n    return this.children.filter(value => value.toString() !== 'UnassignedDevicesNode').length;\n  }\n  /**\n   * Removes all child nodes except the UnassignedDevicesNode.\n   */\n  empty() {\n    this.children = this.children.filter(value => value.toString() === 'UnassignedDevicesNode');\n  }\n  fetch() {\n    const isRoot = this.root;\n    const isDevice = this.mo.c8y_IsDevice;\n    return isRoot ? this.service.getRootNodes() : isDevice ? this.service.getDeviceChildren(this.mo.id, {}, this.filterQuery$.value, this.showChildDevices) : this.service.getGroupItems(this.mo.id, this.groupsOnly ? {\n      query: `$filter=(has(${_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.GroupFragment.groupFragmentType}))`\n    } : {}, this.showChildDevices, this.filterQuery$.value);\n  }\n  toString() {\n    return GroupNode.NAME;\n  }\n  isGroup() {\n    return this.mo && this.service.isGroup(this.mo);\n  }\n}\nGroupNode.NAME = 'GroupNode';\nclass GroupNodeService extends AssetNodeService {\n  constructor() {\n    super(...arguments);\n    this.PAGE_SIZE = 5;\n  }\n  createGroupNode(config) {\n    return new GroupNode(this, config);\n  }\n  createChildNode(config) {\n    return this.createGroupNode(config);\n  }\n}\nGroupNodeService.fac = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: GroupNodeService,\n  deps: null,\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"FactoryTarget\"].Injectable\n});\nGroupNodeService.prov = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareInjectable\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: GroupNodeService,\n  providedIn: 'root'\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: GroupNodeService,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }]\n});\nclass AssetSelectorService extends AssetNodeService {\n  /**\n   * Simplifies the object model based on the selected mode.\n   * @param obj The selected asset.\n   * @param mode The mode which will decide what type of model will be returned.\n   */\n  normalizeValue(obj, modelMode) {\n    return this.simplifyModel(this.normalizeModelValue(obj), modelMode);\n  }\n  simplifyModel(model, mode) {\n    const mapModel = model => {\n      const {\n        id,\n        name,\n        c8y_DeviceQueryString\n      } = model;\n      return {\n        id,\n        name,\n        ...(c8y_DeviceQueryString ? {\n          c8y_DeviceQueryString\n        } : {})\n      };\n    };\n    if (mode === 'full') {\n      return model;\n    }\n    if (!(0,lodash__WEBPACK_IMPORTED_MODULE_9__.isArray)(model)) {\n      return mapModel(model);\n    }\n    return model.map(mapModel);\n  }\n  /**\n   * Returns the index of the currently selected item.\n   * @param selected All selected items\n   * @param selectedMo The new selected item-\n   * @returns An index, or -1 if not found.\n   */\n  getIndexOfSelected(selected, selectedMo) {\n    return selected.findIndex(mo => mo.id === selectedMo.id);\n  }\n  normalizeModelValue(value) {\n    if ((0,lodash__WEBPACK_IMPORTED_MODULE_9__.isNumber)(value) || (0,lodash__WEBPACK_IMPORTED_MODULE_9__.isString)(value)) {\n      return [{\n        id: value\n      }];\n    }\n    if ((0,lodash__WEBPACK_IMPORTED_MODULE_9__.isArray)(value)) {\n      return value;\n    }\n    if ((0,lodash__WEBPACK_IMPORTED_MODULE_9__.isObject)(value)) {\n      return [value];\n    }\n    return [];\n  }\n}\nAssetSelectorService.fac = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetSelectorService,\n  deps: null,\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"FactoryTarget\"].Injectable\n});\nAssetSelectorService.prov = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareInjectable\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetSelectorService,\n  providedIn: 'root'\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetSelectorService,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }]\n});\nclass AssetSelectorNodeComponent {\n  /**\n   * @ignore only di\n   */\n  constructor(translateService, cd, assetSelectorService) {\n    this.translateService = translateService;\n    this.cd = cd;\n    this.assetSelectorService = assetSelectorService;\n    /**\n     * All preselected items.\n     */\n    this.preselected = [];\n    /**\n     * Should the path be shown.\n     */\n    this.showPath = false;\n    /**\n     * Can the user select multiple assets.\n     */\n    this.multi = false;\n    /**\n     * The current path to the node.\n     */\n    this.view = 'tree';\n    /**\n     * All currently selected assets.\n     */\n    this.selectedItems = [];\n    /**\n     * Event, which indicates whether the loading of the node has completed.\n     */\n    this.isLoadingState = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();\n    /**\n     * Event that emits when a node is selected.\n     */\n    this.onSelect = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();\n    /**\n     * Event that emits when a node is deselected.\n     */\n    this.onDeselect = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();\n    /**\n     * @ignore\n     */\n    this.level = 0;\n    /**\n     * @ignore\n     */\n    this.unsubscribe$ = new rxjs__WEBPACK_IMPORTED_MODULE_2__.Subject();\n    /** sets the `btn-pending` class in the load more button */\n    this.isLoading = false;\n  }\n  /**\n   * @ignore\n   */\n  get expandTitle() {\n    return !this.node.open ? (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.gettext)('Expand') : (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.gettext)('Collapse');\n  }\n  /**\n   * @ignore\n   */\n  ngOnInit() {\n    var _this9 = this;\n    return _asyncToGenerator(function* () {\n      _this9.breadcrumb = _this9.node.label;\n      _this9.setupBreadcrumbsAndLevel(_this9.node);\n      if (_this9.node instanceof GroupNode) {\n        _this9.node.hookEvents();\n      }\n      // open on startup\n      if (_this9.node.root) {\n        _this9.click();\n      }\n      // used for loading and to trigger change detection when the node is no longer loading.\n      if (_this9.node.events) {\n        _this9.node.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.takeUntil)(_this9.unsubscribe$), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.filter)(a => a === Action.LOADING_DONE)).subscribe(() => {\n          _this9.isLoadingState.emit(false);\n          _this9.cd.markForCheck();\n        });\n      }\n    })();\n  }\n  /**\n   * Opens a node.\n   */\n  click() {\n    this.node.open = !this.node.open;\n    this.node.click({\n      open: this.node.open\n    });\n  }\n  setupBreadcrumbsAndLevel(node) {\n    if (node.parents && node.parents.length) {\n      const parent = node.parents[0];\n      this.breadcrumb = this.translateService.instant(parent.label) + ' > ' + this.translateService.instant(this.breadcrumb);\n      this.level++;\n      this.setupBreadcrumbsAndLevel(parent);\n    }\n  }\n  /**\n   * Selects the node and emits a change on the parent component.\n   * @param node The node to select.\n   */\n  selected(node) {\n    if (node.mo) {\n      this.updateSelection(node.mo);\n      return;\n    }\n    this.click();\n  }\n  /**\n   * Handles clicks on a item in Miller View.\n   * @param node The node that was clicked.\n   */\n  millerViewClick(node) {\n    node.breadcrumb = this.breadcrumb;\n    if (!this.handleNextMillerViewColumn) {\n      return;\n    }\n    const shouldHandleDefault = this.handleNextMillerViewColumn(node, this.index);\n    if (shouldHandleDefault) {\n      this.selected(node);\n    }\n  }\n  /**\n   * @ignore\n   */\n  ngOnDestroy() {\n    this.unsubscribe$.next(true);\n    this.unsubscribe$.complete();\n  }\n  isSelected() {\n    if (!this.node.mo) {\n      return false;\n    }\n    return this.assetSelectorService.getIndexOfSelected(this.preselected, this.node.mo) > -1;\n  }\n  isActive() {\n    if (this.active && this.node.mo) {\n      var _this$active$mo;\n      return ((_this$active$mo = this.active.mo) === null || _this$active$mo === void 0 ? void 0 : _this$active$mo.id) === this.node.mo.id;\n    }\n    return false;\n  }\n  isGroupSelected() {\n    if (this.selectedItems.some(selectedNode => {\n      var _this$node$mo;\n      return selectedNode.id === ((_this$node$mo = this.node.mo) === null || _this$node$mo === void 0 ? void 0 : _this$node$mo.id);\n    })) {\n      return true;\n    }\n    return false;\n  }\n  updateSelection(selectedMo) {\n    if (!this.multi) {\n      this.onDeselect.emit({\n        deselectMode: 'all',\n        mo: selectedMo\n      });\n      return;\n    }\n    if (this.isSelected()) {\n      this.onDeselect.emit({\n        deselectMode: 'single',\n        mo: selectedMo\n      });\n      return;\n    }\n    this.onSelect.emit(selectedMo);\n    this.cd.markForCheck();\n  }\n}\nAssetSelectorNodeComponent.fac = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetSelectorNodeComponent,\n  deps: [{\n    token: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_8__.TranslateService\n  }, {\n    token: _angular_core__WEBPACK_IMPORTED_MODULE_3__.ChangeDetectorRef\n  }, {\n    token: AssetSelectorService\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"FactoryTarget\"].Component\n});\nAssetSelectorNodeComponent.cmp = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareComponent\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  type: AssetSelectorNodeComponent,\n  selector: \"c8y-asset-selector-node\",\n  inputs: {\n    node: \"node\",\n    rootNode: \"rootNode\",\n    preselected: \"preselected\",\n    showPath: \"showPath\",\n    multi: \"multi\",\n    view: \"view\",\n    index: \"index\",\n    active: \"active\",\n    selectedItems: \"selectedItems\",\n    handleNextMillerViewColumn: \"handleNextMillerViewColumn\"\n  },\n  outputs: {\n    isLoadingState: \"isLoadingState\",\n    onSelect: \"onSelect\",\n    onDeselect: \"onDeselect\"\n  },\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  template: \"<!-- Hierarchy tree -->\\n<div\\n  *ngIf=\\\"view === 'tree'\\\"\\n  class=\\\"c8y-asset-selector__item\\\"\\n  [attr.role]=\\\"view === 'tree' ? 'tree' : 'list'\\\"\\n  [ngClass]=\\\"{\\n    'c8y-asset-selector__item--more': node?.icon === 'plus',\\n    'c8y-asset-selector__item--start': level === 0\\n  }\\\"\\n  [ngStyle]=\\\"{\\n    'margin-left': level > 1 ? 16 + 'px' : '0'\\n  }\\\"\\n>\\n  <div\\n    *ngIf=\\\"node && !node.root && !node.hidden\\\"\\n    class=\\\"c8y-asset-selector__node\\\"\\n    [attr.role]=\\\"view === 'tree' ? 'treeitem' : 'listitem'\\\"\\n    [ngClass]=\\\"{ 'c8y-asset-selector__node--open': node?.open }\\\"\\n    title=\\\"{{ breadcrumb | translate }}\\\"\\n  >\\n    <div class=\\\"d-flex a-i-center p-t-4 p-b-4 m-r-8\\\" *ngIf=\\\"node.toString() !== 'LoadMoreNode'\\\">\\n      <label [ngClass]=\\\"{ 'c8y-checkbox': multi, 'c8y-radio': !multi }\\\">\\n        <input\\n          id=\\\"nodeLabel\\\"\\n          [type]=\\\"multi ? 'checkbox' : 'radio'\\\"\\n          (change)=\\\"selected(node)\\\"\\n          [checked]=\\\"isSelected()\\\"\\n          [disabled]=\\\"!node.groupsSelectable && node.isGroup()\\\"\\n        />\\n        <span></span>\\n        <span for=\\\"nodeLabel\\\" class=\\\"sr-only\\\" translate>Node label</span>\\n      </label>\\n    </div>\\n\\n    <!-- group button -->\\n    <button\\n      *ngIf=\\\"node.isGroup() || node.hasChildDevices()\\\"\\n      class=\\\"c8y-asset-selector__btn text-truncate\\\"\\n      (click)=\\\"click()\\\"\\n      [attr.aria-expanded]=\\\"!node.open\\\"\\n    >\\n      <i\\n        [c8yIcon]=\\\"node.icon\\\"\\n        *ngIf=\\\"node.icon === 'c8y-group-smart'\\\"\\n        [title]=\\\"'Smart group' | translate\\\"\\n        class=\\\"c8y-icon c8y-icon-duocolor m-r-4 text-16\\\"\\n      ></i>\\n      <i\\n        [c8yIcon]=\\\"node.icon\\\"\\n        *ngIf=\\\"node.icon !== 'c8y-group-smart'\\\"\\n        [title]=\\\"'Group' | translate\\\"\\n        class=\\\"c8y-icon c8y-icon-duocolor m-r-4 text-16\\\"\\n      ></i>\\n      <span title=\\\"{{ breadcrumb }}\\\">\\n        {{ node.label | translate }}\\n        <!-- use just for search results to display the path -->\\n        <p *ngIf=\\\"showPath\\\" class=\\\"text-truncate\\\">\\n          <small class=\\\"text-muted\\\" title=\\\"{{ breadcrumb }}\\\">\\n            <em>{{ breadcrumb }}</em>\\n          </small>\\n        </p>\\n        <!-- up to here -->\\n      </span>\\n    </button>\\n    <!-- not a group button -->\\n    <button\\n      *ngIf=\\\"!node.isGroup() && !node.hasChildDevices()\\\"\\n      class=\\\"flex-grow\\\"\\n      [ngClass]=\\\"{\\n        'btn btn-default btn-sm m-b-8 d-flex j-c-center': node.icon === 'plus',\\n        'c8y-asset-selector__btn text-truncate': node.icon != 'plus'\\n      }\\\"\\n      (click)=\\\"selected(node)\\\"\\n      type=\\\"button\\\"\\n      title=\\\"{{ breadcrumb }}\\\"\\n    >\\n      <i\\n        [c8yIcon]=\\\"node.icon\\\"\\n        *ngIf=\\\"node.icon === 'c8y-group-smart'\\\"\\n        [title]=\\\"'Smart group' | translate\\\"\\n        class=\\\"c8y-icon c8y-icon-duocolor m-r-4 text-16\\\"\\n      ></i>\\n      <i\\n        [c8yIcon]=\\\"node.icon\\\"\\n        *ngIf=\\\"node.icon !== 'c8y-group-smart'\\\"\\n        [title]=\\\"'Group' | translate\\\"\\n        [ngClass]=\\\"{ 'c8y-icon-duocolor text-16 ': node.icon != 'plus' }\\\"\\n        class=\\\"c8y-icon m-r-4\\\"\\n      ></i>\\n      <span title=\\\"{{ breadcrumb }}\\\">\\n        {{ node.label | translate }}\\n        <!-- use just for search results to display the path -->\\n        <p *ngIf=\\\"showPath\\\" class=\\\"text-truncate text-muted small\\\">\\n          <em>{{ breadcrumb }}</em>\\n        </p>\\n        <!-- up to here -->\\n      </span>\\n    </button>\\n    <!-- expand button (only for groups) -->\\n    <div *ngIf=\\\"node.isGroup() || node.hasChildDevices()\\\">\\n      <button\\n        [title]=\\\"expandTitle\\\"\\n        class=\\\"collapse-btn btn\\\"\\n        (click)=\\\"click()\\\"\\n        [attr.aria-expanded]=\\\"node.open\\\"\\n      >\\n        <i c8yIcon=\\\"angle-down\\\"></i>\\n      </button>\\n    </div>\\n  </div>\\n  <div\\n    *ngIf=\\\"node.countChildren()\\\"\\n    class=\\\"collapse\\\"\\n    [collapse]=\\\"!node.open\\\"\\n    [isAnimated]=\\\"true\\\"\\n    [attr.role]=\\\"'group'\\\"\\n  >\\n    <c8y-asset-selector-node\\n      *ngFor=\\\"let childNode of node.children\\\"\\n      [node]=\\\"childNode\\\"\\n      [preselected]=\\\"preselected || []\\\"\\n      [multi]=\\\"multi\\\"\\n      [active]=\\\"active\\\"\\n      [attr.role]=\\\"view === 'tree' ? 'treeitem' : 'listitem'\\\"\\n      (onSelect)=\\\"onSelect.emit($event)\\\"\\n      (onDeselect)=\\\"onDeselect.emit($event)\\\"\\n    ></c8y-asset-selector-node>\\n  </div>\\n</div>\\n\\n<!-- Miller columns -->\\n<div *ngIf=\\\"view === 'miller'\\\">\\n  <div\\n    *ngIf=\\\"node && !node.root && !node.hidden && node !== rootNode\\\"\\n    class=\\\"miller-column__item bg-inherit\\\"\\n    [ngClass]=\\\"{\\n      active: isActive(),\\n      'miller-column__item--more': node.toString() === 'LoadMoreNode'\\n    }\\\"\\n    title=\\\"{{ breadcrumb | translate }}\\\"\\n  >\\n    <div\\n      class=\\\"m-l-4 m-r-4 miller-column__item__checkbox\\\"\\n      *ngIf=\\\"node.toString() !== 'LoadMoreNode'\\\"\\n    >\\n      <label [ngClass]=\\\"{ 'c8y-radio': !multi, 'c8y-checkbox': multi }\\\">\\n        <input\\n          id=\\\"nodeLabel2\\\"\\n          [type]=\\\"multi ? 'checkbox' : 'radio'\\\"\\n          (change)=\\\"selected(node)\\\"\\n          [checked]=\\\"isGroupSelected()\\\"\\n          [disabled]=\\\"!node.groupsSelectable && node.isGroup()\\\"\\n        />\\n        <span></span>\\n        <span for=\\\"nodeLabel2\\\" class=\\\"sr-only\\\" translate>Node label</span>\\n      </label>\\n    </div>\\n\\n    <button\\n      [ngClass]=\\\"{\\n        'btn btn-default btn-sm d-flex flex-grow j-c-center m-l-16 m-r-16 m-b-8':\\n          node.toString() === 'LoadMoreNode',\\n        'miller-column__item__btn': node.toString() !== 'LoadMoreNode',\\n        'btn-pending': node.loading && node.toString() === 'LoadMoreNode'\\n      }\\\"\\n      title=\\\"{{ breadcrumb | translate }}\\\"\\n      (click)=\\\"millerViewClick(node)\\\"\\n      type=\\\"button\\\"\\n    >\\n      <i\\n        [c8yIcon]=\\\"node.icon\\\"\\n        class=\\\"c8y-icon m-r-4\\\"\\n        [ngClass]=\\\"{ 'c8y-icon-duocolor text-16': node.toString() !== 'LoadMoreNode' }\\\"\\n      ></i>\\n      <div class=\\\"text-left text-truncate\\\">\\n        <p title=\\\"{{ node.label | translate }}\\\" class=\\\"text-truncate\\\">\\n          {{ node.label | translate }}\\n        </p>\\n        <!-- use just for search results to display the path -->\\n        <small *ngIf=\\\"showPath\\\" class=\\\"text-muted text-truncate\\\" title=\\\"{{ breadcrumb }}\\\">\\n          <em>{{ breadcrumb }}</em>\\n        </small>\\n        <!-- up to here -->\\n      </div>\\n      <span *ngIf=\\\"node.isGroup() || node.hasChildDevices()\\\" class=\\\"p-l-4 m-l-auto\\\">\\n        <i c8yIcon=\\\"angle-right\\\"></i>\\n      </span>\\n    </button>\\n  </div>\\n\\n  <div *ngIf=\\\"node\\\" [ngClass]=\\\"{ hidden: node !== rootNode }\\\" role=\\\"list\\\">\\n    <c8y-asset-selector-node\\n      *ngFor=\\\"let childNode of node.children\\\"\\n      [node]=\\\"childNode\\\"\\n      [rootNode]=\\\"rootNode\\\"\\n      [preselected]=\\\"preselected || []\\\"\\n      [multi]=\\\"multi\\\"\\n      [view]=\\\"view\\\"\\n      [index]=\\\"index\\\"\\n      [selectedItems]=\\\"selectedItems\\\"\\n      [active]=\\\"active\\\"\\n      [handleNextMillerViewColumn]=\\\"handleNextMillerViewColumn\\\"\\n      (onSelect)=\\\"onSelect.emit($event)\\\"\\n      (onDeselect)=\\\"onDeselect.emit($event)\\\"\\n      role=\\\"listitem\\\"\\n    ></c8y-asset-selector-node>\\n  </div>\\n</div>\\n\",\n  dependencies: [{\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.IconDirective,\n    selector: \"[c8yIcon]\",\n    inputs: [\"c8yIcon\"]\n  }, {\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.C8yTranslateDirective,\n    selector: \"[translate],[ngx-translate]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgClass,\n    selector: \"[ngClass]\",\n    inputs: [\"class\", \"ngClass\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgForOf,\n    selector: \"[ngFor][ngForOf]\",\n    inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgIf,\n    selector: \"[ngIf]\",\n    inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgStyle,\n    selector: \"[ngStyle]\",\n    inputs: [\"ngStyle\"]\n  }, {\n    kind: \"directive\",\n    type: ngx_bootstrap_collapse__WEBPACK_IMPORTED_MODULE_6__.CollapseDirective,\n    selector: \"[collapse]\",\n    inputs: [\"display\", \"isAnimated\", \"collapse\"],\n    outputs: [\"collapsed\", \"collapses\", \"expanded\", \"expands\"],\n    exportAs: [\"bs-collapse\"]\n  }, {\n    kind: \"component\",\n    type: AssetSelectorNodeComponent,\n    selector: \"c8y-asset-selector-node\",\n    inputs: [\"node\", \"rootNode\", \"preselected\", \"showPath\", \"multi\", \"view\", \"index\", \"active\", \"selectedItems\", \"handleNextMillerViewColumn\"],\n    outputs: [\"isLoadingState\", \"onSelect\", \"onDeselect\"]\n  }, {\n    kind: \"pipe\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.C8yTranslatePipe,\n    name: \"translate\"\n  }]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetSelectorNodeComponent,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Component,\n    args: [{\n      selector: 'c8y-asset-selector-node',\n      template: \"<!-- Hierarchy tree -->\\n<div\\n  *ngIf=\\\"view === 'tree'\\\"\\n  class=\\\"c8y-asset-selector__item\\\"\\n  [attr.role]=\\\"view === 'tree' ? 'tree' : 'list'\\\"\\n  [ngClass]=\\\"{\\n    'c8y-asset-selector__item--more': node?.icon === 'plus',\\n    'c8y-asset-selector__item--start': level === 0\\n  }\\\"\\n  [ngStyle]=\\\"{\\n    'margin-left': level > 1 ? 16 + 'px' : '0'\\n  }\\\"\\n>\\n  <div\\n    *ngIf=\\\"node && !node.root && !node.hidden\\\"\\n    class=\\\"c8y-asset-selector__node\\\"\\n    [attr.role]=\\\"view === 'tree' ? 'treeitem' : 'listitem'\\\"\\n    [ngClass]=\\\"{ 'c8y-asset-selector__node--open': node?.open }\\\"\\n    title=\\\"{{ breadcrumb | translate }}\\\"\\n  >\\n    <div class=\\\"d-flex a-i-center p-t-4 p-b-4 m-r-8\\\" *ngIf=\\\"node.toString() !== 'LoadMoreNode'\\\">\\n      <label [ngClass]=\\\"{ 'c8y-checkbox': multi, 'c8y-radio': !multi }\\\">\\n        <input\\n          id=\\\"nodeLabel\\\"\\n          [type]=\\\"multi ? 'checkbox' : 'radio'\\\"\\n          (change)=\\\"selected(node)\\\"\\n          [checked]=\\\"isSelected()\\\"\\n          [disabled]=\\\"!node.groupsSelectable && node.isGroup()\\\"\\n        />\\n        <span></span>\\n        <span for=\\\"nodeLabel\\\" class=\\\"sr-only\\\" translate>Node label</span>\\n      </label>\\n    </div>\\n\\n    <!-- group button -->\\n    <button\\n      *ngIf=\\\"node.isGroup() || node.hasChildDevices()\\\"\\n      class=\\\"c8y-asset-selector__btn text-truncate\\\"\\n      (click)=\\\"click()\\\"\\n      [attr.aria-expanded]=\\\"!node.open\\\"\\n    >\\n      <i\\n        [c8yIcon]=\\\"node.icon\\\"\\n        *ngIf=\\\"node.icon === 'c8y-group-smart'\\\"\\n        [title]=\\\"'Smart group' | translate\\\"\\n        class=\\\"c8y-icon c8y-icon-duocolor m-r-4 text-16\\\"\\n      ></i>\\n      <i\\n        [c8yIcon]=\\\"node.icon\\\"\\n        *ngIf=\\\"node.icon !== 'c8y-group-smart'\\\"\\n        [title]=\\\"'Group' | translate\\\"\\n        class=\\\"c8y-icon c8y-icon-duocolor m-r-4 text-16\\\"\\n      ></i>\\n      <span title=\\\"{{ breadcrumb }}\\\">\\n        {{ node.label | translate }}\\n        <!-- use just for search results to display the path -->\\n        <p *ngIf=\\\"showPath\\\" class=\\\"text-truncate\\\">\\n          <small class=\\\"text-muted\\\" title=\\\"{{ breadcrumb }}\\\">\\n            <em>{{ breadcrumb }}</em>\\n          </small>\\n        </p>\\n        <!-- up to here -->\\n      </span>\\n    </button>\\n    <!-- not a group button -->\\n    <button\\n      *ngIf=\\\"!node.isGroup() && !node.hasChildDevices()\\\"\\n      class=\\\"flex-grow\\\"\\n      [ngClass]=\\\"{\\n        'btn btn-default btn-sm m-b-8 d-flex j-c-center': node.icon === 'plus',\\n        'c8y-asset-selector__btn text-truncate': node.icon != 'plus'\\n      }\\\"\\n      (click)=\\\"selected(node)\\\"\\n      type=\\\"button\\\"\\n      title=\\\"{{ breadcrumb }}\\\"\\n    >\\n      <i\\n        [c8yIcon]=\\\"node.icon\\\"\\n        *ngIf=\\\"node.icon === 'c8y-group-smart'\\\"\\n        [title]=\\\"'Smart group' | translate\\\"\\n        class=\\\"c8y-icon c8y-icon-duocolor m-r-4 text-16\\\"\\n      ></i>\\n      <i\\n        [c8yIcon]=\\\"node.icon\\\"\\n        *ngIf=\\\"node.icon !== 'c8y-group-smart'\\\"\\n        [title]=\\\"'Group' | translate\\\"\\n        [ngClass]=\\\"{ 'c8y-icon-duocolor text-16 ': node.icon != 'plus' }\\\"\\n        class=\\\"c8y-icon m-r-4\\\"\\n      ></i>\\n      <span title=\\\"{{ breadcrumb }}\\\">\\n        {{ node.label | translate }}\\n        <!-- use just for search results to display the path -->\\n        <p *ngIf=\\\"showPath\\\" class=\\\"text-truncate text-muted small\\\">\\n          <em>{{ breadcrumb }}</em>\\n        </p>\\n        <!-- up to here -->\\n      </span>\\n    </button>\\n    <!-- expand button (only for groups) -->\\n    <div *ngIf=\\\"node.isGroup() || node.hasChildDevices()\\\">\\n      <button\\n        [title]=\\\"expandTitle\\\"\\n        class=\\\"collapse-btn btn\\\"\\n        (click)=\\\"click()\\\"\\n        [attr.aria-expanded]=\\\"node.open\\\"\\n      >\\n        <i c8yIcon=\\\"angle-down\\\"></i>\\n      </button>\\n    </div>\\n  </div>\\n  <div\\n    *ngIf=\\\"node.countChildren()\\\"\\n    class=\\\"collapse\\\"\\n    [collapse]=\\\"!node.open\\\"\\n    [isAnimated]=\\\"true\\\"\\n    [attr.role]=\\\"'group'\\\"\\n  >\\n    <c8y-asset-selector-node\\n      *ngFor=\\\"let childNode of node.children\\\"\\n      [node]=\\\"childNode\\\"\\n      [preselected]=\\\"preselected || []\\\"\\n      [multi]=\\\"multi\\\"\\n      [active]=\\\"active\\\"\\n      [attr.role]=\\\"view === 'tree' ? 'treeitem' : 'listitem'\\\"\\n      (onSelect)=\\\"onSelect.emit($event)\\\"\\n      (onDeselect)=\\\"onDeselect.emit($event)\\\"\\n    ></c8y-asset-selector-node>\\n  </div>\\n</div>\\n\\n<!-- Miller columns -->\\n<div *ngIf=\\\"view === 'miller'\\\">\\n  <div\\n    *ngIf=\\\"node && !node.root && !node.hidden && node !== rootNode\\\"\\n    class=\\\"miller-column__item bg-inherit\\\"\\n    [ngClass]=\\\"{\\n      active: isActive(),\\n      'miller-column__item--more': node.toString() === 'LoadMoreNode'\\n    }\\\"\\n    title=\\\"{{ breadcrumb | translate }}\\\"\\n  >\\n    <div\\n      class=\\\"m-l-4 m-r-4 miller-column__item__checkbox\\\"\\n      *ngIf=\\\"node.toString() !== 'LoadMoreNode'\\\"\\n    >\\n      <label [ngClass]=\\\"{ 'c8y-radio': !multi, 'c8y-checkbox': multi }\\\">\\n        <input\\n          id=\\\"nodeLabel2\\\"\\n          [type]=\\\"multi ? 'checkbox' : 'radio'\\\"\\n          (change)=\\\"selected(node)\\\"\\n          [checked]=\\\"isGroupSelected()\\\"\\n          [disabled]=\\\"!node.groupsSelectable && node.isGroup()\\\"\\n        />\\n        <span></span>\\n        <span for=\\\"nodeLabel2\\\" class=\\\"sr-only\\\" translate>Node label</span>\\n      </label>\\n    </div>\\n\\n    <button\\n      [ngClass]=\\\"{\\n        'btn btn-default btn-sm d-flex flex-grow j-c-center m-l-16 m-r-16 m-b-8':\\n          node.toString() === 'LoadMoreNode',\\n        'miller-column__item__btn': node.toString() !== 'LoadMoreNode',\\n        'btn-pending': node.loading && node.toString() === 'LoadMoreNode'\\n      }\\\"\\n      title=\\\"{{ breadcrumb | translate }}\\\"\\n      (click)=\\\"millerViewClick(node)\\\"\\n      type=\\\"button\\\"\\n    >\\n      <i\\n        [c8yIcon]=\\\"node.icon\\\"\\n        class=\\\"c8y-icon m-r-4\\\"\\n        [ngClass]=\\\"{ 'c8y-icon-duocolor text-16': node.toString() !== 'LoadMoreNode' }\\\"\\n      ></i>\\n      <div class=\\\"text-left text-truncate\\\">\\n        <p title=\\\"{{ node.label | translate }}\\\" class=\\\"text-truncate\\\">\\n          {{ node.label | translate }}\\n        </p>\\n        <!-- use just for search results to display the path -->\\n        <small *ngIf=\\\"showPath\\\" class=\\\"text-muted text-truncate\\\" title=\\\"{{ breadcrumb }}\\\">\\n          <em>{{ breadcrumb }}</em>\\n        </small>\\n        <!-- up to here -->\\n      </div>\\n      <span *ngIf=\\\"node.isGroup() || node.hasChildDevices()\\\" class=\\\"p-l-4 m-l-auto\\\">\\n        <i c8yIcon=\\\"angle-right\\\"></i>\\n      </span>\\n    </button>\\n  </div>\\n\\n  <div *ngIf=\\\"node\\\" [ngClass]=\\\"{ hidden: node !== rootNode }\\\" role=\\\"list\\\">\\n    <c8y-asset-selector-node\\n      *ngFor=\\\"let childNode of node.children\\\"\\n      [node]=\\\"childNode\\\"\\n      [rootNode]=\\\"rootNode\\\"\\n      [preselected]=\\\"preselected || []\\\"\\n      [multi]=\\\"multi\\\"\\n      [view]=\\\"view\\\"\\n      [index]=\\\"index\\\"\\n      [selectedItems]=\\\"selectedItems\\\"\\n      [active]=\\\"active\\\"\\n      [handleNextMillerViewColumn]=\\\"handleNextMillerViewColumn\\\"\\n      (onSelect)=\\\"onSelect.emit($event)\\\"\\n      (onDeselect)=\\\"onDeselect.emit($event)\\\"\\n      role=\\\"listitem\\\"\\n    ></c8y-asset-selector-node>\\n  </div>\\n</div>\\n\"\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_8__.TranslateService\n    }, {\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.ChangeDetectorRef\n    }, {\n      type: AssetSelectorService\n    }];\n  },\n  propDecorators: {\n    node: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    rootNode: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    preselected: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    showPath: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    multi: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    view: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    index: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    active: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    selectedItems: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    handleNextMillerViewColumn: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    isLoadingState: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Output\n    }],\n    onSelect: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Output\n    }],\n    onDeselect: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Output\n    }]\n  }\n});\nconst CONFIG_OPTIONS_DEFAULT = {\n  label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.gettext)('Asset selection'),\n  multi: false,\n  showFilter: false,\n  columnHeaders: false,\n  singleColumn: false,\n  modelMode: 'simple',\n  groupsOnly: false,\n  groupsSelectable: false,\n  search: false,\n  showUnassignedDevices: false,\n  view: 'tree',\n  showChildDevices: false\n};\nclass UnassignedDevicesNode extends GroupNode {\n  constructor(service, config = {}) {\n    super(service, config);\n    this.service = service;\n    this.label = (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.gettext)('Unassigned devices');\n    this.icon = 'delete-folder';\n    this.groupsSelectable = false;\n    this.groupsOnly = false;\n    this.showChildDevices = false;\n    this.mo = {};\n    this.priority = Infinity;\n    this.showChildDevices = config.showChildDevices || false;\n  }\n  click(options = {}) {\n    this.hookEvents();\n    if (options.open) {\n      this.events.next(Action.FETCH);\n    }\n  }\n  addManagedObject(mo) {\n    this.add(this.service.createChildNode({\n      mo,\n      showChildDevices: this.showChildDevices\n    }));\n  }\n  fetch() {\n    return this.service.getUnassignedDevices(this.showChildDevices, this.filterQuery$.value);\n  }\n  isGroup() {\n    return true;\n  }\n  toString() {\n    return UnassignedDevicesNode.NAME;\n  }\n}\nUnassignedDevicesNode.NAME = 'UnassignedDevicesNode';\nclass AssetSelectorBase {\n  constructor(groupNodeService, inventory, assetSelectorService) {\n    this.groupNodeService = groupNodeService;\n    this.inventory = inventory;\n    this.assetSelectorService = assetSelectorService;\n    /**\n     * Config object containing all options for the asset selector.\n     */\n    this.config = {};\n    /**\n     * The loading state of the current node.\n     */\n    this.isLoading = false;\n    /**\n     * Emit the selected asset or assets.\n     */\n    this.onSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();\n    /**\n     * Emits if the currently selected asset is cleared.\n     */\n    this.onClearSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();\n  }\n  /**\n   * @ignore\n   */\n  validate(control) {\n    if (this.config.required && (!control.value || control.value.length === 0)) {\n      return {\n        required: true\n      };\n    }\n    return null;\n  }\n  /**\n   * @ignore\n   */\n  writeValue(obj) {\n    this.selected = this.assetSelectorService.normalizeValue(obj, this.config.modelMode);\n  }\n  /**\n   * @ignore\n   */\n  registerOnChange(fn) {\n    this.onChange = fn;\n  }\n  /**\n   * @ignore\n   */\n  registerOnTouched(fn) {\n    this.onTouched = fn;\n  }\n  /**\n   * @ignore\n   */\n  doBlur() {\n    if (this.onTouched) {\n      this.onTouched();\n    }\n  }\n  /**\n   * Deselects all expect the given one.\n   * @param selectedMo The selected asset (optional, if empty -> just deselect all).\n   */\n  deselectAll(selectedMo) {\n    this.selected = [];\n    if (selectedMo) {\n      this.selected = [this.assetSelectorService.simplifyModel(selectedMo, this.config.modelMode)];\n    }\n    this.emitChange(this.selected, selectedMo, !!selectedMo);\n    this.doBlur();\n  }\n  /**\n   * Adds an managed object to the selected array and emits the change.\n   * @param selectedMo The selected asset.\n   */\n  select(selectedMo) {\n    if (!this.config.multi) {\n      this.selected = [];\n    }\n    const index = this.getIndexOfSelected(this.selected, selectedMo);\n    if (index === -1) {\n      this.selected.push(this.assetSelectorService.simplifyModel(selectedMo, this.config.modelMode));\n    }\n    this.emitChange(this.selected, selectedMo, true);\n    this.doBlur();\n  }\n  /**\n   * Removes a managed object from the selected array and emits the change.\n   * @param selectedMo The selected asset.\n   */\n  deselect(selectedMo) {\n    const index = this.getIndexOfSelected(this.selected, selectedMo);\n    if (index > -1) {\n      this.selected.splice(index, 1);\n    }\n    this.emitChange(this.selected, selectedMo, false);\n    this.doBlur();\n  }\n  /**\n   * Returns the index of the currently selected item.\n   * @param selected All selected items\n   * @param selectedMo The new selected item-\n   * @returns An index, or -1 if not found.\n   */\n  getIndexOfSelected(selected, selectedMo) {\n    return selected.findIndex(mo => mo.id === selectedMo.id);\n  }\n  emitChange(selected, item, isSelected) {\n    const changes = this.config.multi ? selected : selected[0];\n    if (this.onChange) {\n      this.onChange(changes);\n    }\n    this.onSelected.emit({\n      items: changes,\n      change: {\n        item,\n        isSelected\n      }\n    });\n  }\n  createDefaultRootNode() {\n    return this.groupNodeService.createGroupNode({\n      root: true,\n      groupsSelectable: this.config.groupsSelectable,\n      groupsOnly: this.config.groupsOnly,\n      showChildDevices: this.config.showChildDevices\n    });\n  }\n  createManagedObjectRootNode(asset) {\n    var _this10 = this;\n    return _asyncToGenerator(function* () {\n      if (asset.id) {\n        return _this10.groupNodeService.createGroupNode({\n          mo: asset,\n          groupsSelectable: _this10.config.groupsSelectable,\n          groupsOnly: _this10.config.groupsOnly,\n          showChildDevices: _this10.config.showChildDevices\n        });\n      }\n      const {\n        data: mo\n      } = yield _this10.inventory.detail(asset);\n      return _this10.groupNodeService.createGroupNode({\n        mo,\n        groupsSelectable: _this10.config.groupsSelectable,\n        groupsOnly: _this10.config.groupsOnly,\n        showChildDevices: _this10.config.showChildDevices\n      });\n    })();\n  }\n}\n\n/**\n * Displays a hierarchical tree selector for assets.\n */\nclass AssetSelectorComponent extends AssetSelectorBase {\n  /**\n   * @ignore only DI\n   */\n  constructor(groupNodeService, inventory, assetSelectorService, cd) {\n    super(groupNodeService, inventory, assetSelectorService);\n    this.groupNodeService = groupNodeService;\n    this.inventory = inventory;\n    this.assetSelectorService = assetSelectorService;\n    this.cd = cd;\n    /**\n     * Config object containing all options for the asset selector.\n     */\n    this.config = {};\n    /**\n     * Used only for miller-view, displays the column level for the current node.\n     * E.g if the index is one, this will be second column.\n     */\n    this.index = 0;\n    /**\n     * The asset to use as root.\n     */\n    this.asset = undefined;\n    /**\n     * The selected device.\n     */\n    this.selectedDevice = undefined;\n    /**\n     * An array of predefined nodes.\n     */\n    this.selected = [];\n    /**\n     * All currently selected assets.\n     */\n    this.selectedItems = [];\n    this.container = 'body';\n    /**\n     * Emits if one item was selected (all currently selected nodes).\n     */\n    this.onSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();\n    /**\n     * Emits if the currently selected asset is cleared.\n     */\n    this.onClearSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();\n    /**\n     * Used only for miller view. Emit the selected node and use it as a 'rootNode' for the new column.\n     */\n    this.onRowSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();\n    /**\n     * Emits the current loading state of the node.\n     */\n    this.onLoad = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();\n    /**\n     * The current filter applied.\n     */\n    this.filterText = '';\n    /**\n     * Displays the global search at all times if the miller view is used\n     * on root group level.\n     */\n    this.root = false;\n    /**\n     * @ignore\n     */\n    this.unsubscribe$ = new rxjs__WEBPACK_IMPORTED_MODULE_2__.Subject();\n  }\n  /**\n   * Checks when a node was selected, if a new column needs to be added.\n   * @param node The node that was clicked.\n   * @param index The current index of this node.\n   * @returns True if the click was handled and a new column was added.\n   */\n  handleNextMillerViewColumn(node, index) {\n    const nodeCopy = Object.create(node);\n    const isSameAsRoot = this.rootNode === node;\n    const isUnassignedDevicesNode = node.toString() === UnassignedDevicesNode.NAME;\n    const isNewColumnNeeded = !isSameAsRoot && (node.isGroup() || isUnassignedDevicesNode || node.hasChildDevices());\n    if (isNewColumnNeeded) {\n      this.onRowSelected.emit({\n        nodeCopy,\n        index\n      });\n      return false;\n    }\n    return true;\n  }\n  /**\n   * @ignore\n   */\n  ngOnInit() {\n    var _this11 = this;\n    return _asyncToGenerator(function* () {\n      if (_this11.index === 0) {\n        _this11.config = {\n          ...CONFIG_OPTIONS_DEFAULT,\n          ..._this11.config\n        };\n      }\n      const shouldResetNameFilter = _this11.rootNode && _this11.rootNode.mo && _this11.config.view === 'miller';\n      if (shouldResetNameFilter) {\n        _this11.applyFilter('');\n      }\n      const isOnlyAssetNodeDefined = _this11.asset;\n      if (isOnlyAssetNodeDefined) {\n        _this11.rootNode = yield _this11.createManagedObjectRootNode(_this11.asset);\n      }\n      const isAnyNodeDefined = !_this11.rootNode && (!_this11.asset || Object.keys(_this11.asset).length === 0);\n      if (isAnyNodeDefined) {\n        _this11.rootNode = _this11.createDefaultRootNode();\n      }\n      if (_this11.config.showUnassignedDevices && (!_this11.asset || Object.keys(_this11.asset).length === 0) && _this11.rootNode.root) {\n        _this11.rootNode.add(new UnassignedDevicesNode(_this11.groupNodeService, {\n          showChildDevices: _this11.config.showChildDevices\n        }));\n      }\n      _this11.root = _this11.rootNode.root;\n    })();\n  }\n  ngOnChanges(changes) {\n    var _this12 = this;\n    return _asyncToGenerator(function* () {\n      if (changes.asset && changes.asset.currentValue && Object.keys(changes.asset.currentValue).length !== 0) {\n        _this12.rootNode = yield _this12.createManagedObjectRootNode(changes.asset.currentValue);\n      }\n    })();\n  }\n  /**\n   * Changes the current root to one level back.\n   */\n  back() {\n    const index = this.index - 1;\n    const nodeCopy = Object.create(this.rootNode.parents[0]);\n    this.onRowSelected.emit({\n      nodeCopy,\n      index\n    });\n  }\n  /**\n   * Clears the current filter.\n   */\n  clearFilters() {\n    this.filterText = '';\n    this.applyFilter('');\n  }\n  clearSelectedDevices() {\n    this.selectedDevice = undefined;\n    this.applyFilter('');\n    this.onClearSelected.emit();\n  }\n  isGroupSelected() {\n    if (this.selectedItems.some(selectedNode => {\n      var _this$rootNode$mo;\n      return selectedNode.id === ((_this$rootNode$mo = this.rootNode.mo) === null || _this$rootNode$mo === void 0 ? void 0 : _this$rootNode$mo.id);\n    })) {\n      return true;\n    }\n    return false;\n  }\n  groupNameFilter(nameFilter, moId, showUnassignedDevices) {\n    if (nameFilter) {\n      const filterByName = showUnassignedDevices ? {\n        __filter: {\n          name: nameFilter\n        },\n        __orderby: [{\n          name: 1\n        }]\n      } : {\n        __filter: {\n          name: nameFilter,\n          __bygroupid: moId\n        }\n      };\n      return this.assetSelectorService.queriesUtil.buildQuery(filterByName);\n    }\n    const defaultFilter = {\n      __filter: {\n        __bygroupid: moId\n      },\n      __orderby: [{\n        name: 1\n      }]\n    };\n    return this.assetSelectorService.queriesUtil.buildQuery(defaultFilter);\n  }\n  /**\n   * Applies a filter.\n   * @param filter The filter to apply.\n   */\n  applyFilter(filter) {\n    var _this13 = this;\n    return _asyncToGenerator(function* () {\n      _this13.rootNode.filterQuery$.next(_this13.groupNameFilter(filter, _this13.rootNode.mo.id, _this13.isUnassignedDevicesNode() ? true : false));\n      _this13.rootNode.refresh();\n      _this13.onLoad.emit({\n        loading: true,\n        filterText: _this13.filterText,\n        index: _this13.index,\n        selectedDevice: _this13.selectedDevice\n      });\n      _this13.cd.detectChanges();\n    })();\n  }\n  /**\n   * Check if the UnassignedDevice node is the rootNode.\n   */\n  isUnassignedDevicesNode() {\n    return this.rootNode.toString() === UnassignedDevicesNode.NAME;\n  }\n  /**\n   * Called when the user resets the search result.\n   */\n  onSearchResultReset(selectedItem) {\n    if (selectedItem) {\n      this.rootNode = this.createDefaultRootNode();\n      if (this.config.showUnassignedDevices) {\n        this.rootNode.add(new UnassignedDevicesNode(this.groupNodeService, {\n          showChildDevices: this.config.showChildDevices\n        }));\n      }\n      if (this.config.view === 'miller') {\n        this.onRowSelected.emit({\n          root: true\n        });\n      }\n      this.rootNode.click({\n        open: true\n      });\n      this.rootNode.nodesFetched.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.tap)(() => this.cd.detectChanges()), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.takeUntil)(this.unsubscribe$)).subscribe();\n      if (this.config.view === 'tree') {\n        this.rootNode.open = true;\n      }\n    }\n  }\n  /**\n   * Called if the user clicks on a search result.\n   */\n  onSearchResultClick(mo) {\n    var _this14 = this;\n    return _asyncToGenerator(function* () {\n      const canSelectNode = _this14.config.groupsSelectable || !_this14.groupNodeService.isGroup(mo);\n      if (_this14.config.view === 'miller') {\n        _this14.rootNode = yield _this14.createManagedObjectRootNode(mo);\n        _this14.rootNode.click({\n          open: true\n        });\n        const nodeCopy = Object.create(_this14.rootNode);\n        _this14.onRowSelected.emit({\n          nodeCopy,\n          index: 0,\n          selectedDevices: _this14.selectedDevice,\n          root: true\n        });\n      }\n      if (!_this14.config.multi) {\n        _this14.deselectAll();\n      }\n      if (canSelectNode) {\n        _this14.select(mo);\n      }\n    })();\n  }\n  onLoading(isLoading) {\n    this.onLoad.emit({\n      loading: isLoading,\n      filterText: this.filterText\n    });\n    this.cd.markForCheck();\n  }\n  onSelect(mo) {\n    this.select(mo);\n  }\n  onDeselect(config) {\n    switch (config === null || config === void 0 ? void 0 : config.deselectMode) {\n      case 'single':\n        this.deselect(config.mo);\n        this.cd.markForCheck();\n        break;\n      case 'all':\n        this.deselectAll(config.mo);\n        break;\n    }\n  }\n}\nAssetSelectorComponent.fac = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetSelectorComponent,\n  deps: [{\n    token: GroupNodeService\n  }, {\n    token: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n  }, {\n    token: AssetSelectorService\n  }, {\n    token: _angular_core__WEBPACK_IMPORTED_MODULE_3__.ChangeDetectorRef\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"FactoryTarget\"].Component\n});\nAssetSelectorComponent.cmp = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareComponent\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  type: AssetSelectorComponent,\n  selector: \"c8y-asset-selector\",\n  inputs: {\n    config: \"config\",\n    active: \"active\",\n    index: \"index\",\n    asset: \"asset\",\n    selectedDevice: \"selectedDevice\",\n    selected: \"selected\",\n    rootNode: \"rootNode\",\n    selectedItems: \"selectedItems\",\n    container: \"container\"\n  },\n  outputs: {\n    onSelected: \"onSelected\",\n    onClearSelected: \"onClearSelected\",\n    onRowSelected: \"onRowSelected\",\n    onLoad: \"onLoad\"\n  },\n  providers: [{\n    provide: _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NG_VALUE_ACCESSOR,\n    multi: true,\n    useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(() => AssetSelectorComponent)\n  }, {\n    provide: _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NG_VALIDATORS,\n    useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(() => AssetSelectorComponent),\n    multi: true\n  }],\n  usesInheritance: true,\n  usesOnChanges: true,\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  template: \"<div\\n  class=\\\"bg-inherit p-t-8 p-b-8 separator-bottom\\\"\\n  [ngClass]=\\\"{ 'p-l-16 p-absolute p-r-16': config.view === 'miller', 'sticky-top': config.multi }\\\"\\n  [ngStyle]=\\\"{ 'z-index': config.singleColumn && config.search ? '30' : '20' }\\\"\\n  *ngIf=\\\"!selectedDevice && index === 0 && (config.search || config.singleColumn)\\\"\\n>\\n  <p class=\\\"text-medium\\\" [ngClass]=\\\"{ 'm-b-4': config.search && root }\\\">\\n    {{ config.label | translate }}\\n  </p>\\n  <c8y-search-input\\n    *ngIf=\\\"config.search && root\\\"\\n    (onClick)=\\\"onSearchResultClick($event)\\\"\\n    (reset)=\\\"onSearchResultReset($event)\\\"\\n    [mode]=\\\"'select'\\\"\\n    [container]=\\\"container\\\"\\n    [groupsOnly]=\\\"config.groupsOnly\\\"\\n  ></c8y-search-input>\\n  <div *ngIf=\\\"config.multi\\\" class=\\\"p-t-4\\\">\\n    <span class=\\\"label label-info chip\\\" *ngFor=\\\"let selectedItem of selected\\\">\\n      <button\\n        class=\\\"btn btn-xs btn-clean text-10 m-r-4\\\"\\n        type=\\\"button\\\"\\n        title=\\\"{{ selectedItem.name }}\\\"\\n        (click)=\\\"deselect(selectedItem)\\\"\\n      >\\n        <i c8yIcon=\\\"times\\\"></i>\\n      </button>\\n      {{ selectedItem.name }}\\n    </span>\\n  </div>\\n</div>\\n\\n<div *ngIf=\\\"selectedDevice\\\" class=\\\"p-r-16\\\">\\n  <div class=\\\"d-flex p-b-4\\\">\\n    <p *ngIf=\\\"selectedDevice; else multiAssets\\\" class=\\\"text-medium p-t-8 m-r-8\\\">\\n      {{ 'Selected asset' | translate }}\\n    </p>\\n    <ng-template #multiAssets>\\n      <p class=\\\"text-medium m-r-8\\\">{{ 'Selected assets' | translate }}</p>\\n    </ng-template>\\n    <button\\n      class=\\\"btn btn-default btn-xs a-s-center m-t-4 m-l-auto\\\"\\n      type=\\\"button\\\"\\n      title=\\\"{{ 'Change' | translate }}\\\"\\n      (click)=\\\"clearSelectedDevices()\\\"\\n    >\\n      {{ 'Change' | translate }}\\n    </button>\\n  </div>\\n  <div class=\\\"d-flex\\\">\\n    <i [c8yIcon]=\\\"'check-circle'\\\" class=\\\"text-success p-l-0 p-r-8\\\"></i>\\n    <i\\n      c8yIcon=\\\"{{ selectedDevice.type === 'c8y_DeviceGroup' ? 'c8y-group' : 'exchange' }}\\\"\\n      class=\\\"m-r-4 icon-20\\\"\\n    ></i>\\n    <span>{{ selectedDevice.name }}</span>\\n  </div>\\n</div>\\n\\n<!-- miller columns header -->\\n<div\\n  *ngIf=\\\"\\n    config.view === 'miller' &&\\n    ((config.showFilter && !rootNode.root) || config.columnHeaders || config.singleColumn) &&\\n    !selectedDevice\\n  \\\"\\n  class=\\\"miller-column__header sticky-top bg-inherit separator-bottom\\\"\\n  [ngClass]=\\\"{ 'm-t-72 p-t-8': config.search, 'm-t-32': !config.search && config.singleColumn }\\\"\\n  [ngStyle]=\\\"{ top: config.search && !config.singleColumn ? '72px' : '0' }\\\"\\n>\\n  <p\\n    class=\\\"text-12 text-muted text-truncate m-b-4\\\"\\n    *ngIf=\\\"config.singleColumn && index !== 0\\\"\\n    title=\\\"{{ rootNode.breadcrumb || rootNode.label | translate }}\\\"\\n  >\\n    <i c8yIcon=\\\"home\\\" class=\\\"m-r-4\\\"></i>\\n    {{ rootNode.breadcrumb || rootNode.label | translate }}\\n  </p>\\n  <div *ngIf=\\\"config.columnHeaders || config.singleColumn\\\" class=\\\"d-flex a-i-center\\\">\\n    <button\\n      class=\\\"btn btn-default btn-xs m-r-8 p-t-0 p-b-0 p-l-4 p-r-4 l-h-1\\\"\\n      type=\\\"button\\\"\\n      title=\\\"{{ 'Back' | translate }}\\\"\\n      *ngIf=\\\"config.singleColumn && !rootNode.root && index !== 0\\\"\\n      (click)=\\\"back()\\\"\\n    >\\n      <i c8yIcon=\\\"angle-left\\\"></i>\\n    </button>\\n    <label\\n      *ngIf=\\\"!rootNode.root && index === 0 && (config.groupsSelectable || !rootNode.isGroup())\\\"\\n      class=\\\"c8y-radio checkbox-inline m-r-8\\\"\\n    >\\n      <input\\n        type=\\\"radio\\\"\\n        (change)=\\\"select(rootNode.mo)\\\"\\n        [checked]=\\\"isGroupSelected()\\\"\\n        title=\\\"{{ 'Select group' | translate }}\\\"\\n      />\\n      <span></span>\\n    </label>\\n\\n    <i\\n      *ngIf=\\\"config.columnHeaders && (config.singleColumn || (!rootNode.root && index === 0))\\\"\\n      c8yIcon=\\\"c8y-group-open\\\"\\n      class=\\\"icon-20 c8y-icon-duocolor m-r-4\\\"\\n    ></i>\\n    <p\\n      class=\\\"text-truncate\\\"\\n      title=\\\"{{ rootNode.label | translate }}\\\"\\n      *ngIf=\\\"config.columnHeaders\\\"\\n      [ngClass]=\\\"{\\n        'text-label-small': !config.singleColumn,\\n        'text-medium': config.singleColumn\\n      }\\\"\\n    >\\n      {{ rootNode.label | translate }}\\n    </p>\\n  </div>\\n\\n  <div *ngIf=\\\"!rootNode.root && config.showFilter\\\" [ngClass]=\\\"{ 'p-t-4': config.columnHeaders }\\\">\\n    <div class=\\\"input-group input-group-sm input-group-search\\\">\\n      <input\\n        [(ngModel)]=\\\"filterText\\\"\\n        placeholder=\\\"{{ 'Filter this column\\u2026' | translate }}\\\"\\n        class=\\\"form-control\\\"\\n        (keyup.enter)=\\\"applyFilter('*' + filterText + '*')\\\"\\n      />\\n      <span class=\\\"input-group-btn\\\">\\n        <button\\n          title=\\\"{{ 'Apply filter' | translate }}\\\"\\n          type=\\\"button\\\"\\n          class=\\\"btn btn-dot p-r-8 p-l-4\\\"\\n          (click)=\\\"applyFilter('*' + filterText + '*')\\\"\\n        >\\n          <i c8yIcon=\\\"filter\\\"></i>\\n        </button>\\n        <button\\n          title=\\\" {{ 'Clear filters' | translate }}\\\"\\n          type=\\\"button\\\"\\n          class=\\\"btn btn-dot p-r-8 p-l-4\\\"\\n          (click)=\\\"clearFilters()\\\"\\n          *ngIf=\\\"filterText.length\\\"\\n        >\\n          <i c8yIcon=\\\"times\\\"></i>\\n        </button>\\n      </span>\\n    </div>\\n  </div>\\n</div>\\n\\n<c8y-asset-selector-node\\n  *ngIf=\\\"rootNode && !selectedDevice\\\"\\n  [node]=\\\"rootNode\\\"\\n  [rootNode]=\\\"rootNode\\\"\\n  [preselected]=\\\"selected\\\"\\n  [multi]=\\\"config.multi\\\"\\n  [view]=\\\"config.view\\\"\\n  [index]=\\\"index\\\"\\n  [selectedItems]=\\\"selectedItems\\\"\\n  [active]=\\\"active\\\"\\n  [handleNextMillerViewColumn]=\\\"handleNextMillerViewColumn.bind(this)\\\"\\n  (isLoadingState)=\\\"onLoading($event)\\\"\\n  (onSelect)=\\\"onSelect($event)\\\"\\n  (onDeselect)=\\\"onDeselect($event)\\\"\\n  class=\\\"d-block bg-inherit p-relative\\\"\\n  [ngClass]=\\\"{ 'collapse show': !rootNode.root && !rootNode.hidden && config.view !== 'miller' }\\\"\\n  style=\\\"z-index: 9\\\"\\n></c8y-asset-selector-node>\\n\",\n  dependencies: [{\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.IconDirective,\n    selector: \"[c8yIcon]\",\n    inputs: [\"c8yIcon\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgClass,\n    selector: \"[ngClass]\",\n    inputs: [\"class\", \"ngClass\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgForOf,\n    selector: \"[ngFor][ngForOf]\",\n    inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgIf,\n    selector: \"[ngIf]\",\n    inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgStyle,\n    selector: \"[ngStyle]\",\n    inputs: [\"ngStyle\"]\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.SearchInputComponent,\n    selector: \"c8y-search-input\",\n    inputs: [\"mode\", \"enableCustomTemplatePlaceholder\", \"customPlaceholder\", \"externalTerm\", \"customDataQuery\", \"container\", \"groupsOnly\"],\n    outputs: [\"filter\", \"search\", \"reset\", \"onClick\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_11__.DefaultValueAccessor,\n    selector: \"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NgControlStatus,\n    selector: \"[formControlName],[ngModel],[formControl]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NgModel,\n    selector: \"[ngModel]:not([formControlName]):not([formControl])\",\n    inputs: [\"name\", \"disabled\", \"ngModel\", \"ngModelOptions\"],\n    outputs: [\"ngModelChange\"],\n    exportAs: [\"ngModel\"]\n  }, {\n    kind: \"component\",\n    type: AssetSelectorNodeComponent,\n    selector: \"c8y-asset-selector-node\",\n    inputs: [\"node\", \"rootNode\", \"preselected\", \"showPath\", \"multi\", \"view\", \"index\", \"active\", \"selectedItems\", \"handleNextMillerViewColumn\"],\n    outputs: [\"isLoadingState\", \"onSelect\", \"onDeselect\"]\n  }, {\n    kind: \"pipe\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.C8yTranslatePipe,\n    name: \"translate\"\n  }]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetSelectorComponent,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Component,\n    args: [{\n      selector: 'c8y-asset-selector',\n      providers: [{\n        provide: _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NG_VALUE_ACCESSOR,\n        multi: true,\n        useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(() => AssetSelectorComponent)\n      }, {\n        provide: _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NG_VALIDATORS,\n        useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(() => AssetSelectorComponent),\n        multi: true\n      }],\n      template: \"<div\\n  class=\\\"bg-inherit p-t-8 p-b-8 separator-bottom\\\"\\n  [ngClass]=\\\"{ 'p-l-16 p-absolute p-r-16': config.view === 'miller', 'sticky-top': config.multi }\\\"\\n  [ngStyle]=\\\"{ 'z-index': config.singleColumn && config.search ? '30' : '20' }\\\"\\n  *ngIf=\\\"!selectedDevice && index === 0 && (config.search || config.singleColumn)\\\"\\n>\\n  <p class=\\\"text-medium\\\" [ngClass]=\\\"{ 'm-b-4': config.search && root }\\\">\\n    {{ config.label | translate }}\\n  </p>\\n  <c8y-search-input\\n    *ngIf=\\\"config.search && root\\\"\\n    (onClick)=\\\"onSearchResultClick($event)\\\"\\n    (reset)=\\\"onSearchResultReset($event)\\\"\\n    [mode]=\\\"'select'\\\"\\n    [container]=\\\"container\\\"\\n    [groupsOnly]=\\\"config.groupsOnly\\\"\\n  ></c8y-search-input>\\n  <div *ngIf=\\\"config.multi\\\" class=\\\"p-t-4\\\">\\n    <span class=\\\"label label-info chip\\\" *ngFor=\\\"let selectedItem of selected\\\">\\n      <button\\n        class=\\\"btn btn-xs btn-clean text-10 m-r-4\\\"\\n        type=\\\"button\\\"\\n        title=\\\"{{ selectedItem.name }}\\\"\\n        (click)=\\\"deselect(selectedItem)\\\"\\n      >\\n        <i c8yIcon=\\\"times\\\"></i>\\n      </button>\\n      {{ selectedItem.name }}\\n    </span>\\n  </div>\\n</div>\\n\\n<div *ngIf=\\\"selectedDevice\\\" class=\\\"p-r-16\\\">\\n  <div class=\\\"d-flex p-b-4\\\">\\n    <p *ngIf=\\\"selectedDevice; else multiAssets\\\" class=\\\"text-medium p-t-8 m-r-8\\\">\\n      {{ 'Selected asset' | translate }}\\n    </p>\\n    <ng-template #multiAssets>\\n      <p class=\\\"text-medium m-r-8\\\">{{ 'Selected assets' | translate }}</p>\\n    </ng-template>\\n    <button\\n      class=\\\"btn btn-default btn-xs a-s-center m-t-4 m-l-auto\\\"\\n      type=\\\"button\\\"\\n      title=\\\"{{ 'Change' | translate }}\\\"\\n      (click)=\\\"clearSelectedDevices()\\\"\\n    >\\n      {{ 'Change' | translate }}\\n    </button>\\n  </div>\\n  <div class=\\\"d-flex\\\">\\n    <i [c8yIcon]=\\\"'check-circle'\\\" class=\\\"text-success p-l-0 p-r-8\\\"></i>\\n    <i\\n      c8yIcon=\\\"{{ selectedDevice.type === 'c8y_DeviceGroup' ? 'c8y-group' : 'exchange' }}\\\"\\n      class=\\\"m-r-4 icon-20\\\"\\n    ></i>\\n    <span>{{ selectedDevice.name }}</span>\\n  </div>\\n</div>\\n\\n<!-- miller columns header -->\\n<div\\n  *ngIf=\\\"\\n    config.view === 'miller' &&\\n    ((config.showFilter && !rootNode.root) || config.columnHeaders || config.singleColumn) &&\\n    !selectedDevice\\n  \\\"\\n  class=\\\"miller-column__header sticky-top bg-inherit separator-bottom\\\"\\n  [ngClass]=\\\"{ 'm-t-72 p-t-8': config.search, 'm-t-32': !config.search && config.singleColumn }\\\"\\n  [ngStyle]=\\\"{ top: config.search && !config.singleColumn ? '72px' : '0' }\\\"\\n>\\n  <p\\n    class=\\\"text-12 text-muted text-truncate m-b-4\\\"\\n    *ngIf=\\\"config.singleColumn && index !== 0\\\"\\n    title=\\\"{{ rootNode.breadcrumb || rootNode.label | translate }}\\\"\\n  >\\n    <i c8yIcon=\\\"home\\\" class=\\\"m-r-4\\\"></i>\\n    {{ rootNode.breadcrumb || rootNode.label | translate }}\\n  </p>\\n  <div *ngIf=\\\"config.columnHeaders || config.singleColumn\\\" class=\\\"d-flex a-i-center\\\">\\n    <button\\n      class=\\\"btn btn-default btn-xs m-r-8 p-t-0 p-b-0 p-l-4 p-r-4 l-h-1\\\"\\n      type=\\\"button\\\"\\n      title=\\\"{{ 'Back' | translate }}\\\"\\n      *ngIf=\\\"config.singleColumn && !rootNode.root && index !== 0\\\"\\n      (click)=\\\"back()\\\"\\n    >\\n      <i c8yIcon=\\\"angle-left\\\"></i>\\n    </button>\\n    <label\\n      *ngIf=\\\"!rootNode.root && index === 0 && (config.groupsSelectable || !rootNode.isGroup())\\\"\\n      class=\\\"c8y-radio checkbox-inline m-r-8\\\"\\n    >\\n      <input\\n        type=\\\"radio\\\"\\n        (change)=\\\"select(rootNode.mo)\\\"\\n        [checked]=\\\"isGroupSelected()\\\"\\n        title=\\\"{{ 'Select group' | translate }}\\\"\\n      />\\n      <span></span>\\n    </label>\\n\\n    <i\\n      *ngIf=\\\"config.columnHeaders && (config.singleColumn || (!rootNode.root && index === 0))\\\"\\n      c8yIcon=\\\"c8y-group-open\\\"\\n      class=\\\"icon-20 c8y-icon-duocolor m-r-4\\\"\\n    ></i>\\n    <p\\n      class=\\\"text-truncate\\\"\\n      title=\\\"{{ rootNode.label | translate }}\\\"\\n      *ngIf=\\\"config.columnHeaders\\\"\\n      [ngClass]=\\\"{\\n        'text-label-small': !config.singleColumn,\\n        'text-medium': config.singleColumn\\n      }\\\"\\n    >\\n      {{ rootNode.label | translate }}\\n    </p>\\n  </div>\\n\\n  <div *ngIf=\\\"!rootNode.root && config.showFilter\\\" [ngClass]=\\\"{ 'p-t-4': config.columnHeaders }\\\">\\n    <div class=\\\"input-group input-group-sm input-group-search\\\">\\n      <input\\n        [(ngModel)]=\\\"filterText\\\"\\n        placeholder=\\\"{{ 'Filter this column\\u2026' | translate }}\\\"\\n        class=\\\"form-control\\\"\\n        (keyup.enter)=\\\"applyFilter('*' + filterText + '*')\\\"\\n      />\\n      <span class=\\\"input-group-btn\\\">\\n        <button\\n          title=\\\"{{ 'Apply filter' | translate }}\\\"\\n          type=\\\"button\\\"\\n          class=\\\"btn btn-dot p-r-8 p-l-4\\\"\\n          (click)=\\\"applyFilter('*' + filterText + '*')\\\"\\n        >\\n          <i c8yIcon=\\\"filter\\\"></i>\\n        </button>\\n        <button\\n          title=\\\" {{ 'Clear filters' | translate }}\\\"\\n          type=\\\"button\\\"\\n          class=\\\"btn btn-dot p-r-8 p-l-4\\\"\\n          (click)=\\\"clearFilters()\\\"\\n          *ngIf=\\\"filterText.length\\\"\\n        >\\n          <i c8yIcon=\\\"times\\\"></i>\\n        </button>\\n      </span>\\n    </div>\\n  </div>\\n</div>\\n\\n<c8y-asset-selector-node\\n  *ngIf=\\\"rootNode && !selectedDevice\\\"\\n  [node]=\\\"rootNode\\\"\\n  [rootNode]=\\\"rootNode\\\"\\n  [preselected]=\\\"selected\\\"\\n  [multi]=\\\"config.multi\\\"\\n  [view]=\\\"config.view\\\"\\n  [index]=\\\"index\\\"\\n  [selectedItems]=\\\"selectedItems\\\"\\n  [active]=\\\"active\\\"\\n  [handleNextMillerViewColumn]=\\\"handleNextMillerViewColumn.bind(this)\\\"\\n  (isLoadingState)=\\\"onLoading($event)\\\"\\n  (onSelect)=\\\"onSelect($event)\\\"\\n  (onDeselect)=\\\"onDeselect($event)\\\"\\n  class=\\\"d-block bg-inherit p-relative\\\"\\n  [ngClass]=\\\"{ 'collapse show': !rootNode.root && !rootNode.hidden && config.view !== 'miller' }\\\"\\n  style=\\\"z-index: 9\\\"\\n></c8y-asset-selector-node>\\n\"\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: GroupNodeService\n    }, {\n      type: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n    }, {\n      type: AssetSelectorService\n    }, {\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.ChangeDetectorRef\n    }];\n  },\n  propDecorators: {\n    config: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    active: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    index: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    asset: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    selectedDevice: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    selected: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    rootNode: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    selectedItems: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    container: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    onSelected: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Output\n    }],\n    onClearSelected: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Output\n    }],\n    onRowSelected: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Output\n    }],\n    onLoad: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Output\n    }]\n  }\n});\nclass MillerViewComponent extends AssetSelectorBase {\n  constructor(groupNodeService, inventory, assetSelectorService, cd) {\n    super(groupNodeService, inventory, assetSelectorService);\n    this.groupNodeService = groupNodeService;\n    this.inventory = inventory;\n    this.assetSelectorService = assetSelectorService;\n    this.cd = cd;\n    /**\n     * Config object containing all options for the asset selector.\n     */\n    this.config = {};\n    /**\n     * The asset to use as root.\n     */\n    this.asset = undefined;\n    /**\n     * The selected devices.\n     */\n    this.selectedDevice = undefined;\n    /**\n     * Emits if the selection changes\n     */\n    this.onSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();\n    /**\n     * Emits if the currently selected asset is cleared.\n     */\n    this.onClearSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();\n    /**\n     * The column array will contain all currently selected nodes\n     *  which will form the miller view columns (only one per level).\n     */\n    this.columns = [];\n    /**\n     * The current filter applied. Used for the empty state text in the view.\n     */\n    this.filterText = '';\n    this.container = 'body';\n    this.configOptionsDefault = {\n      view: 'miller',\n      singleColumn: false\n    };\n  }\n  /**\n   * @ignore\n   */\n  ngOnInit() {\n    var _this15 = this;\n    return _asyncToGenerator(function* () {\n      _this15.config = {\n        ..._this15.configOptionsDefault,\n        ..._this15.config\n      };\n      const isAnyNodeDefined = !_this15.rootNode && (!_this15.asset || Object.keys(_this15.asset).length === 0);\n      if (isAnyNodeDefined) {\n        _this15.rootNode = _this15.createDefaultRootNode();\n      }\n      const isOnlyAssetNodeDefined = _this15.asset && Object.keys(_this15.asset).length !== 0;\n      if (isOnlyAssetNodeDefined) {\n        _this15.rootNode = yield _this15.createManagedObjectRootNode(_this15.asset);\n        _this15.rootNode.click();\n      }\n      _this15.columns.push(_this15.rootNode);\n    })();\n  }\n  /**\n   * @ignore\n   */\n  ngOnChanges(changes) {\n    var _this16 = this;\n    return _asyncToGenerator(function* () {\n      if (changes.asset && changes.asset.currentValue && !_this16.asset) {\n        _this16.columns = [];\n        _this16.columns.push(yield _this16.createManagedObjectRootNode(changes.asset.currentValue));\n      }\n    })();\n  }\n  /**\n   * Create a new column with the selected node as root.\n   */\n  addNewColumn(node) {\n    const level = node.index;\n    this.selectedDevice = node.selectedDevices || undefined;\n    if (node.root) {\n      window.requestAnimationFrame(() => this.millerViewWrapper.nativeElement.scrollLeft = 0);\n      this.columns.length = 1;\n    }\n    const isLevelLowerThanColumnNumber = level < this.columns.length - 1;\n    let goBack = false;\n    if (isLevelLowerThanColumnNumber) {\n      this.columns.length = level + 1;\n      goBack = true;\n    }\n    if (!node.root && !(this.config.singleColumn && goBack)) {\n      this.columns.push(node.nodeCopy);\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      const col = this;\n      window.requestAnimationFrame(() => col.millerViewWrapper.nativeElement.scrollLeft = 50000);\n      /* triggered twice with a small delay as a workaround for dealing with Safari's bug:\n       \"Safari doesnt update the scrollTop / scrollLeft properties of an element its any of its\n        ancestors has overflow set to hidden.\"\n        This was reported on customer portal with the ticket SI-488573\n      */\n      setTimeout(function () {\n        window.requestAnimationFrame(() => col.millerViewWrapper.nativeElement.scrollLeft = 55000);\n      }, 700);\n    }\n  }\n  /**\n   * Change the loading state of the asset selector.\n   */\n  onLoad(event) {\n    this.isLoading = event.loading;\n    this.filterText = event.filterText;\n    this.columnIndex = event.index;\n    this.selectedDevice = event.selectedDevice;\n    this.cd.detectChanges();\n  }\n  /**\n   * Add the selected node to the selected array.\n   */\n  onSelectionChange(event) {\n    if (!this.config.multi) {\n      this.deselectAll(event.change.item);\n      return;\n    }\n    if (event.change.isSelected) {\n      this.select(event.change.item);\n      return;\n    }\n    this.deselect(event.change.item);\n  }\n}\nMillerViewComponent.fac = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: MillerViewComponent,\n  deps: [{\n    token: GroupNodeService\n  }, {\n    token: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n  }, {\n    token: AssetSelectorService\n  }, {\n    token: _angular_core__WEBPACK_IMPORTED_MODULE_3__.ChangeDetectorRef\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"FactoryTarget\"].Component\n});\nMillerViewComponent.cmp = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareComponent\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  type: MillerViewComponent,\n  selector: \"c8y-asset-selector-miller\",\n  inputs: {\n    config: \"config\",\n    asset: \"asset\",\n    selectedDevice: \"selectedDevice\",\n    rootNode: \"rootNode\",\n    container: \"container\"\n  },\n  outputs: {\n    onSelected: \"onSelected\",\n    onClearSelected: \"onClearSelected\"\n  },\n  providers: [{\n    provide: _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NG_VALUE_ACCESSOR,\n    useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(() => MillerViewComponent),\n    multi: true\n  }],\n  viewQueries: [{\n    propertyName: \"millerViewWrapper\",\n    first: true,\n    predicate: [\"millerViewWrapper\"],\n    descendants: true\n  }],\n  usesInheritance: true,\n  usesOnChanges: true,\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  template: \"<div\\n  #millerViewWrapper\\n  class=\\\"miller-view-wrapper\\\"\\n  [ngClass]=\\\"{ 'single-column': config.singleColumn }\\\"\\n>\\n  <div *ngFor=\\\"let column of columns; index as i\\\" class=\\\"miller-column bg-inherit\\\">\\n    <c8y-asset-selector\\n      [config]=\\\"config\\\"\\n      [index]=\\\"i\\\"\\n      [active]=\\\"columns[i + 1]\\\"\\n      [rootNode]=\\\"column\\\"\\n      [selectedItems]=\\\"selected || []\\\"\\n      [selectedDevice]=\\\"selectedDevice\\\"\\n      (onSelected)=\\\"onSelectionChange($event)\\\"\\n      (onClearSelected)=\\\"onClearSelected.emit()\\\"\\n      (onRowSelected)=\\\"addNewColumn($event)\\\"\\n      (onLoad)=\\\"onLoad($event)\\\"\\n      [container]=\\\"container\\\"\\n      class=\\\"bg-inherit\\\"\\n    >\\n    </c8y-asset-selector>\\n\\n    <div class=\\\"p-relative p-b-64\\\" *ngIf=\\\"isLoading && columnIndex === i && !selectedDevice\\\">\\n      <c8y-loading></c8y-loading>\\n    </div>\\n\\n    <div *ngIf=\\\"!column.children.length && !isLoading\\\" class=\\\"p-l-8 p-r-8\\\">\\n      <c8y-ui-empty-state\\n        *ngIf=\\\"!filterText; else noSearchResults\\\"\\n        [icon]=\\\"'folder-open'\\\"\\n        [title]=\\\"'No results to display.' | translate\\\"\\n        [subtitle]=\\\"'The selected asset has no children.' | translate\\\"\\n        [horizontal]=\\\"true\\\"\\n      ></c8y-ui-empty-state>\\n      <ng-template #noSearchResults>\\n        <c8y-ui-empty-state\\n          [icon]=\\\"'folder-open'\\\"\\n          [title]=\\\"'No results to display for the current filter.' | translate\\\"\\n          [subtitle]=\\\"'There are no assets matching the filter.' | translate\\\"\\n          [horizontal]=\\\"true\\\"\\n        ></c8y-ui-empty-state>\\n      </ng-template>\\n    </div>\\n  </div>\\n</div>\\n\",\n  dependencies: [{\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.EmptyStateComponent,\n    selector: \"c8y-ui-empty-state\",\n    inputs: [\"icon\", \"title\", \"subtitle\", \"horizontal\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgClass,\n    selector: \"[ngClass]\",\n    inputs: [\"class\", \"ngClass\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgForOf,\n    selector: \"[ngFor][ngForOf]\",\n    inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgIf,\n    selector: \"[ngIf]\",\n    inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"]\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.LoadingComponent,\n    selector: \"c8y-loading\"\n  }, {\n    kind: \"component\",\n    type: AssetSelectorComponent,\n    selector: \"c8y-asset-selector\",\n    inputs: [\"config\", \"active\", \"index\", \"asset\", \"selectedDevice\", \"selected\", \"rootNode\", \"selectedItems\", \"container\"],\n    outputs: [\"onSelected\", \"onClearSelected\", \"onRowSelected\", \"onLoad\"]\n  }, {\n    kind: \"pipe\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.C8yTranslatePipe,\n    name: \"translate\"\n  }]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: MillerViewComponent,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Component,\n    args: [{\n      selector: 'c8y-asset-selector-miller',\n      providers: [{\n        provide: _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NG_VALUE_ACCESSOR,\n        useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(() => MillerViewComponent),\n        multi: true\n      }],\n      template: \"<div\\n  #millerViewWrapper\\n  class=\\\"miller-view-wrapper\\\"\\n  [ngClass]=\\\"{ 'single-column': config.singleColumn }\\\"\\n>\\n  <div *ngFor=\\\"let column of columns; index as i\\\" class=\\\"miller-column bg-inherit\\\">\\n    <c8y-asset-selector\\n      [config]=\\\"config\\\"\\n      [index]=\\\"i\\\"\\n      [active]=\\\"columns[i + 1]\\\"\\n      [rootNode]=\\\"column\\\"\\n      [selectedItems]=\\\"selected || []\\\"\\n      [selectedDevice]=\\\"selectedDevice\\\"\\n      (onSelected)=\\\"onSelectionChange($event)\\\"\\n      (onClearSelected)=\\\"onClearSelected.emit()\\\"\\n      (onRowSelected)=\\\"addNewColumn($event)\\\"\\n      (onLoad)=\\\"onLoad($event)\\\"\\n      [container]=\\\"container\\\"\\n      class=\\\"bg-inherit\\\"\\n    >\\n    </c8y-asset-selector>\\n\\n    <div class=\\\"p-relative p-b-64\\\" *ngIf=\\\"isLoading && columnIndex === i && !selectedDevice\\\">\\n      <c8y-loading></c8y-loading>\\n    </div>\\n\\n    <div *ngIf=\\\"!column.children.length && !isLoading\\\" class=\\\"p-l-8 p-r-8\\\">\\n      <c8y-ui-empty-state\\n        *ngIf=\\\"!filterText; else noSearchResults\\\"\\n        [icon]=\\\"'folder-open'\\\"\\n        [title]=\\\"'No results to display.' | translate\\\"\\n        [subtitle]=\\\"'The selected asset has no children.' | translate\\\"\\n        [horizontal]=\\\"true\\\"\\n      ></c8y-ui-empty-state>\\n      <ng-template #noSearchResults>\\n        <c8y-ui-empty-state\\n          [icon]=\\\"'folder-open'\\\"\\n          [title]=\\\"'No results to display for the current filter.' | translate\\\"\\n          [subtitle]=\\\"'There are no assets matching the filter.' | translate\\\"\\n          [horizontal]=\\\"true\\\"\\n        ></c8y-ui-empty-state>\\n      </ng-template>\\n    </div>\\n  </div>\\n</div>\\n\"\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: GroupNodeService\n    }, {\n      type: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n    }, {\n      type: AssetSelectorService\n    }, {\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.ChangeDetectorRef\n    }];\n  },\n  propDecorators: {\n    config: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    asset: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    selectedDevice: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    rootNode: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }],\n    onSelected: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Output\n    }],\n    onClearSelected: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Output\n    }],\n    millerViewWrapper: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.ViewChild,\n      args: ['millerViewWrapper']\n    }],\n    container: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.Input\n    }]\n  }\n});\nclass AssetSelectorModule {}\nAssetSelectorModule.fac = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetSelectorModule,\n  deps: [],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"FactoryTarget\"].NgModule\n});\nAssetSelectorModule.mod = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareNgModule\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetSelectorModule,\n  declarations: [AssetSelectorNodeComponent, AssetSelectorComponent, MillerViewComponent],\n  imports: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.CoreModule, _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.CommonModule, ngx_bootstrap_collapse__WEBPACK_IMPORTED_MODULE_6__.CollapseModule, ngx_bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_7__.BsDropdownModule, _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.SearchModule, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormsModule],\n  exports: [AssetSelectorNodeComponent, AssetSelectorComponent, MillerViewComponent]\n});\nAssetSelectorModule.inj = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareInjector\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetSelectorModule,\n  providers: [GroupNodeService, AssetSelectorService],\n  imports: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.CoreModule, _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.CommonModule, ngx_bootstrap_collapse__WEBPACK_IMPORTED_MODULE_6__.CollapseModule, ngx_bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_7__.BsDropdownModule, _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.SearchModule, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormsModule]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetSelectorModule,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.NgModule,\n    args: [{\n      imports: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.CoreModule, _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.CommonModule, ngx_bootstrap_collapse__WEBPACK_IMPORTED_MODULE_6__.CollapseModule, ngx_bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_7__.BsDropdownModule, _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.SearchModule, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormsModule],\n      exports: [AssetSelectorNodeComponent, AssetSelectorComponent, MillerViewComponent],\n      providers: [GroupNodeService, AssetSelectorService],\n      declarations: [AssetSelectorNodeComponent, AssetSelectorComponent, MillerViewComponent]\n    }]\n  }]\n});\nclass AssetsNavigatorModule {\n  static config(config = {}) {\n    return {\n      ngModule: AssetsNavigatorModule,\n      providers: [{\n        provide: ASSET_NAVIGATOR_CONFIG,\n        useValue: config\n      }]\n    };\n  }\n}\nAssetsNavigatorModule.fac = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetsNavigatorModule,\n  deps: [],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"FactoryTarget\"].NgModule\n});\nAssetsNavigatorModule.mod = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareNgModule\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetsNavigatorModule,\n  imports: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.ModalModule, AssetSelectorModule, _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.DeviceStatusModule]\n});\nAssetsNavigatorModule.inj = _angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareInjector\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetsNavigatorModule,\n  providers: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.ModalService, AssetNodeService, (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.hookNavigator)(AssetNodeFactory)],\n  imports: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.ModalModule, AssetSelectorModule, _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.DeviceStatusModule]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_3__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_3___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_3__, 2))),\n  type: AssetsNavigatorModule,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_3__.NgModule,\n    args: [{\n      declarations: [],\n      imports: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.ModalModule, AssetSelectorModule, _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.DeviceStatusModule],\n      providers: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.ModalService, AssetNodeService, (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.hookNavigator)(AssetNodeFactory)],\n      entryComponents: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_0__.DeviceStatusComponent]\n    }]\n  }]\n});\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGM4eS9uZ3gtY29tcG9uZW50cy9mZXNtMjAyMC9jOHktbmd4LWNvbXBvbmVudHMtYXNzZXRzLW5hdmlnYXRvci5tanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0hBO0FBTUE7QUFDQTtBQUxBO0FBQ0E7QUFDQTtBQUlBOztBQUdBO0FBQ0E7O0FBR0E7QUFDQTs7O0FBZkE7QUNZQTtBQXdDQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBcENBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUF3QkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBOztBQTNDQTtBQUNBOztBQUdBO0FBQ0E7O0FBR0E7QUFDQTs7QUFHQTtBQUNBOztBQWlDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7O0FBSUE7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTs7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7O0FBR0E7O0FBRUE7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFNQTtBQUNBOztBQUtBO0FBQ0E7O0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOztBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBOztBQUdBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTs7QUFHQTtBQUFBOzs7QUFHQTs7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBR0E7QUFBQTtBQUFBO0FBQ0E7O0FBRUE7QUFBQTtBQUFBO0FBRUE7OztBQTFYQTtBQ2JBO0FBQ0E7QUFDQTtBQURBO0FBRUE7QUFDQTs7QUFHQTtBQUNBOztBQUdBO0FBQ0E7O0FBR0E7QUFDQTs7QUFFQTtBQ2xCQTs7QUNLQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUFBOztBQUVBO0FBQ0E7O0FBR0E7QUFDQTs7QUFHQTtBQUNBOztBQUdBO0FBQ0E7O0FBR0E7QUFDQTs7QUFHQTtBQUNBOztBQUdBO0FBQ0E7O0FBR0E7QUFDQTs7Ozs7OztBQWhDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFSQTs7Ozs7QUFRQTtBQUFBO0FBVEE7QUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FDc0JBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWZBO0FBR0E7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7O0FBR0E7QUFDQTs7QUFHQTtBQUNBOztBQUdBO0FBQ0E7O0FBR0E7QUFDQTs7QUFHQTtBQUNBOztBQUdBO0FBQ0E7O0FBR0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7O0FBR0E7QUFDQTs7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBOztBQUdBO0FBQ0E7O0FBRUE7O0FBR0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7O0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFTQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBUUE7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTs7O0FBR0E7QUFDQTtBQUNBOztBQUtBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFoVEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWdCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFoQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRkE7Ozs7O0FBRUE7QUFBQTtBQUhBO0FBQUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBOztBQUFBO0FBQUE7Ozs7Ozs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFqQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7Ozs7O0FBSEE7QUFBQTs7Ozs7QUFBQTtBQUFBO0FBREE7Ozs7Ozs7O0FBSUE7O0FBQUE7QUFBQTs7Ozs7QUNMQTtBQXNCQTs7Ozs7OztBQU9BO0FBRUE7QUFDQTtBQURBO0FBNUJBOztBQUVBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFhQTtBQUNBO0FBQ0E7O0FBR0E7OztBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUdBOztBQUVBO0FBQ0E7QUFDQTs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFhQTtBQUNBOztBQU9BO0FBQ0E7O0FBR0E7QUFDQTs7O0FBbEdBO0FDQUE7QUFEQTs7QUFFQTtBQVNBO0FBUEE7QUFDQTs7QUFHQTtBQUNBOzs7Ozs7O0FBUkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTs7Ozs7QUFDQTtBQUFBO0FBREE7QUFBQTtBQUFBO0FBQUE7OztBQ0dBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBSUE7O0FBR0E7QUFJQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7Ozs7O0FBS0E7QUFDQTtBQUlBOztBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBdERBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRkE7Ozs7O0FBRUE7QUFBQTtBQUhBO0FBQUE7QUFDQTtBQUNBOzs7QUNPQTtBQTJFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeEVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFVQTs7QUFFQTtBQUNBO0FBS0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBSUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBR0E7O0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQVlBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBOztBQUdBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTs7O0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBMU1BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FDa01BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBRGxNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7O0FBQUE7QUFBQTtBQUpBOztBQUNBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7O0FBT0E7QUFBQTs7QUFJQTtBQUFBOztBQUlBO0FBQUE7O0FBSUE7QUFBQTs7QUFJQTtBQUFBOztBQUlBO0FBQUE7O0FBS0E7QUFBQTs7QUFJQTtBQUFBOztBQUlBO0FBQUE7O0FBSUE7QUFBQTs7QUFJQTtBQUFBOztBQUlBO0FBQUE7O0FBSUE7QUFBQTs7OztBRWxEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2QkE7QUFTQTtBQUNBO0FBREE7QUFQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTs7QUFHQTtBQUNBOztBQUdBO0FBQ0E7O0FBR0E7QUFDQTs7O0FBbENBO0FDQUE7QUF5QkE7QUFDQTtBQUNBO0FBQ0E7QUEzQkE7O0FBRUE7QUFDQTtBQUtBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFXQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBOztBQUdBOztBQUVBO0FBQ0E7QUFDQTs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7O0FBR0E7O0FBRUE7QUFDQTtBQUNBOztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7O0FBR0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7Ozs7O0FBS0E7QUFDQTtBQUlBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBRUE7O0FDL0lBOztBQUVBO0FBaUJBO0FBaUVBOztBQUVBO0FBQ0E7QUFNQTtBQUxBO0FBQ0E7QUFDQTtBQUNBO0FBdkVBOztBQUVBO0FBQ0E7QUFLQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUtBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQWNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTs7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUtBO0FBQ0E7QUFBQTs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBOztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7QUFHQTs7O0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBOztBQUdBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7QUE5U0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFiQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQzhIQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7QUQ1SEE7QUFBQTtBQWhCQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOzs7Ozs7Ozs7Ozs7OztBQU1BO0FBQUE7O0FBSUE7QUFBQTs7QUFLQTtBQUFBOztBQUlBO0FBQUE7O0FBSUE7QUFBQTs7QUFJQTtBQUFBOztBQUlBO0FBQUE7O0FBSUE7QUFBQTs7QUFDQTtBQUFBOztBQUlBO0FBQUE7O0FBSUE7QUFBQTs7QUFJQTtBQUFBOztBQUlBO0FBQUE7Ozs7QUUvREE7QUFpREE7QUFNQTtBQUxBO0FBQ0E7QUFDQTtBQUNBO0FBcERBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUtBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBS0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFXQTs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTs7QUFHQTs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBR0E7QUFDQTs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBbkpBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FDZ0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7QURkQTtBQUFBO0FBWEE7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7Ozs7Ozs7O0FBTUE7QUFBQTs7QUFJQTtBQUFBOztBQUlBO0FBQUE7O0FBSUE7QUFBQTs7QUFJQTtBQUFBOztBQUlBO0FBQUE7O0FBSUE7QUFBQTtBQUFBOztBQWNBO0FBQUE7Ozs7QUV2REE7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7O0FBQUE7QUFBQTtBQUZBO0FBSEE7QUFDQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUxBO0FBQUE7Ozs7O0FBS0E7QUFBQTtBQU5BO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7QUFWQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFKQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSkE7QUFBQTs7Ozs7QUFJQTtBQUFBO0FBTkE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNsQkE7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdW11bG9jaXR5LWFzc2V0LW92ZXJ2aWV3LXdpZGdldC8uLi8uLi9hc3NldHMtbmF2aWdhdG9yL2FjdGlvbi5lbnVtLnRzP2I1MWEiLCJ3ZWJwYWNrOi8vY3VtdWxvY2l0eS1hc3NldC1vdmVydmlldy13aWRnZXQvLi4vLi4vYXNzZXRzLW5hdmlnYXRvci9sb2FkLW1vcmUtbm9kZS50cz81OWQ1Iiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2Fzc2V0cy1uYXZpZ2F0b3IvYXNzZXQtbm9kZS50cz84NGJlIiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2Fzc2V0cy1uYXZpZ2F0b3IvZHluYW1pYy1ncm91cC1ub2RlLnRzPzM4M2IiLCJ3ZWJwYWNrOi8vY3VtdWxvY2l0eS1hc3NldC1vdmVydmlldy13aWRnZXQvLi4vLi4vYXNzZXRzLW5hdmlnYXRvci9hc3NldC1ub2RlLWNvbmZpZy5tb2RlbC50cz9hMjkxIiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2Fzc2V0cy1uYXZpZ2F0b3IvZ3JvdXAuc2VydmljZS50cz81MmI5Iiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2Fzc2V0cy1uYXZpZ2F0b3IvYXNzZXQtbm9kZS5zZXJ2aWNlLnRzP2ZhNDQiLCJ3ZWJwYWNrOi8vY3VtdWxvY2l0eS1hc3NldC1vdmVydmlldy13aWRnZXQvLi4vLi4vYXNzZXRzLW5hdmlnYXRvci9hc3NldC1ub2RlLmZhY3RvcnkudHM/Njc2MCIsIndlYnBhY2s6Ly9jdW11bG9jaXR5LWFzc2V0LW92ZXJ2aWV3LXdpZGdldC8uLi8uLi9hc3NldHMtbmF2aWdhdG9yL2Fzc2V0LXNlbGVjdG9yL2dyb3VwLW5vZGUudHM/MjE0YSIsIndlYnBhY2s6Ly9jdW11bG9jaXR5LWFzc2V0LW92ZXJ2aWV3LXdpZGdldC8uLi8uLi9hc3NldHMtbmF2aWdhdG9yL2Fzc2V0LXNlbGVjdG9yL2dyb3VwLW5vZGUuc2VydmljZS50cz85MmQ4Iiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2Fzc2V0cy1uYXZpZ2F0b3IvYXNzZXQtc2VsZWN0b3IvYXNzZXQtc2VsZWN0b3Iuc2VydmljZS50cz9hY2I2Iiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2Fzc2V0cy1uYXZpZ2F0b3IvYXNzZXQtc2VsZWN0b3IvYXNzZXQtc2VsZWN0b3Itbm9kZS5jb21wb25lbnQudHM/NjRlYSIsIndlYnBhY2s6Ly9jdW11bG9jaXR5LWFzc2V0LW92ZXJ2aWV3LXdpZGdldC8uLi8uLi9hc3NldHMtbmF2aWdhdG9yL2Fzc2V0LXNlbGVjdG9yL2Fzc2V0LXNlbGVjdG9yLW5vZGUuY29tcG9uZW50Lmh0bWw/YTAyMiIsIndlYnBhY2s6Ly9jdW11bG9jaXR5LWFzc2V0LW92ZXJ2aWV3LXdpZGdldC8uLi8uLi9hc3NldHMtbmF2aWdhdG9yL2Fzc2V0LXNlbGVjdG9yL2Fzc2V0LXNlbGVjdG9yLm1vZGVsLnRzPzdhMDgiLCJ3ZWJwYWNrOi8vY3VtdWxvY2l0eS1hc3NldC1vdmVydmlldy13aWRnZXQvLi4vLi4vYXNzZXRzLW5hdmlnYXRvci9hc3NldC1zZWxlY3Rvci91bmFzc2lnbmVkLWRldmljZXMtbm9kZS50cz9iZjMxIiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2Fzc2V0cy1uYXZpZ2F0b3IvYXNzZXQtc2VsZWN0b3IvYXNzZXQtc2VsZWN0b3ItYmFzZS50cz84MWU3Iiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2Fzc2V0cy1uYXZpZ2F0b3IvYXNzZXQtc2VsZWN0b3IvYXNzZXQtc2VsZWN0b3IuY29tcG9uZW50LnRzPzVmYzMiLCJ3ZWJwYWNrOi8vY3VtdWxvY2l0eS1hc3NldC1vdmVydmlldy13aWRnZXQvLi4vLi4vYXNzZXRzLW5hdmlnYXRvci9hc3NldC1zZWxlY3Rvci9hc3NldC1zZWxlY3Rvci5jb21wb25lbnQuaHRtbD8xYzk0Iiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2Fzc2V0cy1uYXZpZ2F0b3IvYXNzZXQtc2VsZWN0b3IvbWlsbGVyLXZpZXcuY29tcG9uZW50LnRzPzIxM2MiLCJ3ZWJwYWNrOi8vY3VtdWxvY2l0eS1hc3NldC1vdmVydmlldy13aWRnZXQvLi4vLi4vYXNzZXRzLW5hdmlnYXRvci9hc3NldC1zZWxlY3Rvci9taWxsZXItdmlldy5jb21wb25lbnQuaHRtbD9jNjY0Iiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2Fzc2V0cy1uYXZpZ2F0b3IvYXNzZXQtc2VsZWN0b3IvYXNzZXQtc2VsZWN0b3IubW9kdWxlLnRzP2FjODMiLCJ3ZWJwYWNrOi8vY3VtdWxvY2l0eS1hc3NldC1vdmVydmlldy13aWRnZXQvLi4vLi4vYXNzZXRzLW5hdmlnYXRvci9hc3NldHMtbmF2aWdhdG9yLm1vZHVsZS50cz9lOWFlIiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2Fzc2V0cy1uYXZpZ2F0b3IvYzh5LW5neC1jb21wb25lbnRzLWFzc2V0cy1uYXZpZ2F0b3IudHM/MWZlZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZW51bSBBY3Rpb24ge1xuICBGRVRDSCxcbiAgTkVYVCxcbiAgUkVGUkVTSCxcbiAgTE9BRElOR19ET05FXG59XG4iLCJpbXBvcnQgeyBOYXZpZ2F0b3JOb2RlLCBnZXR0ZXh0IH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5cbmV4cG9ydCBjbGFzcyBMb2FkTW9yZU5vZGUgZXh0ZW5kcyBOYXZpZ2F0b3JOb2RlIHtcbiAgc3RhdGljIE5BTUUgPSAnTG9hZE1vcmVOb2RlJztcbiAgbGFiZWwgPSBnZXR0ZXh0KCdMb2FkIG1vcmUnKTtcbiAgaWNvbiA9ICdwbHVzJztcbiAgZHJvcHBhYmxlID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMucHJpb3JpdHkgPSAtSW5maW5pdHk7XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gTG9hZE1vcmVOb2RlLk5BTUU7XG4gIH1cblxuICBpc0dyb3VwKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgSUlkZW50aWZpZWQsIFBhZ2luZyB9IGZyb20gJ0BjOHkvY2xpZW50JztcbmltcG9ydCB7XG4gIENsaWNrT3B0aW9ucyxcbiAgRGV2aWNlU3RhdHVzQ29tcG9uZW50LFxuICBnZXR0ZXh0LFxuICBHcm91cEZyYWdtZW50LFxuICBOYXZpZ2F0b3JOb2RlLFxuICBOYXZpZ2F0b3JOb2RlRGF0YVxufSBmcm9tICdAYzh5L25neC1jb21wb25lbnRzJztcbmltcG9ydCB7IGRlYm91bmNlLCBnZXQgfSBmcm9tICdsb2Rhc2gtZXMnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBTdWJqZWN0LCBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gJy4vYWN0aW9uLmVudW0nO1xuaW1wb3J0IHsgQXNzZXROb2RlTW8sIEFzc2V0Tm9kZVNlcnZpY2UgfSBmcm9tICcuL2Fzc2V0LW5vZGUuc2VydmljZSc7XG5pbXBvcnQgeyBMb2FkTW9yZU5vZGUgfSBmcm9tICcuL2xvYWQtbW9yZS1ub2RlJztcblxuZXhwb3J0IGNsYXNzIEFzc2V0Tm9kZSBleHRlbmRzIE5hdmlnYXRvck5vZGUge1xuICBzdGF0aWMgTkFNRSA9ICdBc3NldE5vZGUnO1xuICByb290OiBib29sZWFuO1xuICBtbzogYW55O1xuICBoaWRlRGV2aWNlcyA9IGZhbHNlO1xuICBmaWx0ZXJRdWVyeSQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PHN0cmluZz4oJycpO1xuICBzaG93Q2hpbGREZXZpY2VzID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEFzc2V0IG5vZGUgY2hpbGRyZW4gKHN1YmVudHJpZXMpLlxuICAgKi9cbiAgY2hpbGRyZW46IEFzc2V0Tm9kZVtdID0gW107XG5cbiAgZ2V0IGhhc0NoaWxkcmVuKCkge1xuICAgIHJldHVybiB0aGlzLnJvb3QgfHwgdGhpcy5zZXJ2aWNlLmlzR3JvdXAodGhpcy5tbyk7XG4gIH1cblxuICBnZXQgaXNEZXZpY2UoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5tby5jOHlfSXNEZXZpY2U7XG4gIH1cblxuICBnZXQgaXNEZXZpY2VPclByb2JhYmx5Q2hpbGREZXZpY2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNEZXZpY2UgfHwgdGhpcy5pc05laXRoZXJEZXZpY2VPckdyb3VwO1xuICB9XG5cbiAgZ2V0IGlzTmVpdGhlckRldmljZU9yR3JvdXAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICF0aGlzLnNlcnZpY2UuaXNHcm91cCh0aGlzLm1vKSAmJlxuICAgICAgIXRoaXMuc2VydmljZS5pc0R5bmFtaWNHcm91cCh0aGlzLm1vKSAmJlxuICAgICAgIXRoaXMuaXNEZXZpY2UgJiZcbiAgICAgICF0aGlzLnJvb3RcbiAgICApO1xuICB9XG5cbiAgZXZlbnRzOiBTdWJqZWN0PEFjdGlvbj47XG4gIG5vZGVzRmV0Y2hlZDogU3ViamVjdDxhbnk+ID0gbmV3IFN1YmplY3QoKTtcbiAgcHJvdGVjdGVkIHBhZ2luZzogUGFnaW5nPEFzc2V0Tm9kZU1vPjtcbiAgcHJvdGVjdGVkIGxvYWRNb3JlTm9kZTogTG9hZE1vcmVOb2RlO1xuICBwcml2YXRlIG9uVXBkYXRlU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG5cbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIHNlcnZpY2U6IEFzc2V0Tm9kZVNlcnZpY2UsIHByb3RlY3RlZCBjb25maWc6IE5hdmlnYXRvck5vZGVEYXRhID0ge30pIHtcbiAgICBzdXBlcihjb25maWcpO1xuXG4gICAgdGhpcy5yb290ID0gdGhpcy5yb290IHx8IGZhbHNlO1xuICAgIHRoaXMuaGlkZURldmljZXMgPSBjb25maWcuaGlkZURldmljZXMgPz8gdGhpcy5oaWRlRGV2aWNlcztcbiAgICB0aGlzLm1vID0gdGhpcy5tbyB8fCB7fTtcbiAgICB0aGlzLnBhdGggPSB0aGlzLmdldFBhdGgoKTtcbiAgICB0aGlzLmRyYWdnYWJsZSA9ICF0aGlzLnNlcnZpY2U/Lm1vZHVsZUNvbmZpZz8uZGlzYWJsZURyYWdBbmREcm9wICYmICF0aGlzLnJvb3Q7XG4gICAgdGhpcy5kcm9wcGFibGUgPVxuICAgICAgIXRoaXMuc2VydmljZT8ubW9kdWxlQ29uZmlnPy5kaXNhYmxlRHJhZ0FuZERyb3AgJiYgIXRoaXMuaXNEZXZpY2VPclByb2JhYmx5Q2hpbGREZXZpY2U7XG4gICAgdGhpcy5yb3V0ZXJMaW5rRXhhY3QgPSB0aGlzLnJvb3Q7XG4gICAgdGhpcy51cGRhdGVJY29uKGZhbHNlKTtcbiAgICB0aGlzLm9uVXBkYXRlU3Vic2NyaXB0aW9uID0gdGhpcy5zZXJ2aWNlXG4gICAgICAub25VcGRhdGUodGhpcylcbiAgICAgIC5zdWJzY3JpYmUoKHsgZGF0YSwgbWV0aG9kIH0pID0+IHRoaXMucmVmcmVzaChkYXRhLCBtZXRob2QpKTtcbiAgICB0aGlzLnNldExhYmVsKCk7XG4gICAgdGhpcy5pY29uQ29tcG9uZW50ID0gdGhpcy5pc0RldmljZU9yUHJvYmFibHlDaGlsZERldmljZSA/IERldmljZVN0YXR1c0NvbXBvbmVudCA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGdldFBhdGgoKSB7XG4gICAgaWYgKHRoaXMuY29uZmlnLnBhdGgpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5wYXRoO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJvb3RcbiAgICAgID8gJ2dyb3VwJ1xuICAgICAgOiB0aGlzLmlzRGV2aWNlT3JQcm9iYWJseUNoaWxkRGV2aWNlXG4gICAgICA/IGBkZXZpY2UvJHt0aGlzLm1vLmlkfWBcbiAgICAgIDogYGdyb3VwLyR7dGhpcy5tby5pZH1gO1xuICB9XG5cbiAgb3Blbk9uU3RhcnQodXJsKSB7XG4gICAgY29uc3QgdXJsUmVnZXggPSAvXlxcL2dyb3VwXFwvLztcbiAgICBpZiAodGhpcy5yb290KSB7XG4gICAgICBpZiAodGhpcy5zZXJ2aWNlLm1vZHVsZUNvbmZpZy5vcGVuT25TdGFydCB8fCB1cmxSZWdleC50ZXN0KHVybCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG1hdGNoZXMgPSB1cmwubWF0Y2goL1xcLyhncm91cClcXC8oXFxkKykvKTtcbiAgICBsZXQgaXNNYXRjaCA9IGZhbHNlO1xuICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICBjb25zdCBpZCA9IG1hdGNoZXNbMl07XG4gICAgICBpc01hdGNoID0gW11cbiAgICAgICAgLmNvbmNhdChnZXQodGhpcy5tbywgJ2NoaWxkQXNzZXRzLnJlZmVyZW5jZXMnLCBbXSkpXG4gICAgICAgIC5zb21lKCh7IG1hbmFnZWRPYmplY3QgfSkgPT4gbWFuYWdlZE9iamVjdC5pZCA9PT0gaWQpO1xuICAgICAgcmV0dXJuIGlzTWF0Y2g7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJlZnJlc2gobW86IGFueSA9IHt9LCBtZXRob2QgPSAnR0VUJykge1xuICAgIGlmIChtbz8uaWQgPT09IHRoaXMubW8uaWQpIHtcbiAgICAgIHRoaXMubW8gPSBtbztcbiAgICAgIHRoaXMuc2V0TGFiZWwoKTtcbiAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PT0gJ0RFTEVURScpIHtcbiAgICAgIHRoaXMucGFyZW50cy5mb3JFYWNoKChub2RlOiBBc3NldE5vZGUpID0+IG5vZGUucmVmcmVzaCgpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuZXZlbnRzKSB7XG4gICAgICB0aGlzLmV2ZW50cy5uZXh0KEFjdGlvbi5SRUZSRVNIKTtcbiAgICB9XG4gIH1cblxuICBzZXRMYWJlbCgpIHtcbiAgICB0aGlzLmxhYmVsID0gdGhpcy5jb25maWcubGFiZWwgfHwgKHRoaXMucm9vdCAmJiBnZXR0ZXh0KCdHcm91cHMnKSkgfHwgdGhpcy5tby5uYW1lIHx8ICctLSc7XG4gIH1cblxuICBjbGljayhvcHRpb25zOiBDbGlja09wdGlvbnMgPSB7fSkge1xuICAgIGlmICh0aGlzLmlzRGV2aWNlT3JQcm9iYWJseUNoaWxkRGV2aWNlICYmICF0aGlzLnNob3dDaGlsZERldmljZXMpIHtcbiAgICAgIHRoaXMuc2VydmljZS5wcmVmZXJCcmVhZGNydW1iKHRoaXMucGFyZW50cyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaG9va0V2ZW50cygpO1xuICAgIHRoaXMudXBkYXRlSWNvbihvcHRpb25zLm9wZW4pO1xuICAgIGlmIChvcHRpb25zLm9wZW4pIHtcbiAgICAgIHRoaXMuZXZlbnRzLm5leHQoQWN0aW9uLkZFVENIKTtcbiAgICB9XG4gIH1cblxuICBzb3J0KCkge1xuICAgIHRoaXMuY2hpbGRyZW4uc29ydCgoYSwgYikgPT4ge1xuICAgICAgaWYgKGEucHJpb3JpdHkgPiBiLnByaW9yaXR5KSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH0gZWxzZSBpZiAoYS5wcmlvcml0eSA8IGIucHJpb3JpdHkpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFkZE1hbmFnZWRPYmplY3QobW8pIHtcbiAgICBjb25zdCB7IGNoaWxkQWRkaXRpb25zIH0gPSB0aGlzLm1vO1xuICAgIGlmICghdGhpcy5pc0NoaWxkQWRkaXRpb24oY2hpbGRBZGRpdGlvbnMsIG1vKSkge1xuICAgICAgdGhpcy5hZGQodGhpcy5zZXJ2aWNlLmNyZWF0ZUNoaWxkTm9kZShtbywgeyBoaWRlRGV2aWNlczogdGhpcy5oaWRlRGV2aWNlcyB9KSk7XG4gICAgfVxuICB9XG5cbiAgaXNDaGlsZEFkZGl0aW9uKGNoaWxkQWRkaXRpb25zLCBtbykge1xuICAgIHJldHVybiAoXG4gICAgICBjaGlsZEFkZGl0aW9ucyAmJiBjaGlsZEFkZGl0aW9ucy5yZWZlcmVuY2VzLnNvbWUoKHsgbWFuYWdlZE9iamVjdDogeyBpZCB9IH0pID0+IGlkID09PSBtby5pZClcbiAgICApO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLm9uVXBkYXRlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gIH1cblxuICBnZXQgY2FuRHJvcCgpIHtcbiAgICBjb25zdCBub2RlVG9Nb3ZlID0gdGhpcy5zZXJ2aWNlLmRyYWdnZWREYXRhO1xuICAgIGlmIChub2RlVG9Nb3ZlKSB7XG4gICAgICBjb25zdCBzaG91bGRHZXRDaGlsZE9mSXRzT3duID0gISFub2RlVG9Nb3ZlLmZpbmQoY2hpbGQgPT4gY2hpbGQgPT09IHRoaXMpO1xuICAgICAgY29uc3QgaXNBbHJlYWR5Q2hpbGQgPSAodGhpcy5jaGlsZHJlbiBhcyBBc3NldE5vZGVbXSkuc29tZShcbiAgICAgICAgY2hpbGQgPT4gY2hpbGQubW8gJiYgY2hpbGQubW8uaWQgPT09IG5vZGVUb01vdmUubW8uaWRcbiAgICAgICk7XG4gICAgICBjb25zdCBwcmV2ZW50TW92ZSA9IHRoaXMgPT09IG5vZGVUb01vdmUgfHwgc2hvdWxkR2V0Q2hpbGRPZkl0c093biB8fCBpc0FscmVhZHlDaGlsZDtcbiAgICAgIHJldHVybiB0aGlzLmRyb3BwYWJsZSAmJiAhcHJldmVudE1vdmUgJiYgdGhpcy5zZXJ2aWNlLmNhbkRyb3BOb2RlKHRoaXMucm9vdCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmRyb3BwYWJsZTtcbiAgfVxuXG4gIGRyYWdTdGFydCgkZXZlbnQpIHtcbiAgICBzdXBlci5kcmFnU3RhcnQoJGV2ZW50KTtcbiAgICB0aGlzLnNlcnZpY2UuZHJhZ2dlZERhdGEgPSB0aGlzO1xuICAgIHRoaXMuc2VydmljZS5yb290Tm9kZS5kcm9wcGFibGUgPSAhdGhpcy5pc0RldmljZU9yUHJvYmFibHlDaGlsZERldmljZTtcbiAgfVxuXG4gIGRyYWdFbmQoJGV2ZW50KSB7XG4gICAgc3VwZXIuZHJhZ0VuZCgkZXZlbnQpO1xuICB9XG5cbiAgYXN5bmMgZHJvcCgkZXZlbnQpIHtcbiAgICBjb25zdCBub2RlVG9Nb3ZlID0gdGhpcy5zZXJ2aWNlLmRyYWdnZWREYXRhO1xuXG4gICAgLy8gVE9ETyByZW1vdmUgd2hlbiBhc3NldCB0eXBlIG5vZGUgY2FuIGJlIHVzZWQgb24gdGhlIHJvb3QgbGV2ZWwuXG4gICAgaWYgKHRoaXMucm9vdCAmJiB0aGlzLmlzQXNzZXQobm9kZVRvTW92ZSkpIHtcbiAgICAgIHRoaXMuc2VydmljZS5hbGVydC5pbmZvKGdldHRleHQoJ0Fzc2V0IHR5cGUgbm9kZSBjYW5ub3QgYmVjb21lIHJvb3Qgbm9kZS4nKSk7XG4gICAgICB0aGlzLmRyYWdnZWRIb3ZlciA9IGZhbHNlO1xuICAgICAgdGhpcy5zZXJ2aWNlLmRyYWdnZWREYXRhID0gdW5kZWZpbmVkO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN1cGVyLmRyb3AoJGV2ZW50KTtcbiAgICBpZiAodGhpcy5jYW5Ecm9wKSB7XG4gICAgICBhd2FpdCB0aGlzLm1vdmVOb2RlKG5vZGVUb01vdmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRyYWdnZWRIb3ZlciA9IGZhbHNlO1xuICAgICAgdGhpcy5zZXJ2aWNlLmRyYWdnZWREYXRhID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIGhvb2tFdmVudHMoKSB7XG4gICAgaWYgKCF0aGlzLmV2ZW50cykge1xuICAgICAgdGhpcy5ldmVudHMgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgdGhpcy5ldmVudHMuc3Vic2NyaWJlKGV2dCA9PiB7XG4gICAgICAgIGlmICghdGhpcy5sb2FkaW5nKSB7XG4gICAgICAgICAgdGhpcy5oYW5kbGVFdmVudChldnQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gQXNzZXROb2RlLk5BTUU7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSBjdXJyZW50IG5vZGUgaGFzIGNoaWxkIGRldmljZXMuXG4gICAqL1xuICBoYXNDaGlsZERldmljZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMubW8gJiYgdGhpcy5tby5jOHlfSXNEZXZpY2UgJiYgdGhpcy5tby5jaGlsZERldmljZXMucmVmZXJlbmNlcy5sZW5ndGggPiAwO1xuICB9XG5cbiAgcHJvdGVjdGVkIGZldGNoKCkge1xuICAgIHJldHVybiB0aGlzLnJvb3RcbiAgICAgID8gdGhpcy5zZXJ2aWNlLmdldFJvb3ROb2RlcygpXG4gICAgICA6IHRoaXMuc2VydmljZS5nZXRHcm91cEl0ZW1zKFxuICAgICAgICAgIHRoaXMubW8uaWQsXG4gICAgICAgICAgdGhpcy5oaWRlRGV2aWNlc1xuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgcXVlcnk6IGAkZmlsdGVyPShoYXMoJHtHcm91cEZyYWdtZW50Lmdyb3VwRnJhZ21lbnRUeXBlfSkpJG9yZGVyYnk9bmFtZWBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7fVxuICAgICAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIGNvdW50Q2hpbGRyZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hpbGRyZW4ubGVuZ3RoO1xuICB9XG5cbiAgcHJvdGVjdGVkIGFzeW5jIGhhbmRsZUV2ZW50KGV2dDogQWN0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmNvdW50Q2hpbGRyZW4oKSAmJiBldnQgPT09IEFjdGlvbi5GRVRDSCkge1xuICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuYWRkTm9kZXMoYXdhaXQgdGhpcy5mZXRjaCgpKTtcbiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoZXZ0ID09PSBBY3Rpb24uTkVYVCkge1xuICAgICAgdGhpcy5sb2FkTW9yZU5vZGUubG9hZGluZyA9IHRydWU7XG4gICAgICB0aGlzLmFkZE5vZGVzKGF3YWl0IHRoaXMucGFnaW5nLm5leHQoKSk7XG4gICAgICB0aGlzLmxvYWRNb3JlTm9kZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChldnQgPT09IEFjdGlvbi5SRUZSRVNIKSB7XG4gICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMucGFnaW5nID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5sb2FkTW9yZU5vZGUgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmVtcHR5KCk7XG4gICAgICB0aGlzLmV2ZW50cy5uZXh0KEFjdGlvbi5GRVRDSCk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGFkZE5vZGVzKHJlcykge1xuICAgIGlmIChyZXMucGFnaW5nKSB7XG4gICAgICBjb25zdCB7IGN1cnJlbnRQYWdlLCBuZXh0UGFnZSwgcGFnZVNpemUgfSA9ICh0aGlzLnBhZ2luZyA9IHJlcy5wYWdpbmcpO1xuICAgICAgaWYgKGN1cnJlbnRQYWdlID09PSAxKSB7XG4gICAgICAgIHRoaXMuZW1wdHkoKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGl0ZW1zQ291bnQgPSByZXMuZGF0YS5sZW5ndGg7XG4gICAgICBjb25zdCBtb3JlSXRlbXNBdmFpbGFibGUgPSAhIW5leHRQYWdlICYmIGl0ZW1zQ291bnQgPT09IHBhZ2VTaXplO1xuICAgICAgdGhpcy50b2dnbGVMb2FkTW9yZShtb3JlSXRlbXNBdmFpbGFibGUpO1xuICAgIH1cbiAgICAocmVzLmRhdGEgfHwgcmVzKS5tYXAobW8gPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYWRkTWFuYWdlZE9iamVjdChtbyk7XG4gICAgfSk7XG4gICAgdGhpcy5ldmVudHMubmV4dChBY3Rpb24uTE9BRElOR19ET05FKTtcbiAgICB0aGlzLm5vZGVzRmV0Y2hlZC5uZXh0KCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgdG9nZ2xlTG9hZE1vcmUoc2hvdzogYm9vbGVhbikge1xuICAgIGlmICghdGhpcy5sb2FkTW9yZU5vZGUgJiYgc2hvdykge1xuICAgICAgdGhpcy5sb2FkTW9yZU5vZGUgPSBuZXcgTG9hZE1vcmVOb2RlKCk7XG4gICAgICB0aGlzLmFkZCh0aGlzLmxvYWRNb3JlTm9kZSk7XG4gICAgICB0aGlzLmxvYWRNb3JlTm9kZS5jbGljayA9IGRlYm91bmNlKCgpID0+IHRoaXMuZXZlbnRzLm5leHQoQWN0aW9uLk5FWFQpLCAzMDAsIHtcbiAgICAgICAgbGVhZGluZzogdHJ1ZSxcbiAgICAgICAgdHJhaWxpbmc6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5sb2FkTW9yZU5vZGUpIHtcbiAgICAgIHRoaXMubG9hZE1vcmVOb2RlLmhpZGRlbiA9ICFzaG93O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbW92ZU5vZGUobm9kZVRvTW92ZTogQXNzZXROb2RlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGlzQ29weSA9IGF3YWl0IHRoaXMuc2hvd0Ryb3BDb25maXJtKG5vZGVUb01vdmUpO1xuICAgICAgYXdhaXQgdGhpcy52ZXJpZnlOb2RlQWNjZXNzKG5vZGVUb01vdmUpO1xuICAgICAgYXdhaXQgdGhpcy5hZGRNb3ZlZE5vZGUobm9kZVRvTW92ZSk7XG4gICAgICBpZiAoIWlzQ29weSkge1xuICAgICAgICBhd2FpdCB0aGlzLnJlbW92ZU1vdmVkTm9kZShub2RlVG9Nb3ZlKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZXhwYW5kKCk7XG4gICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgIGlmIChleCkge1xuICAgICAgICB0aGlzLnNlcnZpY2UuYWxlcnQuYWRkU2VydmVyRmFpbHVyZShleCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuZHJhZ2dlZEhvdmVyID0gZmFsc2U7XG4gICAgICB0aGlzLnNlcnZpY2UuZHJhZ2dlZERhdGEgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzaG93RHJvcENvbmZpcm0obm9kZVRvTW92ZTogQXNzZXROb2RlKSB7XG4gICAgdGhpcy5jb25maXJtLnRpdGxlID0gZ2V0dGV4dCgnTW92ZScpO1xuICAgIHRoaXMuY29uZmlybS5tZXNzYWdlID0gZ2V0dGV4dCgnRG8geW91IHdhbnQgdG8gbW92ZSB0aGUgZ3JvdXA/Jyk7XG4gICAgY29uc3QgYnV0dG9uczogYW55ID0gW1xuICAgICAge1xuICAgICAgICBsYWJlbDogZ2V0dGV4dCgnQ2FuY2VsJyksXG4gICAgICAgIGFjdGlvbjogKCkgPT4gUHJvbWlzZS5yZWplY3QoKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbGFiZWw6IGdldHRleHQoJ01vdmUnKSxcbiAgICAgICAgc3RhdHVzOiAnZGVmYXVsdCcsXG4gICAgICAgIGFjdGlvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKVxuICAgICAgfVxuICAgIF07XG4gICAgaWYgKG5vZGVUb01vdmUuaXNEZXZpY2VPclByb2JhYmx5Q2hpbGREZXZpY2UpIHtcbiAgICAgIHRoaXMuY29uZmlybS50aXRsZSA9IGdldHRleHQoJ01vdmUgb3IgYWRkJyk7XG4gICAgICB0aGlzLmNvbmZpcm0ubWVzc2FnZSA9IGdldHRleHQoJ0RvIHlvdSB3YW50IHRvIG1vdmUgb3IgYWRkIHRoZSBkZXZpY2U/Jyk7XG4gICAgICBidXR0b25zLnB1c2goe1xuICAgICAgICBsYWJlbDogZ2V0dGV4dCgnQWRkJyksXG4gICAgICAgIHN0YXR1czogJ3ByaW1hcnknLFxuICAgICAgICBhY3Rpb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh0cnVlKVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNvbmZpcm0uc2hvdyhidXR0b25zKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdmVyaWZ5Tm9kZUFjY2Vzcyhub2RlVG9Nb3ZlOiBBc3NldE5vZGUpIHtcbiAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLmludmVudG9yeS51cGRhdGUoeyBpZDogbm9kZVRvTW92ZS5tby5pZCB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYWRkTW92ZWROb2RlKG5vZGVUb01vdmU6IEFzc2V0Tm9kZSkge1xuICAgIGxldCBtbzogSUlkZW50aWZpZWQ7XG5cbiAgICBpZiAodGhpcy5yb290ICYmICF0aGlzLmlzQXNzZXQobm9kZVRvTW92ZSkpIHtcbiAgICAgIG1vID0gKFxuICAgICAgICBhd2FpdCB0aGlzLnNlcnZpY2UuaW52ZW50b3J5LnVwZGF0ZSh7XG4gICAgICAgICAgaWQ6IG5vZGVUb01vdmUubW8uaWQsXG4gICAgICAgICAgdHlwZTogR3JvdXBGcmFnbWVudC5ncm91cFR5cGVcbiAgICAgICAgfSlcbiAgICAgICkuZGF0YTtcblxuICAgICAgdGhpcy5hZGRNYW5hZ2VkT2JqZWN0KG1vKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBtbyA9IChhd2FpdCB0aGlzLnNlcnZpY2UuaW52ZW50b3J5LmNoaWxkQXNzZXRzQWRkKG5vZGVUb01vdmUubW8sIHRoaXMubW8pKS5kYXRhO1xuICAgIHRoaXMuYWRkTWFuYWdlZE9iamVjdChtbyk7XG4gIH1cblxuICBwcml2YXRlIGlzQXNzZXQobm9kZVRvTW92ZTogQXNzZXROb2RlKSB7XG4gICAgLy8gVE9ETyB1c2UgaXNBc3NldCBjaGVjayB3aGVuIGh0dHBzOi8vZ2l0aHViLnNvZnR3YXJlYWcuY29tL0lPVEEvY3VtdWxvY2l0eS11aS9wdWxsLzY5MCBpcyBtZXJnZWQuXG4gICAgLy8gRG8gbm90IG92ZXJyaWRlIGFzc2V0IHR5cGUhXG4gICAgcmV0dXJuIG5vZGVUb01vdmUubW8/LmM4eV9Jc0Fzc2V0O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZW1vdmVNb3ZlZE5vZGUobm9kZVRvTW92ZTogQXNzZXROb2RlKSB7XG4gICAgZm9yIChjb25zdCBwYXJlbnQgb2Ygbm9kZVRvTW92ZS5wYXJlbnRzIGFzIEFzc2V0Tm9kZVtdKSB7XG4gICAgICBpZiAocGFyZW50Lm1vICYmIHBhcmVudC5tby50eXBlID09PSBHcm91cEZyYWdtZW50LmR5bmFtaWNHcm91cFR5cGUpIHtcbiAgICAgICAgYnJlYWs7IC8vIHNtYXJ0IGdyb3VwcyBkb24ndCBuZWVkIHRvIGJlIGNoYW5nZWRcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudC5yb290ICYmICF0aGlzLmlzQXNzZXQobm9kZVRvTW92ZSkpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZXJ2aWNlLmludmVudG9yeS51cGRhdGUoe1xuICAgICAgICAgIGlkOiBub2RlVG9Nb3ZlLm1vLmlkLFxuICAgICAgICAgIHR5cGU6IEdyb3VwRnJhZ21lbnQuc3ViR3JvdXBUeXBlXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXBhcmVudC5yb290KSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VydmljZS5pbnZlbnRvcnkuY2hpbGRBc3NldHNSZW1vdmUobm9kZVRvTW92ZS5tbywgcGFyZW50Lm1vKTtcbiAgICAgIH1cbiAgICAgIHBhcmVudC5yZW1vdmUobm9kZVRvTW92ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVJY29uKG9wZW4pIHtcbiAgICB0aGlzLmljb24gPSBhd2FpdCB0aGlzLnNlcnZpY2UuaWNvbihcbiAgICAgIC8vIGlmIGl0J3Mgcm9vdCB3ZSBhcmUgZ29pbmcgdG8gcGFzcyBhIGZha2UgbW8gdG8gZ2V0IHRoZSBzYW1lIGljb24gYXMgZ3JvdXBzXG4gICAgICB0aGlzLnJvb3QgPyB7IGM4eV9Jc0RldmljZUdyb3VwOiB7fSB9IDogdGhpcy5tbyxcbiAgICAgIG9wZW5cbiAgICApO1xuICB9XG59XG4iLCJpbXBvcnQgeyBBc3NldE5vZGUgfSBmcm9tICcuL2Fzc2V0LW5vZGUnO1xuaW1wb3J0IHsgQXNzZXROb2RlU2VydmljZSB9IGZyb20gJy4vYXNzZXQtbm9kZS5zZXJ2aWNlJztcblxuZXhwb3J0IGNsYXNzIER5bmFtaWNHcm91cE5vZGUgZXh0ZW5kcyBBc3NldE5vZGUge1xuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgc2VydmljZTogQXNzZXROb2RlU2VydmljZSwgY29uZmlnID0ge30pIHtcbiAgICBzdXBlcihzZXJ2aWNlLCBjb25maWcpO1xuICAgIHRoaXMuZHJhZ2dhYmxlID0gZmFsc2U7XG4gICAgdGhpcy5kcm9wcGFibGUgPSBmYWxzZTtcbiAgfVxuXG4gIGdldCBoYXNDaGlsZHJlbigpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGdldCBxdWVyeSgpIHtcbiAgICByZXR1cm4gdGhpcy5tby5jOHlfRGV2aWNlUXVlcnlTdHJpbmc7XG4gIH1cblxuICBwcm90ZWN0ZWQgZmV0Y2goKTogYW55IHtcbiAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLmdldER5bmFtaWNHcm91cEl0ZW1zKHRoaXMucXVlcnkpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBJbmplY3Rpb25Ub2tlbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBOYXZpZ2F0b3JOb2RlIH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XHJcbmltcG9ydCB7IEFzc2V0Tm9kZSB9IGZyb20gJy4vYXNzZXQtbm9kZSc7XHJcbmV4cG9ydCBjb25zdCBBU1NFVF9OQVZJR0FUT1JfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuPEFzc2V0TmF2aWdhdG9yQ29uZmlnPignQXNzZXROb2RlQ29uZmlnJyk7XHJcblxyXG4vKipcclxuICogQ29uZmlndXJhdGlvbiBvYmplY3Qgb2YgdGhlIEFzc2V0c05hdmlnYXRvck1vZHVsZS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXNzZXROYXZpZ2F0b3JDb25maWcge1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyB0byBlbmFibGUgc21hcnQgZ3JvdXBzIGluIHRoZSBtb2R1bGUuXHJcbiAgICogRGVmYXVsdCB2YWx1ZTogZmFsc2UuXHJcbiAgICovXHJcbiAgc21hcnRHcm91cHM/OiBib29sZWFuO1xyXG4gIC8qKlxyXG4gICAqIEV4cGFuZHMgdGhlIHJvb3QgbmF2aWdhdG9yIG5vZGUgd2hlbiB0aGUgbmF2aWdhdG9yIGlzIGluaXRpYWxpemVkLlxyXG4gICAqIERlZmF1bHQgdmFsdWU6IGZhbHNlXHJcbiAgICovXHJcbiAgb3Blbk9uU3RhcnQ/OiBib29sZWFuO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyB0byBjaGFuZ2UgdGhlIHBvc2l0aW9uIG9mIHRoZSByb290IGdyb3VwIGluIHRoZSBuYXZpZ2F0b3IuXHJcbiAgICogVGhlIGhpZ2hlciB0aGUgdmFsdWUsIHRoZSBoaWdoZXIgdGhlIHBvc2l0aW9uIGluIG5hdmlnYXRpb24uXHJcbiAgICogRGVmYXVsdCB2YWx1ZTogMjAwMC5cclxuICAgKi9cclxuICByb290Tm9kZVByaW9yaXR5PzogbnVtYmVyO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyB0byBkcmFnIGFuZCBkcm9wIGl0ZW1zIGluIHRoZSBhc3NldCBuYXZpZ2F0b3IuXHJcbiAgICogRGVmYXVsdCB2YWx1ZTogdHJ1ZS5cclxuICAgKi9cclxuICBkaXNhYmxlRHJhZ0FuZERyb3A/OiBib29sZWFuO1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyB0byBvdmVycmlkZSBwcm9wZXJpZXMgb2YgdGhlIHJvb3QgZ3JvdXAgb3IgaGlkZSBpdC5cclxuICAgKiBTZXR1cCBleGFtcGxlczpcclxuICAgKiAtIGByb290TmF2aWdhdG9yTm9kZTogdHJ1ZWAgLSBzaG93cyB0aGUgZGVmYXVsdCBuYXZpZ2F0b3Igbm9kZSAoZGVmYXVsdCksXHJcbiAgICogLSBgcm9vdE5hdmlnYXRvck5vZGU6IGZhbHNlYCAtIGhpZGVzIHRoZSBuYXZpZ2F0b3Igbm9kZSxcclxuICAgKiAtIGByb290TmF2aWdhdG9yTm9kZTogeyBsYWJlbDogJ05ldyBuYW1lJywgLi4uIH1gIC0gb3ZlcnJpZGVzIGRlZmF1bHQgbmF2aWdhdG9yIG5vZGUsXHJcbiAgICogLSBgcm9vdE5hdmlnYXRvck5vZGU6IG5ldyBOYXZpZ2F0b3JOb2RlKHsgbGFiZWw6ICdOZXcgbmFtZScsIC4uLiB9KWAgLSBvdmVycmlkZXMgZGVmYXVsdCBuYXZpZ2F0b3Igbm9kZSxcclxuICAgKi9cclxuICByb290TmF2aWdhdG9yTm9kZT86IGJvb2xlYW4gfCBQYXJ0aWFsPE5hdmlnYXRvck5vZGUgfCBBc3NldE5vZGU+O1xyXG59XHJcbiIsImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IElNYW5hZ2VkT2JqZWN0IH0gZnJvbSAnQGM4eS9jbGllbnQnO1xuaW1wb3J0IHsgR3JvdXBTZXJ2aWNlIGFzIE1pZ3JhdGVkRGV2aWNlR3JvdXBTZXJ2aWNlIH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuXG4vKipcbiAqIEBkZXByZWNhdGVkXG4gKiBPcmlnaW5hbCBzZXJ2aWNlIHdhcyBtb3ZlZCB0byBjb3JlL2NvbW1vbi5cbiAqIFRoaXMgc2VydmljZSBpcyBkZXByZWNhdGVkIGFuZCBzZXJ2ZXMgYXMgYSBwcm94eSB0byBtYWludGFpbiBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LlxuICovXG5leHBvcnQgY2xhc3MgRGV2aWNlR3JvdXBTZXJ2aWNlIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBtaWdyYXRlZERldmljZUdyb3VwU2VydmljZTogTWlncmF0ZWREZXZpY2VHcm91cFNlcnZpY2UpIHt9XG5cbiAgaWNvbihtbzogSU1hbmFnZWRPYmplY3QsIG9wZW4gPSBmYWxzZSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMubWlncmF0ZWREZXZpY2VHcm91cFNlcnZpY2UuZ2V0SWNvbihtbywgb3Blbik7XG4gIH1cblxuICBpc0dyb3VwKG1vOiBJTWFuYWdlZE9iamVjdCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm1pZ3JhdGVkRGV2aWNlR3JvdXBTZXJ2aWNlLmlzR3JvdXAobW8pO1xuICB9XG5cbiAgaXNEeW5hbWljR3JvdXAobW86IElNYW5hZ2VkT2JqZWN0KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubWlncmF0ZWREZXZpY2VHcm91cFNlcnZpY2UuaXNEeW5hbWljR3JvdXAobW8pO1xuICB9XG5cbiAgaXNEYXRhQnJva2VyKG1vOiBJTWFuYWdlZE9iamVjdCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm1pZ3JhdGVkRGV2aWNlR3JvdXBTZXJ2aWNlLmlzRGF0YUJyb2tlcihtbyk7XG4gIH1cblxuICBpc0RhdGFCcm9rZXJBY3RpdmUobW86IElNYW5hZ2VkT2JqZWN0KSB7XG4gICAgcmV0dXJuIHRoaXMubWlncmF0ZWREZXZpY2VHcm91cFNlcnZpY2UuaXNEYXRhQnJva2VyQWN0aXZlKG1vKTtcbiAgfVxuXG4gIGlzQXNzZXQobW86IElNYW5hZ2VkT2JqZWN0KSB7XG4gICAgcmV0dXJuIHRoaXMubWlncmF0ZWREZXZpY2VHcm91cFNlcnZpY2UuaXNBc3NldChtbyk7XG4gIH1cblxuICBpc0FueUdyb3VwKG1vOiBJTWFuYWdlZE9iamVjdCkge1xuICAgIHJldHVybiB0aGlzLm1pZ3JhdGVkRGV2aWNlR3JvdXBTZXJ2aWNlLmlzQW55R3JvdXAobW8pO1xuICB9XG5cbiAgaXNEZXZpY2UobW86IElNYW5hZ2VkT2JqZWN0KSB7XG4gICAgcmV0dXJuIHRoaXMubWlncmF0ZWREZXZpY2VHcm91cFNlcnZpY2UuaXNEZXZpY2UobW8pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUsIE9wdGlvbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBJTWFuYWdlZE9iamVjdCwgSW52ZW50b3J5U2VydmljZSwgSVJlc3VsdCwgUXVlcmllc1V0aWwsIFVzZXJTZXJ2aWNlIH0gZnJvbSAnQGM4eS9jbGllbnQnO1xuaW1wb3J0IHtcbiAgQWxlcnRTZXJ2aWNlLFxuICBBcHBTdGF0ZVNlcnZpY2UsXG4gIEJyZWFkY3J1bWJTZXJ2aWNlLFxuICBHcm91cEZyYWdtZW50LFxuICBNb2RhbFNlcnZpY2UsXG4gIE5hdmlnYXRvck5vZGUsXG4gIE5hdmlnYXRvck5vZGVEYXRhLFxuICBPcHRpb25zU2VydmljZVxufSBmcm9tICdAYzh5L25neC1jb21wb25lbnRzJztcbmltcG9ydCB7IEFwaVNlcnZpY2UgfSBmcm9tICdAYzh5L25neC1jb21wb25lbnRzL2FwaSc7XG5pbXBvcnQgeyBlbXB0eSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZmlsdGVyLCBtZXJnZU1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IEFzc2V0Tm9kZSB9IGZyb20gJy4vYXNzZXQtbm9kZSc7XG5pbXBvcnQgeyBBc3NldE5hdmlnYXRvckNvbmZpZywgQVNTRVRfTkFWSUdBVE9SX0NPTkZJRyB9IGZyb20gJy4vYXNzZXQtbm9kZS1jb25maWcubW9kZWwnO1xuaW1wb3J0IHsgRHluYW1pY0dyb3VwTm9kZSB9IGZyb20gJy4vZHluYW1pYy1ncm91cC1ub2RlJztcbmltcG9ydCB7IERldmljZUdyb3VwU2VydmljZSB9IGZyb20gJy4vZ3JvdXAuc2VydmljZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXNzZXROb2RlTW8ge1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiBzdHJpbmc7XG59XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIEFzc2V0Tm9kZVNlcnZpY2Uge1xuICByb290Tm9kZTogQXNzZXROb2RlO1xuICBmaXJzdFVybCA9IHRydWU7XG4gIGRyYWdnZWREYXRhOiBBc3NldE5vZGU7XG4gIHF1ZXJpZXNVdGlsOiBRdWVyaWVzVXRpbDtcbiAgcHJvdGVjdGVkIFBBR0VfU0laRSA9IDIwO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBpbnZlbnRvcnk6IEludmVudG9yeVNlcnZpY2UsXG4gICAgcHVibGljIGFwaVNlcnZpY2U6IEFwaVNlcnZpY2UsXG4gICAgcHVibGljIG1vZGFsOiBNb2RhbFNlcnZpY2UsXG4gICAgcHVibGljIGFsZXJ0OiBBbGVydFNlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGJyZWFkY3J1bWJTZXJ2aWNlOiBCcmVhZGNydW1iU2VydmljZSxcbiAgICBwcm90ZWN0ZWQgdXNlcjogVXNlclNlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGFwcFN0YXRlOiBBcHBTdGF0ZVNlcnZpY2UsXG4gICAgcHJvdGVjdGVkIG9wdGlvbnNTZXJ2aWNlOiBPcHRpb25zU2VydmljZSxcbiAgICBAT3B0aW9uYWwoKSBASW5qZWN0KEFTU0VUX05BVklHQVRPUl9DT05GSUcpIHB1YmxpYyBtb2R1bGVDb25maWc6IEFzc2V0TmF2aWdhdG9yQ29uZmlnLFxuICAgIHByb3RlY3RlZCBkZXZpY2VHcm91cFNlcnZpY2U6IERldmljZUdyb3VwU2VydmljZVxuICApIHtcbiAgICB0aGlzLm1vZHVsZUNvbmZpZyA9IHtcbiAgICAgIHJvb3ROb2RlUHJpb3JpdHk6IDIwMDAsXG4gICAgICAuLi4obW9kdWxlQ29uZmlnIHx8IHt9KVxuICAgIH07XG4gICAgdGhpcy5xdWVyaWVzVXRpbCA9IG5ldyBRdWVyaWVzVXRpbCgpO1xuICB9XG5cbiAgaWNvbihtbzogSU1hbmFnZWRPYmplY3QsIG9wZW4/OiBib29sZWFuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5kZXZpY2VHcm91cFNlcnZpY2UuaWNvbihtbywgb3Blbik7XG4gIH1cblxuICBpc0dyb3VwKG1vOiBJTWFuYWdlZE9iamVjdCkge1xuICAgIHJldHVybiB0aGlzLmRldmljZUdyb3VwU2VydmljZS5pc0dyb3VwKG1vKTtcbiAgfVxuXG4gIGlzRHluYW1pY0dyb3VwKG1vOiBJTWFuYWdlZE9iamVjdCkge1xuICAgIHJldHVybiB0aGlzLmRldmljZUdyb3VwU2VydmljZS5pc0R5bmFtaWNHcm91cChtbyk7XG4gIH1cblxuICBpc0RhdGFCcm9rZXIobW86IElNYW5hZ2VkT2JqZWN0KSB7XG4gICAgcmV0dXJuIHRoaXMuZGV2aWNlR3JvdXBTZXJ2aWNlLmlzRGF0YUJyb2tlcihtbyk7XG4gIH1cblxuICBpc0RhdGFCcm9rZXJBY3RpdmUobW86IElNYW5hZ2VkT2JqZWN0KSB7XG4gICAgcmV0dXJuIHRoaXMuZGV2aWNlR3JvdXBTZXJ2aWNlLmlzRGF0YUJyb2tlckFjdGl2ZShtbyk7XG4gIH1cblxuICBpc0Fzc2V0KG1vOiBJTWFuYWdlZE9iamVjdCkge1xuICAgIHJldHVybiB0aGlzLmRldmljZUdyb3VwU2VydmljZS5pc0Fzc2V0KG1vKTtcbiAgfVxuXG4gIGlzQW55R3JvdXAobW86IElNYW5hZ2VkT2JqZWN0KSB7XG4gICAgcmV0dXJuIHRoaXMuZGV2aWNlR3JvdXBTZXJ2aWNlLmlzQW55R3JvdXAobW8pO1xuICB9XG5cbiAgaXNEZXZpY2UobW86IElNYW5hZ2VkT2JqZWN0KSB7XG4gICAgcmV0dXJuIHRoaXMuZGV2aWNlR3JvdXBTZXJ2aWNlLmlzRGV2aWNlKG1vKTtcbiAgfVxuXG4gIGNyZWF0ZVJvb3ROb2RlKGNvbmZpZzogTmF2aWdhdG9yTm9kZURhdGEgPSB7fSkge1xuICAgIHRoaXMucm9vdE5vZGUgPSB0aGlzLmNyZWF0ZUFzc2V0Tm9kZSh7XG4gICAgICByb290OiB0cnVlLFxuICAgICAgLi4uY29uZmlnLFxuICAgICAgcHJpb3JpdHk6IHRoaXMubW9kdWxlQ29uZmlnLnJvb3ROb2RlUHJpb3JpdHksXG4gICAgICBmZWF0dXJlSWQ6ICdncm91cHMnXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMucm9vdE5vZGU7XG4gIH1cblxuICBjcmVhdGVEeW5hbWljR3JvdXBOb2RlKGNvbmZpZykge1xuICAgIHJldHVybiBuZXcgRHluYW1pY0dyb3VwTm9kZSh0aGlzLCBjb25maWcpO1xuICB9XG5cbiAgY3JlYXRlQXNzZXROb2RlKGNvbmZpZzogUGFydGlhbDxBc3NldE5vZGU+KSB7XG4gICAgcmV0dXJuIG5ldyBBc3NldE5vZGUodGhpcywgY29uZmlnKTtcbiAgfVxuXG4gIGNyZWF0ZUNoaWxkTm9kZShtYW5hZ2VkT2JqZWN0LCBjb25maWc6IFBhcnRpYWw8QXNzZXROb2RlPikge1xuICAgIGNvbnN0IHsgdHlwZSB9ID0gbWFuYWdlZE9iamVjdDtcbiAgICBjb25maWcubW8gPSBtYW5hZ2VkT2JqZWN0O1xuICAgIGlmICh0eXBlID09PSBHcm91cEZyYWdtZW50LmR5bmFtaWNHcm91cFR5cGUpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUR5bmFtaWNHcm91cE5vZGUoY29uZmlnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlQXNzZXROb2RlKGNvbmZpZyk7XG4gIH1cblxuICBnZXRSb290Tm9kZXMoY3VzdG9tRmlsdGVyPzogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCBkZWZhdWx0RmlsdGVyID0ge1xuICAgICAgcGFnZVNpemU6IHRoaXMuUEFHRV9TSVpFLFxuICAgICAgd2l0aENoaWxkcmVuOiBmYWxzZSxcbiAgICAgIG9ubHlSb290czogIXRoaXMub3B0aW9uc1NlcnZpY2UuZGlzYWJsZU9ubHlSb290c1F1ZXJ5LFxuICAgICAgcXVlcnk6IHRoaXMucXVlcmllc1V0aWwuYnVpbGRRdWVyeSh0aGlzLm5hdlJvb3RRdWVyeUZpbHRlcigpKVxuICAgIH07XG4gICAgY29uc3QgZ3JvdXBGaWx0ZXIgPSB7IC4uLmRlZmF1bHRGaWx0ZXIsIC4uLmN1c3RvbUZpbHRlciB9O1xuXG4gICAgLy8gZHVlIHRvIEJFIHBlcmZvcm1hbmNlIGxpbWl0YXRpb25zIHdlIGRvIG5vdCBhbGxvdyBmaWx0ZXJpbmcgYW5kIHNvcnRpbmcgZm9yIGEgdXNlciB3aXRob3V0IGludmVudG9yeSByb2xlc1xuICAgIGlmICghdGhpcy51c2VyLmhhc1JvbGUodGhpcy5hcHBTdGF0ZS5jdXJyZW50VXNlci52YWx1ZSwgJ1JPTEVfSU5WRU5UT1JZX1JFQUQnKSkge1xuICAgICAgZGVsZXRlIGdyb3VwRmlsdGVyLnF1ZXJ5O1xuICAgICAgT2JqZWN0LmFzc2lnbihncm91cEZpbHRlciwge1xuICAgICAgICBmcmFnbWVudFR5cGU6IEdyb3VwRnJhZ21lbnQuZ3JvdXBGcmFnbWVudFR5cGUsXG4gICAgICAgIG9ubHlSb290czogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmludmVudG9yeS5saXN0KHRoaXMuY3JlYXRlRmlsdGVyKGdyb3VwRmlsdGVyKSk7XG4gIH1cblxuICBnZXRBbGxJbnZlbnRvcmllcyhjdXN0b21GaWx0ZXI/OiBhbnkpOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IGRlZmF1bHRGaWx0ZXIgPSB7XG4gICAgICBwYWdlU2l6ZTogdGhpcy5QQUdFX1NJWkUsXG4gICAgICB3aXRoQ2hpbGRyZW46IGZhbHNlXG4gICAgfTtcbiAgICBjb25zdCBncm91cEZpbHRlciA9IHsgLi4uZGVmYXVsdEZpbHRlciwgLi4uY3VzdG9tRmlsdGVyIH07XG4gICAgcmV0dXJuIHRoaXMuaW52ZW50b3J5Lmxpc3QodGhpcy5jcmVhdGVGaWx0ZXIoZ3JvdXBGaWx0ZXIpKTtcbiAgfVxuXG4gIGdldEdyb3VwSXRlbXMobW9JZDogc3RyaW5nLCBleHRyYUZpbHRlcjogb2JqZWN0ID0ge30sIHdpdGhDaGlsZHJlbiA9IGZhbHNlLCBmaWx0ZXJRdWVyeSA9ICcnKSB7XG4gICAgY29uc3QgcXVlcnlGaWx0ZXIgPSB7XG4gICAgICB3aXRoQ2hpbGRyZW4sXG4gICAgICBwYWdlU2l6ZTogdGhpcy5QQUdFX1NJWkUsXG4gICAgICBxdWVyeTogdGhpcy5ncm91cFF1ZXJ5RmlsdGVyKG1vSWQsIGZpbHRlclF1ZXJ5KVxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuaW52ZW50b3J5LmNoaWxkQXNzZXRzTGlzdChtb0lkLCB7IC4uLnF1ZXJ5RmlsdGVyLCAuLi5leHRyYUZpbHRlciB9KTtcbiAgfVxuXG4gIGdldFVuYXNzaWduZWREZXZpY2VzKHdpdGhDaGlsZHJlbiA9IGZhbHNlLCBmaWx0ZXJRdWVyeSA9ICcnKSB7XG4gICAgY29uc3QgcXVlcnlGaWx0ZXI6IGFueSA9IHtcbiAgICAgIGZyYWdtZW50VHlwZTogJ2M4eV9Jc0RldmljZScsXG4gICAgICBvbmx5Um9vdHM6IHRydWUsXG4gICAgICB3aXRoQ2hpbGRyZW4sXG4gICAgICBwYWdlU2l6ZTogdGhpcy5QQUdFX1NJWkUsXG4gICAgICBxOiB0aGlzLmdldFVuYXNzaWduZWREZXZpY2VzUXVlcnlTdHIoZmlsdGVyUXVlcnkpXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5pbnZlbnRvcnkubGlzdCh0aGlzLmNyZWF0ZUZpbHRlcihxdWVyeUZpbHRlcikpO1xuICB9XG5cbiAgZ2V0RHluYW1pY0dyb3VwSXRlbXMoZ3JvdXBRdWVyeTogc3RyaW5nLCBmaWx0ZXJPYmo6IGFueSA9IHt9KSB7XG4gICAgY29uc3QgeyBxdWVyeSwgLi4ucXVlcnlQYXJhbXMgfSA9IGZpbHRlck9iajtcbiAgICBjb25zdCBvcmRlckJ5UXVlcnkgPSBxdWVyeTtcbiAgICBjb25zdCBxdWVyeUZpbHRlciA9IHtcbiAgICAgIHE6IHRoaXMuYnVpbGRDb21iaW5lZFF1ZXJ5KGdyb3VwUXVlcnksIG9yZGVyQnlRdWVyeSksXG4gICAgICAuLi5xdWVyeVBhcmFtc1xuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuaW52ZW50b3J5Lmxpc3QodGhpcy5jcmVhdGVGaWx0ZXIocXVlcnlGaWx0ZXIpKTtcbiAgfVxuXG4gIGdldERldmljZUNoaWxkcmVuKFxuICAgIG1vSWQ6IHN0cmluZyxcbiAgICBleHRyYUZpbHRlcjogb2JqZWN0ID0ge30sXG4gICAgZmlsdGVyUXVlcnkgPSAnJyxcbiAgICB3aXRoQ2hpbGRyZW4gPSBmYWxzZVxuICApIHtcbiAgICBjb25zdCBxdWVyeUZpbHRlciA9IHtcbiAgICAgIHdpdGhDaGlsZHJlbixcbiAgICAgIHBhZ2VTaXplOiB0aGlzLlBBR0VfU0laRSxcbiAgICAgIHF1ZXJ5OiB0aGlzLmdyb3VwUXVlcnlGaWx0ZXIobW9JZCwgZmlsdGVyUXVlcnkpXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5pbnZlbnRvcnkuY2hpbGREZXZpY2VzTGlzdChtb0lkLCB7IC4uLnF1ZXJ5RmlsdGVyLCAuLi5leHRyYUZpbHRlciB9KTtcbiAgfVxuXG4gIGdldFVuYXNzaWduZWREZXZpY2VzUXVlcnlTdHIoZmlsdGVyUXVlcnkpOiBzdHJpbmcge1xuICAgIGNvbnN0IGhhc0dyb3VwSWQgPSBmaWx0ZXJRdWVyeS5pbmNsdWRlcygnYnlncm91cGlkJyk7XG4gICAgLy8gRmV0Y2ggYWxsIHVuYXNzaWduZWQgZGV2aWNlcy5cbiAgICBjb25zdCBkZWZhdWx0UXVlcnlTdHIgPSAnJG9yZGVyYnk9bmFtZSc7XG5cbiAgICAvLyBmaWx0ZXJRdWVyeSBpcyBhIGN1c3RvbSBxdWVyeSB0byBmZXRjaCB1bmFzc2lnbmVkIGRldmljZXMgZmlsdGVyZWQgYnkgbmFtZS5cbiAgICByZXR1cm4gaGFzR3JvdXBJZCB8fCAhZmlsdGVyUXVlcnkgPyBkZWZhdWx0UXVlcnlTdHIgOiBmaWx0ZXJRdWVyeTtcbiAgfVxuXG4gIGdyb3VwUXVlcnlGaWx0ZXIobW9JZDogc3RyaW5nLCBmaWx0ZXJRdWVyeT86IHN0cmluZykge1xuICAgIGlmICghZmlsdGVyUXVlcnkpIHtcbiAgICAgIHJldHVybiBgJGZpbHRlcj0oYnlncm91cGlkKCR7bW9JZH0pKSRvcmRlcmJ5PW5hbWVgO1xuICAgIH1cbiAgICByZXR1cm4gZmlsdGVyUXVlcnk7XG4gIH1cblxuICBuYXZSb290UXVlcnlGaWx0ZXIoKSB7XG4gICAgY29uc3QgbmF2Um9vdEZpbHRlciA9IHRoaXMucm9vdFF1ZXJ5RmlsdGVyKCk7XG4gICAgbmF2Um9vdEZpbHRlci5fX29yZGVyYnkgPSBbeyBuYW1lOiAxIH1dO1xuICAgIHJldHVybiBuYXZSb290RmlsdGVyO1xuICB9XG5cbiAgcm9vdFF1ZXJ5RmlsdGVyKCkge1xuICAgIGNvbnN0IHsgbW9kdWxlQ29uZmlnIH0gPSB0aGlzO1xuICAgIGNvbnN0IHJvb3RGaWx0ZXIgPSB0aGlzLm9wdGlvbnNTZXJ2aWNlLmRpc2FibGVPbmx5Um9vdHNRdWVyeVxuICAgICAgPyB7XG4gICAgICAgICAgX19maWx0ZXI6IHtcbiAgICAgICAgICAgIHR5cGU6IEdyb3VwRnJhZ21lbnQuZ3JvdXBUeXBlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBfX29yZGVyYnk6IFtdXG4gICAgICAgIH1cbiAgICAgIDoge1xuICAgICAgICAgIF9fZmlsdGVyOiB7XG4gICAgICAgICAgICBfX2hhczogR3JvdXBGcmFnbWVudC5ncm91cEZyYWdtZW50VHlwZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgX19vcmRlcmJ5OiBbXVxuICAgICAgICB9O1xuICAgIGlmIChtb2R1bGVDb25maWcuc21hcnRHcm91cHMpIHtcbiAgICAgIGNvbnN0IHF1ZXJ5RmlsdGVyID0ge1xuICAgICAgICBfX2ZpbHRlcjoge1xuICAgICAgICAgIF9fYW5kOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGU6IEdyb3VwRnJhZ21lbnQuZHluYW1pY0dyb3VwVHlwZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgX19oYXM6IEdyb3VwRnJhZ21lbnQuZHluYW1pY0dyb3VwRnJhZ21lbnRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7IF9fbm90OiB7IF9faGFzOiBgJHtHcm91cEZyYWdtZW50LmR5bmFtaWNHcm91cEZyYWdtZW50fS5pbnZpc2libGVgIH0gfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHRoaXMucXVlcmllc1V0aWwuYWRkT3JGaWx0ZXIocm9vdEZpbHRlciwgcXVlcnlGaWx0ZXIpO1xuICAgIH1cbiAgICByZXR1cm4gcm9vdEZpbHRlcjtcbiAgfVxuXG4gIG9uVXBkYXRlKHsgbW8sIHJvb3QgfSkge1xuICAgIGlmIChtby5pZCkge1xuICAgICAgcmV0dXJuIHRoaXMuYXBpU2VydmljZVxuICAgICAgICAuaG9va1Jlc3BvbnNlKFxuICAgICAgICAgICh7IHVybCwgbWV0aG9kIH0pID0+XG4gICAgICAgICAgICBbJ1BVVCcsICdERUxFVEUnLCAnUE9TVCddLmluY2x1ZGVzKG1ldGhvZCkgJiZcbiAgICAgICAgICAgIFJlZ0V4cChgKChpbnZlbnRvcnkvbWFuYWdlZE9iamVjdHMpfChzZXJ2aWNlL3NtYXJ0Z3JvdXAvc21hcnRncm91cHMpKS8ke21vLmlkfWApLnRlc3QoXG4gICAgICAgICAgICAgIHVybFxuICAgICAgICAgICAgKVxuICAgICAgICApXG4gICAgICAgIC5waXBlKFxuICAgICAgICAgIGZpbHRlcigoKSA9PiAhdGhpcy5kcmFnZ2VkRGF0YSksXG4gICAgICAgICAgbWVyZ2VNYXAodGhpcy5hcGlTZXJ2aWNlLnJlc29sdmVEYXRhPElNYW5hZ2VkT2JqZWN0PiksXG4gICAgICAgICAgZmlsdGVyKHJlc3BvbnNlID0+ICFyZXNwb25zZT8uZGF0YT8uYzh5X0Rhc2hib2FyZClcbiAgICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHJvb3QpIHtcbiAgICAgIHJldHVybiB0aGlzLmFwaVNlcnZpY2VcbiAgICAgICAgLmhvb2tSZXNwb25zZShcbiAgICAgICAgICAoeyB1cmwsIG1ldGhvZCB9KSA9PlxuICAgICAgICAgICAgUmVnRXhwKCcoKGludmVudG9yeS9tYW5hZ2VkT2JqZWN0cyl8KHNlcnZpY2Uvc21hcnRncm91cC9zbWFydGdyb3VwcykpLz8kJykudGVzdCh1cmwpICYmXG4gICAgICAgICAgICBtZXRob2QgPT09ICdQT1NUJ1xuICAgICAgICApXG4gICAgICAgIC5waXBlKFxuICAgICAgICAgIG1lcmdlTWFwKHRoaXMuYXBpU2VydmljZS5yZXNvbHZlRGF0YTxJTWFuYWdlZE9iamVjdD4pLFxuICAgICAgICAgIGZpbHRlcihyZXNwb25zZSA9PiB0aGlzLmlzTmV3TWFuYWdlZE9iamVjdFJvb3QocmVzcG9uc2UpKVxuICAgICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZW1wdHkoKTtcbiAgICB9XG4gIH1cblxuICBpc05ld01hbmFnZWRPYmplY3RSb290KHJlc3BvbnNlOiBQYXJ0aWFsPElSZXN1bHQ8SU1hbmFnZWRPYmplY3Q+PiA9IHt9KSB7XG4gICAgY29uc3QgeyBkYXRhIH0gPSByZXNwb25zZTtcbiAgICBsZXQgaXNSb290QXNzZXQgPSBmYWxzZTtcblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGlzUm9vdEFzc2V0ID0gISFkYXRhW0dyb3VwRnJhZ21lbnQuZ3JvdXBGcmFnbWVudFR5cGVdO1xuICAgICAgaWYgKCFpc1Jvb3RBc3NldCAmJiB0aGlzLm1vZHVsZUNvbmZpZy5zbWFydEdyb3Vwcykge1xuICAgICAgICBpc1Jvb3RBc3NldCA9ICEhZGF0YVtHcm91cEZyYWdtZW50LmR5bmFtaWNHcm91cEZyYWdtZW50XTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGlzUm9vdEFzc2V0O1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGl0IGlzIHBvc3NpYmxlIHRvIGRyb3AgYSBub2RlIGFmdGVyIGRyYWdnaW5nLlxuICAgKiBAcGFyYW0gZHJvcE9uUm9vdCBJcyB0aGUgZHJvcCBwZXJmb3JtZWQgb24gdGhlIHJvb3Qgbm9kZVxuICAgKi9cbiAgY2FuRHJvcE5vZGUoZHJvcE9uUm9vdDogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICAhZHJvcE9uUm9vdCB8fCB0aGlzLnVzZXIuaGFzUm9sZSh0aGlzLmFwcFN0YXRlLmN1cnJlbnRVc2VyLnZhbHVlLCAnUk9MRV9JTlZFTlRPUllfQURNSU4nKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVGhlcmUgY291bGQgYmUgbXVsdGlwbGUgYnJlYWRjcnVtYnMgZm9yIGRldmljZXMsXG4gICAqIHNvIHdlIHNldCBhIHByZWZlcnJlZCBvbmUgb24gY2xpY2sgb24gYSBkZXZpY2UuXG4gICAqIEBwYXJhbSBwYXJlbnRzIFRoZSBwYXJlbnQgbm9kZXMgb2YgdGhlIGRldmljZSB0byBzZWxlY3QgdGhlIHByZWZlcmVkIG9uZS5cbiAgICovXG4gIHByZWZlckJyZWFkY3J1bWIocGFyZW50czogTmF2aWdhdG9yTm9kZVtdKSB7XG4gICAgaWYgKHBhcmVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICB0aGlzLmJyZWFkY3J1bWJTZXJ2aWNlLnNlbGVjdFByZWZlcnJlZEJ5UGF0aChwYXJlbnRzWzBdLnBhdGgpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBjcmVhdGVGaWx0ZXIoZXh0cmFQYXJhbXM6IGFueSA9IHt9KSB7XG4gICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgY3VycmVudFBhZ2U6IDEsXG4gICAgICB3aXRoVG90YWxQYWdlczogdHJ1ZSxcbiAgICAgIHBhZ2VTaXplOiAxMFxuICAgIH07XG4gICAgcmV0dXJuIHsgLi4ucGFyYW1zLCAuLi5leHRyYVBhcmFtcyB9O1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZENvbWJpbmVkUXVlcnkocXVlcnlBLCBxdWVyeUIpIHtcbiAgICBsZXQgY29tYmluZWRRdWVyeTtcbiAgICBpZiAocXVlcnlBICYmIHF1ZXJ5Qikge1xuICAgICAgY29uc3QgZmlsdGVyUXVlcnkgPSB0aGlzLnF1ZXJpZXNVdGlsLmJ1aWxkUXVlcnkoW1xuICAgICAgICB7XG4gICAgICAgICAgX191c2VGaWx0ZXJRdWVyeVN0cmluZzogcXVlcnlBXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBfX3VzZUZpbHRlclF1ZXJ5U3RyaW5nOiBxdWVyeUJcbiAgICAgICAgfVxuICAgICAgXSk7XG4gICAgICBjb25zdCBvcmJlckJ5UXVlcnkgPSB0aGlzLnF1ZXJpZXNVdGlsLmV4dHJhY3RBbmRNZXJnZU9yZGVyQnlzKFtxdWVyeUEsIHF1ZXJ5Ql0pO1xuICAgICAgY29tYmluZWRRdWVyeSA9IGAke2ZpbHRlclF1ZXJ5fSAke29yYmVyQnlRdWVyeX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb21iaW5lZFF1ZXJ5ID0gcXVlcnlBIHx8IHF1ZXJ5QiB8fCAnJztcbiAgICB9XG4gICAgcmV0dXJuIGNvbWJpbmVkUXVlcnk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGdldCBhcyBnZXRQcm9wIH0gZnJvbSAnbG9kYXNoLWVzJztcbmltcG9ydCB7IEFzc2V0Tm9kZSB9IGZyb20gJy4vYXNzZXQtbm9kZSc7XG5pbXBvcnQgeyBBc3NldE5hdmlnYXRvckNvbmZpZywgQVNTRVRfTkFWSUdBVE9SX0NPTkZJRyB9IGZyb20gJy4vYXNzZXQtbm9kZS1jb25maWcubW9kZWwnO1xuaW1wb3J0IHsgQXNzZXROb2RlU2VydmljZSB9IGZyb20gJy4vYXNzZXQtbm9kZS5zZXJ2aWNlJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIEFzc2V0Tm9kZUZhY3Rvcnkge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHNlcnZpY2U6IEFzc2V0Tm9kZVNlcnZpY2UsXG4gICAgQE9wdGlvbmFsKCkgQEluamVjdChBU1NFVF9OQVZJR0FUT1JfQ09ORklHKSBwdWJsaWMgbW9kdWxlQ29uZmlnOiBBc3NldE5hdmlnYXRvckNvbmZpZ1xuICApIHt9XG5cbiAgZ2V0KCk6IEFzc2V0Tm9kZSB7XG4gICAgY29uc3Qgcm9vdE5hdmlnYXRvck5vZGUgPSBnZXRQcm9wKHRoaXMubW9kdWxlQ29uZmlnLCAncm9vdE5hdmlnYXRvck5vZGUnKSA/PyB0cnVlO1xuICAgIGxldCB7IHJvb3ROb2RlIH0gPSB0aGlzLnNlcnZpY2U7XG5cbiAgICBpZiAocm9vdE5hdmlnYXRvck5vZGUgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFyb290Tm9kZSkge1xuICAgICAgcm9vdE5vZGUgPSB0aGlzLnNlcnZpY2UuY3JlYXRlUm9vdE5vZGUocm9vdE5hdmlnYXRvck5vZGUgPT09IHRydWUgPyB7fSA6IHJvb3ROYXZpZ2F0b3JOb2RlKTtcbiAgICB9XG4gICAgcmV0dXJuIHJvb3ROb2RlO1xuICB9XG59XG4iLCJpbXBvcnQgeyBHcm91cEZyYWdtZW50IH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5pbXBvcnQgeyBHcm91cE5vZGVTZXJ2aWNlIH0gZnJvbSAnLi9ncm91cC1ub2RlLnNlcnZpY2UnO1xuaW1wb3J0IHsgQXNzZXROb2RlIH0gZnJvbSAnLi4vYXNzZXQtbm9kZSc7XG5pbXBvcnQgeyBHcm91cE5vZGVDb25maWcgfSBmcm9tICcuL2Fzc2V0LXNlbGVjdG9yLm1vZGVsJztcblxuZXhwb3J0IGNsYXNzIEdyb3VwTm9kZSBleHRlbmRzIEFzc2V0Tm9kZSB7XG4gIHN0YXRpYyBOQU1FID0gJ0dyb3VwTm9kZSc7XG5cbiAgLyoqXG4gICAqIFNldCB0aGlzIHRydWUsIGlmIG9ubHkgZ3JvdXBzIHNob3VsZCBiZSBzaG93bi5cbiAgICovXG4gIGdyb3Vwc09ubHkgPSBmYWxzZTtcblxuICAvKipcbiAgICogU2V0IHRoaXMgdHJ1ZSwgaWYgaXQgZ3JvdXBzIGFyZSBhbHNvIHNlbGVjdGFibGUuXG4gICAqL1xuICBncm91cHNTZWxlY3RhYmxlID0gZmFsc2U7XG4gIC8qKlxuICAgKiBEZXZpY2VzIHdpdGggY2hpbGRyZW4gY2FuIGJlIHNlbGVjdGVkIHRvIHNob3cgdGhlaXIgY2hpbGQgZGV2aWNlcy5cbiAgICovXG4gIHNob3dDaGlsZERldmljZXMgPSBmYWxzZTtcblxuICAvKipcbiAgICogR3JvdXAgbm9kZSBjaGlsZHJlbiAoc3ViZW50cmllcykuXG4gICAqL1xuICBjaGlsZHJlbjogR3JvdXBOb2RlW10gPSBbXTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBub2RlIHdoaWNoIHNob3dzIG9ubHkgZ3JvdXBzLlxuICAgKlxuICAgKiBAcGFyYW0gc2VydmljZSBUaGUgc2VydmljZSB0byB1c2UuXG4gICAqIEBwYXJhbSBjb25maWcgIFRoZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gb2YgdGhlIG5vZGUuXG4gICAqIEBwYXJhbSBncm91cHNPbmx5IFNldCB0aGlzIHRydWUsIGlmIG9ubHkgZ3JvdXBzIHNob3VsZCBiZSBzaG93bi5cbiAgICogQHBhcmFtIHNlbGVjdGFibGUgU2V0IHRoaXMgdHJ1ZSwgaWYgaXQgaXMgc2VsZWN0YWJsZS5cbiAgICovXG5cbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIHNlcnZpY2U6IEdyb3VwTm9kZVNlcnZpY2UsIGNvbmZpZzogR3JvdXBOb2RlQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcihzZXJ2aWNlLCBjb25maWcpO1xuICAgIHRoaXMuZ3JvdXBzT25seSA9IGNvbmZpZy5ncm91cHNPbmx5IHx8IGZhbHNlO1xuICAgIHRoaXMuZ3JvdXBzU2VsZWN0YWJsZSA9IGNvbmZpZy5ncm91cHNTZWxlY3RhYmxlIHx8IGZhbHNlO1xuICAgIHRoaXMuc2hvd0NoaWxkRGV2aWNlcyA9IGNvbmZpZy5zaG93Q2hpbGREZXZpY2VzIHx8IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgdGhlIE1PIGFzIGEgY2hpbGQgbm9kZS5cbiAgICogQHBhcmFtIG1vIE1hbmFnZWRPYmplY3RcbiAgICovXG4gIGFkZE1hbmFnZWRPYmplY3QobW8pIHtcbiAgICBjb25zdCB7IGNoaWxkQWRkaXRpb25zIH0gPSB0aGlzLm1vO1xuICAgIGlmICghdGhpcy5pc0NoaWxkQWRkaXRpb24oY2hpbGRBZGRpdGlvbnMsIG1vKSkge1xuICAgICAgdGhpcy5hZGQoXG4gICAgICAgIHRoaXMuc2VydmljZS5jcmVhdGVDaGlsZE5vZGUoe1xuICAgICAgICAgIG1vLFxuICAgICAgICAgIGdyb3Vwc09ubHk6IHRoaXMuZ3JvdXBzT25seSxcbiAgICAgICAgICBncm91cHNTZWxlY3RhYmxlOiB0aGlzLmdyb3Vwc1NlbGVjdGFibGUsXG4gICAgICAgICAgc2hvd0NoaWxkRGV2aWNlczogdGhpcy5zaG93Q2hpbGREZXZpY2VzXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb3VudHMgdGhlIG51bWJlciBvZiBjaGlsZHJlbiBmb3IgdGhlIGN1cnJlbnQgbm9kZSAod2l0aCB0aGUgZXhjZXB0aW9uIG9mIHRoZSBVbmFzc2lnbmVkRGV2aWNlc05vZGUpLlxuICAgKi9cbiAgY291bnRDaGlsZHJlbigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLmZpbHRlcih2YWx1ZSA9PiB2YWx1ZS50b1N0cmluZygpICE9PSAnVW5hc3NpZ25lZERldmljZXNOb2RlJykubGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYWxsIGNoaWxkIG5vZGVzIGV4Y2VwdCB0aGUgVW5hc3NpZ25lZERldmljZXNOb2RlLlxuICAgKi9cbiAgZW1wdHkoKSB7XG4gICAgdGhpcy5jaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW4uZmlsdGVyKHZhbHVlID0+IHZhbHVlLnRvU3RyaW5nKCkgPT09ICdVbmFzc2lnbmVkRGV2aWNlc05vZGUnKTtcbiAgfVxuXG4gIGZldGNoKCkge1xuICAgIGNvbnN0IGlzUm9vdCA9IHRoaXMucm9vdDtcbiAgICBjb25zdCBpc0RldmljZSA9IHRoaXMubW8uYzh5X0lzRGV2aWNlO1xuICAgIHJldHVybiBpc1Jvb3RcbiAgICAgID8gdGhpcy5zZXJ2aWNlLmdldFJvb3ROb2RlcygpXG4gICAgICA6IGlzRGV2aWNlXG4gICAgICA/IHRoaXMuc2VydmljZS5nZXREZXZpY2VDaGlsZHJlbihcbiAgICAgICAgICB0aGlzLm1vLmlkLFxuICAgICAgICAgIHt9LFxuICAgICAgICAgIHRoaXMuZmlsdGVyUXVlcnkkLnZhbHVlLFxuICAgICAgICAgIHRoaXMuc2hvd0NoaWxkRGV2aWNlc1xuICAgICAgICApXG4gICAgICA6IHRoaXMuc2VydmljZS5nZXRHcm91cEl0ZW1zKFxuICAgICAgICAgIHRoaXMubW8uaWQsXG4gICAgICAgICAgdGhpcy5ncm91cHNPbmx5XG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICBxdWVyeTogYCRmaWx0ZXI9KGhhcygke0dyb3VwRnJhZ21lbnQuZ3JvdXBGcmFnbWVudFR5cGV9KSlgXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge30sXG4gICAgICAgICAgdGhpcy5zaG93Q2hpbGREZXZpY2VzLFxuICAgICAgICAgIHRoaXMuZmlsdGVyUXVlcnkkLnZhbHVlXG4gICAgICAgICk7XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gR3JvdXBOb2RlLk5BTUU7XG4gIH1cblxuICBpc0dyb3VwKCkge1xuICAgIHJldHVybiB0aGlzLm1vICYmIHRoaXMuc2VydmljZS5pc0dyb3VwKHRoaXMubW8pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBc3NldE5vZGVTZXJ2aWNlIH0gZnJvbSAnLi4vYXNzZXQtbm9kZS5zZXJ2aWNlJztcbmltcG9ydCB7IEdyb3VwTm9kZUNvbmZpZyB9IGZyb20gJy4vYXNzZXQtc2VsZWN0b3IubW9kZWwnO1xuaW1wb3J0IHsgR3JvdXBOb2RlIH0gZnJvbSAnLi9ncm91cC1ub2RlJztcblxuQEluamVjdGFibGUoeyBwcm92aWRlZEluOiAncm9vdCcgfSlcbmV4cG9ydCBjbGFzcyBHcm91cE5vZGVTZXJ2aWNlIGV4dGVuZHMgQXNzZXROb2RlU2VydmljZSB7XG4gIHByb3RlY3RlZCBQQUdFX1NJWkUgPSA1O1xuXG4gIGNyZWF0ZUdyb3VwTm9kZShjb25maWc6IEdyb3VwTm9kZUNvbmZpZykge1xuICAgIHJldHVybiBuZXcgR3JvdXBOb2RlKHRoaXMsIGNvbmZpZyk7XG4gIH1cblxuICBjcmVhdGVDaGlsZE5vZGUoY29uZmlnOiBHcm91cE5vZGVDb25maWcpOiBHcm91cE5vZGUge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZUdyb3VwTm9kZShjb25maWcpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBJSWRlbnRpZmllZCwgSU1hbmFnZWRPYmplY3QgfSBmcm9tICdAYzh5L2NsaWVudCc7XG5pbXBvcnQgeyBBc3NldE5vZGVTZXJ2aWNlIH0gZnJvbSAnLi4vYXNzZXQtbm9kZS5zZXJ2aWNlJztcbmltcG9ydCB7IGlzQXJyYXksIGlzTnVtYmVyLCBpc09iamVjdCwgaXNTdHJpbmcgfSBmcm9tICdsb2Rhc2gnO1xuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBBc3NldFNlbGVjdG9yU2VydmljZSBleHRlbmRzIEFzc2V0Tm9kZVNlcnZpY2Uge1xuICAvKipcbiAgICogU2ltcGxpZmllcyB0aGUgb2JqZWN0IG1vZGVsIGJhc2VkIG9uIHRoZSBzZWxlY3RlZCBtb2RlLlxuICAgKiBAcGFyYW0gb2JqIFRoZSBzZWxlY3RlZCBhc3NldC5cbiAgICogQHBhcmFtIG1vZGUgVGhlIG1vZGUgd2hpY2ggd2lsbCBkZWNpZGUgd2hhdCB0eXBlIG9mIG1vZGVsIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAqL1xuICBub3JtYWxpemVWYWx1ZShcbiAgICBvYmo6IFBhcnRpYWw8SU1hbmFnZWRPYmplY3Q+LFxuICAgIG1vZGVsTW9kZTogJ3NpbXBsZScgfCAnZnVsbCdcbiAgKTogUGFydGlhbDxJTWFuYWdlZE9iamVjdD4gfCBJSWRlbnRpZmllZCB7XG4gICAgcmV0dXJuIHRoaXMuc2ltcGxpZnlNb2RlbCh0aGlzLm5vcm1hbGl6ZU1vZGVsVmFsdWUob2JqKSwgbW9kZWxNb2RlKTtcbiAgfVxuXG4gIHNpbXBsaWZ5TW9kZWwoXG4gICAgbW9kZWw6IFBhcnRpYWw8SU1hbmFnZWRPYmplY3Q+IHwgSUlkZW50aWZpZWRbXSxcbiAgICBtb2RlOiAnc2ltcGxlJyB8ICdmdWxsJ1xuICApOiBQYXJ0aWFsPElNYW5hZ2VkT2JqZWN0PiB8IElJZGVudGlmaWVkIHtcbiAgICBjb25zdCBtYXBNb2RlbCA9IG1vZGVsID0+IHtcbiAgICAgIGNvbnN0IHsgaWQsIG5hbWUsIGM4eV9EZXZpY2VRdWVyeVN0cmluZyB9ID0gbW9kZWwgYXMgSUlkZW50aWZpZWQ7XG4gICAgICByZXR1cm4geyBpZCwgbmFtZSwgLi4uKGM4eV9EZXZpY2VRdWVyeVN0cmluZyA/IHsgYzh5X0RldmljZVF1ZXJ5U3RyaW5nIH0gOiB7fSkgfTtcbiAgICB9O1xuXG4gICAgaWYgKG1vZGUgPT09ICdmdWxsJykge1xuICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIH1cbiAgICBpZiAoIWlzQXJyYXkobW9kZWwpKSB7XG4gICAgICByZXR1cm4gbWFwTW9kZWwobW9kZWwpO1xuICAgIH1cbiAgICByZXR1cm4gbW9kZWwubWFwKG1hcE1vZGVsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGl0ZW0uXG4gICAqIEBwYXJhbSBzZWxlY3RlZCBBbGwgc2VsZWN0ZWQgaXRlbXNcbiAgICogQHBhcmFtIHNlbGVjdGVkTW8gVGhlIG5ldyBzZWxlY3RlZCBpdGVtLVxuICAgKiBAcmV0dXJucyBBbiBpbmRleCwgb3IgLTEgaWYgbm90IGZvdW5kLlxuICAgKi9cbiAgZ2V0SW5kZXhPZlNlbGVjdGVkKFxuICAgIHNlbGVjdGVkOiBBcnJheTxQYXJ0aWFsPElJZGVudGlmaWVkPj4gfCBQYXJ0aWFsPElJZGVudGlmaWVkPixcbiAgICBzZWxlY3RlZE1vOiBJSWRlbnRpZmllZFxuICApIHtcbiAgICByZXR1cm4gc2VsZWN0ZWQuZmluZEluZGV4KG1vID0+IG1vLmlkID09PSBzZWxlY3RlZE1vLmlkKTtcbiAgfVxuXG4gIHByaXZhdGUgbm9ybWFsaXplTW9kZWxWYWx1ZSh2YWx1ZTogYW55KTogSUlkZW50aWZpZWRbXSB7XG4gICAgaWYgKGlzTnVtYmVyKHZhbHVlKSB8fCBpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBbeyBpZDogdmFsdWUgfV07XG4gICAgfVxuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICByZXR1cm4gW3ZhbHVlXTtcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG4iLCJpbXBvcnQgeyBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkluaXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSUlkZW50aWZpZWQsIElNYW5hZ2VkT2JqZWN0IH0gZnJvbSAnQGM4eS9jbGllbnQnO1xuaW1wb3J0IHsgZ2V0dGV4dCB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgVHJhbnNsYXRlU2VydmljZSB9IGZyb20gJ0BuZ3gtdHJhbnNsYXRlL2NvcmUnO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZmlsdGVyLCB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tICcuLi9hY3Rpb24uZW51bSc7XG5pbXBvcnQgeyBBc3NldFNlbGVjdG9yU2VydmljZSB9IGZyb20gJy4vYXNzZXQtc2VsZWN0b3Iuc2VydmljZSc7XG5pbXBvcnQgeyBHcm91cE5vZGUgfSBmcm9tICcuL2dyb3VwLW5vZGUnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjOHktYXNzZXQtc2VsZWN0b3Itbm9kZScsXG4gIHRlbXBsYXRlVXJsOiAnLi9hc3NldC1zZWxlY3Rvci1ub2RlLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBBc3NldFNlbGVjdG9yTm9kZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBub2RlLlxuICAgKi9cbiAgQElucHV0KCkgbm9kZTogR3JvdXBOb2RlO1xuICAvKipcbiAgICogUm9vdCBub2RlLiBOb2RlIGZvdW5kIGF0IHRoZSB0b3Agb2YgdGhlIGhpZXJhcmNoeS5cbiAgICovXG4gIEBJbnB1dCgpIHJvb3ROb2RlOiBHcm91cE5vZGU7XG4gIC8qKlxuICAgKiBBbGwgcHJlc2VsZWN0ZWQgaXRlbXMuXG4gICAqL1xuICBASW5wdXQoKSBwcmVzZWxlY3RlZDogSUlkZW50aWZpZWQgfCBJSWRlbnRpZmllZFtdID0gW107XG4gIC8qKlxuICAgKiBTaG91bGQgdGhlIHBhdGggYmUgc2hvd24uXG4gICAqL1xuICBASW5wdXQoKSBzaG93UGF0aCA9IGZhbHNlO1xuICAvKipcbiAgICogQ2FuIHRoZSB1c2VyIHNlbGVjdCBtdWx0aXBsZSBhc3NldHMuXG4gICAqL1xuICBASW5wdXQoKSBtdWx0aSA9IGZhbHNlO1xuICAvKipcbiAgICogVGhlIGN1cnJlbnQgcGF0aCB0byB0aGUgbm9kZS5cbiAgICovXG4gIEBJbnB1dCgpIHZpZXc6ICd0cmVlJyB8ICdtaWxsZXInID0gJ3RyZWUnO1xuICAvKipcbiAgICogVXNlZCBvbmx5IGZvciBtaWxsZXItdmlldywgZGlzcGxheXMgdGhlIGNvbHVtbiBsZXZlbCBmb3IgdGhlIGN1cnJlbnQgbm9kZS5cbiAgICogRS5nIGlmIHRoZSBpbmRleCBpcyBvbmUsIHRoaXMgd2lsbCBiZSBzZWNvbmQgY29sdW1uLlxuICAgKi9cbiAgQElucHV0KCkgaW5kZXg7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBhY3RpdmUgbm9kZS5cbiAgICovXG4gIEBJbnB1dCgpIGFjdGl2ZTogR3JvdXBOb2RlO1xuICAvKipcbiAgICogQWxsIGN1cnJlbnRseSBzZWxlY3RlZCBhc3NldHMuXG4gICAqL1xuICBASW5wdXQoKSBzZWxlY3RlZEl0ZW1zOiBJSWRlbnRpZmllZFtdIHwgSUlkZW50aWZpZWQgPSBbXTtcbiAgLyoqXG4gICAqIEEgZnVuY3Rpb24gdGhhdCBzaG91bGQgdmVyaWZ5IHRoZSBuZWVkIHRvIGFkZCBhIGNvbHVtbiB3aGVuIGEgbm9kZSBpcyBjbGlja2VkLlxuICAgKi9cbiAgQElucHV0KCkgaGFuZGxlTmV4dE1pbGxlclZpZXdDb2x1bW46IChub2RlOiBHcm91cE5vZGUsIGluZGV4OiBudW1iZXIpID0+IGJvb2xlYW47XG4gIC8qKlxuICAgKiBFdmVudCwgd2hpY2ggaW5kaWNhdGVzIHdoZXRoZXIgdGhlIGxvYWRpbmcgb2YgdGhlIG5vZGUgaGFzIGNvbXBsZXRlZC5cbiAgICovXG4gIEBPdXRwdXQoKSBpc0xvYWRpbmdTdGF0ZTogRXZlbnRFbWl0dGVyPGJvb2xlYW4+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAvKipcbiAgICogRXZlbnQgdGhhdCBlbWl0cyB3aGVuIGEgbm9kZSBpcyBzZWxlY3RlZC5cbiAgICovXG4gIEBPdXRwdXQoKSBvblNlbGVjdDogRXZlbnRFbWl0dGVyPElNYW5hZ2VkT2JqZWN0PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgLyoqXG4gICAqIEV2ZW50IHRoYXQgZW1pdHMgd2hlbiBhIG5vZGUgaXMgZGVzZWxlY3RlZC5cbiAgICovXG4gIEBPdXRwdXQoKSBvbkRlc2VsZWN0OiBFdmVudEVtaXR0ZXI8eyBkZXNlbGVjdE1vZGU6ICdzaW5nbGUnIHwgJ2FsbCc7IG1vOiBJTWFuYWdlZE9iamVjdCB9PiA9XG4gICAgbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIGJyZWFkY3J1bWI6IHN0cmluZztcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGxldmVsID0gMDtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHVuc3Vic2NyaWJlJCA9IG5ldyBTdWJqZWN0PGFueT4oKTtcblxuICAvKiogc2V0cyB0aGUgYGJ0bi1wZW5kaW5nYCBjbGFzcyBpbiB0aGUgbG9hZCBtb3JlIGJ1dHRvbiAqL1xuICBpc0xvYWRpbmcgPSBmYWxzZTtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGdldCBleHBhbmRUaXRsZSgpIHtcbiAgICByZXR1cm4gIXRoaXMubm9kZS5vcGVuID8gZ2V0dGV4dCgnRXhwYW5kJykgOiBnZXR0ZXh0KCdDb2xsYXBzZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmUgb25seSBkaVxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSB0cmFuc2xhdGVTZXJ2aWNlOiBUcmFuc2xhdGVTZXJ2aWNlLFxuICAgIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmLFxuICAgIHB1YmxpYyBhc3NldFNlbGVjdG9yU2VydmljZTogQXNzZXRTZWxlY3RvclNlcnZpY2VcbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBhc3luYyBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmJyZWFkY3J1bWIgPSB0aGlzLm5vZGUubGFiZWw7XG4gICAgdGhpcy5zZXR1cEJyZWFkY3J1bWJzQW5kTGV2ZWwodGhpcy5ub2RlKTtcblxuICAgIGlmICh0aGlzLm5vZGUgaW5zdGFuY2VvZiBHcm91cE5vZGUpIHtcbiAgICAgIHRoaXMubm9kZS5ob29rRXZlbnRzKCk7XG4gICAgfVxuXG4gICAgLy8gb3BlbiBvbiBzdGFydHVwXG4gICAgaWYgKHRoaXMubm9kZS5yb290KSB7XG4gICAgICB0aGlzLmNsaWNrKCk7XG4gICAgfVxuXG4gICAgLy8gdXNlZCBmb3IgbG9hZGluZyBhbmQgdG8gdHJpZ2dlciBjaGFuZ2UgZGV0ZWN0aW9uIHdoZW4gdGhlIG5vZGUgaXMgbm8gbG9uZ2VyIGxvYWRpbmcuXG4gICAgaWYgKHRoaXMubm9kZS5ldmVudHMpIHtcbiAgICAgIHRoaXMubm9kZS5ldmVudHNcbiAgICAgICAgLnBpcGUoXG4gICAgICAgICAgdGFrZVVudGlsKHRoaXMudW5zdWJzY3JpYmUkKSxcbiAgICAgICAgICBmaWx0ZXIoKGE6IEFjdGlvbikgPT4gYSA9PT0gQWN0aW9uLkxPQURJTkdfRE9ORSlcbiAgICAgICAgKVxuICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICB0aGlzLmlzTG9hZGluZ1N0YXRlLmVtaXQoZmFsc2UpO1xuICAgICAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVucyBhIG5vZGUuXG4gICAqL1xuICBjbGljaygpIHtcbiAgICB0aGlzLm5vZGUub3BlbiA9ICF0aGlzLm5vZGUub3BlbjtcbiAgICB0aGlzLm5vZGUuY2xpY2soeyBvcGVuOiB0aGlzLm5vZGUub3BlbiB9KTtcbiAgfVxuXG4gIHNldHVwQnJlYWRjcnVtYnNBbmRMZXZlbChub2RlOiBHcm91cE5vZGUpIHtcbiAgICBpZiAobm9kZS5wYXJlbnRzICYmIG5vZGUucGFyZW50cy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHBhcmVudCA9IG5vZGUucGFyZW50c1swXSBhcyBHcm91cE5vZGU7XG4gICAgICB0aGlzLmJyZWFkY3J1bWIgPVxuICAgICAgICB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudChwYXJlbnQubGFiZWwpICtcbiAgICAgICAgJyA+ICcgK1xuICAgICAgICB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCh0aGlzLmJyZWFkY3J1bWIpO1xuICAgICAgdGhpcy5sZXZlbCsrO1xuXG4gICAgICB0aGlzLnNldHVwQnJlYWRjcnVtYnNBbmRMZXZlbChwYXJlbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIHRoZSBub2RlIGFuZCBlbWl0cyBhIGNoYW5nZSBvbiB0aGUgcGFyZW50IGNvbXBvbmVudC5cbiAgICogQHBhcmFtIG5vZGUgVGhlIG5vZGUgdG8gc2VsZWN0LlxuICAgKi9cbiAgc2VsZWN0ZWQobm9kZTogR3JvdXBOb2RlKSB7XG4gICAgaWYgKG5vZGUubW8pIHtcbiAgICAgIHRoaXMudXBkYXRlU2VsZWN0aW9uKG5vZGUubW8pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmNsaWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBjbGlja3Mgb24gYSBpdGVtIGluIE1pbGxlciBWaWV3LlxuICAgKiBAcGFyYW0gbm9kZSBUaGUgbm9kZSB0aGF0IHdhcyBjbGlja2VkLlxuICAgKi9cbiAgbWlsbGVyVmlld0NsaWNrKG5vZGU6IEdyb3VwTm9kZSkge1xuICAgIG5vZGUuYnJlYWRjcnVtYiA9IHRoaXMuYnJlYWRjcnVtYjtcblxuICAgIGlmICghdGhpcy5oYW5kbGVOZXh0TWlsbGVyVmlld0NvbHVtbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzaG91bGRIYW5kbGVEZWZhdWx0ID0gdGhpcy5oYW5kbGVOZXh0TWlsbGVyVmlld0NvbHVtbihub2RlLCB0aGlzLmluZGV4KTtcbiAgICBpZiAoc2hvdWxkSGFuZGxlRGVmYXVsdCkge1xuICAgICAgdGhpcy5zZWxlY3RlZChub2RlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy51bnN1YnNjcmliZSQubmV4dCh0cnVlKTtcbiAgICB0aGlzLnVuc3Vic2NyaWJlJC5jb21wbGV0ZSgpO1xuICB9XG5cbiAgaXNTZWxlY3RlZCgpIHtcbiAgICBpZiAoIXRoaXMubm9kZS5tbykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hc3NldFNlbGVjdG9yU2VydmljZS5nZXRJbmRleE9mU2VsZWN0ZWQodGhpcy5wcmVzZWxlY3RlZCwgdGhpcy5ub2RlLm1vKSA+IC0xO1xuICB9XG5cbiAgaXNBY3RpdmUoKSB7XG4gICAgaWYgKHRoaXMuYWN0aXZlICYmIHRoaXMubm9kZS5tbykge1xuICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlLm1vPy5pZCA9PT0gdGhpcy5ub2RlLm1vLmlkO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpc0dyb3VwU2VsZWN0ZWQoKSB7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtcy5zb21lKHNlbGVjdGVkTm9kZSA9PiBzZWxlY3RlZE5vZGUuaWQgPT09IHRoaXMubm9kZS5tbz8uaWQpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVTZWxlY3Rpb24oc2VsZWN0ZWRNbzogSU1hbmFnZWRPYmplY3QpIHtcbiAgICBpZiAoIXRoaXMubXVsdGkpIHtcbiAgICAgIHRoaXMub25EZXNlbGVjdC5lbWl0KHsgZGVzZWxlY3RNb2RlOiAnYWxsJywgbW86IHNlbGVjdGVkTW8gfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLmlzU2VsZWN0ZWQoKSkge1xuICAgICAgdGhpcy5vbkRlc2VsZWN0LmVtaXQoeyBkZXNlbGVjdE1vZGU6ICdzaW5nbGUnLCBtbzogc2VsZWN0ZWRNbyB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5vblNlbGVjdC5lbWl0KHNlbGVjdGVkTW8pO1xuICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gIH1cbn1cbiIsIjwhLS0gSGllcmFyY2h5IHRyZWUgLS0+XG48ZGl2XG4gICpuZ0lmPVwidmlldyA9PT0gJ3RyZWUnXCJcbiAgY2xhc3M9XCJjOHktYXNzZXQtc2VsZWN0b3JfX2l0ZW1cIlxuICBbYXR0ci5yb2xlXT1cInZpZXcgPT09ICd0cmVlJyA/ICd0cmVlJyA6ICdsaXN0J1wiXG4gIFtuZ0NsYXNzXT1cIntcbiAgICAnYzh5LWFzc2V0LXNlbGVjdG9yX19pdGVtLS1tb3JlJzogbm9kZT8uaWNvbiA9PT0gJ3BsdXMnLFxuICAgICdjOHktYXNzZXQtc2VsZWN0b3JfX2l0ZW0tLXN0YXJ0JzogbGV2ZWwgPT09IDBcbiAgfVwiXG4gIFtuZ1N0eWxlXT1cIntcbiAgICAnbWFyZ2luLWxlZnQnOiBsZXZlbCA+IDEgPyAxNiArICdweCcgOiAnMCdcbiAgfVwiXG4+XG4gIDxkaXZcbiAgICAqbmdJZj1cIm5vZGUgJiYgIW5vZGUucm9vdCAmJiAhbm9kZS5oaWRkZW5cIlxuICAgIGNsYXNzPVwiYzh5LWFzc2V0LXNlbGVjdG9yX19ub2RlXCJcbiAgICBbYXR0ci5yb2xlXT1cInZpZXcgPT09ICd0cmVlJyA/ICd0cmVlaXRlbScgOiAnbGlzdGl0ZW0nXCJcbiAgICBbbmdDbGFzc109XCJ7ICdjOHktYXNzZXQtc2VsZWN0b3JfX25vZGUtLW9wZW4nOiBub2RlPy5vcGVuIH1cIlxuICAgIHRpdGxlPVwie3sgYnJlYWRjcnVtYiB8IHRyYW5zbGF0ZSB9fVwiXG4gID5cbiAgICA8ZGl2IGNsYXNzPVwiZC1mbGV4IGEtaS1jZW50ZXIgcC10LTQgcC1iLTQgbS1yLThcIiAqbmdJZj1cIm5vZGUudG9TdHJpbmcoKSAhPT0gJ0xvYWRNb3JlTm9kZSdcIj5cbiAgICAgIDxsYWJlbCBbbmdDbGFzc109XCJ7ICdjOHktY2hlY2tib3gnOiBtdWx0aSwgJ2M4eS1yYWRpbyc6ICFtdWx0aSB9XCI+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgIGlkPVwibm9kZUxhYmVsXCJcbiAgICAgICAgICBbdHlwZV09XCJtdWx0aSA/ICdjaGVja2JveCcgOiAncmFkaW8nXCJcbiAgICAgICAgICAoY2hhbmdlKT1cInNlbGVjdGVkKG5vZGUpXCJcbiAgICAgICAgICBbY2hlY2tlZF09XCJpc1NlbGVjdGVkKClcIlxuICAgICAgICAgIFtkaXNhYmxlZF09XCIhbm9kZS5ncm91cHNTZWxlY3RhYmxlICYmIG5vZGUuaXNHcm91cCgpXCJcbiAgICAgICAgLz5cbiAgICAgICAgPHNwYW4+PC9zcGFuPlxuICAgICAgICA8c3BhbiBmb3I9XCJub2RlTGFiZWxcIiBjbGFzcz1cInNyLW9ubHlcIiB0cmFuc2xhdGU+Tm9kZSBsYWJlbDwvc3Bhbj5cbiAgICAgIDwvbGFiZWw+XG4gICAgPC9kaXY+XG5cbiAgICA8IS0tIGdyb3VwIGJ1dHRvbiAtLT5cbiAgICA8YnV0dG9uXG4gICAgICAqbmdJZj1cIm5vZGUuaXNHcm91cCgpIHx8IG5vZGUuaGFzQ2hpbGREZXZpY2VzKClcIlxuICAgICAgY2xhc3M9XCJjOHktYXNzZXQtc2VsZWN0b3JfX2J0biB0ZXh0LXRydW5jYXRlXCJcbiAgICAgIChjbGljayk9XCJjbGljaygpXCJcbiAgICAgIFthdHRyLmFyaWEtZXhwYW5kZWRdPVwiIW5vZGUub3BlblwiXG4gICAgPlxuICAgICAgPGlcbiAgICAgICAgW2M4eUljb25dPVwibm9kZS5pY29uXCJcbiAgICAgICAgKm5nSWY9XCJub2RlLmljb24gPT09ICdjOHktZ3JvdXAtc21hcnQnXCJcbiAgICAgICAgW3RpdGxlXT1cIidTbWFydCBncm91cCcgfCB0cmFuc2xhdGVcIlxuICAgICAgICBjbGFzcz1cImM4eS1pY29uIGM4eS1pY29uLWR1b2NvbG9yIG0tci00IHRleHQtMTZcIlxuICAgICAgPjwvaT5cbiAgICAgIDxpXG4gICAgICAgIFtjOHlJY29uXT1cIm5vZGUuaWNvblwiXG4gICAgICAgICpuZ0lmPVwibm9kZS5pY29uICE9PSAnYzh5LWdyb3VwLXNtYXJ0J1wiXG4gICAgICAgIFt0aXRsZV09XCInR3JvdXAnIHwgdHJhbnNsYXRlXCJcbiAgICAgICAgY2xhc3M9XCJjOHktaWNvbiBjOHktaWNvbi1kdW9jb2xvciBtLXItNCB0ZXh0LTE2XCJcbiAgICAgID48L2k+XG4gICAgICA8c3BhbiB0aXRsZT1cInt7IGJyZWFkY3J1bWIgfX1cIj5cbiAgICAgICAge3sgbm9kZS5sYWJlbCB8IHRyYW5zbGF0ZSB9fVxuICAgICAgICA8IS0tIHVzZSBqdXN0IGZvciBzZWFyY2ggcmVzdWx0cyB0byBkaXNwbGF5IHRoZSBwYXRoIC0tPlxuICAgICAgICA8cCAqbmdJZj1cInNob3dQYXRoXCIgY2xhc3M9XCJ0ZXh0LXRydW5jYXRlXCI+XG4gICAgICAgICAgPHNtYWxsIGNsYXNzPVwidGV4dC1tdXRlZFwiIHRpdGxlPVwie3sgYnJlYWRjcnVtYiB9fVwiPlxuICAgICAgICAgICAgPGVtPnt7IGJyZWFkY3J1bWIgfX08L2VtPlxuICAgICAgICAgIDwvc21hbGw+XG4gICAgICAgIDwvcD5cbiAgICAgICAgPCEtLSB1cCB0byBoZXJlIC0tPlxuICAgICAgPC9zcGFuPlxuICAgIDwvYnV0dG9uPlxuICAgIDwhLS0gbm90IGEgZ3JvdXAgYnV0dG9uIC0tPlxuICAgIDxidXR0b25cbiAgICAgICpuZ0lmPVwiIW5vZGUuaXNHcm91cCgpICYmICFub2RlLmhhc0NoaWxkRGV2aWNlcygpXCJcbiAgICAgIGNsYXNzPVwiZmxleC1ncm93XCJcbiAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgJ2J0biBidG4tZGVmYXVsdCBidG4tc20gbS1iLTggZC1mbGV4IGotYy1jZW50ZXInOiBub2RlLmljb24gPT09ICdwbHVzJyxcbiAgICAgICAgJ2M4eS1hc3NldC1zZWxlY3Rvcl9fYnRuIHRleHQtdHJ1bmNhdGUnOiBub2RlLmljb24gIT0gJ3BsdXMnXG4gICAgICB9XCJcbiAgICAgIChjbGljayk9XCJzZWxlY3RlZChub2RlKVwiXG4gICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgIHRpdGxlPVwie3sgYnJlYWRjcnVtYiB9fVwiXG4gICAgPlxuICAgICAgPGlcbiAgICAgICAgW2M4eUljb25dPVwibm9kZS5pY29uXCJcbiAgICAgICAgKm5nSWY9XCJub2RlLmljb24gPT09ICdjOHktZ3JvdXAtc21hcnQnXCJcbiAgICAgICAgW3RpdGxlXT1cIidTbWFydCBncm91cCcgfCB0cmFuc2xhdGVcIlxuICAgICAgICBjbGFzcz1cImM4eS1pY29uIGM4eS1pY29uLWR1b2NvbG9yIG0tci00IHRleHQtMTZcIlxuICAgICAgPjwvaT5cbiAgICAgIDxpXG4gICAgICAgIFtjOHlJY29uXT1cIm5vZGUuaWNvblwiXG4gICAgICAgICpuZ0lmPVwibm9kZS5pY29uICE9PSAnYzh5LWdyb3VwLXNtYXJ0J1wiXG4gICAgICAgIFt0aXRsZV09XCInR3JvdXAnIHwgdHJhbnNsYXRlXCJcbiAgICAgICAgW25nQ2xhc3NdPVwieyAnYzh5LWljb24tZHVvY29sb3IgdGV4dC0xNiAnOiBub2RlLmljb24gIT0gJ3BsdXMnIH1cIlxuICAgICAgICBjbGFzcz1cImM4eS1pY29uIG0tci00XCJcbiAgICAgID48L2k+XG4gICAgICA8c3BhbiB0aXRsZT1cInt7IGJyZWFkY3J1bWIgfX1cIj5cbiAgICAgICAge3sgbm9kZS5sYWJlbCB8IHRyYW5zbGF0ZSB9fVxuICAgICAgICA8IS0tIHVzZSBqdXN0IGZvciBzZWFyY2ggcmVzdWx0cyB0byBkaXNwbGF5IHRoZSBwYXRoIC0tPlxuICAgICAgICA8cCAqbmdJZj1cInNob3dQYXRoXCIgY2xhc3M9XCJ0ZXh0LXRydW5jYXRlIHRleHQtbXV0ZWQgc21hbGxcIj5cbiAgICAgICAgICA8ZW0+e3sgYnJlYWRjcnVtYiB9fTwvZW0+XG4gICAgICAgIDwvcD5cbiAgICAgICAgPCEtLSB1cCB0byBoZXJlIC0tPlxuICAgICAgPC9zcGFuPlxuICAgIDwvYnV0dG9uPlxuICAgIDwhLS0gZXhwYW5kIGJ1dHRvbiAob25seSBmb3IgZ3JvdXBzKSAtLT5cbiAgICA8ZGl2ICpuZ0lmPVwibm9kZS5pc0dyb3VwKCkgfHwgbm9kZS5oYXNDaGlsZERldmljZXMoKVwiPlxuICAgICAgPGJ1dHRvblxuICAgICAgICBbdGl0bGVdPVwiZXhwYW5kVGl0bGVcIlxuICAgICAgICBjbGFzcz1cImNvbGxhcHNlLWJ0biBidG5cIlxuICAgICAgICAoY2xpY2spPVwiY2xpY2soKVwiXG4gICAgICAgIFthdHRyLmFyaWEtZXhwYW5kZWRdPVwibm9kZS5vcGVuXCJcbiAgICAgID5cbiAgICAgICAgPGkgYzh5SWNvbj1cImFuZ2xlLWRvd25cIj48L2k+XG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDxkaXZcbiAgICAqbmdJZj1cIm5vZGUuY291bnRDaGlsZHJlbigpXCJcbiAgICBjbGFzcz1cImNvbGxhcHNlXCJcbiAgICBbY29sbGFwc2VdPVwiIW5vZGUub3BlblwiXG4gICAgW2lzQW5pbWF0ZWRdPVwidHJ1ZVwiXG4gICAgW2F0dHIucm9sZV09XCInZ3JvdXAnXCJcbiAgPlxuICAgIDxjOHktYXNzZXQtc2VsZWN0b3Itbm9kZVxuICAgICAgKm5nRm9yPVwibGV0IGNoaWxkTm9kZSBvZiBub2RlLmNoaWxkcmVuXCJcbiAgICAgIFtub2RlXT1cImNoaWxkTm9kZVwiXG4gICAgICBbcHJlc2VsZWN0ZWRdPVwicHJlc2VsZWN0ZWQgfHwgW11cIlxuICAgICAgW211bHRpXT1cIm11bHRpXCJcbiAgICAgIFthY3RpdmVdPVwiYWN0aXZlXCJcbiAgICAgIFthdHRyLnJvbGVdPVwidmlldyA9PT0gJ3RyZWUnID8gJ3RyZWVpdGVtJyA6ICdsaXN0aXRlbSdcIlxuICAgICAgKG9uU2VsZWN0KT1cIm9uU2VsZWN0LmVtaXQoJGV2ZW50KVwiXG4gICAgICAob25EZXNlbGVjdCk9XCJvbkRlc2VsZWN0LmVtaXQoJGV2ZW50KVwiXG4gICAgPjwvYzh5LWFzc2V0LXNlbGVjdG9yLW5vZGU+XG4gIDwvZGl2PlxuPC9kaXY+XG5cbjwhLS0gTWlsbGVyIGNvbHVtbnMgLS0+XG48ZGl2ICpuZ0lmPVwidmlldyA9PT0gJ21pbGxlcidcIj5cbiAgPGRpdlxuICAgICpuZ0lmPVwibm9kZSAmJiAhbm9kZS5yb290ICYmICFub2RlLmhpZGRlbiAmJiBub2RlICE9PSByb290Tm9kZVwiXG4gICAgY2xhc3M9XCJtaWxsZXItY29sdW1uX19pdGVtIGJnLWluaGVyaXRcIlxuICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgIGFjdGl2ZTogaXNBY3RpdmUoKSxcbiAgICAgICdtaWxsZXItY29sdW1uX19pdGVtLS1tb3JlJzogbm9kZS50b1N0cmluZygpID09PSAnTG9hZE1vcmVOb2RlJ1xuICAgIH1cIlxuICAgIHRpdGxlPVwie3sgYnJlYWRjcnVtYiB8IHRyYW5zbGF0ZSB9fVwiXG4gID5cbiAgICA8ZGl2XG4gICAgICBjbGFzcz1cIm0tbC00IG0tci00IG1pbGxlci1jb2x1bW5fX2l0ZW1fX2NoZWNrYm94XCJcbiAgICAgICpuZ0lmPVwibm9kZS50b1N0cmluZygpICE9PSAnTG9hZE1vcmVOb2RlJ1wiXG4gICAgPlxuICAgICAgPGxhYmVsIFtuZ0NsYXNzXT1cInsgJ2M4eS1yYWRpbyc6ICFtdWx0aSwgJ2M4eS1jaGVja2JveCc6IG11bHRpIH1cIj5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgaWQ9XCJub2RlTGFiZWwyXCJcbiAgICAgICAgICBbdHlwZV09XCJtdWx0aSA/ICdjaGVja2JveCcgOiAncmFkaW8nXCJcbiAgICAgICAgICAoY2hhbmdlKT1cInNlbGVjdGVkKG5vZGUpXCJcbiAgICAgICAgICBbY2hlY2tlZF09XCJpc0dyb3VwU2VsZWN0ZWQoKVwiXG4gICAgICAgICAgW2Rpc2FibGVkXT1cIiFub2RlLmdyb3Vwc1NlbGVjdGFibGUgJiYgbm9kZS5pc0dyb3VwKClcIlxuICAgICAgICAvPlxuICAgICAgICA8c3Bhbj48L3NwYW4+XG4gICAgICAgIDxzcGFuIGZvcj1cIm5vZGVMYWJlbDJcIiBjbGFzcz1cInNyLW9ubHlcIiB0cmFuc2xhdGU+Tm9kZSBsYWJlbDwvc3Bhbj5cbiAgICAgIDwvbGFiZWw+XG4gICAgPC9kaXY+XG5cbiAgICA8YnV0dG9uXG4gICAgICBbbmdDbGFzc109XCJ7XG4gICAgICAgICdidG4gYnRuLWRlZmF1bHQgYnRuLXNtIGQtZmxleCBmbGV4LWdyb3cgai1jLWNlbnRlciBtLWwtMTYgbS1yLTE2IG0tYi04JzpcbiAgICAgICAgICBub2RlLnRvU3RyaW5nKCkgPT09ICdMb2FkTW9yZU5vZGUnLFxuICAgICAgICAnbWlsbGVyLWNvbHVtbl9faXRlbV9fYnRuJzogbm9kZS50b1N0cmluZygpICE9PSAnTG9hZE1vcmVOb2RlJyxcbiAgICAgICAgJ2J0bi1wZW5kaW5nJzogbm9kZS5sb2FkaW5nICYmIG5vZGUudG9TdHJpbmcoKSA9PT0gJ0xvYWRNb3JlTm9kZSdcbiAgICAgIH1cIlxuICAgICAgdGl0bGU9XCJ7eyBicmVhZGNydW1iIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgIChjbGljayk9XCJtaWxsZXJWaWV3Q2xpY2sobm9kZSlcIlxuICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgPlxuICAgICAgPGlcbiAgICAgICAgW2M4eUljb25dPVwibm9kZS5pY29uXCJcbiAgICAgICAgY2xhc3M9XCJjOHktaWNvbiBtLXItNFwiXG4gICAgICAgIFtuZ0NsYXNzXT1cInsgJ2M4eS1pY29uLWR1b2NvbG9yIHRleHQtMTYnOiBub2RlLnRvU3RyaW5nKCkgIT09ICdMb2FkTW9yZU5vZGUnIH1cIlxuICAgICAgPjwvaT5cbiAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWxlZnQgdGV4dC10cnVuY2F0ZVwiPlxuICAgICAgICA8cCB0aXRsZT1cInt7IG5vZGUubGFiZWwgfCB0cmFuc2xhdGUgfX1cIiBjbGFzcz1cInRleHQtdHJ1bmNhdGVcIj5cbiAgICAgICAgICB7eyBub2RlLmxhYmVsIHwgdHJhbnNsYXRlIH19XG4gICAgICAgIDwvcD5cbiAgICAgICAgPCEtLSB1c2UganVzdCBmb3Igc2VhcmNoIHJlc3VsdHMgdG8gZGlzcGxheSB0aGUgcGF0aCAtLT5cbiAgICAgICAgPHNtYWxsICpuZ0lmPVwic2hvd1BhdGhcIiBjbGFzcz1cInRleHQtbXV0ZWQgdGV4dC10cnVuY2F0ZVwiIHRpdGxlPVwie3sgYnJlYWRjcnVtYiB9fVwiPlxuICAgICAgICAgIDxlbT57eyBicmVhZGNydW1iIH19PC9lbT5cbiAgICAgICAgPC9zbWFsbD5cbiAgICAgICAgPCEtLSB1cCB0byBoZXJlIC0tPlxuICAgICAgPC9kaXY+XG4gICAgICA8c3BhbiAqbmdJZj1cIm5vZGUuaXNHcm91cCgpIHx8IG5vZGUuaGFzQ2hpbGREZXZpY2VzKClcIiBjbGFzcz1cInAtbC00IG0tbC1hdXRvXCI+XG4gICAgICAgIDxpIGM4eUljb249XCJhbmdsZS1yaWdodFwiPjwvaT5cbiAgICAgIDwvc3Bhbj5cbiAgICA8L2J1dHRvbj5cbiAgPC9kaXY+XG5cbiAgPGRpdiAqbmdJZj1cIm5vZGVcIiBbbmdDbGFzc109XCJ7IGhpZGRlbjogbm9kZSAhPT0gcm9vdE5vZGUgfVwiIHJvbGU9XCJsaXN0XCI+XG4gICAgPGM4eS1hc3NldC1zZWxlY3Rvci1ub2RlXG4gICAgICAqbmdGb3I9XCJsZXQgY2hpbGROb2RlIG9mIG5vZGUuY2hpbGRyZW5cIlxuICAgICAgW25vZGVdPVwiY2hpbGROb2RlXCJcbiAgICAgIFtyb290Tm9kZV09XCJyb290Tm9kZVwiXG4gICAgICBbcHJlc2VsZWN0ZWRdPVwicHJlc2VsZWN0ZWQgfHwgW11cIlxuICAgICAgW211bHRpXT1cIm11bHRpXCJcbiAgICAgIFt2aWV3XT1cInZpZXdcIlxuICAgICAgW2luZGV4XT1cImluZGV4XCJcbiAgICAgIFtzZWxlY3RlZEl0ZW1zXT1cInNlbGVjdGVkSXRlbXNcIlxuICAgICAgW2FjdGl2ZV09XCJhY3RpdmVcIlxuICAgICAgW2hhbmRsZU5leHRNaWxsZXJWaWV3Q29sdW1uXT1cImhhbmRsZU5leHRNaWxsZXJWaWV3Q29sdW1uXCJcbiAgICAgIChvblNlbGVjdCk9XCJvblNlbGVjdC5lbWl0KCRldmVudClcIlxuICAgICAgKG9uRGVzZWxlY3QpPVwib25EZXNlbGVjdC5lbWl0KCRldmVudClcIlxuICAgICAgcm9sZT1cImxpc3RpdGVtXCJcbiAgICA+PC9jOHktYXNzZXQtc2VsZWN0b3Itbm9kZT5cbiAgPC9kaXY+XG48L2Rpdj5cbiIsImltcG9ydCB7IElNYW5hZ2VkT2JqZWN0IH0gZnJvbSAnQGM4eS9jbGllbnQnO1xuaW1wb3J0IHsgSUlkZW50aWZpZWQgfSBmcm9tICdAYzh5L2NsaWVudCc7XG5pbXBvcnQgeyBnZXR0ZXh0IH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXNzZXRTZWxlY3Rpb25DaGFuZ2VFdmVudCB7XG4gIGl0ZW1zOiBJSWRlbnRpZmllZCB8IElJZGVudGlmaWVkW107XG4gIGNoYW5nZTogeyBpdGVtOiBJTWFuYWdlZE9iamVjdDsgaXNTZWxlY3RlZDogYm9vbGVhbiB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdyb3VwTm9kZUNvbmZpZyB7XG4gIHJvb3Q/OiBib29sZWFuO1xuICBtbz86IElNYW5hZ2VkT2JqZWN0O1xuICBncm91cHNPbmx5PzogYm9vbGVhbjtcbiAgZ3JvdXBzU2VsZWN0YWJsZT86IGJvb2xlYW47XG4gIHNob3dDaGlsZERldmljZXM/OiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgQ09ORklHX09QVElPTlNfREVGQVVMVDogQXNzZXRTZWxlY3Rvck9wdGlvbnMgPSB7XG4gIGxhYmVsOiBnZXR0ZXh0KCdBc3NldCBzZWxlY3Rpb24nKSxcbiAgbXVsdGk6IGZhbHNlLFxuICBzaG93RmlsdGVyOiBmYWxzZSxcbiAgY29sdW1uSGVhZGVyczogZmFsc2UsXG4gIHNpbmdsZUNvbHVtbjogZmFsc2UsXG4gIG1vZGVsTW9kZTogJ3NpbXBsZScsXG4gIGdyb3Vwc09ubHk6IGZhbHNlLFxuICBncm91cHNTZWxlY3RhYmxlOiBmYWxzZSxcbiAgc2VhcmNoOiBmYWxzZSxcbiAgc2hvd1VuYXNzaWduZWREZXZpY2VzOiBmYWxzZSxcbiAgdmlldzogJ3RyZWUnLFxuICBzaG93Q2hpbGREZXZpY2VzOiBmYWxzZVxufTtcblxuZXhwb3J0IGludGVyZmFjZSBBc3NldFNlbGVjdG9yT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBBbHJlYWR5IHNlbGVjdGVkIGRldmljZXMuXG4gICAqL1xuICBzZWxlY3RlZERldmljZXM/OiBJSWRlbnRpZmllZCB8IElJZGVudGlmaWVkW107XG4gIC8qKlxuICAgKiBEZWZpbmVzIGEgbGFiZWwgdG8gYmUgc2hvd24gdG8gdGhlIHVzZXIuXG4gICAqL1xuICBsYWJlbD86IHN0cmluZztcbiAgLyoqXG4gICAqIENhbiB0aGUgdXNlciBzZWxlY3QgbXVsdGlwbGUgYXNzZXRzLlxuICAgKi9cbiAgbXVsdGk/OiBib29sZWFuO1xuICAvKipcbiAgICogZGlzcGxheXMgYSBmaWx0ZXIgaW5wdXQgb24gZXZlcnkgY29sdW1uIHdoZW4gdXNpbmcgdGhlIG1pbGxlciB2aWV3LlxuICAgKi9cbiAgc2hvd0ZpbHRlcj86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBkaXNwbGF5cyBhIGNvbHVtbiBoZWFkZXIgb24gZXZlcnkgY29sdW1uIHdoZW4gdXNpbmcgdGhlIG1pbGxlciB2aWV3LlxuICAgKi9cbiAgY29sdW1uSGVhZGVycz86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBEaXNwbGF5cyBvbmx5IHRoZSBzZWxlY3QgY29sdW1uLlxuICAgKi9cbiAgc2luZ2xlQ29sdW1uPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFNldCB0byB0cnVlIHRvIG1hcmsgaXQgYXMgcmVxdWlyZWQgb24gYSBmb3JtLlxuICAgKi9cbiAgcmVxdWlyZWQ/OiBib29sZWFuO1xuICAvKipcbiAgICogSW4gc2ltcGxlIG1vZGVsLW1vZGUgdGhlIHJlc3VsdCB3aWxsIG9ubHkgY29udGFpbiB0aGUgSURzIGFuZCBuYW1lIG9mIHRoZSBzZWxlY3RlZFxuICAgKiBhc3NldHMuIEluIGZ1bGwgbW9kZSwgZXZlcnl0aGluZyBpcyBjb250YWluZWQuXG4gICAqL1xuICBtb2RlbE1vZGU/OiAnc2ltcGxlJyB8ICdmdWxsJztcbiAgLyoqXG4gICAqIFNldCB0aGlzIHRvIHRydWUsIGlmIHRoZSBzZWxlY3RvciBzaG91bGQgb25seSBzaG93IGdyb3Vwcy5cbiAgICovXG4gIGdyb3Vwc09ubHk/O1xuICAvKipcbiAgICogU2V0IHRoaXMgdHJ1ZSwgaWYgZ3JvdXBzIHNob3VsZCBiZSBzZWxlY3RhYmxlLlxuICAgKi9cbiAgZ3JvdXBzU2VsZWN0YWJsZT87XG4gIC8qKlxuICAgKiBFbmFibGUgdG8gZGlzcGxheSBnbG9iYWwgc2VhcmNoIGluIHRoZSBhc3NldC1zZWxlY3RvciAob25seSBwb3NzaWJsZSB3aGl0aG91dCBkZXZpY2UgY29udGV4dCkuXG4gICAqL1xuICBzZWFyY2g/OiBib29sZWFuO1xuICAvKipcbiAgICogRGlzcGxheXMgYWxsIHVuYXNzaWduZWQgZGV2aWNlcyBpbiBhIGN1c3RvbSByb290IGdyb3VwLlxuICAgKi9cbiAgc2hvd1VuYXNzaWduZWREZXZpY2VzPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFNldCB0aGUgdmlldyBvZiB0aGUgYXNzZXQgc2VsZWN0b3Igd2l0aCB0cmVlIHZpZXcgYXMgZGVmYXVsdC5cbiAgICovXG4gIHZpZXc/OiAndHJlZScgfCAnbWlsbGVyJztcbiAgLyoqXG4gICAqIFVzZWQgb25seSBmb3IgbWlsbGVyLXZpZXcsIGRpc3BsYXlzIHRoZSBjb2x1bW4gbGV2ZWwgZm9yIHRoZSBjdXJyZW50IG5vZGUuXG4gICAqIEUuZyBpZiB0aGUgaW5kZXggaXMgb25lLCB0aGlzIHdpbGwgYmUgc2Vjb25kIGNvbHVtbi5cbiAgICovXG4gIGluZGV4PzogbnVtYmVyO1xuICAvKipcbiAgICogVXNlZCBvbmx5IGZvciBzaW5nbGUgY29sdW1uLCB0aGUgYXJyYXkgY29udGFpbnMgYWxsIHNlbGVjdGVkIGNvbHVtbnMuXG4gICAqL1xuICBzZWxlY3RlZENvbHVtbnM/OiBJSWRlbnRpZmllZFtdIHwgSUlkZW50aWZpZWQ7XG4gIC8qKlxuICAgKiBEZXZpY2VzIHdpdGggY2hpbGRyZW4gY2FuIGJlIHNlbGVjdGVkIHRvIHNob3cgdGhlaXIgY2hpbGQgZGV2aWNlcy5cbiAgICovXG4gIHNob3dDaGlsZERldmljZXM/OiBib29sZWFuO1xufVxuIiwiaW1wb3J0IHsgQ2xpY2tPcHRpb25zLCBnZXR0ZXh0IH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tICcuLi9hY3Rpb24uZW51bSc7XG5pbXBvcnQgeyBHcm91cE5vZGVDb25maWcgfSBmcm9tICcuL2Fzc2V0LXNlbGVjdG9yLm1vZGVsJztcbmltcG9ydCB7IEdyb3VwTm9kZSB9IGZyb20gJy4vZ3JvdXAtbm9kZSc7XG5pbXBvcnQgeyBHcm91cE5vZGVTZXJ2aWNlIH0gZnJvbSAnLi9ncm91cC1ub2RlLnNlcnZpY2UnO1xuXG5leHBvcnQgY2xhc3MgVW5hc3NpZ25lZERldmljZXNOb2RlIGV4dGVuZHMgR3JvdXBOb2RlIHtcbiAgc3RhdGljIE5BTUUgPSAnVW5hc3NpZ25lZERldmljZXNOb2RlJztcbiAgbGFiZWwgPSBnZXR0ZXh0KCdVbmFzc2lnbmVkIGRldmljZXMnKTtcbiAgaWNvbiA9ICdkZWxldGUtZm9sZGVyJztcbiAgZ3JvdXBzU2VsZWN0YWJsZSA9IGZhbHNlO1xuICBncm91cHNPbmx5ID0gZmFsc2U7XG4gIHNob3dDaGlsZERldmljZXMgPSBmYWxzZTtcbiAgbW8gPSB7fTtcblxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgc2VydmljZTogR3JvdXBOb2RlU2VydmljZSwgY29uZmlnOiBHcm91cE5vZGVDb25maWcgPSB7fSkge1xuICAgIHN1cGVyKHNlcnZpY2UsIGNvbmZpZyk7XG4gICAgdGhpcy5wcmlvcml0eSA9IEluZmluaXR5O1xuICAgIHRoaXMuc2hvd0NoaWxkRGV2aWNlcyA9IGNvbmZpZy5zaG93Q2hpbGREZXZpY2VzIHx8IGZhbHNlO1xuICB9XG5cbiAgY2xpY2sob3B0aW9uczogQ2xpY2tPcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmhvb2tFdmVudHMoKTtcbiAgICBpZiAob3B0aW9ucy5vcGVuKSB7XG4gICAgICB0aGlzLmV2ZW50cy5uZXh0KEFjdGlvbi5GRVRDSCk7XG4gICAgfVxuICB9XG5cbiAgYWRkTWFuYWdlZE9iamVjdChtbykge1xuICAgIHRoaXMuYWRkKHRoaXMuc2VydmljZS5jcmVhdGVDaGlsZE5vZGUoeyBtbywgc2hvd0NoaWxkRGV2aWNlczogdGhpcy5zaG93Q2hpbGREZXZpY2VzIH0pKTtcbiAgfVxuXG4gIGZldGNoKCkge1xuICAgIHJldHVybiB0aGlzLnNlcnZpY2UuZ2V0VW5hc3NpZ25lZERldmljZXModGhpcy5zaG93Q2hpbGREZXZpY2VzLCB0aGlzLmZpbHRlclF1ZXJ5JC52YWx1ZSk7XG4gIH1cblxuICBpc0dyb3VwKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIFVuYXNzaWduZWREZXZpY2VzTm9kZS5OQU1FO1xuICB9XG59XG4iLCJpbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IElJZGVudGlmaWVkLCBJTWFuYWdlZE9iamVjdCwgSW52ZW50b3J5U2VydmljZSB9IGZyb20gJ0BjOHkvY2xpZW50JztcbmltcG9ydCB7IEdyb3VwTm9kZVNlcnZpY2UgfSBmcm9tICcuL2dyb3VwLW5vZGUuc2VydmljZSc7XG5pbXBvcnQgeyBBc3NldFNlbGVjdG9yU2VydmljZSB9IGZyb20gJy4vYXNzZXQtc2VsZWN0b3Iuc2VydmljZSc7XG5pbXBvcnQgeyBBc3NldFNlbGVjdGlvbkNoYW5nZUV2ZW50LCBBc3NldFNlbGVjdG9yT3B0aW9ucyB9IGZyb20gJy4vYXNzZXQtc2VsZWN0b3IubW9kZWwnO1xuaW1wb3J0IHsgQWJzdHJhY3RDb250cm9sLCBWYWxpZGF0aW9uRXJyb3JzIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5leHBvcnQgY2xhc3MgQXNzZXRTZWxlY3RvckJhc2Uge1xuICAvKipcbiAgICogQ29uZmlnIG9iamVjdCBjb250YWluaW5nIGFsbCBvcHRpb25zIGZvciB0aGUgYXNzZXQgc2VsZWN0b3IuXG4gICAqL1xuICBjb25maWc6IEFzc2V0U2VsZWN0b3JPcHRpb25zID0ge307XG4gIC8qKlxuICAgKiBBbiBhcnJheSBvZiBwcmVkZWZpbmVkIG5vZGVzLlxuICAgKi9cbiAgc2VsZWN0ZWQ6IEFycmF5PFBhcnRpYWw8SU1hbmFnZWRPYmplY3Q+PiB8IElJZGVudGlmaWVkW10gfCBJSWRlbnRpZmllZDtcbiAgLyoqXG4gICAqIFRoZSBsb2FkaW5nIHN0YXRlIG9mIHRoZSBjdXJyZW50IG5vZGUuXG4gICAqL1xuICBpc0xvYWRpbmcgPSBmYWxzZTtcbiAgLyoqXG4gICAqIEVtaXQgdGhlIHNlbGVjdGVkIGFzc2V0IG9yIGFzc2V0cy5cbiAgICovXG4gIG9uU2VsZWN0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyPEFzc2V0U2VsZWN0aW9uQ2hhbmdlRXZlbnQ+KCk7XG4gIC8qKlxuICAgKiBFbWl0cyBpZiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGFzc2V0IGlzIGNsZWFyZWQuXG4gICAqL1xuICBvbkNsZWFyU2VsZWN0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG5cbiAgcHJpdmF0ZSBvbkNoYW5nZTogKG1vOiBJSWRlbnRpZmllZFtdIHwgSUlkZW50aWZpZWQpID0+IHZvaWQ7XG4gIHByaXZhdGUgb25Ub3VjaGVkOiAoKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBncm91cE5vZGVTZXJ2aWNlOiBHcm91cE5vZGVTZXJ2aWNlLFxuICAgIHByb3RlY3RlZCBpbnZlbnRvcnk6IEludmVudG9yeVNlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGFzc2V0U2VsZWN0b3JTZXJ2aWNlOiBBc3NldFNlbGVjdG9yU2VydmljZVxuICApIHt9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHZhbGlkYXRlKGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCk6IFZhbGlkYXRpb25FcnJvcnMge1xuICAgIGlmICh0aGlzLmNvbmZpZy5yZXF1aXJlZCAmJiAoIWNvbnRyb2wudmFsdWUgfHwgY29udHJvbC52YWx1ZS5sZW5ndGggPT09IDApKSB7XG4gICAgICByZXR1cm4geyByZXF1aXJlZDogdHJ1ZSB9O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICB3cml0ZVZhbHVlKG9iajogYW55KTogdm9pZCB7XG4gICAgdGhpcy5zZWxlY3RlZCA9IHRoaXMuYXNzZXRTZWxlY3RvclNlcnZpY2Uubm9ybWFsaXplVmFsdWUob2JqLCB0aGlzLmNvbmZpZy5tb2RlbE1vZGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46IGFueSk6IHZvaWQge1xuICAgIHRoaXMub25DaGFuZ2UgPSBmbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICByZWdpc3Rlck9uVG91Y2hlZChmbjogYW55KTogdm9pZCB7XG4gICAgdGhpcy5vblRvdWNoZWQgPSBmbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBkb0JsdXIoKSB7XG4gICAgaWYgKHRoaXMub25Ub3VjaGVkKSB7XG4gICAgICB0aGlzLm9uVG91Y2hlZCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZXNlbGVjdHMgYWxsIGV4cGVjdCB0aGUgZ2l2ZW4gb25lLlxuICAgKiBAcGFyYW0gc2VsZWN0ZWRNbyBUaGUgc2VsZWN0ZWQgYXNzZXQgKG9wdGlvbmFsLCBpZiBlbXB0eSAtPiBqdXN0IGRlc2VsZWN0IGFsbCkuXG4gICAqL1xuICBkZXNlbGVjdEFsbChzZWxlY3RlZE1vPzogSU1hbmFnZWRPYmplY3QpIHtcbiAgICB0aGlzLnNlbGVjdGVkID0gW107XG4gICAgaWYgKHNlbGVjdGVkTW8pIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWQgPSBbdGhpcy5hc3NldFNlbGVjdG9yU2VydmljZS5zaW1wbGlmeU1vZGVsKHNlbGVjdGVkTW8sIHRoaXMuY29uZmlnLm1vZGVsTW9kZSldO1xuICAgIH1cbiAgICB0aGlzLmVtaXRDaGFuZ2UodGhpcy5zZWxlY3RlZCwgc2VsZWN0ZWRNbywgISFzZWxlY3RlZE1vKTtcbiAgICB0aGlzLmRvQmx1cigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYW4gbWFuYWdlZCBvYmplY3QgdG8gdGhlIHNlbGVjdGVkIGFycmF5IGFuZCBlbWl0cyB0aGUgY2hhbmdlLlxuICAgKiBAcGFyYW0gc2VsZWN0ZWRNbyBUaGUgc2VsZWN0ZWQgYXNzZXQuXG4gICAqL1xuICBzZWxlY3Qoc2VsZWN0ZWRNbzogSU1hbmFnZWRPYmplY3QpIHtcbiAgICBpZiAoIXRoaXMuY29uZmlnLm11bHRpKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkID0gW107XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5nZXRJbmRleE9mU2VsZWN0ZWQodGhpcy5zZWxlY3RlZCwgc2VsZWN0ZWRNbyk7XG4gICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgdGhpcy5zZWxlY3RlZC5wdXNoKFxuICAgICAgICB0aGlzLmFzc2V0U2VsZWN0b3JTZXJ2aWNlLnNpbXBsaWZ5TW9kZWwoc2VsZWN0ZWRNbywgdGhpcy5jb25maWcubW9kZWxNb2RlKVxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5lbWl0Q2hhbmdlKHRoaXMuc2VsZWN0ZWQsIHNlbGVjdGVkTW8sIHRydWUpO1xuICAgIHRoaXMuZG9CbHVyKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhIG1hbmFnZWQgb2JqZWN0IGZyb20gdGhlIHNlbGVjdGVkIGFycmF5IGFuZCBlbWl0cyB0aGUgY2hhbmdlLlxuICAgKiBAcGFyYW0gc2VsZWN0ZWRNbyBUaGUgc2VsZWN0ZWQgYXNzZXQuXG4gICAqL1xuICBkZXNlbGVjdChzZWxlY3RlZE1vOiBJTWFuYWdlZE9iamVjdCkge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5nZXRJbmRleE9mU2VsZWN0ZWQodGhpcy5zZWxlY3RlZCwgc2VsZWN0ZWRNbyk7XG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWQuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gICAgdGhpcy5lbWl0Q2hhbmdlKHRoaXMuc2VsZWN0ZWQsIHNlbGVjdGVkTW8sIGZhbHNlKTtcbiAgICB0aGlzLmRvQmx1cigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgaXRlbS5cbiAgICogQHBhcmFtIHNlbGVjdGVkIEFsbCBzZWxlY3RlZCBpdGVtc1xuICAgKiBAcGFyYW0gc2VsZWN0ZWRNbyBUaGUgbmV3IHNlbGVjdGVkIGl0ZW0tXG4gICAqIEByZXR1cm5zIEFuIGluZGV4LCBvciAtMSBpZiBub3QgZm91bmQuXG4gICAqL1xuICBnZXRJbmRleE9mU2VsZWN0ZWQoXG4gICAgc2VsZWN0ZWQ6IEFycmF5PFBhcnRpYWw8SUlkZW50aWZpZWQ+PiB8IFBhcnRpYWw8SUlkZW50aWZpZWQ+LFxuICAgIHNlbGVjdGVkTW86IElJZGVudGlmaWVkXG4gICkge1xuICAgIHJldHVybiBzZWxlY3RlZC5maW5kSW5kZXgobW8gPT4gbW8uaWQgPT09IHNlbGVjdGVkTW8uaWQpO1xuICB9XG5cbiAgZW1pdENoYW5nZShzZWxlY3RlZDogSUlkZW50aWZpZWQgfCBJSWRlbnRpZmllZFtdLCBpdGVtOiBJTWFuYWdlZE9iamVjdCwgaXNTZWxlY3RlZDogYm9vbGVhbikge1xuICAgIGNvbnN0IGNoYW5nZXMgPSB0aGlzLmNvbmZpZy5tdWx0aSA/IHNlbGVjdGVkIDogc2VsZWN0ZWRbMF07XG4gICAgaWYgKHRoaXMub25DaGFuZ2UpIHtcbiAgICAgIHRoaXMub25DaGFuZ2UoY2hhbmdlcyk7XG4gICAgfVxuICAgIHRoaXMub25TZWxlY3RlZC5lbWl0KHsgaXRlbXM6IGNoYW5nZXMsIGNoYW5nZTogeyBpdGVtLCBpc1NlbGVjdGVkIH0gfSk7XG4gIH1cblxuICBjcmVhdGVEZWZhdWx0Um9vdE5vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ3JvdXBOb2RlU2VydmljZS5jcmVhdGVHcm91cE5vZGUoe1xuICAgICAgcm9vdDogdHJ1ZSxcbiAgICAgIGdyb3Vwc1NlbGVjdGFibGU6IHRoaXMuY29uZmlnLmdyb3Vwc1NlbGVjdGFibGUsXG4gICAgICBncm91cHNPbmx5OiB0aGlzLmNvbmZpZy5ncm91cHNPbmx5LFxuICAgICAgc2hvd0NoaWxkRGV2aWNlczogdGhpcy5jb25maWcuc2hvd0NoaWxkRGV2aWNlc1xuICAgIH0pO1xuICB9XG4gIGFzeW5jIGNyZWF0ZU1hbmFnZWRPYmplY3RSb290Tm9kZShhc3NldDogSUlkZW50aWZpZWQpIHtcbiAgICBpZiAoKGFzc2V0IGFzIElJZGVudGlmaWVkKS5pZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ3JvdXBOb2RlU2VydmljZS5jcmVhdGVHcm91cE5vZGUoe1xuICAgICAgICBtbzogYXNzZXQgYXMgSU1hbmFnZWRPYmplY3QsXG4gICAgICAgIGdyb3Vwc1NlbGVjdGFibGU6IHRoaXMuY29uZmlnLmdyb3Vwc1NlbGVjdGFibGUsXG4gICAgICAgIGdyb3Vwc09ubHk6IHRoaXMuY29uZmlnLmdyb3Vwc09ubHksXG4gICAgICAgIHNob3dDaGlsZERldmljZXM6IHRoaXMuY29uZmlnLnNob3dDaGlsZERldmljZXNcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCB7IGRhdGE6IG1vIH0gPSBhd2FpdCB0aGlzLmludmVudG9yeS5kZXRhaWwoYXNzZXQpO1xuICAgIHJldHVybiB0aGlzLmdyb3VwTm9kZVNlcnZpY2UuY3JlYXRlR3JvdXBOb2RlKHtcbiAgICAgIG1vLFxuICAgICAgZ3JvdXBzU2VsZWN0YWJsZTogdGhpcy5jb25maWcuZ3JvdXBzU2VsZWN0YWJsZSxcbiAgICAgIGdyb3Vwc09ubHk6IHRoaXMuY29uZmlnLmdyb3Vwc09ubHksXG4gICAgICBzaG93Q2hpbGREZXZpY2VzOiB0aGlzLmNvbmZpZy5zaG93Q2hpbGREZXZpY2VzXG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgRXZlbnRFbWl0dGVyLFxuICBJbnB1dCxcbiAgT25Jbml0LFxuICBPdXRwdXQsXG4gIFNpbXBsZUNoYW5nZXMsXG4gIGZvcndhcmRSZWYsXG4gIENoYW5nZURldGVjdG9yUmVmXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTkdfVkFMSURBVE9SUywgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBJSWRlbnRpZmllZCwgSU1hbmFnZWRPYmplY3QsIEludmVudG9yeVNlcnZpY2UgfSBmcm9tICdAYzh5L2NsaWVudCc7XG5pbXBvcnQgeyBHcm91cE5vZGVTZXJ2aWNlIH0gZnJvbSAnLi9ncm91cC1ub2RlLnNlcnZpY2UnO1xuaW1wb3J0IHsgQXNzZXRTZWxlY3RvclNlcnZpY2UgfSBmcm9tICcuL2Fzc2V0LXNlbGVjdG9yLnNlcnZpY2UnO1xuaW1wb3J0IHsgR3JvdXBOb2RlIH0gZnJvbSAnLi9ncm91cC1ub2RlJztcbmltcG9ydCB7XG4gIEFzc2V0U2VsZWN0aW9uQ2hhbmdlRXZlbnQsXG4gIEFzc2V0U2VsZWN0b3JPcHRpb25zLFxuICBDT05GSUdfT1BUSU9OU19ERUZBVUxUXG59IGZyb20gJy4vYXNzZXQtc2VsZWN0b3IubW9kZWwnO1xuaW1wb3J0IHsgVW5hc3NpZ25lZERldmljZXNOb2RlIH0gZnJvbSAnLi91bmFzc2lnbmVkLWRldmljZXMtbm9kZSc7XG5pbXBvcnQgeyBBc3NldFNlbGVjdG9yQmFzZSB9IGZyb20gJy4vYXNzZXQtc2VsZWN0b3ItYmFzZSc7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyB0YWtlVW50aWwsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuLyoqXG4gKiBEaXNwbGF5cyBhIGhpZXJhcmNoaWNhbCB0cmVlIHNlbGVjdG9yIGZvciBhc3NldHMuXG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2M4eS1hc3NldC1zZWxlY3RvcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9hc3NldC1zZWxlY3Rvci5jb21wb25lbnQuaHRtbCcsXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgbXVsdGk6IHRydWUsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBBc3NldFNlbGVjdG9yQ29tcG9uZW50KVxuICAgIH0sXG4gICAge1xuICAgICAgcHJvdmlkZTogTkdfVkFMSURBVE9SUyxcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IEFzc2V0U2VsZWN0b3JDb21wb25lbnQpLFxuICAgICAgbXVsdGk6IHRydWVcbiAgICB9XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgQXNzZXRTZWxlY3RvckNvbXBvbmVudCBleHRlbmRzIEFzc2V0U2VsZWN0b3JCYXNlIGltcGxlbWVudHMgT25Jbml0IHtcbiAgLyoqXG4gICAqIENvbmZpZyBvYmplY3QgY29udGFpbmluZyBhbGwgb3B0aW9ucyBmb3IgdGhlIGFzc2V0IHNlbGVjdG9yLlxuICAgKi9cbiAgQElucHV0KCkgY29uZmlnOiBBc3NldFNlbGVjdG9yT3B0aW9ucyA9IHt9O1xuICAvKipcbiAgICogRGVmaW5lcyB0aGUgbm9kZSwgd2hpY2ggc2hvdWxkIGJlIGRpc3BsYXllZCBhcyBhY3RpdmUuXG4gICAqL1xuICBASW5wdXQoKSBhY3RpdmU6IEdyb3VwTm9kZTtcbiAgLyoqXG4gICAqIFVzZWQgb25seSBmb3IgbWlsbGVyLXZpZXcsIGRpc3BsYXlzIHRoZSBjb2x1bW4gbGV2ZWwgZm9yIHRoZSBjdXJyZW50IG5vZGUuXG4gICAqIEUuZyBpZiB0aGUgaW5kZXggaXMgb25lLCB0aGlzIHdpbGwgYmUgc2Vjb25kIGNvbHVtbi5cbiAgICovXG4gIEBJbnB1dCgpIGluZGV4ID0gMDtcbiAgLyoqXG4gICAqIFRoZSBhc3NldCB0byB1c2UgYXMgcm9vdC5cbiAgICovXG4gIEBJbnB1dCgpIGFzc2V0OiBJSWRlbnRpZmllZCA9IHVuZGVmaW5lZDtcbiAgLyoqXG4gICAqIFRoZSBzZWxlY3RlZCBkZXZpY2UuXG4gICAqL1xuICBASW5wdXQoKSBzZWxlY3RlZERldmljZTogSU1hbmFnZWRPYmplY3QgPSB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBBbiBhcnJheSBvZiBwcmVkZWZpbmVkIG5vZGVzLlxuICAgKi9cbiAgQElucHV0KCkgc2VsZWN0ZWQ6IEFycmF5PFBhcnRpYWw8SU1hbmFnZWRPYmplY3Q+PiB8IElJZGVudGlmaWVkW10gfCBJSWRlbnRpZmllZCA9IFtdO1xuICAvKipcbiAgICogVGhlIG5vZGUgdG8gdXNlIGFzIHJvb3QuIFlvdSBjYW4gZWl0aGVyIHNldCB0aGlzLCBvciB0aGUgYXNzZXQgdG8gc3RhcnQgZnJvbS5cbiAgICovXG4gIEBJbnB1dCgpIHJvb3ROb2RlOiBHcm91cE5vZGU7XG4gIC8qKlxuICAgKiBBbGwgY3VycmVudGx5IHNlbGVjdGVkIGFzc2V0cy5cbiAgICovXG4gIEBJbnB1dCgpIHNlbGVjdGVkSXRlbXM6IElJZGVudGlmaWVkW10gfCBJSWRlbnRpZmllZCA9IFtdO1xuICBASW5wdXQoKSBjb250YWluZXI6ICcnIHwgJ2JvZHknID0gJ2JvZHknO1xuICAvKipcbiAgICogRW1pdHMgaWYgb25lIGl0ZW0gd2FzIHNlbGVjdGVkIChhbGwgY3VycmVudGx5IHNlbGVjdGVkIG5vZGVzKS5cbiAgICovXG4gIEBPdXRwdXQoKSBvblNlbGVjdGVkID0gbmV3IEV2ZW50RW1pdHRlcjxBc3NldFNlbGVjdGlvbkNoYW5nZUV2ZW50PigpO1xuICAvKipcbiAgICogRW1pdHMgaWYgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBhc3NldCBpcyBjbGVhcmVkLlxuICAgKi9cbiAgQE91dHB1dCgpIG9uQ2xlYXJTZWxlY3RlZCA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgLyoqXG4gICAqIFVzZWQgb25seSBmb3IgbWlsbGVyIHZpZXcuIEVtaXQgdGhlIHNlbGVjdGVkIG5vZGUgYW5kIHVzZSBpdCBhcyBhICdyb290Tm9kZScgZm9yIHRoZSBuZXcgY29sdW1uLlxuICAgKi9cbiAgQE91dHB1dCgpIG9uUm93U2VsZWN0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgLyoqXG4gICAqIEVtaXRzIHRoZSBjdXJyZW50IGxvYWRpbmcgc3RhdGUgb2YgdGhlIG5vZGUuXG4gICAqL1xuICBAT3V0cHV0KCkgb25Mb2FkID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBmaWx0ZXIgYXBwbGllZC5cbiAgICovXG4gIGZpbHRlclRleHQgPSAnJztcbiAgLyoqXG4gICAqIERpc3BsYXlzIHRoZSBnbG9iYWwgc2VhcmNoIGF0IGFsbCB0aW1lcyBpZiB0aGUgbWlsbGVyIHZpZXcgaXMgdXNlZFxuICAgKiBvbiByb290IGdyb3VwIGxldmVsLlxuICAgKi9cbiAgcm9vdCA9IGZhbHNlO1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgdW5zdWJzY3JpYmUkID0gbmV3IFN1YmplY3Q8YW55PigpO1xuXG4gIC8qKlxuICAgKiBAaWdub3JlIG9ubHkgRElcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBncm91cE5vZGVTZXJ2aWNlOiBHcm91cE5vZGVTZXJ2aWNlLFxuICAgIHByb3RlY3RlZCBpbnZlbnRvcnk6IEludmVudG9yeVNlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGFzc2V0U2VsZWN0b3JTZXJ2aWNlOiBBc3NldFNlbGVjdG9yU2VydmljZSxcbiAgICBwcm90ZWN0ZWQgY2Q6IENoYW5nZURldGVjdG9yUmVmXG4gICkge1xuICAgIHN1cGVyKGdyb3VwTm9kZVNlcnZpY2UsIGludmVudG9yeSwgYXNzZXRTZWxlY3RvclNlcnZpY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGVuIGEgbm9kZSB3YXMgc2VsZWN0ZWQsIGlmIGEgbmV3IGNvbHVtbiBuZWVkcyB0byBiZSBhZGRlZC5cbiAgICogQHBhcmFtIG5vZGUgVGhlIG5vZGUgdGhhdCB3YXMgY2xpY2tlZC5cbiAgICogQHBhcmFtIGluZGV4IFRoZSBjdXJyZW50IGluZGV4IG9mIHRoaXMgbm9kZS5cbiAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgY2xpY2sgd2FzIGhhbmRsZWQgYW5kIGEgbmV3IGNvbHVtbiB3YXMgYWRkZWQuXG4gICAqL1xuICBoYW5kbGVOZXh0TWlsbGVyVmlld0NvbHVtbihub2RlOiBHcm91cE5vZGUsIGluZGV4OiBudW1iZXIpIHtcbiAgICBjb25zdCBub2RlQ29weSA9IE9iamVjdC5jcmVhdGUobm9kZSk7XG4gICAgY29uc3QgaXNTYW1lQXNSb290ID0gdGhpcy5yb290Tm9kZSA9PT0gbm9kZTtcbiAgICBjb25zdCBpc1VuYXNzaWduZWREZXZpY2VzTm9kZSA9IG5vZGUudG9TdHJpbmcoKSA9PT0gVW5hc3NpZ25lZERldmljZXNOb2RlLk5BTUU7XG4gICAgY29uc3QgaXNOZXdDb2x1bW5OZWVkZWQgPVxuICAgICAgIWlzU2FtZUFzUm9vdCAmJiAobm9kZS5pc0dyb3VwKCkgfHwgaXNVbmFzc2lnbmVkRGV2aWNlc05vZGUgfHwgbm9kZS5oYXNDaGlsZERldmljZXMoKSk7XG5cbiAgICBpZiAoaXNOZXdDb2x1bW5OZWVkZWQpIHtcbiAgICAgIHRoaXMub25Sb3dTZWxlY3RlZC5lbWl0KHsgbm9kZUNvcHksIGluZGV4IH0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBhc3luYyBuZ09uSW5pdCgpIHtcbiAgICBpZiAodGhpcy5pbmRleCA9PT0gMCkge1xuICAgICAgdGhpcy5jb25maWcgPSB7IC4uLkNPTkZJR19PUFRJT05TX0RFRkFVTFQsIC4uLnRoaXMuY29uZmlnIH07XG4gICAgfVxuICAgIGNvbnN0IHNob3VsZFJlc2V0TmFtZUZpbHRlciA9XG4gICAgICB0aGlzLnJvb3ROb2RlICYmIHRoaXMucm9vdE5vZGUubW8gJiYgdGhpcy5jb25maWcudmlldyA9PT0gJ21pbGxlcic7XG4gICAgaWYgKHNob3VsZFJlc2V0TmFtZUZpbHRlcikge1xuICAgICAgdGhpcy5hcHBseUZpbHRlcignJyk7XG4gICAgfVxuXG4gICAgY29uc3QgaXNPbmx5QXNzZXROb2RlRGVmaW5lZCA9IHRoaXMuYXNzZXQ7XG4gICAgaWYgKGlzT25seUFzc2V0Tm9kZURlZmluZWQpIHtcbiAgICAgIHRoaXMucm9vdE5vZGUgPSBhd2FpdCB0aGlzLmNyZWF0ZU1hbmFnZWRPYmplY3RSb290Tm9kZSh0aGlzLmFzc2V0KTtcbiAgICB9XG5cbiAgICBjb25zdCBpc0FueU5vZGVEZWZpbmVkID1cbiAgICAgICF0aGlzLnJvb3ROb2RlICYmICghdGhpcy5hc3NldCB8fCBPYmplY3Qua2V5cyh0aGlzLmFzc2V0KS5sZW5ndGggPT09IDApO1xuICAgIGlmIChpc0FueU5vZGVEZWZpbmVkKSB7XG4gICAgICB0aGlzLnJvb3ROb2RlID0gdGhpcy5jcmVhdGVEZWZhdWx0Um9vdE5vZGUoKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLmNvbmZpZy5zaG93VW5hc3NpZ25lZERldmljZXMgJiZcbiAgICAgICghdGhpcy5hc3NldCB8fCBPYmplY3Qua2V5cyh0aGlzLmFzc2V0KS5sZW5ndGggPT09IDApICYmXG4gICAgICB0aGlzLnJvb3ROb2RlLnJvb3RcbiAgICApIHtcbiAgICAgIHRoaXMucm9vdE5vZGUuYWRkKFxuICAgICAgICBuZXcgVW5hc3NpZ25lZERldmljZXNOb2RlKHRoaXMuZ3JvdXBOb2RlU2VydmljZSwge1xuICAgICAgICAgIHNob3dDaGlsZERldmljZXM6IHRoaXMuY29uZmlnLnNob3dDaGlsZERldmljZXNcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMucm9vdCA9IHRoaXMucm9vdE5vZGUucm9vdDtcbiAgfVxuXG4gIGFzeW5jIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICBpZiAoXG4gICAgICBjaGFuZ2VzLmFzc2V0ICYmXG4gICAgICBjaGFuZ2VzLmFzc2V0LmN1cnJlbnRWYWx1ZSAmJlxuICAgICAgT2JqZWN0LmtleXMoY2hhbmdlcy5hc3NldC5jdXJyZW50VmFsdWUpLmxlbmd0aCAhPT0gMFxuICAgICkge1xuICAgICAgdGhpcy5yb290Tm9kZSA9IGF3YWl0IHRoaXMuY3JlYXRlTWFuYWdlZE9iamVjdFJvb3ROb2RlKGNoYW5nZXMuYXNzZXQuY3VycmVudFZhbHVlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hhbmdlcyB0aGUgY3VycmVudCByb290IHRvIG9uZSBsZXZlbCBiYWNrLlxuICAgKi9cbiAgYmFjaygpIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuaW5kZXggLSAxO1xuICAgIGNvbnN0IG5vZGVDb3B5ID0gT2JqZWN0LmNyZWF0ZSh0aGlzLnJvb3ROb2RlLnBhcmVudHNbMF0pO1xuICAgIHRoaXMub25Sb3dTZWxlY3RlZC5lbWl0KHsgbm9kZUNvcHksIGluZGV4IH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgY3VycmVudCBmaWx0ZXIuXG4gICAqL1xuICBjbGVhckZpbHRlcnMoKSB7XG4gICAgdGhpcy5maWx0ZXJUZXh0ID0gJyc7XG4gICAgdGhpcy5hcHBseUZpbHRlcignJyk7XG4gIH1cblxuICBjbGVhclNlbGVjdGVkRGV2aWNlcygpIHtcbiAgICB0aGlzLnNlbGVjdGVkRGV2aWNlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuYXBwbHlGaWx0ZXIoJycpO1xuICAgIHRoaXMub25DbGVhclNlbGVjdGVkLmVtaXQoKTtcbiAgfVxuXG4gIGlzR3JvdXBTZWxlY3RlZCgpIHtcbiAgICBpZiAodGhpcy5zZWxlY3RlZEl0ZW1zLnNvbWUoc2VsZWN0ZWROb2RlID0+IHNlbGVjdGVkTm9kZS5pZCA9PT0gdGhpcy5yb290Tm9kZS5tbz8uaWQpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZ3JvdXBOYW1lRmlsdGVyKG5hbWVGaWx0ZXI6IHN0cmluZywgbW9JZCwgc2hvd1VuYXNzaWduZWREZXZpY2VzPzogYm9vbGVhbikge1xuICAgIGlmIChuYW1lRmlsdGVyKSB7XG4gICAgICBjb25zdCBmaWx0ZXJCeU5hbWUgPSBzaG93VW5hc3NpZ25lZERldmljZXNcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBfX2ZpbHRlcjoge1xuICAgICAgICAgICAgICBuYW1lOiBuYW1lRmlsdGVyXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX19vcmRlcmJ5OiBbeyBuYW1lOiAxIH1dXG4gICAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIF9fZmlsdGVyOiB7XG4gICAgICAgICAgICAgIG5hbWU6IG5hbWVGaWx0ZXIsXG4gICAgICAgICAgICAgIF9fYnlncm91cGlkOiBtb0lkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgIHJldHVybiB0aGlzLmFzc2V0U2VsZWN0b3JTZXJ2aWNlLnF1ZXJpZXNVdGlsLmJ1aWxkUXVlcnkoZmlsdGVyQnlOYW1lKTtcbiAgICB9XG4gICAgY29uc3QgZGVmYXVsdEZpbHRlciA9IHtcbiAgICAgIF9fZmlsdGVyOiB7XG4gICAgICAgIF9fYnlncm91cGlkOiBtb0lkXG4gICAgICB9LFxuICAgICAgX19vcmRlcmJ5OiBbeyBuYW1lOiAxIH1dXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5hc3NldFNlbGVjdG9yU2VydmljZS5xdWVyaWVzVXRpbC5idWlsZFF1ZXJ5KGRlZmF1bHRGaWx0ZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGxpZXMgYSBmaWx0ZXIuXG4gICAqIEBwYXJhbSBmaWx0ZXIgVGhlIGZpbHRlciB0byBhcHBseS5cbiAgICovXG4gIGFzeW5jIGFwcGx5RmlsdGVyKGZpbHRlcjogc3RyaW5nKSB7XG4gICAgdGhpcy5yb290Tm9kZS5maWx0ZXJRdWVyeSQubmV4dChcbiAgICAgIHRoaXMuZ3JvdXBOYW1lRmlsdGVyKFxuICAgICAgICBmaWx0ZXIsXG4gICAgICAgIHRoaXMucm9vdE5vZGUubW8uaWQsXG4gICAgICAgIHRoaXMuaXNVbmFzc2lnbmVkRGV2aWNlc05vZGUoKSA/IHRydWUgOiBmYWxzZVxuICAgICAgKVxuICAgICk7XG4gICAgdGhpcy5yb290Tm9kZS5yZWZyZXNoKCk7XG4gICAgdGhpcy5vbkxvYWQuZW1pdCh7XG4gICAgICBsb2FkaW5nOiB0cnVlLFxuICAgICAgZmlsdGVyVGV4dDogdGhpcy5maWx0ZXJUZXh0LFxuICAgICAgaW5kZXg6IHRoaXMuaW5kZXgsXG4gICAgICBzZWxlY3RlZERldmljZTogdGhpcy5zZWxlY3RlZERldmljZVxuICAgIH0pO1xuICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBVbmFzc2lnbmVkRGV2aWNlIG5vZGUgaXMgdGhlIHJvb3ROb2RlLlxuICAgKi9cbiAgaXNVbmFzc2lnbmVkRGV2aWNlc05vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMucm9vdE5vZGUudG9TdHJpbmcoKSA9PT0gVW5hc3NpZ25lZERldmljZXNOb2RlLk5BTUU7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gdGhlIHVzZXIgcmVzZXRzIHRoZSBzZWFyY2ggcmVzdWx0LlxuICAgKi9cbiAgb25TZWFyY2hSZXN1bHRSZXNldChzZWxlY3RlZEl0ZW0pIHtcbiAgICBpZiAoc2VsZWN0ZWRJdGVtKSB7XG4gICAgICB0aGlzLnJvb3ROb2RlID0gdGhpcy5jcmVhdGVEZWZhdWx0Um9vdE5vZGUoKTtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5zaG93VW5hc3NpZ25lZERldmljZXMpIHtcbiAgICAgICAgdGhpcy5yb290Tm9kZS5hZGQoXG4gICAgICAgICAgbmV3IFVuYXNzaWduZWREZXZpY2VzTm9kZSh0aGlzLmdyb3VwTm9kZVNlcnZpY2UsIHtcbiAgICAgICAgICAgIHNob3dDaGlsZERldmljZXM6IHRoaXMuY29uZmlnLnNob3dDaGlsZERldmljZXNcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY29uZmlnLnZpZXcgPT09ICdtaWxsZXInKSB7XG4gICAgICAgIHRoaXMub25Sb3dTZWxlY3RlZC5lbWl0KHsgcm9vdDogdHJ1ZSB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yb290Tm9kZS5jbGljayh7IG9wZW46IHRydWUgfSk7XG4gICAgICB0aGlzLnJvb3ROb2RlLm5vZGVzRmV0Y2hlZFxuICAgICAgICAucGlwZShcbiAgICAgICAgICB0YXAoKCkgPT4gdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCkpLFxuICAgICAgICAgIHRha2VVbnRpbCh0aGlzLnVuc3Vic2NyaWJlJClcbiAgICAgICAgKVxuICAgICAgICAuc3Vic2NyaWJlKCk7XG5cbiAgICAgIGlmICh0aGlzLmNvbmZpZy52aWV3ID09PSAndHJlZScpIHtcbiAgICAgICAgdGhpcy5yb290Tm9kZS5vcGVuID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIGlmIHRoZSB1c2VyIGNsaWNrcyBvbiBhIHNlYXJjaCByZXN1bHQuXG4gICAqL1xuICBhc3luYyBvblNlYXJjaFJlc3VsdENsaWNrKG1vOiBJTWFuYWdlZE9iamVjdCkge1xuICAgIGNvbnN0IGNhblNlbGVjdE5vZGUgPSB0aGlzLmNvbmZpZy5ncm91cHNTZWxlY3RhYmxlIHx8ICF0aGlzLmdyb3VwTm9kZVNlcnZpY2UuaXNHcm91cChtbyk7XG4gICAgaWYgKHRoaXMuY29uZmlnLnZpZXcgPT09ICdtaWxsZXInKSB7XG4gICAgICB0aGlzLnJvb3ROb2RlID0gYXdhaXQgdGhpcy5jcmVhdGVNYW5hZ2VkT2JqZWN0Um9vdE5vZGUobW8pO1xuICAgICAgdGhpcy5yb290Tm9kZS5jbGljayh7IG9wZW46IHRydWUgfSk7XG4gICAgICBjb25zdCBub2RlQ29weSA9IE9iamVjdC5jcmVhdGUodGhpcy5yb290Tm9kZSk7XG4gICAgICB0aGlzLm9uUm93U2VsZWN0ZWQuZW1pdCh7XG4gICAgICAgIG5vZGVDb3B5LFxuICAgICAgICBpbmRleDogMCxcbiAgICAgICAgc2VsZWN0ZWREZXZpY2VzOiB0aGlzLnNlbGVjdGVkRGV2aWNlLFxuICAgICAgICByb290OiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmNvbmZpZy5tdWx0aSkge1xuICAgICAgdGhpcy5kZXNlbGVjdEFsbCgpO1xuICAgIH1cbiAgICBpZiAoY2FuU2VsZWN0Tm9kZSkge1xuICAgICAgdGhpcy5zZWxlY3QobW8pO1xuICAgIH1cbiAgfVxuXG4gIG9uTG9hZGluZyhpc0xvYWRpbmc6IGJvb2xlYW4pIHtcbiAgICB0aGlzLm9uTG9hZC5lbWl0KHsgbG9hZGluZzogaXNMb2FkaW5nLCBmaWx0ZXJUZXh0OiB0aGlzLmZpbHRlclRleHQgfSk7XG4gICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIG9uU2VsZWN0KG1vOiBJTWFuYWdlZE9iamVjdCkge1xuICAgIHRoaXMuc2VsZWN0KG1vKTtcbiAgfVxuXG4gIG9uRGVzZWxlY3QoY29uZmlnOiB7IGRlc2VsZWN0TW9kZTogJ3NpbmdsZScgfCAnYWxsJzsgbW86IElNYW5hZ2VkT2JqZWN0IH0pIHtcbiAgICBzd2l0Y2ggKGNvbmZpZz8uZGVzZWxlY3RNb2RlKSB7XG4gICAgICBjYXNlICdzaW5nbGUnOlxuICAgICAgICB0aGlzLmRlc2VsZWN0KGNvbmZpZy5tbyk7XG4gICAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYWxsJzpcbiAgICAgICAgdGhpcy5kZXNlbGVjdEFsbChjb25maWcubW8pO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbn1cbiIsIjxkaXZcbiAgY2xhc3M9XCJiZy1pbmhlcml0IHAtdC04IHAtYi04IHNlcGFyYXRvci1ib3R0b21cIlxuICBbbmdDbGFzc109XCJ7ICdwLWwtMTYgcC1hYnNvbHV0ZSBwLXItMTYnOiBjb25maWcudmlldyA9PT0gJ21pbGxlcicsICdzdGlja3ktdG9wJzogY29uZmlnLm11bHRpIH1cIlxuICBbbmdTdHlsZV09XCJ7ICd6LWluZGV4JzogY29uZmlnLnNpbmdsZUNvbHVtbiAmJiBjb25maWcuc2VhcmNoID8gJzMwJyA6ICcyMCcgfVwiXG4gICpuZ0lmPVwiIXNlbGVjdGVkRGV2aWNlICYmIGluZGV4ID09PSAwICYmIChjb25maWcuc2VhcmNoIHx8IGNvbmZpZy5zaW5nbGVDb2x1bW4pXCJcbj5cbiAgPHAgY2xhc3M9XCJ0ZXh0LW1lZGl1bVwiIFtuZ0NsYXNzXT1cInsgJ20tYi00JzogY29uZmlnLnNlYXJjaCAmJiByb290IH1cIj5cbiAgICB7eyBjb25maWcubGFiZWwgfCB0cmFuc2xhdGUgfX1cbiAgPC9wPlxuICA8Yzh5LXNlYXJjaC1pbnB1dFxuICAgICpuZ0lmPVwiY29uZmlnLnNlYXJjaCAmJiByb290XCJcbiAgICAob25DbGljayk9XCJvblNlYXJjaFJlc3VsdENsaWNrKCRldmVudClcIlxuICAgIChyZXNldCk9XCJvblNlYXJjaFJlc3VsdFJlc2V0KCRldmVudClcIlxuICAgIFttb2RlXT1cIidzZWxlY3QnXCJcbiAgICBbY29udGFpbmVyXT1cImNvbnRhaW5lclwiXG4gICAgW2dyb3Vwc09ubHldPVwiY29uZmlnLmdyb3Vwc09ubHlcIlxuICA+PC9jOHktc2VhcmNoLWlucHV0PlxuICA8ZGl2ICpuZ0lmPVwiY29uZmlnLm11bHRpXCIgY2xhc3M9XCJwLXQtNFwiPlxuICAgIDxzcGFuIGNsYXNzPVwibGFiZWwgbGFiZWwtaW5mbyBjaGlwXCIgKm5nRm9yPVwibGV0IHNlbGVjdGVkSXRlbSBvZiBzZWxlY3RlZFwiPlxuICAgICAgPGJ1dHRvblxuICAgICAgICBjbGFzcz1cImJ0biBidG4teHMgYnRuLWNsZWFuIHRleHQtMTAgbS1yLTRcIlxuICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgdGl0bGU9XCJ7eyBzZWxlY3RlZEl0ZW0ubmFtZSB9fVwiXG4gICAgICAgIChjbGljayk9XCJkZXNlbGVjdChzZWxlY3RlZEl0ZW0pXCJcbiAgICAgID5cbiAgICAgICAgPGkgYzh5SWNvbj1cInRpbWVzXCI+PC9pPlxuICAgICAgPC9idXR0b24+XG4gICAgICB7eyBzZWxlY3RlZEl0ZW0ubmFtZSB9fVxuICAgIDwvc3Bhbj5cbiAgPC9kaXY+XG48L2Rpdj5cblxuPGRpdiAqbmdJZj1cInNlbGVjdGVkRGV2aWNlXCIgY2xhc3M9XCJwLXItMTZcIj5cbiAgPGRpdiBjbGFzcz1cImQtZmxleCBwLWItNFwiPlxuICAgIDxwICpuZ0lmPVwic2VsZWN0ZWREZXZpY2U7IGVsc2UgbXVsdGlBc3NldHNcIiBjbGFzcz1cInRleHQtbWVkaXVtIHAtdC04IG0tci04XCI+XG4gICAgICB7eyAnU2VsZWN0ZWQgYXNzZXQnIHwgdHJhbnNsYXRlIH19XG4gICAgPC9wPlxuICAgIDxuZy10ZW1wbGF0ZSAjbXVsdGlBc3NldHM+XG4gICAgICA8cCBjbGFzcz1cInRleHQtbWVkaXVtIG0tci04XCI+e3sgJ1NlbGVjdGVkIGFzc2V0cycgfCB0cmFuc2xhdGUgfX08L3A+XG4gICAgPC9uZy10ZW1wbGF0ZT5cbiAgICA8YnV0dG9uXG4gICAgICBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4teHMgYS1zLWNlbnRlciBtLXQtNCBtLWwtYXV0b1wiXG4gICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgIHRpdGxlPVwie3sgJ0NoYW5nZScgfCB0cmFuc2xhdGUgfX1cIlxuICAgICAgKGNsaWNrKT1cImNsZWFyU2VsZWN0ZWREZXZpY2VzKClcIlxuICAgID5cbiAgICAgIHt7ICdDaGFuZ2UnIHwgdHJhbnNsYXRlIH19XG4gICAgPC9idXR0b24+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPVwiZC1mbGV4XCI+XG4gICAgPGkgW2M4eUljb25dPVwiJ2NoZWNrLWNpcmNsZSdcIiBjbGFzcz1cInRleHQtc3VjY2VzcyBwLWwtMCBwLXItOFwiPjwvaT5cbiAgICA8aVxuICAgICAgYzh5SWNvbj1cInt7IHNlbGVjdGVkRGV2aWNlLnR5cGUgPT09ICdjOHlfRGV2aWNlR3JvdXAnID8gJ2M4eS1ncm91cCcgOiAnZXhjaGFuZ2UnIH19XCJcbiAgICAgIGNsYXNzPVwibS1yLTQgaWNvbi0yMFwiXG4gICAgPjwvaT5cbiAgICA8c3Bhbj57eyBzZWxlY3RlZERldmljZS5uYW1lIH19PC9zcGFuPlxuICA8L2Rpdj5cbjwvZGl2PlxuXG48IS0tIG1pbGxlciBjb2x1bW5zIGhlYWRlciAtLT5cbjxkaXZcbiAgKm5nSWY9XCJcbiAgICBjb25maWcudmlldyA9PT0gJ21pbGxlcicgJiZcbiAgICAoKGNvbmZpZy5zaG93RmlsdGVyICYmICFyb290Tm9kZS5yb290KSB8fCBjb25maWcuY29sdW1uSGVhZGVycyB8fCBjb25maWcuc2luZ2xlQ29sdW1uKSAmJlxuICAgICFzZWxlY3RlZERldmljZVxuICBcIlxuICBjbGFzcz1cIm1pbGxlci1jb2x1bW5fX2hlYWRlciBzdGlja3ktdG9wIGJnLWluaGVyaXQgc2VwYXJhdG9yLWJvdHRvbVwiXG4gIFtuZ0NsYXNzXT1cInsgJ20tdC03MiBwLXQtOCc6IGNvbmZpZy5zZWFyY2gsICdtLXQtMzInOiAhY29uZmlnLnNlYXJjaCAmJiBjb25maWcuc2luZ2xlQ29sdW1uIH1cIlxuICBbbmdTdHlsZV09XCJ7IHRvcDogY29uZmlnLnNlYXJjaCAmJiAhY29uZmlnLnNpbmdsZUNvbHVtbiA/ICc3MnB4JyA6ICcwJyB9XCJcbj5cbiAgPHBcbiAgICBjbGFzcz1cInRleHQtMTIgdGV4dC1tdXRlZCB0ZXh0LXRydW5jYXRlIG0tYi00XCJcbiAgICAqbmdJZj1cImNvbmZpZy5zaW5nbGVDb2x1bW4gJiYgaW5kZXggIT09IDBcIlxuICAgIHRpdGxlPVwie3sgcm9vdE5vZGUuYnJlYWRjcnVtYiB8fCByb290Tm9kZS5sYWJlbCB8IHRyYW5zbGF0ZSB9fVwiXG4gID5cbiAgICA8aSBjOHlJY29uPVwiaG9tZVwiIGNsYXNzPVwibS1yLTRcIj48L2k+XG4gICAge3sgcm9vdE5vZGUuYnJlYWRjcnVtYiB8fCByb290Tm9kZS5sYWJlbCB8IHRyYW5zbGF0ZSB9fVxuICA8L3A+XG4gIDxkaXYgKm5nSWY9XCJjb25maWcuY29sdW1uSGVhZGVycyB8fCBjb25maWcuc2luZ2xlQ29sdW1uXCIgY2xhc3M9XCJkLWZsZXggYS1pLWNlbnRlclwiPlxuICAgIDxidXR0b25cbiAgICAgIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi14cyBtLXItOCBwLXQtMCBwLWItMCBwLWwtNCBwLXItNCBsLWgtMVwiXG4gICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgIHRpdGxlPVwie3sgJ0JhY2snIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICpuZ0lmPVwiY29uZmlnLnNpbmdsZUNvbHVtbiAmJiAhcm9vdE5vZGUucm9vdCAmJiBpbmRleCAhPT0gMFwiXG4gICAgICAoY2xpY2spPVwiYmFjaygpXCJcbiAgICA+XG4gICAgICA8aSBjOHlJY29uPVwiYW5nbGUtbGVmdFwiPjwvaT5cbiAgICA8L2J1dHRvbj5cbiAgICA8bGFiZWxcbiAgICAgICpuZ0lmPVwiIXJvb3ROb2RlLnJvb3QgJiYgaW5kZXggPT09IDAgJiYgKGNvbmZpZy5ncm91cHNTZWxlY3RhYmxlIHx8ICFyb290Tm9kZS5pc0dyb3VwKCkpXCJcbiAgICAgIGNsYXNzPVwiYzh5LXJhZGlvIGNoZWNrYm94LWlubGluZSBtLXItOFwiXG4gICAgPlxuICAgICAgPGlucHV0XG4gICAgICAgIHR5cGU9XCJyYWRpb1wiXG4gICAgICAgIChjaGFuZ2UpPVwic2VsZWN0KHJvb3ROb2RlLm1vKVwiXG4gICAgICAgIFtjaGVja2VkXT1cImlzR3JvdXBTZWxlY3RlZCgpXCJcbiAgICAgICAgdGl0bGU9XCJ7eyAnU2VsZWN0IGdyb3VwJyB8IHRyYW5zbGF0ZSB9fVwiXG4gICAgICAvPlxuICAgICAgPHNwYW4+PC9zcGFuPlxuICAgIDwvbGFiZWw+XG5cbiAgICA8aVxuICAgICAgKm5nSWY9XCJjb25maWcuY29sdW1uSGVhZGVycyAmJiAoY29uZmlnLnNpbmdsZUNvbHVtbiB8fCAoIXJvb3ROb2RlLnJvb3QgJiYgaW5kZXggPT09IDApKVwiXG4gICAgICBjOHlJY29uPVwiYzh5LWdyb3VwLW9wZW5cIlxuICAgICAgY2xhc3M9XCJpY29uLTIwIGM4eS1pY29uLWR1b2NvbG9yIG0tci00XCJcbiAgICA+PC9pPlxuICAgIDxwXG4gICAgICBjbGFzcz1cInRleHQtdHJ1bmNhdGVcIlxuICAgICAgdGl0bGU9XCJ7eyByb290Tm9kZS5sYWJlbCB8IHRyYW5zbGF0ZSB9fVwiXG4gICAgICAqbmdJZj1cImNvbmZpZy5jb2x1bW5IZWFkZXJzXCJcbiAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgJ3RleHQtbGFiZWwtc21hbGwnOiAhY29uZmlnLnNpbmdsZUNvbHVtbixcbiAgICAgICAgJ3RleHQtbWVkaXVtJzogY29uZmlnLnNpbmdsZUNvbHVtblxuICAgICAgfVwiXG4gICAgPlxuICAgICAge3sgcm9vdE5vZGUubGFiZWwgfCB0cmFuc2xhdGUgfX1cbiAgICA8L3A+XG4gIDwvZGl2PlxuXG4gIDxkaXYgKm5nSWY9XCIhcm9vdE5vZGUucm9vdCAmJiBjb25maWcuc2hvd0ZpbHRlclwiIFtuZ0NsYXNzXT1cInsgJ3AtdC00JzogY29uZmlnLmNvbHVtbkhlYWRlcnMgfVwiPlxuICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cCBpbnB1dC1ncm91cC1zbSBpbnB1dC1ncm91cC1zZWFyY2hcIj5cbiAgICAgIDxpbnB1dFxuICAgICAgICBbKG5nTW9kZWwpXT1cImZpbHRlclRleHRcIlxuICAgICAgICBwbGFjZWhvbGRlcj1cInt7ICdGaWx0ZXIgdGhpcyBjb2x1bW7igKYnIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICAgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIlxuICAgICAgICAoa2V5dXAuZW50ZXIpPVwiYXBwbHlGaWx0ZXIoJyonICsgZmlsdGVyVGV4dCArICcqJylcIlxuICAgICAgLz5cbiAgICAgIDxzcGFuIGNsYXNzPVwiaW5wdXQtZ3JvdXAtYnRuXCI+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICB0aXRsZT1cInt7ICdBcHBseSBmaWx0ZXInIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICBjbGFzcz1cImJ0biBidG4tZG90IHAtci04IHAtbC00XCJcbiAgICAgICAgICAoY2xpY2spPVwiYXBwbHlGaWx0ZXIoJyonICsgZmlsdGVyVGV4dCArICcqJylcIlxuICAgICAgICA+XG4gICAgICAgICAgPGkgYzh5SWNvbj1cImZpbHRlclwiPjwvaT5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICB0aXRsZT1cIiB7eyAnQ2xlYXIgZmlsdGVycycgfCB0cmFuc2xhdGUgfX1cIlxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1kb3QgcC1yLTggcC1sLTRcIlxuICAgICAgICAgIChjbGljayk9XCJjbGVhckZpbHRlcnMoKVwiXG4gICAgICAgICAgKm5nSWY9XCJmaWx0ZXJUZXh0Lmxlbmd0aFwiXG4gICAgICAgID5cbiAgICAgICAgICA8aSBjOHlJY29uPVwidGltZXNcIj48L2k+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9zcGFuPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuXG48Yzh5LWFzc2V0LXNlbGVjdG9yLW5vZGVcbiAgKm5nSWY9XCJyb290Tm9kZSAmJiAhc2VsZWN0ZWREZXZpY2VcIlxuICBbbm9kZV09XCJyb290Tm9kZVwiXG4gIFtyb290Tm9kZV09XCJyb290Tm9kZVwiXG4gIFtwcmVzZWxlY3RlZF09XCJzZWxlY3RlZFwiXG4gIFttdWx0aV09XCJjb25maWcubXVsdGlcIlxuICBbdmlld109XCJjb25maWcudmlld1wiXG4gIFtpbmRleF09XCJpbmRleFwiXG4gIFtzZWxlY3RlZEl0ZW1zXT1cInNlbGVjdGVkSXRlbXNcIlxuICBbYWN0aXZlXT1cImFjdGl2ZVwiXG4gIFtoYW5kbGVOZXh0TWlsbGVyVmlld0NvbHVtbl09XCJoYW5kbGVOZXh0TWlsbGVyVmlld0NvbHVtbi5iaW5kKHRoaXMpXCJcbiAgKGlzTG9hZGluZ1N0YXRlKT1cIm9uTG9hZGluZygkZXZlbnQpXCJcbiAgKG9uU2VsZWN0KT1cIm9uU2VsZWN0KCRldmVudClcIlxuICAob25EZXNlbGVjdCk9XCJvbkRlc2VsZWN0KCRldmVudClcIlxuICBjbGFzcz1cImQtYmxvY2sgYmctaW5oZXJpdCBwLXJlbGF0aXZlXCJcbiAgW25nQ2xhc3NdPVwieyAnY29sbGFwc2Ugc2hvdyc6ICFyb290Tm9kZS5yb290ICYmICFyb290Tm9kZS5oaWRkZW4gJiYgY29uZmlnLnZpZXcgIT09ICdtaWxsZXInIH1cIlxuICBzdHlsZT1cInotaW5kZXg6IDlcIlxuPjwvYzh5LWFzc2V0LXNlbGVjdG9yLW5vZGU+XG4iLCJpbXBvcnQge1xuICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgQ29tcG9uZW50LFxuICBFbGVtZW50UmVmLFxuICBFdmVudEVtaXR0ZXIsXG4gIGZvcndhcmRSZWYsXG4gIElucHV0LFxuICBPbkluaXQsXG4gIE91dHB1dCxcbiAgU2ltcGxlQ2hhbmdlcyxcbiAgVmlld0NoaWxkXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBJSWRlbnRpZmllZCwgSU1hbmFnZWRPYmplY3QsIEludmVudG9yeVNlcnZpY2UgfSBmcm9tICdAYzh5L2NsaWVudCc7XG5pbXBvcnQgeyBBc3NldFNlbGVjdG9yU2VydmljZSB9IGZyb20gJy4vYXNzZXQtc2VsZWN0b3Iuc2VydmljZSc7XG5pbXBvcnQgeyBHcm91cE5vZGVTZXJ2aWNlIH0gZnJvbSAnLi9ncm91cC1ub2RlLnNlcnZpY2UnO1xuaW1wb3J0IHsgQXNzZXRTZWxlY3Rpb25DaGFuZ2VFdmVudCwgQXNzZXRTZWxlY3Rvck9wdGlvbnMgfSBmcm9tICcuL2Fzc2V0LXNlbGVjdG9yLm1vZGVsJztcbmltcG9ydCB7IEFzc2V0U2VsZWN0b3JCYXNlIH0gZnJvbSAnLi9hc3NldC1zZWxlY3Rvci1iYXNlJztcbmltcG9ydCB7IEdyb3VwTm9kZSB9IGZyb20gJy4vZ3JvdXAtbm9kZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2M4eS1hc3NldC1zZWxlY3Rvci1taWxsZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vbWlsbGVyLXZpZXcuY29tcG9uZW50Lmh0bWwnLFxuICBwcm92aWRlcnM6IFtcbiAgICB7XG4gICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE1pbGxlclZpZXdDb21wb25lbnQpLFxuICAgICAgbXVsdGk6IHRydWVcbiAgICB9XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgTWlsbGVyVmlld0NvbXBvbmVudCBleHRlbmRzIEFzc2V0U2VsZWN0b3JCYXNlIGltcGxlbWVudHMgT25Jbml0IHtcbiAgLyoqXG4gICAqIENvbmZpZyBvYmplY3QgY29udGFpbmluZyBhbGwgb3B0aW9ucyBmb3IgdGhlIGFzc2V0IHNlbGVjdG9yLlxuICAgKi9cbiAgQElucHV0KCkgY29uZmlnOiBBc3NldFNlbGVjdG9yT3B0aW9ucyA9IHt9O1xuICAvKipcbiAgICogVGhlIGFzc2V0IHRvIHVzZSBhcyByb290LlxuICAgKi9cbiAgQElucHV0KCkgYXNzZXQ6IElJZGVudGlmaWVkID0gdW5kZWZpbmVkO1xuICAvKipcbiAgICogVGhlIHNlbGVjdGVkIGRldmljZXMuXG4gICAqL1xuICBASW5wdXQoKSBzZWxlY3RlZERldmljZTogSU1hbmFnZWRPYmplY3QgPSB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBUaGUgbm9kZSB0byB1c2UgYXMgcm9vdC4gWW91IGNhbiBlaXRoZXIgc2V0IHRoaXMsIG9yIHRoZSBhc3NldCB0byBzdGFydCBmcm9tLlxuICAgKi9cbiAgQElucHV0KCkgcm9vdE5vZGU6IEdyb3VwTm9kZTtcbiAgLyoqXG4gICAqIEVtaXRzIGlmIHRoZSBzZWxlY3Rpb24gY2hhbmdlc1xuICAgKi9cbiAgQE91dHB1dCgpIG9uU2VsZWN0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyPEFzc2V0U2VsZWN0aW9uQ2hhbmdlRXZlbnQ+KCk7XG4gIC8qKlxuICAgKiBFbWl0cyBpZiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGFzc2V0IGlzIGNsZWFyZWQuXG4gICAqL1xuICBAT3V0cHV0KCkgb25DbGVhclNlbGVjdGVkID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgQFZpZXdDaGlsZCgnbWlsbGVyVmlld1dyYXBwZXInKSBtaWxsZXJWaWV3V3JhcHBlcjogRWxlbWVudFJlZjtcbiAgLyoqXG4gICAqIFRoZSBjb2x1bW4gYXJyYXkgd2lsbCBjb250YWluIGFsbCBjdXJyZW50bHkgc2VsZWN0ZWQgbm9kZXNcbiAgICogIHdoaWNoIHdpbGwgZm9ybSB0aGUgbWlsbGVyIHZpZXcgY29sdW1ucyAob25seSBvbmUgcGVyIGxldmVsKS5cbiAgICovXG4gIGNvbHVtbnMgPSBbXTtcbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IGZpbHRlciBhcHBsaWVkLiBVc2VkIGZvciB0aGUgZW1wdHkgc3RhdGUgdGV4dCBpbiB0aGUgdmlldy5cbiAgICovXG4gIGZpbHRlclRleHQgPSAnJztcbiAgLyoqXG4gICAqIEluZGV4IG9mIHRoZSBjb2x1bW4gdXNlZCB0byBjaGVjayB3aGVyZSB0byBzaG93IHRoZSBsb2FkaW5nIHN0YXRlLlxuICAgKi9cbiAgY29sdW1uSW5kZXg6IG51bWJlcjtcbiAgQElucHV0KCkgY29udGFpbmVyOiAnJyB8ICdib2R5JyA9ICdib2R5JztcblxuICBjb25maWdPcHRpb25zRGVmYXVsdDogQXNzZXRTZWxlY3Rvck9wdGlvbnMgPSB7XG4gICAgdmlldzogJ21pbGxlcicsXG4gICAgc2luZ2xlQ29sdW1uOiBmYWxzZVxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBncm91cE5vZGVTZXJ2aWNlOiBHcm91cE5vZGVTZXJ2aWNlLFxuICAgIHByb3RlY3RlZCBpbnZlbnRvcnk6IEludmVudG9yeVNlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGFzc2V0U2VsZWN0b3JTZXJ2aWNlOiBBc3NldFNlbGVjdG9yU2VydmljZSxcbiAgICBwcm90ZWN0ZWQgY2Q6IENoYW5nZURldGVjdG9yUmVmXG4gICkge1xuICAgIHN1cGVyKGdyb3VwTm9kZVNlcnZpY2UsIGludmVudG9yeSwgYXNzZXRTZWxlY3RvclNlcnZpY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGFzeW5jIG5nT25Jbml0KCkge1xuICAgIHRoaXMuY29uZmlnID0geyAuLi50aGlzLmNvbmZpZ09wdGlvbnNEZWZhdWx0LCAuLi50aGlzLmNvbmZpZyB9O1xuXG4gICAgY29uc3QgaXNBbnlOb2RlRGVmaW5lZCA9XG4gICAgICAhdGhpcy5yb290Tm9kZSAmJiAoIXRoaXMuYXNzZXQgfHwgT2JqZWN0LmtleXModGhpcy5hc3NldCkubGVuZ3RoID09PSAwKTtcbiAgICBpZiAoaXNBbnlOb2RlRGVmaW5lZCkge1xuICAgICAgdGhpcy5yb290Tm9kZSA9IHRoaXMuY3JlYXRlRGVmYXVsdFJvb3ROb2RlKCk7XG4gICAgfVxuXG4gICAgY29uc3QgaXNPbmx5QXNzZXROb2RlRGVmaW5lZCA9IHRoaXMuYXNzZXQgJiYgT2JqZWN0LmtleXModGhpcy5hc3NldCkubGVuZ3RoICE9PSAwO1xuICAgIGlmIChpc09ubHlBc3NldE5vZGVEZWZpbmVkKSB7XG4gICAgICB0aGlzLnJvb3ROb2RlID0gYXdhaXQgdGhpcy5jcmVhdGVNYW5hZ2VkT2JqZWN0Um9vdE5vZGUodGhpcy5hc3NldCk7XG4gICAgICB0aGlzLnJvb3ROb2RlLmNsaWNrKCk7XG4gICAgfVxuXG4gICAgdGhpcy5jb2x1bW5zLnB1c2godGhpcy5yb290Tm9kZSk7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgYXN5bmMgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgIGlmIChjaGFuZ2VzLmFzc2V0ICYmIGNoYW5nZXMuYXNzZXQuY3VycmVudFZhbHVlICYmICF0aGlzLmFzc2V0KSB7XG4gICAgICB0aGlzLmNvbHVtbnMgPSBbXTtcbiAgICAgIHRoaXMuY29sdW1ucy5wdXNoKGF3YWl0IHRoaXMuY3JlYXRlTWFuYWdlZE9iamVjdFJvb3ROb2RlKGNoYW5nZXMuYXNzZXQuY3VycmVudFZhbHVlKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBjb2x1bW4gd2l0aCB0aGUgc2VsZWN0ZWQgbm9kZSBhcyByb290LlxuICAgKi9cbiAgYWRkTmV3Q29sdW1uKG5vZGUpOiB2b2lkIHtcbiAgICBjb25zdCBsZXZlbCA9IG5vZGUuaW5kZXg7XG4gICAgdGhpcy5zZWxlY3RlZERldmljZSA9IG5vZGUuc2VsZWN0ZWREZXZpY2VzIHx8IHVuZGVmaW5lZDtcbiAgICBpZiAobm9kZS5yb290KSB7XG4gICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+ICh0aGlzLm1pbGxlclZpZXdXcmFwcGVyLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsTGVmdCA9IDApKTtcbiAgICAgIHRoaXMuY29sdW1ucy5sZW5ndGggPSAxO1xuICAgIH1cblxuICAgIGNvbnN0IGlzTGV2ZWxMb3dlclRoYW5Db2x1bW5OdW1iZXIgPSBsZXZlbCA8IHRoaXMuY29sdW1ucy5sZW5ndGggLSAxO1xuICAgIGxldCBnb0JhY2sgPSBmYWxzZTtcbiAgICBpZiAoaXNMZXZlbExvd2VyVGhhbkNvbHVtbk51bWJlcikge1xuICAgICAgdGhpcy5jb2x1bW5zLmxlbmd0aCA9IGxldmVsICsgMTtcbiAgICAgIGdvQmFjayA9IHRydWU7XG4gICAgfVxuICAgIGlmICghbm9kZS5yb290ICYmICEodGhpcy5jb25maWcuc2luZ2xlQ29sdW1uICYmIGdvQmFjaykpIHtcbiAgICAgIHRoaXMuY29sdW1ucy5wdXNoKG5vZGUubm9kZUNvcHkpO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgICBjb25zdCBjb2wgPSB0aGlzO1xuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiAoY29sLm1pbGxlclZpZXdXcmFwcGVyLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsTGVmdCA9IDUwMDAwKSk7XG4gICAgICAvKiB0cmlnZ2VyZWQgdHdpY2Ugd2l0aCBhIHNtYWxsIGRlbGF5IGFzIGEgd29ya2Fyb3VuZCBmb3IgZGVhbGluZyB3aXRoIFNhZmFyaSdzIGJ1ZzpcbiAgICAgICBcIlNhZmFyaSBkb2VzbuKAmXQgdXBkYXRlIHRoZSBzY3JvbGxUb3AgLyBzY3JvbGxMZWZ0IHByb3BlcnRpZXMgb2YgYW4gZWxlbWVudCBpdHMgYW55IG9mIGl0c1xuICAgICAgICBhbmNlc3RvcnMgaGFzIG92ZXJmbG93IHNldCB0byBoaWRkZW4uXCJcbiAgICAgICAgVGhpcyB3YXMgcmVwb3J0ZWQgb24gY3VzdG9tZXIgcG9ydGFsIHdpdGggdGhlIHRpY2tldCBTSS00ODg1NzNcbiAgICAgICovXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShcbiAgICAgICAgICAoKSA9PiAoY29sLm1pbGxlclZpZXdXcmFwcGVyLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsTGVmdCA9IDU1MDAwKVxuICAgICAgICApO1xuICAgICAgfSwgNzAwKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hhbmdlIHRoZSBsb2FkaW5nIHN0YXRlIG9mIHRoZSBhc3NldCBzZWxlY3Rvci5cbiAgICovXG4gIG9uTG9hZChldmVudCkge1xuICAgIHRoaXMuaXNMb2FkaW5nID0gZXZlbnQubG9hZGluZztcbiAgICB0aGlzLmZpbHRlclRleHQgPSBldmVudC5maWx0ZXJUZXh0O1xuICAgIHRoaXMuY29sdW1uSW5kZXggPSBldmVudC5pbmRleDtcbiAgICB0aGlzLnNlbGVjdGVkRGV2aWNlID0gZXZlbnQuc2VsZWN0ZWREZXZpY2U7XG4gICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIHRoZSBzZWxlY3RlZCBub2RlIHRvIHRoZSBzZWxlY3RlZCBhcnJheS5cbiAgICovXG4gIG9uU2VsZWN0aW9uQ2hhbmdlKGV2ZW50OiBBc3NldFNlbGVjdGlvbkNoYW5nZUV2ZW50KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmNvbmZpZy5tdWx0aSkge1xuICAgICAgdGhpcy5kZXNlbGVjdEFsbChldmVudC5jaGFuZ2UuaXRlbSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChldmVudC5jaGFuZ2UuaXNTZWxlY3RlZCkge1xuICAgICAgdGhpcy5zZWxlY3QoZXZlbnQuY2hhbmdlLml0ZW0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmRlc2VsZWN0KGV2ZW50LmNoYW5nZS5pdGVtKTtcbiAgfVxufVxuIiwiPGRpdlxuICAjbWlsbGVyVmlld1dyYXBwZXJcbiAgY2xhc3M9XCJtaWxsZXItdmlldy13cmFwcGVyXCJcbiAgW25nQ2xhc3NdPVwieyAnc2luZ2xlLWNvbHVtbic6IGNvbmZpZy5zaW5nbGVDb2x1bW4gfVwiXG4+XG4gIDxkaXYgKm5nRm9yPVwibGV0IGNvbHVtbiBvZiBjb2x1bW5zOyBpbmRleCBhcyBpXCIgY2xhc3M9XCJtaWxsZXItY29sdW1uIGJnLWluaGVyaXRcIj5cbiAgICA8Yzh5LWFzc2V0LXNlbGVjdG9yXG4gICAgICBbY29uZmlnXT1cImNvbmZpZ1wiXG4gICAgICBbaW5kZXhdPVwiaVwiXG4gICAgICBbYWN0aXZlXT1cImNvbHVtbnNbaSArIDFdXCJcbiAgICAgIFtyb290Tm9kZV09XCJjb2x1bW5cIlxuICAgICAgW3NlbGVjdGVkSXRlbXNdPVwic2VsZWN0ZWQgfHwgW11cIlxuICAgICAgW3NlbGVjdGVkRGV2aWNlXT1cInNlbGVjdGVkRGV2aWNlXCJcbiAgICAgIChvblNlbGVjdGVkKT1cIm9uU2VsZWN0aW9uQ2hhbmdlKCRldmVudClcIlxuICAgICAgKG9uQ2xlYXJTZWxlY3RlZCk9XCJvbkNsZWFyU2VsZWN0ZWQuZW1pdCgpXCJcbiAgICAgIChvblJvd1NlbGVjdGVkKT1cImFkZE5ld0NvbHVtbigkZXZlbnQpXCJcbiAgICAgIChvbkxvYWQpPVwib25Mb2FkKCRldmVudClcIlxuICAgICAgW2NvbnRhaW5lcl09XCJjb250YWluZXJcIlxuICAgICAgY2xhc3M9XCJiZy1pbmhlcml0XCJcbiAgICA+XG4gICAgPC9jOHktYXNzZXQtc2VsZWN0b3I+XG5cbiAgICA8ZGl2IGNsYXNzPVwicC1yZWxhdGl2ZSBwLWItNjRcIiAqbmdJZj1cImlzTG9hZGluZyAmJiBjb2x1bW5JbmRleCA9PT0gaSAmJiAhc2VsZWN0ZWREZXZpY2VcIj5cbiAgICAgIDxjOHktbG9hZGluZz48L2M4eS1sb2FkaW5nPlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiAqbmdJZj1cIiFjb2x1bW4uY2hpbGRyZW4ubGVuZ3RoICYmICFpc0xvYWRpbmdcIiBjbGFzcz1cInAtbC04IHAtci04XCI+XG4gICAgICA8Yzh5LXVpLWVtcHR5LXN0YXRlXG4gICAgICAgICpuZ0lmPVwiIWZpbHRlclRleHQ7IGVsc2Ugbm9TZWFyY2hSZXN1bHRzXCJcbiAgICAgICAgW2ljb25dPVwiJ2ZvbGRlci1vcGVuJ1wiXG4gICAgICAgIFt0aXRsZV09XCInTm8gcmVzdWx0cyB0byBkaXNwbGF5LicgfCB0cmFuc2xhdGVcIlxuICAgICAgICBbc3VidGl0bGVdPVwiJ1RoZSBzZWxlY3RlZCBhc3NldCBoYXMgbm8gY2hpbGRyZW4uJyB8IHRyYW5zbGF0ZVwiXG4gICAgICAgIFtob3Jpem9udGFsXT1cInRydWVcIlxuICAgICAgPjwvYzh5LXVpLWVtcHR5LXN0YXRlPlxuICAgICAgPG5nLXRlbXBsYXRlICNub1NlYXJjaFJlc3VsdHM+XG4gICAgICAgIDxjOHktdWktZW1wdHktc3RhdGVcbiAgICAgICAgICBbaWNvbl09XCInZm9sZGVyLW9wZW4nXCJcbiAgICAgICAgICBbdGl0bGVdPVwiJ05vIHJlc3VsdHMgdG8gZGlzcGxheSBmb3IgdGhlIGN1cnJlbnQgZmlsdGVyLicgfCB0cmFuc2xhdGVcIlxuICAgICAgICAgIFtzdWJ0aXRsZV09XCInVGhlcmUgYXJlIG5vIGFzc2V0cyBtYXRjaGluZyB0aGUgZmlsdGVyLicgfCB0cmFuc2xhdGVcIlxuICAgICAgICAgIFtob3Jpem9udGFsXT1cInRydWVcIlxuICAgICAgICA+PC9jOHktdWktZW1wdHktc3RhdGU+XG4gICAgICA8L25nLXRlbXBsYXRlPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvcmVNb2R1bGUsIENvbW1vbk1vZHVsZSwgU2VhcmNoTW9kdWxlIH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5pbXBvcnQgeyBDb2xsYXBzZU1vZHVsZSB9IGZyb20gJ25neC1ib290c3RyYXAvY29sbGFwc2UnO1xuaW1wb3J0IHsgQnNEcm9wZG93bk1vZHVsZSB9IGZyb20gJ25neC1ib290c3RyYXAvZHJvcGRvd24nO1xuaW1wb3J0IHsgR3JvdXBOb2RlU2VydmljZSB9IGZyb20gJy4vZ3JvdXAtbm9kZS5zZXJ2aWNlJztcblxuaW1wb3J0IHsgQXNzZXRTZWxlY3Rvck5vZGVDb21wb25lbnQgfSBmcm9tICcuL2Fzc2V0LXNlbGVjdG9yLW5vZGUuY29tcG9uZW50JztcbmltcG9ydCB7IEFzc2V0U2VsZWN0b3JDb21wb25lbnQgfSBmcm9tICcuL2Fzc2V0LXNlbGVjdG9yLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBGb3Jtc01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IE1pbGxlclZpZXdDb21wb25lbnQgfSBmcm9tICcuL21pbGxlci12aWV3LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBBc3NldFNlbGVjdG9yU2VydmljZSB9IGZyb20gJy4vYXNzZXQtc2VsZWN0b3Iuc2VydmljZSc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtDb3JlTW9kdWxlLCBDb21tb25Nb2R1bGUsIENvbGxhcHNlTW9kdWxlLCBCc0Ryb3Bkb3duTW9kdWxlLCBTZWFyY2hNb2R1bGUsIEZvcm1zTW9kdWxlXSxcbiAgZXhwb3J0czogW0Fzc2V0U2VsZWN0b3JOb2RlQ29tcG9uZW50LCBBc3NldFNlbGVjdG9yQ29tcG9uZW50LCBNaWxsZXJWaWV3Q29tcG9uZW50XSxcbiAgcHJvdmlkZXJzOiBbR3JvdXBOb2RlU2VydmljZSwgQXNzZXRTZWxlY3RvclNlcnZpY2VdLFxuICBkZWNsYXJhdGlvbnM6IFtBc3NldFNlbGVjdG9yTm9kZUNvbXBvbmVudCwgQXNzZXRTZWxlY3RvckNvbXBvbmVudCwgTWlsbGVyVmlld0NvbXBvbmVudF1cbn0pXG5leHBvcnQgY2xhc3MgQXNzZXRTZWxlY3Rvck1vZHVsZSB7fVxuIiwiaW1wb3J0IHsgTW9kdWxlV2l0aFByb3ZpZGVycywgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG4gIERldmljZVN0YXR1c0NvbXBvbmVudCxcbiAgRGV2aWNlU3RhdHVzTW9kdWxlLFxuICBob29rTmF2aWdhdG9yLFxuICBNb2RhbE1vZHVsZSxcbiAgTW9kYWxTZXJ2aWNlXG59IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgQXNzZXROYXZpZ2F0b3JDb25maWcsIEFTU0VUX05BVklHQVRPUl9DT05GSUcgfSBmcm9tICcuL2Fzc2V0LW5vZGUtY29uZmlnLm1vZGVsJztcbmltcG9ydCB7IEFzc2V0Tm9kZUZhY3RvcnkgfSBmcm9tICcuL2Fzc2V0LW5vZGUuZmFjdG9yeSc7XG5pbXBvcnQgeyBBc3NldE5vZGVTZXJ2aWNlIH0gZnJvbSAnLi9hc3NldC1ub2RlLnNlcnZpY2UnO1xuaW1wb3J0IHsgQXNzZXRTZWxlY3Rvck1vZHVsZSB9IGZyb20gJy4vYXNzZXQtc2VsZWN0b3IvYXNzZXQtc2VsZWN0b3IubW9kdWxlJztcblxuQE5nTW9kdWxlKHtcbiAgZGVjbGFyYXRpb25zOiBbXSxcbiAgaW1wb3J0czogW01vZGFsTW9kdWxlLCBBc3NldFNlbGVjdG9yTW9kdWxlLCBEZXZpY2VTdGF0dXNNb2R1bGVdLFxuICBwcm92aWRlcnM6IFtNb2RhbFNlcnZpY2UsIEFzc2V0Tm9kZVNlcnZpY2UsIGhvb2tOYXZpZ2F0b3IoQXNzZXROb2RlRmFjdG9yeSldLFxuICBlbnRyeUNvbXBvbmVudHM6IFtEZXZpY2VTdGF0dXNDb21wb25lbnRdXG59KVxuZXhwb3J0IGNsYXNzIEFzc2V0c05hdmlnYXRvck1vZHVsZSB7XG4gIHN0YXRpYyBjb25maWcoY29uZmlnOiBBc3NldE5hdmlnYXRvckNvbmZpZyA9IHt9KTogTW9kdWxlV2l0aFByb3ZpZGVyczxBc3NldHNOYXZpZ2F0b3JNb2R1bGU+IHtcbiAgICByZXR1cm4ge1xuICAgICAgbmdNb2R1bGU6IEFzc2V0c05hdmlnYXRvck1vZHVsZSxcbiAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogQVNTRVRfTkFWSUdBVE9SX0NPTkZJRyxcbiAgICAgICAgICB1c2VWYWx1ZTogY29uZmlnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9O1xuICB9XG59XG4iLCIvKipcbiAqIEdlbmVyYXRlZCBidW5kbGUgaW5kZXguIERvIG5vdCBlZGl0LlxuICovXG5cbmV4cG9ydCAqIGZyb20gJy4vaW5kZXgnO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@c8y/ngx-components/fesm2020/c8y-ngx-components-assets-navigator.mjs\n");

/***/ }),

/***/ "./node_modules/@c8y/ngx-components/fesm2020/c8y-ngx-components-context-dashboard.mjs":
/*!********************************************************************************************!*\
  !*** ./node_modules/@c8y/ngx-components/fesm2020/c8y-ngx-components-context-dashboard.mjs ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("var _angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache;\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ALL_GLOBAL_ROLES_SELECTED\": function() { return /* binding */ ALL_GLOBAL_ROLES_SELECTED; },\n/* harmony export */   \"AddDashboardComponent\": function() { return /* binding */ AddDashboardComponent; },\n/* harmony export */   \"AddDashboardFactory\": function() { return /* binding */ AddDashboardFactory; },\n/* harmony export */   \"AppearanceSettingsComponent\": function() { return /* binding */ AppearanceSettingsComponent; },\n/* harmony export */   \"COCKPIT_HOME_DASHBOARD_CONFIG\": function() { return /* binding */ COCKPIT_HOME_DASHBOARD_CONFIG; },\n/* harmony export */   \"CONTEXT_DASHBOARD_CONFIG\": function() { return /* binding */ CONTEXT_DASHBOARD_CONFIG; },\n/* harmony export */   \"CockpitDashboardComponent\": function() { return /* binding */ CockpitDashboardComponent; },\n/* harmony export */   \"CockpitDashboardModule\": function() { return /* binding */ CockpitDashboardModule; },\n/* harmony export */   \"ContextDashboardComponent\": function() { return /* binding */ ContextDashboardComponent; },\n/* harmony export */   \"ContextDashboardModule\": function() { return /* binding */ ContextDashboardModule; },\n/* harmony export */   \"ContextDashboardService\": function() { return /* binding */ ContextDashboardService; },\n/* harmony export */   \"ContextDashboardType\": function() { return /* binding */ ContextDashboardType; },\n/* harmony export */   \"DASHBOARD_THEME_CLASSES\": function() { return /* binding */ DASHBOARD_THEME_CLASSES; },\n/* harmony export */   \"DEFAULT_COCKPIT_HOME_WIDGETS\": function() { return /* binding */ DEFAULT_COCKPIT_HOME_WIDGETS; },\n/* harmony export */   \"DashboardActionBarFactory\": function() { return /* binding */ DashboardActionBarFactory; },\n/* harmony export */   \"DashboardDetailComponent\": function() { return /* binding */ DashboardDetailComponent; },\n/* harmony export */   \"DeviceDashboardGuard\": function() { return /* binding */ DeviceDashboardGuard; },\n/* harmony export */   \"DeviceInfoDashboardComponent\": function() { return /* binding */ DeviceInfoDashboardComponent; },\n/* harmony export */   \"DeviceInfoDashboardModule\": function() { return /* binding */ DeviceInfoDashboardModule; },\n/* harmony export */   \"DeviceManagementHomeDashboardComponent\": function() { return /* binding */ DeviceManagementHomeDashboardComponent; },\n/* harmony export */   \"DeviceManagementHomeDashboardModule\": function() { return /* binding */ DeviceManagementHomeDashboardModule; },\n/* harmony export */   \"GroupDashboardGuard\": function() { return /* binding */ GroupDashboardGuard; },\n/* harmony export */   \"PRODUCT_EXPERIENCE\": function() { return /* binding */ PRODUCT_EXPERIENCE; },\n/* harmony export */   \"PasteDashboardActionComponent\": function() { return /* binding */ PasteDashboardActionComponent; },\n/* harmony export */   \"REPORT_DEFAULT_NAVIGATION_NODE_PRIORITY\": function() { return /* binding */ REPORT_DEFAULT_NAVIGATION_NODE_PRIORITY; },\n/* harmony export */   \"ReportDashboardGuard\": function() { return /* binding */ ReportDashboardGuard; },\n/* harmony export */   \"ReportDashboardListComponent\": function() { return /* binding */ ReportDashboardListComponent; },\n/* harmony export */   \"ReportDashboardModule\": function() { return /* binding */ ReportDashboardModule; },\n/* harmony export */   \"ReportDashboardNavigationFactory\": function() { return /* binding */ ReportDashboardNavigationFactory; },\n/* harmony export */   \"ReportDashboardService\": function() { return /* binding */ ReportDashboardService; },\n/* harmony export */   \"STYLING_CLASS_PREFIXES\": function() { return /* binding */ STYLING_CLASS_PREFIXES; },\n/* harmony export */   \"WIDGET_CONTENT_CLASSES\": function() { return /* binding */ WIDGET_CONTENT_CLASSES; },\n/* harmony export */   \"WIDGET_HEADER_CLASSES\": function() { return /* binding */ WIDGET_HEADER_CLASSES; },\n/* harmony export */   \"WidgetConfigComponent\": function() { return /* binding */ WidgetConfigComponent; },\n/* harmony export */   \"WidgetPreviewComponent\": function() { return /* binding */ WidgetPreviewComponent; },\n/* harmony export */   \"WidgetService\": function() { return /* binding */ WidgetService; }\n/* harmony export */ });\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ \"webpack/sharing/consume/default/@angular/core/@angular/core\");\n/* harmony import */ var _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @c8y/ngx-components */ \"webpack/sharing/consume/default/@c8y/ngx-components/@c8y/ngx-components\");\n/* harmony import */ var ngx_bootstrap_modal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngx-bootstrap/modal */ \"webpack/sharing/consume/default/ngx-bootstrap/modal/ngx-bootstrap/modal\");\n/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ \"webpack/sharing/consume/default/@angular/router/@angular/router\");\n/* harmony import */ var _c8y_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @c8y/client */ \"webpack/sharing/consume/default/@c8y/client/@c8y/client\");\n/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ngx-translate/core */ \"webpack/sharing/consume/default/@ngx-translate/core/@ngx-translate/core\");\n/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash-es */ \"webpack/sharing/consume/default/lodash-es/lodash-es\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ \"webpack/sharing/consume/default/rxjs/rxjs\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ \"webpack/sharing/consume/default/rxjs/operators/rxjs/operators\");\n/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/forms */ \"webpack/sharing/consume/default/@angular/forms/@angular/forms\");\n/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ \"webpack/sharing/consume/default/@angular/common/@angular/common\");\n/* harmony import */ var ngx_bootstrap_popover__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ngx-bootstrap/popover */ \"webpack/sharing/consume/default/ngx-bootstrap/popover/ngx-bootstrap/popover\");\n/* harmony import */ var ngx_bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ngx-bootstrap/dropdown */ \"webpack/sharing/consume/default/ngx-bootstrap/dropdown/ngx-bootstrap/dropdown\");\n/* harmony import */ var ngx_bootstrap_tooltip__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ngx-bootstrap/tooltip */ \"webpack/sharing/consume/default/ngx-bootstrap/tooltip/ngx-bootstrap/tooltip\");\n/* harmony import */ var _c8y_ngx_components_assets_navigator__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @c8y/ngx-components/assets-navigator */ \"./node_modules/@c8y/ngx-components/fesm2020/c8y-ngx-components-assets-navigator.mjs\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst CONTEXT_DASHBOARD_CONFIG = new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken('ContextDashboardConfig');\nvar ContextDashboardType;\n(function (ContextDashboardType) {\n  ContextDashboardType[\"Device\"] = \"device\";\n  ContextDashboardType[\"DeviceType\"] = \"type\";\n  ContextDashboardType[\"Group\"] = \"group\";\n  ContextDashboardType[\"Named\"] = \"name\";\n  ContextDashboardType[\"Report\"] = \"report\";\n})(ContextDashboardType || (ContextDashboardType = {}));\nconst WIDGET_HEADER_CLASSES = [{\n  label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Regular`style`'),\n  class: 'panel-title-regular',\n  description: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('The widget has no border between header and content.')\n}, {\n  label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Border`style`'),\n  class: 'panel-title-border',\n  description: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('The widget has a small separation border between header and content.')\n}, {\n  label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Overlay`style`'),\n  class: 'panel-title-overlay',\n  description: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('The widget content overlays the header.')\n}, {\n  label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Hidden`style`'),\n  class: 'panel-title-hidden',\n  description: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('The widget header is not shown.')\n}];\nconst WIDGET_CONTENT_CLASSES = [{\n  label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Match dashboard`style`'),\n  class: 'panel-content-light',\n  description: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('The widget appearance matches the dashboard appearance.')\n}, {\n  label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Light`style`'),\n  class: 'panel-content-white',\n  description: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('The widget has light appearance, that is, dark text on light background.')\n}, {\n  label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Dark`style`'),\n  class: 'panel-content-dark',\n  description: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('The widget has dark appearance, that is, light text on dark background.')\n}, {\n  label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Transparent`style`'),\n  class: 'panel-content-transparent',\n  description: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('The widget has no background.')\n}, {\n  label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Branded`style`'),\n  class: 'panel-content-branded',\n  description: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('The widget is styled with the main brand color.')\n}];\nconst DASHBOARD_THEME_CLASSES = [{\n  label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Match UI`theme`'),\n  class: 'dashboard-theme-light',\n  description: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('The dashboard appearance matches the UI appearance.')\n}, {\n  label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Light`theme`'),\n  class: 'dashboard-theme-white',\n  description: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('The dashboard has light appearance, that is, dark text on light background.')\n}, {\n  label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Dark`theme`'),\n  class: 'dashboard-theme-dark',\n  description: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('The dashboard has dark appearance, that is, light text on dark background.')\n},\n// {\n//   label: gettext('Transparent`theme`'),\n//   class: 'dashboard-theme-transparent',\n//   description: gettext(\n//     'The dashboard is styled with a transparent background and therefore is border-less.'\n//   )\n// },\n{\n  label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Branded`theme`'),\n  class: 'dashboard-theme-branded',\n  description: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('The dashboard is styled using the brand palette.')\n}];\nconst STYLING_CLASS_PREFIXES = ['dashboard-theme-', 'panel-title-', 'panel-content-'];\nconst ALL_GLOBAL_ROLES_SELECTED = 'all';\nconst PRODUCT_EXPERIENCE = {\n  DASHBOARD: {\n    EVENTS: {\n      DASHBOARD_AVAILABILITY: 'dashboardAvailability'\n    },\n    COMPONENTS: {\n      DASHBOARD_AVAILABILITY: 'dashboard-availability'\n    },\n    ACTIONS: {\n      APPLY_GLOBAL_ROLES_CHANGES: 'applyGlobalRolesChanges'\n    }\n  }\n};\nclass ContextDashboardService {\n  constructor(inventory, tabs, modal, translateService, router, navigator, permissions, alert, dynamicComponent) {\n    this.inventory = inventory;\n    this.tabs = tabs;\n    this.modal = modal;\n    this.translateService = translateService;\n    this.router = router;\n    this.navigator = navigator;\n    this.permissions = permissions;\n    this.alert = alert;\n    this.dynamicComponent = dynamicComponent;\n    this.REPORT_PARTIAL_NAME = 'report_';\n    this.INVENTORY_ROLES = ['ROLE_INVENTORY_ADMIN'];\n    this.cache = new Map();\n    this.DEFAULT_PAGESIZE = 1000;\n    this.FRAGMENT_NAME = 'c8y_Dashboard';\n    this.DASHBOARD_ROUTE_PATH = 'dashboard';\n    this.INDEX_SPLIT = '!';\n    this._formDisabled = true;\n  }\n  get formDisabled() {\n    return this._formDisabled;\n  }\n  set formDisabled(value) {\n    this._formDisabled = value;\n  }\n  create(dashboardCfg, context, name = '') {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      let id = '';\n      let dashboardType;\n      if (context) {\n        id = context.contextData.id;\n        dashboardType = _this.getDashboardTypeFromViewContext(dashboardCfg, context);\n      }\n      if (name) {\n        dashboardType = ContextDashboardType.Named;\n      }\n      const dashboard = {};\n      (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.assign)(dashboard, {\n        c8y_Dashboard: dashboardCfg\n      });\n      const value = dashboardType === ContextDashboardType.DeviceType ? dashboardCfg.deviceTypeValue : name || id;\n      const fragmentKey = _this.createFragmentKey(dashboardType, value);\n      dashboard[fragmentKey] = {};\n      if (_this.shouldSetGlobal(dashboard, context)) {\n        (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.assign)(dashboard, {\n          c8y_Global: {}\n        });\n      }\n      dashboard.name = dashboard.c8y_Dashboard.name;\n      const {\n        data\n      } = dashboardType === ContextDashboardType.Group || dashboardType === ContextDashboardType.Device || context && dashboardType === ContextDashboardType.Named ? yield _this.inventory.childAdditionsCreate(dashboard, id) : yield _this.inventory.create(dashboard);\n      return data;\n    })();\n  }\n  detail(dashboardMO) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const {\n        data\n      } = yield _this2.inventory.detail(dashboardMO);\n      _this2.cache.set(dashboardMO.id, data);\n      return data;\n    })();\n  }\n  update(dashboard) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      dashboard.name = dashboard.c8y_Dashboard.name;\n      const keepFragments = _this3.clean((0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.pick)(dashboard, [_this3.FRAGMENT_NAME, 'id', 'name']));\n      keepFragments.c8y_Global = _this3.shouldSetGlobal(dashboard);\n      yield _this3.serializeWidgetConfigs(keepFragments);\n      const {\n        data\n      } = yield _this3.inventory.update(keepFragments);\n      _this3.cache.set(dashboard.id, data);\n      return data;\n    })();\n  }\n  delete(dashboard, withConfirmation = true) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        if (withConfirmation) {\n          let msg = (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)(`You are about to delete the dashboard \"{{ dashboardName }}\". Do you want to proceed?`);\n          if (_this4.isDeviceType(dashboard)) {\n            msg = (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)(`You are about to delete the dashboard \"{{ dashboardName }}\" from all devices of the type \"{{ deviceType }}\".\n           Do you want to proceed?`);\n          }\n          yield _this4.modal.confirm((0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Delete dashboard'), _this4.translateService.instant(msg, {\n            dashboardName: dashboard.c8y_Dashboard.name,\n            deviceType: dashboard.c8y_Dashboard.deviceTypeValue\n          }), _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.Status.DANGER, {\n            ok: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Delete'),\n            cancel: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Cancel')\n          });\n        }\n        yield _this4.inventory.delete(dashboard);\n        const tabToRemove = Array.from(_this4.tabs.state).find(tab => tab.path.endsWith(`${_this4.DASHBOARD_ROUTE_PATH}/${dashboard.id}`));\n        _this4.tabs.remove(tabToRemove);\n        _this4.tabs.refresh();\n      } catch (ex) {\n        // intended empty\n      }\n    })();\n  }\n  activateDashboards(route, types) {\n    const {\n      dashboardId\n    } = route.params;\n    if (dashboardId) {\n      return this.getDashboard$(dashboardId, types, route.parent.data.contextData).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.tap)(dashboard => {\n        route.data = {\n          dashboard\n        };\n      }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.map)(() => true), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.catchError)(() => {\n        return (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(false);\n      }));\n    }\n    return this.getTabs$(route.data.contextData, types);\n  }\n  getNamedDashboardOrCreate(name, defaultWidgets, context) {\n    const children = this.mapWidgets(defaultWidgets);\n    return this.getDashboard$(name, [ContextDashboardType.Named]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.throwIfEmpty)(), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.from)(this.create({\n      children,\n      widgetClasses: {\n        'dashboard-theme-light': true,\n        'panel-title-regular': true\n      }\n    }, context, name))));\n  }\n  refreshTabs(dashboardMO) {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this5.isNamed(dashboardMO)) {\n        const tabToUpdate = Array.from(_this5.tabs.state).find(tab => tab.path.endsWith(`${_this5.DASHBOARD_ROUTE_PATH}/${dashboardMO.id}`));\n        const data = yield _this5.detail(dashboardMO);\n        if (tabToUpdate) {\n          const {\n            icon,\n            priority,\n            name\n          } = data.c8y_Dashboard;\n          tabToUpdate.icon = icon;\n          tabToUpdate.priority = priority;\n          tabToUpdate.label = name;\n        }\n        _this5.tabs.refresh();\n      }\n    })();\n  }\n  updateNavigatorItem(mo) {\n    this.navigator.state.forEach(node => {\n      if (node.path === `reports/${mo.id}`) {\n        this.navigator.remove(node);\n      }\n    });\n    if (mo.c8y_IsNavigatorNode) {\n      const nodeToAdd = new _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.NavigatorNode({\n        label: mo.name,\n        path: `reports/${mo.id}`,\n        icon: mo.icon,\n        priority: mo.priority\n      });\n      this.navigator.add(nodeToAdd);\n    }\n  }\n  navigateToDashboard(dashboardMO) {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      if (/dashboard/.test(_this6.router.url)) {\n        _this6.router.navigate(['..', dashboardMO.id], {\n          relativeTo: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.getActivatedRoute)(_this6.router)\n        });\n      } else {\n        _this6.router.navigate(['..', _this6.DASHBOARD_ROUTE_PATH, dashboardMO.id], {\n          relativeTo: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.getActivatedRoute)(_this6.router)\n        });\n      }\n    })();\n  }\n  canEditDashboard(mo) {\n    return this.permissions.canEdit(['ROLE_INVENTORY_ADMIN', 'ROLE_INVENTORY_CREATE'], mo);\n  }\n  isNamed(dashboard) {\n    return (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.some)((0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.keys)(dashboard), prop => new RegExp(`^${this.FRAGMENT_NAME}${this.INDEX_SPLIT}${ContextDashboardType.Named}${this.INDEX_SPLIT}`).test(prop));\n  }\n  isReport(dashboard) {\n    return (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.some)((0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.keys)(dashboard), prop => new RegExp(`^${this.FRAGMENT_NAME}${this.INDEX_SPLIT}${ContextDashboardType.Named}${this.INDEX_SPLIT}${this.REPORT_PARTIAL_NAME}`).test(prop));\n  }\n  isDeviceType(dashboard) {\n    return (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.some)((0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.keys)(dashboard), prop => new RegExp(`^${this.FRAGMENT_NAME}${this.INDEX_SPLIT}${ContextDashboardType.DeviceType}${this.INDEX_SPLIT}`).test(prop));\n  }\n  isDeviceDashboard(dashboard) {\n    return (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.some)((0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.keys)(dashboard), prop => new RegExp(`^${this.FRAGMENT_NAME}${this.INDEX_SPLIT}${ContextDashboardType.Device}${this.INDEX_SPLIT}`).test(prop));\n  }\n  isGroupDashboard(dashboard) {\n    return (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.some)((0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.keys)(dashboard), prop => new RegExp(`^${this.FRAGMENT_NAME}${this.INDEX_SPLIT}${ContextDashboardType.Group}${this.INDEX_SPLIT}`).test(prop));\n  }\n  getFilteredDashboardStyles(styleList) {\n    return styleList.filter(c => STYLING_CLASS_PREFIXES.some(classPrefix => c.startsWith(classPrefix)));\n  }\n  getStyling(styleList, styleName, defaultValue) {\n    const styling = styleList.find(style => style && new RegExp(`-${styleName}$`, 'i').test(style.class));\n    return styling ? styling.class : defaultValue;\n  }\n  mapWidgets(widgets) {\n    return (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.keyBy)(widgets.map(widget => {\n      widget.id = String(Math.random()).substr(2);\n      return widget;\n    }), 'id');\n  }\n  getDashboard$(dashboardIdOrName, dashboardType, mo) {\n    const cache = this.cache.get(dashboardIdOrName);\n    const dashboards = mo ? this.getContextDashboards(mo, dashboardType) : [this.getNamedDashboard(dashboardIdOrName)];\n    const cacheRefresh = this.getContextDashboards$(dashboards).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.tap)(dashboard => this.cacheDashboard(dashboard)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.filter)(dashboard => dashboard.id === dashboardIdOrName || (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.has)(dashboard, `${this.FRAGMENT_NAME}${this.INDEX_SPLIT}${ContextDashboardType.Named}${this.INDEX_SPLIT}${dashboardIdOrName}`)));\n    return cache ? (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(cache) : cacheRefresh;\n  }\n  pasteDashboard(newContext) {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      if (_this7.copyClipboard) {\n        try {\n          if (_this7.canPasteDashboard(_this7.copyClipboard, newContext.context)) {\n            const dashboardToPaste = _this7.createContextDashboardCopy(_this7.copyClipboard.dashboard, newContext.contextData, _this7.copyClipboard.context.contextData);\n            const dashboard = yield _this7.create(_this7.clean(dashboardToPaste), newContext);\n            _this7.copyClipboard = undefined;\n            _this7.navigateToDashboard(dashboard);\n          }\n        } catch {\n          _this7.alert.warning((0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Insufficient permissions for this action.'));\n        }\n      }\n    })();\n  }\n  serializeWidgetConfigs(dashboard) {\n    var _this8 = this;\n    return _asyncToGenerator(function* () {\n      const children = (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.cloneDeep)(dashboard.c8y_Dashboard.children);\n      if (!children) {\n        return;\n      }\n      const configs = Object.values(children);\n      const details = configs.map(({\n        componentId,\n        config\n      }) => ({\n        componentId,\n        config\n      }));\n      const results = yield _this8.dynamicComponent.serializeConfigs(details);\n      results.forEach((result, index) => {\n        Object.entries(result).forEach(([key, value]) => {\n          (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.set)(details[index].config, key, value);\n        });\n      });\n      dashboard.c8y_Dashboard.children = children;\n    })();\n  }\n  canPasteDashboard(copyClipboard, currentContext) {\n    const clipboardViewContext = copyClipboard.context.context;\n    if (currentContext !== clipboardViewContext) {\n      if (clipboardViewContext === _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Device) {\n        this.alert.warning((0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Device dashboards can only be copied into a device.'));\n      } else if (clipboardViewContext === _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Group) {\n        this.alert.warning((0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Group dashboards can only be copied into a group.'));\n      }\n      return false;\n    }\n    return true;\n  }\n  createContextDashboardCopy(dash, newContext, oldContext) {\n    const children = (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.reduce)(dash.children, (_children, child) => {\n      const {\n        id\n      } = child;\n      const cfg = child.config;\n      const propertiesToCopy = {\n        device: device => this.replaceContextInObj(device, newContext, oldContext),\n        datapoints: dataPoints => this.replaceContextInDataPoints(dataPoints, newContext, oldContext),\n        dataPoints: dataPoints => this.replaceContextInDataPoints(dataPoints, newContext, oldContext),\n        datapointsGauge: dataPoints => this.replaceContextInDataPoints(dataPoints, newContext, oldContext),\n        datapointsLabels: dataPoints => this.replaceContextInDataPoints(dataPoints, newContext, oldContext)\n      };\n      if (cfg) {\n        this.copyProperties(cfg, propertiesToCopy);\n        if (cfg.options) {\n          this.copyProperties(cfg.options, propertiesToCopy);\n        }\n      }\n      _children[id] = (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.cloneDeep)(child);\n      return _children;\n    }, {});\n    dash.children = children;\n    return dash;\n  }\n  copyProperties(obj, propertiesToCopy) {\n    (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.forEach)(propertiesToCopy, (copyFn, property) => {\n      if (obj[property]) {\n        obj[property] = copyFn(obj[property]);\n      }\n    });\n  }\n  replaceContextInDataPoints(dataPoints, newContext, oldContext) {\n    dataPoints.forEach(dp => {\n      dp.__target = this.replaceContextInObj(dp.__target, newContext, oldContext);\n    });\n    return dataPoints;\n  }\n  replaceContextInObj(obj, newContext, oldContext) {\n    if (obj && obj.id === oldContext.id) {\n      Object.assign(obj, (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.pick)(newContext, ['id', 'name']));\n    }\n    return obj;\n  }\n  getTabs$(mo, dashboardType) {\n    const dashboards = this.getContextDashboards(mo, dashboardType);\n    return this.getContextDashboards$(dashboards).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.mergeMap)(dashboard => this.verifyDashboardAvailability$(dashboard)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.mergeMap)(([dashboard]) => this.removeDashboardMoProperty(dashboard)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.tap)(dashboard => this.cacheDashboard(dashboard)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.map)(dashboard => this.createDashboardTab(dashboard)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.toArray)());\n  }\n  verifyDashboardAvailability$(dashboard) {\n    var _dashboard$c8y_Dashbo;\n    const globalRolesIds = dashboard === null || dashboard === void 0 ? void 0 : (_dashboard$c8y_Dashbo = dashboard.c8y_Dashboard) === null || _dashboard$c8y_Dashbo === void 0 ? void 0 : _dashboard$c8y_Dashbo.globalRolesIds;\n    const canEdit = (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.from)(this.permissions.canEdit(this.INVENTORY_ROLES, dashboard, {\n      skipRequestCheck: true\n    }));\n    const hasAnyGlobalRole = !globalRolesIds || globalRolesIds === ALL_GLOBAL_ROLES_SELECTED ? (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(true) : (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(this.permissions.hasAnyGlobalRole(globalRolesIds));\n    return (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.combineLatest)([(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(dashboard), canEdit, hasAnyGlobalRole]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.filter)(([, canEdit, hasAnyGlobalRole]) => canEdit || hasAnyGlobalRole));\n  }\n  getContextDashboards$(requests) {\n    return (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.from)(requests).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.mergeAll)(), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.mergeMap)(response => response.data));\n  }\n  /**\n   * Cleans already corrupted dashboards from dashboardMo property.\n   * Added to fix dashboards on the cloud instance (eu-latest).\n   * @deprecated This is going to be removed after 1007.7.0.\n   */\n  removeDashboardMoProperty(dashboard) {\n    var _this9 = this;\n    return _asyncToGenerator(function* () {\n      const dashboardCopy = (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.cloneDeep)(dashboard);\n      const children = (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.get)(dashboardCopy, 'c8y_Dashboard.children');\n      let updateDashboard = false;\n      (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.forEach)(children, child => {\n        if ((0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.get)(child, 'componentTransformConfigWithContext')) {\n          delete child.componentTransformConfigWithContext;\n          updateDashboard = true;\n        }\n        if ((0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.get)(child, 'config.dashboardMo')) {\n          delete child.config.dashboardMo;\n          updateDashboard = true;\n        }\n      });\n      if (updateDashboard) {\n        yield _this9.update(dashboardCopy);\n      }\n      return dashboardCopy;\n    })();\n  }\n  cacheDashboard(dashboard) {\n    this.cache.set(dashboard.id, dashboard);\n  }\n  createDashboardTab(dashboard) {\n    const {\n      c8y_Dashboard: _dashboard,\n      id\n    } = dashboard;\n    return {\n      icon: _dashboard.icon,\n      path: `${this.DASHBOARD_ROUTE_PATH}/${id}`,\n      label: _dashboard.name,\n      priority: _dashboard.priority,\n      hide: this.isReport(dashboard)\n    };\n  }\n  clean(dashboard) {\n    const jsonString = JSON.stringify(dashboard, (key, value) => {\n      if (key === '$$hashKey' || key === 'klasses') {\n        return undefined;\n      }\n      return value;\n    });\n    return JSON.parse(jsonString);\n  }\n  getNamedDashboard(name) {\n    return this.inventory.list({\n      fragmentType: `${this.FRAGMENT_NAME}${this.INDEX_SPLIT}${ContextDashboardType.Named}${this.INDEX_SPLIT}${name}`,\n      pageSize: 1\n    });\n  }\n  getContextDashboards(mo, dashboardType) {\n    return dashboardType.map(type => this.inventory.list({\n      fragmentType: this.createDashboardFragment(mo, type),\n      pageSize: this.DEFAULT_PAGESIZE\n    }));\n  }\n  createDashboardFragment(mo, type) {\n    let value;\n    if (mo.c8y_Report) {\n      value = `${this.REPORT_PARTIAL_NAME}${mo.id}`;\n    } else {\n      value = type === ContextDashboardType.DeviceType ? mo.type : mo.id;\n    }\n    return `${this.FRAGMENT_NAME}${this.INDEX_SPLIT}${type}${this.INDEX_SPLIT}${value}`;\n  }\n  getDashboardTypeFromViewContext(dashboardCfg, context) {\n    let dashboardType;\n    if (context.context === _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Device) {\n      dashboardType = dashboardCfg.deviceType ? ContextDashboardType.DeviceType : ContextDashboardType.Device;\n    }\n    if (context.context === _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Group) {\n      dashboardType = ContextDashboardType.Group;\n    }\n    return dashboardType;\n  }\n  createFragmentKey(contextDashboardType, value) {\n    return [this.FRAGMENT_NAME, contextDashboardType, value].join(this.INDEX_SPLIT);\n  }\n  shouldSetGlobal(dashboard, context) {\n    if (!context && this.isNamed(dashboard) && !this.isReport(dashboard) || this.isDeviceType(dashboard)) {\n      return {};\n    }\n    return null;\n  }\n}\nContextDashboardService.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ContextDashboardService,\n  deps: [{\n    token: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.TabsService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ModalService\n  }, {\n    token: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__.TranslateService\n  }, {\n    token: _angular_router__WEBPACK_IMPORTED_MODULE_3__.Router\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.NavigatorService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.Permissions\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.AlertService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.DynamicComponentService\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Injectable\n});\nContextDashboardService.prov = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareInjectable\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ContextDashboardService,\n  providedIn: 'root'\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ContextDashboardService,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.TabsService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ModalService\n    }, {\n      type: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__.TranslateService\n    }, {\n      type: _angular_router__WEBPACK_IMPORTED_MODULE_3__.Router\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.NavigatorService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.Permissions\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.AlertService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.DynamicComponentService\n    }];\n  }\n});\nclass ReportDashboardService {\n  constructor(inventoryService, navigatorService) {\n    this.inventoryService = inventoryService;\n    this.navigatorService = navigatorService;\n    this.queriesUtil = new _c8y_client__WEBPACK_IMPORTED_MODULE_4__.QueriesUtil();\n  }\n  listReports(options = {}) {\n    let query = {\n      __has: 'c8y_Report'\n    };\n    if (options.filter) {\n      query = this.queriesUtil.addAndFilter(query, options.filter);\n    }\n    const filters = {\n      query: this.queriesUtil.buildQuery(query),\n      pageSize: options.pageSize || 50,\n      withTotalPages: true\n    };\n    return this.inventoryService.list(filters);\n  }\n  createReport(reportCfg) {\n    const report = {};\n    Object.assign(report, reportCfg);\n    Object.assign(report, {\n      c8y_Report: {}\n    });\n    return this.inventoryService.create(report);\n  }\n  addReportNavigatorNode(report) {\n    const node = new _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.NavigatorNode({\n      label: report.name,\n      path: `reports/${report.id}`,\n      icon: report.icon,\n      priority: report.priority\n    });\n    this.navigatorService.add(node);\n  }\n  removeNavigatorNode(report) {\n    this.navigatorService.state.forEach(node => {\n      if (node.path === `reports/${report.id}`) {\n        this.navigatorService.remove(node);\n        return;\n      }\n    });\n  }\n}\nReportDashboardService.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ReportDashboardService,\n  deps: [{\n    token: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.NavigatorService\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Injectable\n});\nReportDashboardService.prov = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareInjectable\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ReportDashboardService\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ReportDashboardService,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable\n  }],\n  ctorParameters: function () {\n    return [{\n      type: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.NavigatorService\n    }];\n  }\n});\nconst REPORTS_NAVIGATOR_NODE_PRIORITY = 40;\nconst REPORT_DEFAULT_NAVIGATION_NODE_PRIORITY = 30;\nclass ReportDashboardNavigationFactory {\n  constructor(navigatorService, inventoryService, reportDashboardService) {\n    this.navigatorService = navigatorService;\n    this.inventoryService = inventoryService;\n    this.reportDashboardService = reportDashboardService;\n    this.loaded = false;\n  }\n  get() {\n    var _this10 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this10.loaded) {\n        _this10.loaded = true;\n        _this10.navigatorService.add(new _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.NavigatorNode({\n          label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Reports'),\n          path: 'reports',\n          icon: 'c8y-reports',\n          featureId: 'reports',\n          priority: REPORTS_NAVIGATOR_NODE_PRIORITY\n        }));\n        const reports = (yield _this10.reportDashboardService.listReports({\n          filter: {\n            __has: 'c8y_IsNavigatorNode'\n          },\n          pageSize: 2000\n        })).data;\n        reports.forEach(report => {\n          const node = new _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.NavigatorNode({\n            label: report.name,\n            path: `reports/${report.id}`,\n            icon: report.icon,\n            priority: report.priority,\n            routerLinkExact: false\n          });\n          _this10.navigatorService.add(node);\n        });\n      }\n    })();\n  }\n}\nReportDashboardNavigationFactory.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ReportDashboardNavigationFactory,\n  deps: [{\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.NavigatorService\n  }, {\n    token: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n  }, {\n    token: ReportDashboardService\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Injectable\n});\nReportDashboardNavigationFactory.prov = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareInjectable\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ReportDashboardNavigationFactory,\n  providedIn: 'root'\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ReportDashboardNavigationFactory,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.NavigatorService\n    }, {\n      type: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n    }, {\n      type: ReportDashboardService\n    }];\n  }\n});\nclass AppearanceSettingsComponent {\n  constructor() {\n    this.themeClass = 'dashboard-theme-light';\n    this.headerClass = 'panel-title-regular';\n    this.themeClassChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter();\n    this.headerClassChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter();\n    this.possibleStylingTheme = DASHBOARD_THEME_CLASSES;\n    this.possibleStylingHeader = WIDGET_HEADER_CLASSES;\n  }\n  themeClassClick(value) {\n    value = this.resetToDefault(value, this.themeClass, this.defaultThemeClass);\n    this.themeClass = value;\n    this.themeClassChange.emit(value);\n  }\n  headerClassClick(value) {\n    value = this.resetToDefault(value, this.headerClass, this.defaultHeaderClass);\n    this.headerClass = value;\n    this.headerClassChange.emit(value);\n  }\n  resetToDefault(value, compareTo, defaultValue) {\n    if (defaultValue && value === compareTo) {\n      value = defaultValue;\n    }\n    return value;\n  }\n}\nAppearanceSettingsComponent.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: AppearanceSettingsComponent,\n  deps: [],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Component\n});\nAppearanceSettingsComponent.cmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareComponent\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  type: AppearanceSettingsComponent,\n  selector: \"c8y-appearance-settings\",\n  inputs: {\n    themeClass: \"themeClass\",\n    headerClass: \"headerClass\",\n    defaultThemeClass: \"defaultThemeClass\",\n    defaultHeaderClass: \"defaultHeaderClass\",\n    possibleStylingTheme: \"possibleStylingTheme\",\n    possibleStylingHeader: \"possibleStylingHeader\"\n  },\n  outputs: {\n    themeClassChange: \"themeClassChange\",\n    headerClassChange: \"headerClassChange\"\n  },\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  template: \"<div class=\\\"legend form-block\\\">\\n  <span translate>Layout</span>\\n</div>\\n<div class=\\\"row\\\">\\n  <div class=\\\"col-sm-6 m-b-32\\\">\\n    <label translate>Theme</label>\\n    <ul class=\\\"list-group\\\">\\n      <li\\n        class=\\\"list-group-item d-flex a-i-center p-l-0 p-r-0 fit-w\\\"\\n        *ngFor=\\\"let themeClassItem of possibleStylingTheme; let i = index\\\"\\n      >\\n        <div class=\\\"list-item-checkbox\\\" style=\\\"max-width: calc(100% - 24px)\\\">\\n          <label class=\\\"c8y-radio\\\">\\n            <input\\n              type=\\\"radio\\\"\\n              [id]=\\\"'groupradiocontentclass' + i\\\"\\n              name=\\\"content\\\"\\n              [value]=\\\"themeClassItem.class\\\"\\n              [ngModel]=\\\"themeClass\\\"\\n              (click)=\\\"themeClassClick(themeClassItem.class)\\\"\\n            />\\n            <span></span>\\n            <span\\n              class=\\\"text-truncate\\\"\\n              title=\\\"{{ themeClassItem.label | translate }}{{\\n                themeClassItem.class === defaultThemeClass\\n                  ? ' | ' + ('Dashboard default' | translate)\\n                  : ''\\n              }}\\\"\\n            >\\n              <span>{{ themeClassItem.label | translate }}</span>\\n              <br />\\n              <small\\n                *ngIf=\\\"themeClassItem.class === defaultThemeClass\\\"\\n                class=\\\"text-muted\\\"\\n                translate\\n              >\\n                Dashboard default\\n              </small>\\n            </span>\\n          </label>\\n        </div>\\n\\n        <button\\n          class=\\\"btn-help btn-help--sm m-l-auto\\\"\\n          type=\\\"button\\\"\\n          [attr.aria-label]=\\\"'Help' | translate\\\"\\n          popover=\\\"{{ themeClassItem.description | translate }}\\\"\\n          placement=\\\"top\\\"\\n          triggers=\\\"focus\\\"\\n          container=\\\"body\\\"\\n        ></button>\\n      </li>\\n    </ul>\\n  </div>\\n  <div class=\\\"col-sm-6\\\">\\n    <label translate>Widget header style</label>\\n    <ul class=\\\"list-group\\\">\\n      <li\\n        class=\\\"list-group-item d-flex a-i-center p-l-0 p-r-0\\\"\\n        *ngFor=\\\"let headerClassItem of possibleStylingHeader; let i = index\\\"\\n      >\\n        <div class=\\\"list-item-checkbox\\\" style=\\\"max-width: calc(100% - 24px)\\\">\\n          <label class=\\\"c8y-radio\\\">\\n            <input\\n              type=\\\"radio\\\"\\n              [id]=\\\"'groupradioheaderclass' + i\\\"\\n              name=\\\"header\\\"\\n              [value]=\\\"headerClassItem.class\\\"\\n              [ngModel]=\\\"headerClass\\\"\\n              (click)=\\\"headerClassClick(headerClassItem.class)\\\"\\n            />\\n            <span></span>\\n            <span\\n              class=\\\"text-truncate\\\"\\n              title=\\\"{{ headerClassItem.label | translate }}{{\\n                headerClassItem.class === defaultHeaderClass\\n                  ? ' | ' + ('Dashboard default' | translate)\\n                  : ''\\n              }}\\\"\\n            >\\n              <span>{{ headerClassItem.label | translate }}</span>\\n              <br />\\n              <small\\n                *ngIf=\\\"headerClassItem.class === defaultHeaderClass\\\"\\n                class=\\\"text-muted\\\"\\n                translate\\n              >\\n                Dashboard default\\n              </small>\\n            </span>\\n          </label>\\n        </div>\\n        <button\\n          class=\\\"btn-help btn-help--sm m-l-auto\\\"\\n          type=\\\"button\\\"\\n          [attr.aria-label]=\\\"'Help' | translate\\\"\\n          popover=\\\"{{ headerClassItem.description | translate }}\\\"\\n          placement=\\\"top\\\"\\n          triggers=\\\"focus\\\"\\n          container=\\\"body\\\"\\n        ></button>\\n      </li>\\n    </ul>\\n  </div>\\n</div>\\n\",\n  dependencies: [{\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.C8yTranslateDirective,\n    selector: \"[translate],[ngx-translate]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgForOf,\n    selector: \"[ngFor][ngForOf]\",\n    inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgIf,\n    selector: \"[ngIf]\",\n    inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.DefaultValueAccessor,\n    selector: \"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.RadioControlValueAccessor,\n    selector: \"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]\",\n    inputs: [\"name\", \"formControlName\", \"value\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgControlStatus,\n    selector: \"[formControlName],[ngModel],[formControl]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgModel,\n    selector: \"[ngModel]:not([formControlName]):not([formControl])\",\n    inputs: [\"name\", \"disabled\", \"ngModel\", \"ngModelOptions\"],\n    outputs: [\"ngModelChange\"],\n    exportAs: [\"ngModel\"]\n  }, {\n    kind: \"directive\",\n    type: ngx_bootstrap_popover__WEBPACK_IMPORTED_MODULE_11__.PopoverDirective,\n    selector: \"[popover]\",\n    inputs: [\"adaptivePosition\", \"boundariesElement\", \"popover\", \"popoverContext\", \"popoverTitle\", \"placement\", \"outsideClick\", \"triggers\", \"container\", \"containerClass\", \"isOpen\", \"delay\"],\n    outputs: [\"onShown\", \"onHidden\"],\n    exportAs: [\"bs-popover\"]\n  }, {\n    kind: \"pipe\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.C8yTranslatePipe,\n    name: \"translate\"\n  }],\n  viewProviders: [{\n    provide: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.ControlContainer,\n    useExisting: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgForm\n  }]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: AppearanceSettingsComponent,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,\n    args: [{\n      selector: 'c8y-appearance-settings',\n      viewProviders: [{\n        provide: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.ControlContainer,\n        useExisting: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgForm\n      }],\n      template: \"<div class=\\\"legend form-block\\\">\\n  <span translate>Layout</span>\\n</div>\\n<div class=\\\"row\\\">\\n  <div class=\\\"col-sm-6 m-b-32\\\">\\n    <label translate>Theme</label>\\n    <ul class=\\\"list-group\\\">\\n      <li\\n        class=\\\"list-group-item d-flex a-i-center p-l-0 p-r-0 fit-w\\\"\\n        *ngFor=\\\"let themeClassItem of possibleStylingTheme; let i = index\\\"\\n      >\\n        <div class=\\\"list-item-checkbox\\\" style=\\\"max-width: calc(100% - 24px)\\\">\\n          <label class=\\\"c8y-radio\\\">\\n            <input\\n              type=\\\"radio\\\"\\n              [id]=\\\"'groupradiocontentclass' + i\\\"\\n              name=\\\"content\\\"\\n              [value]=\\\"themeClassItem.class\\\"\\n              [ngModel]=\\\"themeClass\\\"\\n              (click)=\\\"themeClassClick(themeClassItem.class)\\\"\\n            />\\n            <span></span>\\n            <span\\n              class=\\\"text-truncate\\\"\\n              title=\\\"{{ themeClassItem.label | translate }}{{\\n                themeClassItem.class === defaultThemeClass\\n                  ? ' | ' + ('Dashboard default' | translate)\\n                  : ''\\n              }}\\\"\\n            >\\n              <span>{{ themeClassItem.label | translate }}</span>\\n              <br />\\n              <small\\n                *ngIf=\\\"themeClassItem.class === defaultThemeClass\\\"\\n                class=\\\"text-muted\\\"\\n                translate\\n              >\\n                Dashboard default\\n              </small>\\n            </span>\\n          </label>\\n        </div>\\n\\n        <button\\n          class=\\\"btn-help btn-help--sm m-l-auto\\\"\\n          type=\\\"button\\\"\\n          [attr.aria-label]=\\\"'Help' | translate\\\"\\n          popover=\\\"{{ themeClassItem.description | translate }}\\\"\\n          placement=\\\"top\\\"\\n          triggers=\\\"focus\\\"\\n          container=\\\"body\\\"\\n        ></button>\\n      </li>\\n    </ul>\\n  </div>\\n  <div class=\\\"col-sm-6\\\">\\n    <label translate>Widget header style</label>\\n    <ul class=\\\"list-group\\\">\\n      <li\\n        class=\\\"list-group-item d-flex a-i-center p-l-0 p-r-0\\\"\\n        *ngFor=\\\"let headerClassItem of possibleStylingHeader; let i = index\\\"\\n      >\\n        <div class=\\\"list-item-checkbox\\\" style=\\\"max-width: calc(100% - 24px)\\\">\\n          <label class=\\\"c8y-radio\\\">\\n            <input\\n              type=\\\"radio\\\"\\n              [id]=\\\"'groupradioheaderclass' + i\\\"\\n              name=\\\"header\\\"\\n              [value]=\\\"headerClassItem.class\\\"\\n              [ngModel]=\\\"headerClass\\\"\\n              (click)=\\\"headerClassClick(headerClassItem.class)\\\"\\n            />\\n            <span></span>\\n            <span\\n              class=\\\"text-truncate\\\"\\n              title=\\\"{{ headerClassItem.label | translate }}{{\\n                headerClassItem.class === defaultHeaderClass\\n                  ? ' | ' + ('Dashboard default' | translate)\\n                  : ''\\n              }}\\\"\\n            >\\n              <span>{{ headerClassItem.label | translate }}</span>\\n              <br />\\n              <small\\n                *ngIf=\\\"headerClassItem.class === defaultHeaderClass\\\"\\n                class=\\\"text-muted\\\"\\n                translate\\n              >\\n                Dashboard default\\n              </small>\\n            </span>\\n          </label>\\n        </div>\\n        <button\\n          class=\\\"btn-help btn-help--sm m-l-auto\\\"\\n          type=\\\"button\\\"\\n          [attr.aria-label]=\\\"'Help' | translate\\\"\\n          popover=\\\"{{ headerClassItem.description | translate }}\\\"\\n          placement=\\\"top\\\"\\n          triggers=\\\"focus\\\"\\n          container=\\\"body\\\"\\n        ></button>\\n      </li>\\n    </ul>\\n  </div>\\n</div>\\n\"\n    }]\n  }],\n  propDecorators: {\n    themeClass: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }],\n    headerClass: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }],\n    defaultThemeClass: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }],\n    defaultHeaderClass: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }],\n    themeClassChange: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Output\n    }],\n    headerClassChange: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Output\n    }],\n    possibleStylingTheme: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }],\n    possibleStylingHeader: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }]\n  }\n});\nclass WidgetPreviewComponent {\n  constructor() {\n    this.previewClasses = {\n      'dashboard-theme-light': true,\n      'panel-title-regular': true\n    };\n  }\n}\nWidgetPreviewComponent.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: WidgetPreviewComponent,\n  deps: [],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Component\n});\nWidgetPreviewComponent.cmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareComponent\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  type: WidgetPreviewComponent,\n  selector: \"c8y-widget-preview\",\n  inputs: {\n    previewClasses: \"previewClasses\",\n    tab: \"tab\"\n  },\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  template: \"<div class=\\\"legend form-block\\\" translate>Preview</div>\\n<label *ngIf=\\\"tab\\\" translate>Tab and layout</label>\\n<label *ngIf=\\\"!tab\\\" translate>Layout</label>\\n<div class=\\\"dashboard-preview-slot\\\" [ngClass]=\\\"previewClasses\\\">\\n  <div\\n    class=\\\"page-tabs page-tabs-horizontal navigator-open p-absolute overflow-hidden\\\"\\n    style=\\\"left: 0; margin: 0 15px\\\"\\n    *ngIf=\\\"tab\\\"\\n  >\\n    <div class=\\\"tabContainer hidden-xs\\\">\\n      <ul role=\\\"menu\\\" class=\\\"nav nav-tabs nav-tabsc8y\\\">\\n        <li role=\\\"menuitem\\\" class=\\\"active\\\" style=\\\"left: 16px\\\">\\n          <a routerlinkactive=\\\"\\\" title=\\\"{{ tab.name }}\\\">\\n            <i class=\\\"text-primary\\\" [c8yIcon]=\\\"tab.icon\\\"></i>\\n            <span class=\\\"txt\\\">{{ tab.name }}</span>\\n          </a>\\n        </li>\\n      </ul>\\n    </div>\\n    <div class=\\\"visible-xs mobile-tabs\\\"></div>\\n  </div>\\n  <div [ngClass]=\\\"{ 'm-t-64': !!tab }\\\">\\n    <div class=\\\"card card-dashboard\\\" style=\\\"height: 300px\\\">\\n      <div class=\\\"card-header-actions\\\" style=\\\"z-index: 8\\\">\\n        <div class=\\\"card-title\\\">\\n          <span translate>Widget title</span>\\n        </div>\\n        <div class=\\\"header-actions\\\">\\n          <div class=\\\"optionsBtn dropdown\\\">\\n            <button\\n              type=\\\"button\\\"\\n              title=\\\"{{ 'Settings' | translate }}\\\"\\n              (click)=\\\"(false)\\\"\\n              class=\\\"btn btn-dot dropdown-toggle c8y-dropdown\\\"\\n              aria-haspopup=\\\"true\\\"\\n            >\\n              <i c8yIcon=\\\"cog\\\"></i>\\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n      <div class=\\\"card-inner-scroll p-t-16\\\">\\n        <p translate>Widget example content.</p>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\",\n  dependencies: [{\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.IconDirective,\n    selector: \"[c8yIcon]\",\n    inputs: [\"c8yIcon\"]\n  }, {\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.C8yTranslateDirective,\n    selector: \"[translate],[ngx-translate]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgClass,\n    selector: \"[ngClass]\",\n    inputs: [\"class\", \"ngClass\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgIf,\n    selector: \"[ngIf]\",\n    inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"]\n  }, {\n    kind: \"pipe\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.C8yTranslatePipe,\n    name: \"translate\"\n  }]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: WidgetPreviewComponent,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,\n    args: [{\n      selector: 'c8y-widget-preview',\n      template: \"<div class=\\\"legend form-block\\\" translate>Preview</div>\\n<label *ngIf=\\\"tab\\\" translate>Tab and layout</label>\\n<label *ngIf=\\\"!tab\\\" translate>Layout</label>\\n<div class=\\\"dashboard-preview-slot\\\" [ngClass]=\\\"previewClasses\\\">\\n  <div\\n    class=\\\"page-tabs page-tabs-horizontal navigator-open p-absolute overflow-hidden\\\"\\n    style=\\\"left: 0; margin: 0 15px\\\"\\n    *ngIf=\\\"tab\\\"\\n  >\\n    <div class=\\\"tabContainer hidden-xs\\\">\\n      <ul role=\\\"menu\\\" class=\\\"nav nav-tabs nav-tabsc8y\\\">\\n        <li role=\\\"menuitem\\\" class=\\\"active\\\" style=\\\"left: 16px\\\">\\n          <a routerlinkactive=\\\"\\\" title=\\\"{{ tab.name }}\\\">\\n            <i class=\\\"text-primary\\\" [c8yIcon]=\\\"tab.icon\\\"></i>\\n            <span class=\\\"txt\\\">{{ tab.name }}</span>\\n          </a>\\n        </li>\\n      </ul>\\n    </div>\\n    <div class=\\\"visible-xs mobile-tabs\\\"></div>\\n  </div>\\n  <div [ngClass]=\\\"{ 'm-t-64': !!tab }\\\">\\n    <div class=\\\"card card-dashboard\\\" style=\\\"height: 300px\\\">\\n      <div class=\\\"card-header-actions\\\" style=\\\"z-index: 8\\\">\\n        <div class=\\\"card-title\\\">\\n          <span translate>Widget title</span>\\n        </div>\\n        <div class=\\\"header-actions\\\">\\n          <div class=\\\"optionsBtn dropdown\\\">\\n            <button\\n              type=\\\"button\\\"\\n              title=\\\"{{ 'Settings' | translate }}\\\"\\n              (click)=\\\"(false)\\\"\\n              class=\\\"btn btn-dot dropdown-toggle c8y-dropdown\\\"\\n              aria-haspopup=\\\"true\\\"\\n            >\\n              <i c8yIcon=\\\"cog\\\"></i>\\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n      <div class=\\\"card-inner-scroll p-t-16\\\">\\n        <p translate>Widget example content.</p>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n    }]\n  }],\n  propDecorators: {\n    previewClasses: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }],\n    tab: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }]\n  }\n});\nclass DashboardAvailabilityComponent {\n  constructor(userGroupService, gainsightService) {\n    this.userGroupService = userGroupService;\n    this.gainsightService = gainsightService;\n    this.globalRolesIdsChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter();\n    this.globalRolesItems = [];\n    this.globalRolesItemsSelected = [];\n    this.globalRoles = [];\n    this.PAGE_SIZE = 100;\n  }\n  /**\n   * Ids of global roles assigned to the dashboard or a string \"all\" indicating the selection of all global roles.\n   * The value undefined is treated as equivalent to 'all'.\n   */\n  get globalRolesIds() {\n    return this._globalRolesIds;\n  }\n  set globalRolesIds(ids) {\n    if (!ids || ids === ALL_GLOBAL_ROLES_SELECTED) {\n      this._globalRolesIds = ALL_GLOBAL_ROLES_SELECTED;\n      return;\n    }\n    this._globalRolesIds = [...ids];\n  }\n  ngOnInit() {\n    var _this11 = this;\n    return _asyncToGenerator(function* () {\n      _this11.globalRoles = yield _this11.getGlobalRoles();\n      _this11.globalRolesItems = _this11.mapGlobalRolesToItems();\n      _this11.globalRolesItemsSelected = _this11.getSelectedGlobalRolesItems();\n    })();\n  }\n  onSelected(items) {\n    if (!items || !Array.isArray(items)) {\n      return;\n    }\n    const allItemsSelected = items.length === this.globalRolesItems.length;\n    this.globalRolesItemsSelected = items;\n    if (allItemsSelected) {\n      this.globalRolesIdsChange.emit(ALL_GLOBAL_ROLES_SELECTED);\n      this.gainsightService.triggerEvent(PRODUCT_EXPERIENCE.DASHBOARD.EVENTS.DASHBOARD_AVAILABILITY, {\n        component: PRODUCT_EXPERIENCE.DASHBOARD.COMPONENTS.DASHBOARD_AVAILABILITY,\n        action: PRODUCT_EXPERIENCE.DASHBOARD.ACTIONS.APPLY_GLOBAL_ROLES_CHANGES,\n        globalRoles: ALL_GLOBAL_ROLES_SELECTED\n      });\n    } else {\n      var _selectedGlobalRolesI;\n      const selectedGlobalRolesIds = items.map(i => i.id);\n      this.globalRolesIdsChange.emit([...selectedGlobalRolesIds]);\n      this.gainsightService.triggerEvent(PRODUCT_EXPERIENCE.DASHBOARD.EVENTS.DASHBOARD_AVAILABILITY, {\n        component: PRODUCT_EXPERIENCE.DASHBOARD.COMPONENTS.DASHBOARD_AVAILABILITY,\n        action: PRODUCT_EXPERIENCE.DASHBOARD.ACTIONS.APPLY_GLOBAL_ROLES_CHANGES,\n        globalRoles: selectedGlobalRolesIds === null || selectedGlobalRolesIds === void 0 ? void 0 : (_selectedGlobalRolesI = selectedGlobalRolesIds.sort()) === null || _selectedGlobalRolesI === void 0 ? void 0 : _selectedGlobalRolesI.join()\n      });\n    }\n  }\n  getGlobalRoles() {\n    var _this12 = this;\n    return _asyncToGenerator(function* () {\n      return (yield _this12.userGroupService.list({\n        pageSize: _this12.PAGE_SIZE\n      })).data;\n    })();\n  }\n  mapGlobalRolesToItems() {\n    return this.globalRoles.map(({\n      name,\n      id\n    }) => ({\n      name,\n      id\n    }));\n  }\n  getSelectedGlobalRolesItems() {\n    if (!this.globalRolesIds || this.globalRolesIds === ALL_GLOBAL_ROLES_SELECTED) {\n      return this.globalRolesItems;\n    }\n    return this.globalRolesIds.map(globalRoleId => this.globalRolesItems.find(gR => gR.id === globalRoleId)).filter(Boolean);\n  }\n}\nDashboardAvailabilityComponent.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DashboardAvailabilityComponent,\n  deps: [{\n    token: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.UserGroupService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.GainsightService\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Component\n});\nDashboardAvailabilityComponent.cmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareComponent\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  type: DashboardAvailabilityComponent,\n  selector: \"c8y-dashboard-availability\",\n  inputs: {\n    globalRolesIds: \"globalRolesIds\"\n  },\n  outputs: {\n    globalRolesIdsChange: \"globalRolesIdsChange\"\n  },\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  template: \"<c8y-form-group class=\\\"p-b-24 m-b-0\\\">\\n  <div class=\\\"legend form-block\\\">\\n    <span>{{ 'Availability' | translate }}</span>\\n  </div>\\n  <label for=\\\"availability\\\">\\n    <span class=\\\"m-r-4\\\" id=\\\"availability\\\">\\n      {{ 'Global roles' | translate }}\\n    </span>\\n    <button\\n      class=\\\"btn-help btn-help--sm\\\"\\n      type=\\\"button\\\"\\n      [attr.aria-label]=\\\"'Help' | translate\\\"\\n      popover=\\\"{{\\n        'Select the global roles for which the dashboard will be available' | translate\\n      }}\\\"\\n      triggers=\\\"focus\\\"\\n      placement=\\\"right\\\"\\n      container=\\\"body\\\"\\n    >\\n    </button>\\n  </label>\\n  <c8y-select\\n    style=\\\"width: 180px\\\"\\n    [items]=\\\"globalRolesItems\\\"\\n    [selected]=\\\"globalRolesItemsSelected\\\"\\n    (onChange)=\\\"onSelected($event)\\\"\\n  ></c8y-select>\\n</c8y-form-group>\\n\",\n  dependencies: [{\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.SelectComponent,\n    selector: \"c8y-select\",\n    inputs: [\"placeholder\", \"selectedLabel\", \"applyLabel\", \"items\", \"selected\", \"updateItems\", \"disableApplyOnNoSelection\"],\n    outputs: [\"onChange\"]\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.FormGroupComponent,\n    selector: \"c8y-form-group\",\n    inputs: [\"hasError\", \"hasWarning\", \"hasSuccess\", \"novalidation\", \"status\"]\n  }, {\n    kind: \"directive\",\n    type: ngx_bootstrap_popover__WEBPACK_IMPORTED_MODULE_11__.PopoverDirective,\n    selector: \"[popover]\",\n    inputs: [\"adaptivePosition\", \"boundariesElement\", \"popover\", \"popoverContext\", \"popoverTitle\", \"placement\", \"outsideClick\", \"triggers\", \"container\", \"containerClass\", \"isOpen\", \"delay\"],\n    outputs: [\"onShown\", \"onHidden\"],\n    exportAs: [\"bs-popover\"]\n  }, {\n    kind: \"pipe\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.C8yTranslatePipe,\n    name: \"translate\"\n  }]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DashboardAvailabilityComponent,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,\n    args: [{\n      selector: 'c8y-dashboard-availability',\n      template: \"<c8y-form-group class=\\\"p-b-24 m-b-0\\\">\\n  <div class=\\\"legend form-block\\\">\\n    <span>{{ 'Availability' | translate }}</span>\\n  </div>\\n  <label for=\\\"availability\\\">\\n    <span class=\\\"m-r-4\\\" id=\\\"availability\\\">\\n      {{ 'Global roles' | translate }}\\n    </span>\\n    <button\\n      class=\\\"btn-help btn-help--sm\\\"\\n      type=\\\"button\\\"\\n      [attr.aria-label]=\\\"'Help' | translate\\\"\\n      popover=\\\"{{\\n        'Select the global roles for which the dashboard will be available' | translate\\n      }}\\\"\\n      triggers=\\\"focus\\\"\\n      placement=\\\"right\\\"\\n      container=\\\"body\\\"\\n    >\\n    </button>\\n  </label>\\n  <c8y-select\\n    style=\\\"width: 180px\\\"\\n    [items]=\\\"globalRolesItems\\\"\\n    [selected]=\\\"globalRolesItemsSelected\\\"\\n    (onChange)=\\\"onSelected($event)\\\"\\n  ></c8y-select>\\n</c8y-form-group>\\n\"\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.UserGroupService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.GainsightService\n    }];\n  },\n  propDecorators: {\n    globalRolesIds: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }],\n    globalRolesIdsChange: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Output\n    }]\n  }\n});\nclass DashboardDetailComponent {\n  constructor(modal, iconList, contextDashboardService, navigatorService, permissionsService, translateService) {\n    this.modal = modal;\n    this.contextDashboardService = contextDashboardService;\n    this.navigatorService = navigatorService;\n    this.permissionsService = permissionsService;\n    this.translateService = translateService;\n    this.styling = {\n      themeClass: 'dashboard-theme-light',\n      headerClass: 'panel-title-regular'\n    };\n    this.possibleStyling = {\n      DASHBOARD_THEME_CLASSES,\n      WIDGET_HEADER_CLASSES\n    };\n    this.result = new Promise((resolve, reject) => {\n      this._save = resolve;\n      this._cancel = reject;\n    });\n    this.DEFAULT_DASHBOARD_MARGIN = 12;\n    this.DEFAULT_DASHBOARD_ICON = 'th';\n    this.DEFAULT_DASHBOARD_PRIORITY = 10000;\n    this.icons = iconList;\n    this.filteredIcons = iconList;\n  }\n  get applyToDevicesOfTypeTitle() {\n    const text = this.applyToDevicesOfTypePermitted ? (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Apply dashboard to all devices of type {{ type }}') : (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Apply dashboard to all devices of type {{ type }} (permission required)');\n    return this.translateService.instant(text, {\n      type: this.dashboard.deviceTypeValue\n    });\n  }\n  ngAfterContentInit() {\n    const defaultDashboardCfg = {\n      name: this.translateService.instant(this.isReport ? (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Report') : (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Dashboard')),\n      priority: this.isReport ? REPORT_DEFAULT_NAVIGATION_NODE_PRIORITY : this.DEFAULT_DASHBOARD_PRIORITY,\n      icon: this.DEFAULT_DASHBOARD_ICON,\n      deviceTypeValue: this.deviceType\n    };\n    if (this.dashboard) {\n      this.currentDashboard = (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.clone)(this.dashboard);\n      this.dashboardName = this.currentDashboard.name;\n      this.setDashboardStyle();\n    } else {\n      this.dashboard = defaultDashboardCfg;\n      this.dashboardName = this.dashboard.name;\n      this.dashboardDetailForm.form.markAsDirty();\n    }\n    this.setTitle();\n    this.setupApplyToDevicesOfTypeCheckbox();\n    this.navigatorNodes$ = this.navigatorService.items$;\n    this.namePlaceholder = this.isReport ? (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('e.g. My report') : (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('e.g. My dashboard');\n    this.globalRolesIds = this.dashboard.globalRolesIds;\n  }\n  setTitle() {\n    if (!this.currentDashboard) {\n      this.title = this.isReport ? (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Add report') : (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Add dashboard');\n    } else {\n      this.title = this.isReport ? (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Edit report') : (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Edit dashboard');\n    }\n  }\n  setupApplyToDevicesOfTypeCheckbox() {\n    const rolesToCheck = ['ROLE_INVENTORY_CREATE', 'ROLE_INVENTORY_ADMIN'];\n    this.applyToDevicesOfTypePermitted = this.permissionsService.hasAnyRole(rolesToCheck);\n  }\n  save() {\n    this.dashboard.globalRolesIds = this.globalRolesIds;\n    this.dashboard.name = this.dashboardName;\n    this.dashboard.classes = {\n      [this.styling.themeClass]: true\n    };\n    this.dashboard.widgetClasses = {\n      [this.styling.headerClass]: true\n    };\n    this.dashboard.c8y_IsNavigatorNode = this.dashboard.c8y_IsNavigatorNode ? {} : this.currentDashboard ? null : undefined;\n    this._save(this.dashboard);\n  }\n  close() {\n    this._cancel();\n    this.modal.hide();\n  }\n  getDashboardPreviewStyle() {\n    const cssClasses = {};\n    cssClasses[this.styling.headerClass] = true;\n    cssClasses[this.styling.themeClass] = true;\n    return cssClasses;\n  }\n  selectIcon(icon) {\n    this.dashboard.icon = icon;\n    this.dashboardDetailForm.form.markAsDirty();\n  }\n  updateFiltered(term) {\n    if (term) {\n      const search = new RegExp(term, 'i');\n      this.filteredIcons = this.icons.filter(val => search.test(val));\n    } else {\n      this.filteredIcons = this.icons;\n    }\n  }\n  setDashboardStyle() {\n    const allClasses = {\n      ...this.dashboard.classes,\n      ...this.dashboard.widgetClasses\n    };\n    const styles = Object.keys(allClasses).map(c => c.split('-').pop());\n    styles.forEach(styleName => {\n      this.styling.themeClass = this.contextDashboardService.getStyling(DASHBOARD_THEME_CLASSES, styleName, this.styling.themeClass);\n      this.styling.headerClass = this.contextDashboardService.getStyling(WIDGET_HEADER_CLASSES, styleName, this.styling.headerClass);\n    });\n  }\n}\nDashboardDetailComponent.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DashboardDetailComponent,\n  deps: [{\n    token: ngx_bootstrap_modal__WEBPACK_IMPORTED_MODULE_2__.BsModalRef\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ICON_LIST\n  }, {\n    token: ContextDashboardService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.NavigatorService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.Permissions\n  }, {\n    token: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__.TranslateService\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Component\n});\nDashboardDetailComponent.cmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareComponent\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  type: DashboardDetailComponent,\n  selector: \"c8y-dashboard-detail\",\n  viewQueries: [{\n    propertyName: \"dashboardDetailForm\",\n    first: true,\n    predicate: [\"dashboardDetailForm\"],\n    descendants: true,\n    static: true\n  }],\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  template: \"<div class=\\\"viewport-modal\\\">\\n  <div class=\\\"modal-header separator-bottom\\\">\\n    <h3 id=\\\"modal-title\\\">{{ title | translate }}</h3>\\n  </div>\\n\\n  <div class=\\\"modal-inner-scroll\\\" id=\\\"modal-body\\\">\\n    <div class=\\\"p-l-24 p-r-24\\\">\\n      <form #dashboardDetailForm=\\\"ngForm\\\" class=\\\"d-contents\\\">\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-sm-6\\\">\\n            <div *ngIf=\\\"!isNamedDashboard || isReport\\\">\\n              <div class=\\\"legend form-block\\\">\\n                <span>{{ 'General' | translate }}</span>\\n              </div>\\n              <div class=\\\"d-flex\\\">\\n                <c8y-form-group class=\\\"m-r-16\\\">\\n                  <label class=\\\"d-block\\\">{{ 'Icon' | translate }}</label>\\n                  <div dropdown class=\\\"dropdown\\\">\\n                    <button\\n                      title=\\\"{{ 'Icon' | translate }}\\\"\\n                      type=\\\"button\\\"\\n                      class=\\\"btn-default btn btn-gray\\\"\\n                      aria-haspopup=\\\"true\\\"\\n                      dropdownToggle\\n                    >\\n                      <i c8yIcon=\\\"{{ dashboard.icon }}\\\"></i>\\n                      <span class=\\\"caret\\\"></span>\\n                    </button>\\n                    <ul\\n                      *dropdownMenu\\n                      class=\\\"dropdown-menu modal-inner-scroll dropdown-menu-grid-4 m-l-0\\\"\\n                      style=\\\"max-height: 250px\\\"\\n                    >\\n                      <ng-container *ngFor=\\\"let icon of filteredIcons\\\">\\n                        <li (click)=\\\"selectIcon(icon)\\\">\\n                          <a\\n                            class=\\\"interact\\\"\\n                            title=\\\"{{ icon }}\\\"\\n                            [ngClass]=\\\"{ active: dashboard.icon === icon }\\\"\\n                          >\\n                            <i class=\\\"icon\\\" [c8yIcon]=\\\"icon\\\"></i>\\n                          </a>\\n                        </li>\\n                      </ng-container>\\n                    </ul>\\n                  </div>\\n                </c8y-form-group>\\n                <c8y-form-group class=\\\"flex-grow\\\">\\n                  <label>\\n                    <span class=\\\"m-r-4\\\" id=\\\"menuLabel\\\">{{ 'Menu label' | translate }}</span>\\n                    <button\\n                      class=\\\"btn-help btn-help--sm\\\"\\n                      type=\\\"button\\\"\\n                      [attr.aria-label]=\\\"'Help' | translate\\\"\\n                      popover=\\\"{{\\n                        'Menu label to display in submenu when dashboard is attached' | translate\\n                      }}\\\"\\n                      placement=\\\"right\\\"\\n                      triggers=\\\"focus\\\"\\n                      container=\\\"body\\\"\\n                    ></button>\\n                  </label>\\n                  <input\\n                    id=\\\"menuLabel\\\"\\n                    type=\\\"text\\\"\\n                    class=\\\"form-control\\\"\\n                    name=\\\"name\\\"\\n                    [(ngModel)]=\\\"dashboardName\\\"\\n                    placeholder=\\\"{{ namePlaceholder | translate }}\\\"\\n                    maxlength=\\\"512\\\"\\n                    required\\n                  />\\n                </c8y-form-group>\\n              </div>\\n              <c8y-form-group *ngIf=\\\"isReport\\\">\\n                <label id=\\\"description\\\">{{ 'Description ' | translate }}</label>\\n                <textarea\\n                  aria-labelledby=\\\"description\\\"\\n                  class=\\\"form-control\\\"\\n                  rows=\\\"2\\\"\\n                  name=\\\"description\\\"\\n                  [(ngModel)]=\\\"dashboard.description\\\"\\n                ></textarea>\\n              </c8y-form-group>\\n              <div class=\\\"row\\\">\\n                <div class=\\\"col-sm-6\\\" *ngIf=\\\"!isReport\\\">\\n                  <c8y-form-group>\\n                    <label for=\\\"positionNav\\\">\\n                      <span class=\\\"m-r-4\\\" id=\\\"positionNav\\\">\\n                        {{ 'Position in navigation' | translate }}\\n                      </span>\\n                      <button\\n                        class=\\\"btn-help btn-help--sm\\\"\\n                        type=\\\"button\\\"\\n                        [attr.aria-label]=\\\"'Help' | translate\\\"\\n                        popover=\\\"{{\\n                          'Position in navigation menu (10000 first, -10000 last)' | translate\\n                        }}\\\"\\n                        placement=\\\"right\\\"\\n                        triggers=\\\"focus\\\"\\n                        container=\\\"body\\\"\\n                      ></button>\\n                    </label>\\n                    <input\\n                      id=\\\"positionNav\\\"\\n                      type=\\\"number\\\"\\n                      class=\\\"form-control\\\"\\n                      name=\\\"priority\\\"\\n                      [(ngModel)]=\\\"dashboard.priority\\\"\\n                      min=\\\"-10000\\\"\\n                      max=\\\"10000\\\"\\n                      placeholder=\\\"{{ 'e.g.' | translate }} 500\\\"\\n                      required\\n                    />\\n                  </c8y-form-group>\\n                </div>\\n\\n                <div class=\\\"col-sm-6\\\" *ngIf=\\\"isReport\\\">\\n                  <label translate>Navigator menu item</label>\\n                  <c8y-form-group>\\n                    <label title=\\\"{{ 'Show in navigator' | translate }}\\\" class=\\\"c8y-checkbox\\\">\\n                      <input\\n                        type=\\\"checkbox\\\"\\n                        name=\\\"isNavigatorNode\\\"\\n                        [(ngModel)]=\\\"!!dashboard.c8y_IsNavigatorNode\\\"\\n                      />\\n                      <span></span>\\n                      <span>{{ 'Show in navigator' | translate }}</span>\\n                    </label>\\n                  </c8y-form-group>\\n                </div>\\n                <div class=\\\"col-sm-6\\\" *ngIf=\\\"isReport\\\">\\n                  <c8y-form-group>\\n                    <label for=\\\"position\\\">\\n                      <span class=\\\"m-r-4\\\">{{ 'Position in navigator' | translate }}</span>\\n                      <ng-template #positionInNavPop>\\n                        <span>\\n                          {{\\n                            'Position in navigator (10001 first, -10000 last).' | translate\\n                          }}&nbsp;\\n                          {{ 'Existing nodes:' | translate }}\\n                        </span>\\n                        <ul class=\\\"list-unstyled m-t-16\\\">\\n                          <li *ngFor=\\\"let node of navigatorNodes$ | async\\\">\\n                            <i [c8yIcon]=\\\"node.icon\\\"></i>\\n                            <span class=\\\"word-break m-l-4 m-r-16\\\">\\n                              {{\\n                                node.label.length > 15\\n                                  ? (node.label | slice: 0:15) + '...'\\n                                  : node.label\\n                              }}\\n                            </span>\\n                            <span class=\\\"pull-right\\\">{{ node.priority }}</span>\\n                          </li>\\n                        </ul>\\n                      </ng-template>\\n                      <button\\n                        class=\\\"btn-help btn-help--sm\\\"\\n                        type=\\\"button\\\"\\n                        [attr.aria-label]=\\\"'Help' | translate\\\"\\n                        [popover]=\\\"positionInNavPop\\\"\\n                        triggers=\\\"focus\\\"\\n                        placement=\\\"right\\\"\\n                        container=\\\"body\\\"\\n                      ></button>\\n                    </label>\\n                    <input\\n                      type=\\\"number\\\"\\n                      for=\\\"position\\\"\\n                      class=\\\"form-control\\\"\\n                      name=\\\"priority\\\"\\n                      [(ngModel)]=\\\"dashboard.priority\\\"\\n                      min=\\\"-10000\\\"\\n                      max=\\\"20000\\\"\\n                      placeholder=\\\"{{ 'e.g.' | translate }} 500\\\"\\n                    />\\n                  </c8y-form-group>\\n                </div>\\n              </div>\\n\\n              <div *ngIf=\\\"!currentDashboard && deviceType\\\">\\n                <div class=\\\"form-group\\\">\\n                  <label title=\\\"{{ applyToDevicesOfTypeTitle }}\\\" class=\\\"c8y-checkbox\\\">\\n                    <input\\n                      type=\\\"checkbox\\\"\\n                      name=\\\"deviceType\\\"\\n                      [(ngModel)]=\\\"dashboard.deviceType\\\"\\n                      [disabled]=\\\"!applyToDevicesOfTypePermitted\\\"\\n                    />\\n                    <span></span>\\n                    <span\\n                      class=\\\"m-r-4\\\"\\n                      [translateParams]=\\\"{ type: dashboard.deviceTypeValue }\\\"\\n                      ngNonBindable\\n                      translate\\n                    >\\n                      Apply dashboard to all devices of type\\n                      <i>{{ type }}</i>\\n                    </span>\\n                  </label>\\n                </div>\\n\\n                <div class=\\\"alert alert-info m-b-24\\\" *ngIf=\\\"isDeviceType\\\">\\n                  <i c8y-icon=\\\"info\\\"></i>\\n                  <span\\n                    translate\\n                    [translateParams]=\\\"{ type: dashboard.deviceTypeValue }\\\"\\n                    ngNonBindable\\n                  >\\n                    This dashboard is shared between all devices of the type\\n                    <i>{{ type }}</i>\\n                    .\\n                  </span>\\n                </div>\\n              </div>\\n            </div>\\n            <c8y-dashboard-availability\\n              *ngIf=\\\"!!isReport === false\\\"\\n              [(globalRolesIds)]=\\\"globalRolesIds\\\"\\n              (globalRolesIdsChange)=\\\"dashboardDetailForm?.form?.markAsDirty()\\\"\\n            ></c8y-dashboard-availability>\\n            <c8y-appearance-settings\\n              [(themeClass)]=\\\"styling.themeClass\\\"\\n              [(headerClass)]=\\\"styling.headerClass\\\"\\n            ></c8y-appearance-settings>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"col-sm-6\\\">\\n                <c8y-form-group class=\\\"p-b-24 m-b-0\\\">\\n                  <label for=\\\"margin\\\">{{ 'Widget margin' | translate }}</label>\\n                  <div class=\\\"input-group\\\">\\n                    <input\\n                      id=\\\"margin\\\"\\n                      name=\\\"margin\\\"\\n                      type=\\\"number\\\"\\n                      class=\\\"form-control\\\"\\n                      [(ngModel)]=\\\"dashboard.widgetMargin\\\"\\n                      min=\\\"0\\\"\\n                      max=\\\"50\\\"\\n                      placeholder=\\\"{{ DEFAULT_DASHBOARD_MARGIN }}\\\"\\n                    />\\n                    <span class=\\\"input-group-addon\\\">px</span>\\n                  </div>\\n                </c8y-form-group>\\n              </div>\\n              <div class=\\\"col-sm-6\\\">\\n                <c8y-form-group class=\\\"p-b-24 m-b-0\\\">\\n                  <label translate>Widget titles</label>\\n                  <label title=\\\"{{ 'Translate if possible' | translate }}\\\" class=\\\"c8y-checkbox\\\">\\n                    <input\\n                      type=\\\"checkbox\\\"\\n                      name=\\\"translateWidgetTitle\\\"\\n                      [(ngModel)]=\\\"dashboard.translateWidgetTitle\\\"\\n                    />\\n                    <span></span>\\n                    <span>{{ 'Translate if possible' | translate }}</span>\\n                  </label>\\n                </c8y-form-group>\\n              </div>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"col-sm-6\\\">\\n            <c8y-widget-preview\\n              [tab]=\\\"!isNamedDashboard ? dashboard : undefined\\\"\\n              [previewClasses]=\\\"getDashboardPreviewStyle()\\\"\\n            ></c8y-widget-preview>\\n          </div>\\n        </div>\\n      </form>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"modal-footer\\\">\\n    <button\\n      class=\\\"btn btn-default\\\"\\n      type=\\\"button\\\"\\n      title=\\\"{{ 'Cancel' | translate }}\\\"\\n      (click)=\\\"close()\\\"\\n    >\\n      {{ 'Cancel' | translate }}\\n    </button>\\n    <button\\n      class=\\\"btn btn-primary\\\"\\n      type=\\\"button\\\"\\n      title=\\\"{{ 'Save' | translate }}\\\"\\n      (click)=\\\"save()\\\"\\n      [disabled]=\\\"dashboardDetailForm.form.invalid || dashboardDetailForm.form.pristine\\\"\\n    >\\n      {{ 'Save' | translate }}\\n    </button>\\n  </div>\\n</div>\\n\",\n  dependencies: [{\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.IconDirective,\n    selector: \"[c8yIcon]\",\n    inputs: [\"c8yIcon\"]\n  }, {\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.C8yTranslateDirective,\n    selector: \"[translate],[ngx-translate]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgClass,\n    selector: \"[ngClass]\",\n    inputs: [\"class\", \"ngClass\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgForOf,\n    selector: \"[ngFor][ngForOf]\",\n    inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgIf,\n    selector: \"[ngIf]\",\n    inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"]\n  }, {\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.MinValidationDirective,\n    selector: \"[min]\",\n    inputs: [\"min\"]\n  }, {\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.MaxValidationDirective,\n    selector: \"[max]\",\n    inputs: [\"max\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__[\"NgNoValidate\"],\n    selector: \"form:not([ngNoForm]):not([ngNativeValidate])\"\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.DefaultValueAccessor,\n    selector: \"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NumberValueAccessor,\n    selector: \"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.CheckboxControlValueAccessor,\n    selector: \"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgControlStatus,\n    selector: \"[formControlName],[ngModel],[formControl]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgControlStatusGroup,\n    selector: \"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.RequiredValidator,\n    selector: \":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]\",\n    inputs: [\"required\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.MaxLengthValidator,\n    selector: \"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]\",\n    inputs: [\"maxlength\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.MinValidator,\n    selector: \"input[type=number][min][formControlName],input[type=number][min][formControl],input[type=number][min][ngModel]\",\n    inputs: [\"min\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.MaxValidator,\n    selector: \"input[type=number][max][formControlName],input[type=number][max][formControl],input[type=number][max][ngModel]\",\n    inputs: [\"max\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgModel,\n    selector: \"[ngModel]:not([formControlName]):not([formControl])\",\n    inputs: [\"name\", \"disabled\", \"ngModel\", \"ngModelOptions\"],\n    outputs: [\"ngModelChange\"],\n    exportAs: [\"ngModel\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgForm,\n    selector: \"form:not([ngNoForm]):not([formGroup]),ng-form,[ngForm]\",\n    inputs: [\"ngFormOptions\"],\n    outputs: [\"ngSubmit\"],\n    exportAs: [\"ngForm\"]\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.FormGroupComponent,\n    selector: \"c8y-form-group\",\n    inputs: [\"hasError\", \"hasWarning\", \"hasSuccess\", \"novalidation\", \"status\"]\n  }, {\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.RequiredInputPlaceholderDirective,\n    selector: \"input[required], input[formControlName]\"\n  }, {\n    kind: \"directive\",\n    type: ngx_bootstrap_popover__WEBPACK_IMPORTED_MODULE_11__.PopoverDirective,\n    selector: \"[popover]\",\n    inputs: [\"adaptivePosition\", \"boundariesElement\", \"popover\", \"popoverContext\", \"popoverTitle\", \"placement\", \"outsideClick\", \"triggers\", \"container\", \"containerClass\", \"isOpen\", \"delay\"],\n    outputs: [\"onShown\", \"onHidden\"],\n    exportAs: [\"bs-popover\"]\n  }, {\n    kind: \"directive\",\n    type: ngx_bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_12__.BsDropdownMenuDirective,\n    selector: \"[bsDropdownMenu],[dropdownMenu]\",\n    exportAs: [\"bs-dropdown-menu\"]\n  }, {\n    kind: \"directive\",\n    type: ngx_bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_12__.BsDropdownToggleDirective,\n    selector: \"[bsDropdownToggle],[dropdownToggle]\",\n    exportAs: [\"bs-dropdown-toggle\"]\n  }, {\n    kind: \"directive\",\n    type: ngx_bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_12__.BsDropdownDirective,\n    selector: \"[bsDropdown], [dropdown]\",\n    inputs: [\"placement\", \"triggers\", \"container\", \"dropup\", \"autoClose\", \"isAnimated\", \"insideClick\", \"isDisabled\", \"isOpen\"],\n    outputs: [\"isOpenChange\", \"onShown\", \"onHidden\"],\n    exportAs: [\"bs-dropdown\"]\n  }, {\n    kind: \"component\",\n    type: AppearanceSettingsComponent,\n    selector: \"c8y-appearance-settings\",\n    inputs: [\"themeClass\", \"headerClass\", \"defaultThemeClass\", \"defaultHeaderClass\", \"possibleStylingTheme\", \"possibleStylingHeader\"],\n    outputs: [\"themeClassChange\", \"headerClassChange\"]\n  }, {\n    kind: \"component\",\n    type: WidgetPreviewComponent,\n    selector: \"c8y-widget-preview\",\n    inputs: [\"previewClasses\", \"tab\"]\n  }, {\n    kind: \"component\",\n    type: DashboardAvailabilityComponent,\n    selector: \"c8y-dashboard-availability\",\n    inputs: [\"globalRolesIds\"],\n    outputs: [\"globalRolesIdsChange\"]\n  }, {\n    kind: \"pipe\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.C8yTranslatePipe,\n    name: \"translate\"\n  }, {\n    kind: \"pipe\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.AsyncPipe,\n    name: \"async\"\n  }, {\n    kind: \"pipe\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.SlicePipe,\n    name: \"slice\"\n  }]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DashboardDetailComponent,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,\n    args: [{\n      selector: 'c8y-dashboard-detail',\n      template: \"<div class=\\\"viewport-modal\\\">\\n  <div class=\\\"modal-header separator-bottom\\\">\\n    <h3 id=\\\"modal-title\\\">{{ title | translate }}</h3>\\n  </div>\\n\\n  <div class=\\\"modal-inner-scroll\\\" id=\\\"modal-body\\\">\\n    <div class=\\\"p-l-24 p-r-24\\\">\\n      <form #dashboardDetailForm=\\\"ngForm\\\" class=\\\"d-contents\\\">\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-sm-6\\\">\\n            <div *ngIf=\\\"!isNamedDashboard || isReport\\\">\\n              <div class=\\\"legend form-block\\\">\\n                <span>{{ 'General' | translate }}</span>\\n              </div>\\n              <div class=\\\"d-flex\\\">\\n                <c8y-form-group class=\\\"m-r-16\\\">\\n                  <label class=\\\"d-block\\\">{{ 'Icon' | translate }}</label>\\n                  <div dropdown class=\\\"dropdown\\\">\\n                    <button\\n                      title=\\\"{{ 'Icon' | translate }}\\\"\\n                      type=\\\"button\\\"\\n                      class=\\\"btn-default btn btn-gray\\\"\\n                      aria-haspopup=\\\"true\\\"\\n                      dropdownToggle\\n                    >\\n                      <i c8yIcon=\\\"{{ dashboard.icon }}\\\"></i>\\n                      <span class=\\\"caret\\\"></span>\\n                    </button>\\n                    <ul\\n                      *dropdownMenu\\n                      class=\\\"dropdown-menu modal-inner-scroll dropdown-menu-grid-4 m-l-0\\\"\\n                      style=\\\"max-height: 250px\\\"\\n                    >\\n                      <ng-container *ngFor=\\\"let icon of filteredIcons\\\">\\n                        <li (click)=\\\"selectIcon(icon)\\\">\\n                          <a\\n                            class=\\\"interact\\\"\\n                            title=\\\"{{ icon }}\\\"\\n                            [ngClass]=\\\"{ active: dashboard.icon === icon }\\\"\\n                          >\\n                            <i class=\\\"icon\\\" [c8yIcon]=\\\"icon\\\"></i>\\n                          </a>\\n                        </li>\\n                      </ng-container>\\n                    </ul>\\n                  </div>\\n                </c8y-form-group>\\n                <c8y-form-group class=\\\"flex-grow\\\">\\n                  <label>\\n                    <span class=\\\"m-r-4\\\" id=\\\"menuLabel\\\">{{ 'Menu label' | translate }}</span>\\n                    <button\\n                      class=\\\"btn-help btn-help--sm\\\"\\n                      type=\\\"button\\\"\\n                      [attr.aria-label]=\\\"'Help' | translate\\\"\\n                      popover=\\\"{{\\n                        'Menu label to display in submenu when dashboard is attached' | translate\\n                      }}\\\"\\n                      placement=\\\"right\\\"\\n                      triggers=\\\"focus\\\"\\n                      container=\\\"body\\\"\\n                    ></button>\\n                  </label>\\n                  <input\\n                    id=\\\"menuLabel\\\"\\n                    type=\\\"text\\\"\\n                    class=\\\"form-control\\\"\\n                    name=\\\"name\\\"\\n                    [(ngModel)]=\\\"dashboardName\\\"\\n                    placeholder=\\\"{{ namePlaceholder | translate }}\\\"\\n                    maxlength=\\\"512\\\"\\n                    required\\n                  />\\n                </c8y-form-group>\\n              </div>\\n              <c8y-form-group *ngIf=\\\"isReport\\\">\\n                <label id=\\\"description\\\">{{ 'Description ' | translate }}</label>\\n                <textarea\\n                  aria-labelledby=\\\"description\\\"\\n                  class=\\\"form-control\\\"\\n                  rows=\\\"2\\\"\\n                  name=\\\"description\\\"\\n                  [(ngModel)]=\\\"dashboard.description\\\"\\n                ></textarea>\\n              </c8y-form-group>\\n              <div class=\\\"row\\\">\\n                <div class=\\\"col-sm-6\\\" *ngIf=\\\"!isReport\\\">\\n                  <c8y-form-group>\\n                    <label for=\\\"positionNav\\\">\\n                      <span class=\\\"m-r-4\\\" id=\\\"positionNav\\\">\\n                        {{ 'Position in navigation' | translate }}\\n                      </span>\\n                      <button\\n                        class=\\\"btn-help btn-help--sm\\\"\\n                        type=\\\"button\\\"\\n                        [attr.aria-label]=\\\"'Help' | translate\\\"\\n                        popover=\\\"{{\\n                          'Position in navigation menu (10000 first, -10000 last)' | translate\\n                        }}\\\"\\n                        placement=\\\"right\\\"\\n                        triggers=\\\"focus\\\"\\n                        container=\\\"body\\\"\\n                      ></button>\\n                    </label>\\n                    <input\\n                      id=\\\"positionNav\\\"\\n                      type=\\\"number\\\"\\n                      class=\\\"form-control\\\"\\n                      name=\\\"priority\\\"\\n                      [(ngModel)]=\\\"dashboard.priority\\\"\\n                      min=\\\"-10000\\\"\\n                      max=\\\"10000\\\"\\n                      placeholder=\\\"{{ 'e.g.' | translate }} 500\\\"\\n                      required\\n                    />\\n                  </c8y-form-group>\\n                </div>\\n\\n                <div class=\\\"col-sm-6\\\" *ngIf=\\\"isReport\\\">\\n                  <label translate>Navigator menu item</label>\\n                  <c8y-form-group>\\n                    <label title=\\\"{{ 'Show in navigator' | translate }}\\\" class=\\\"c8y-checkbox\\\">\\n                      <input\\n                        type=\\\"checkbox\\\"\\n                        name=\\\"isNavigatorNode\\\"\\n                        [(ngModel)]=\\\"!!dashboard.c8y_IsNavigatorNode\\\"\\n                      />\\n                      <span></span>\\n                      <span>{{ 'Show in navigator' | translate }}</span>\\n                    </label>\\n                  </c8y-form-group>\\n                </div>\\n                <div class=\\\"col-sm-6\\\" *ngIf=\\\"isReport\\\">\\n                  <c8y-form-group>\\n                    <label for=\\\"position\\\">\\n                      <span class=\\\"m-r-4\\\">{{ 'Position in navigator' | translate }}</span>\\n                      <ng-template #positionInNavPop>\\n                        <span>\\n                          {{\\n                            'Position in navigator (10001 first, -10000 last).' | translate\\n                          }}&nbsp;\\n                          {{ 'Existing nodes:' | translate }}\\n                        </span>\\n                        <ul class=\\\"list-unstyled m-t-16\\\">\\n                          <li *ngFor=\\\"let node of navigatorNodes$ | async\\\">\\n                            <i [c8yIcon]=\\\"node.icon\\\"></i>\\n                            <span class=\\\"word-break m-l-4 m-r-16\\\">\\n                              {{\\n                                node.label.length > 15\\n                                  ? (node.label | slice: 0:15) + '...'\\n                                  : node.label\\n                              }}\\n                            </span>\\n                            <span class=\\\"pull-right\\\">{{ node.priority }}</span>\\n                          </li>\\n                        </ul>\\n                      </ng-template>\\n                      <button\\n                        class=\\\"btn-help btn-help--sm\\\"\\n                        type=\\\"button\\\"\\n                        [attr.aria-label]=\\\"'Help' | translate\\\"\\n                        [popover]=\\\"positionInNavPop\\\"\\n                        triggers=\\\"focus\\\"\\n                        placement=\\\"right\\\"\\n                        container=\\\"body\\\"\\n                      ></button>\\n                    </label>\\n                    <input\\n                      type=\\\"number\\\"\\n                      for=\\\"position\\\"\\n                      class=\\\"form-control\\\"\\n                      name=\\\"priority\\\"\\n                      [(ngModel)]=\\\"dashboard.priority\\\"\\n                      min=\\\"-10000\\\"\\n                      max=\\\"20000\\\"\\n                      placeholder=\\\"{{ 'e.g.' | translate }} 500\\\"\\n                    />\\n                  </c8y-form-group>\\n                </div>\\n              </div>\\n\\n              <div *ngIf=\\\"!currentDashboard && deviceType\\\">\\n                <div class=\\\"form-group\\\">\\n                  <label title=\\\"{{ applyToDevicesOfTypeTitle }}\\\" class=\\\"c8y-checkbox\\\">\\n                    <input\\n                      type=\\\"checkbox\\\"\\n                      name=\\\"deviceType\\\"\\n                      [(ngModel)]=\\\"dashboard.deviceType\\\"\\n                      [disabled]=\\\"!applyToDevicesOfTypePermitted\\\"\\n                    />\\n                    <span></span>\\n                    <span\\n                      class=\\\"m-r-4\\\"\\n                      [translateParams]=\\\"{ type: dashboard.deviceTypeValue }\\\"\\n                      ngNonBindable\\n                      translate\\n                    >\\n                      Apply dashboard to all devices of type\\n                      <i>{{ type }}</i>\\n                    </span>\\n                  </label>\\n                </div>\\n\\n                <div class=\\\"alert alert-info m-b-24\\\" *ngIf=\\\"isDeviceType\\\">\\n                  <i c8y-icon=\\\"info\\\"></i>\\n                  <span\\n                    translate\\n                    [translateParams]=\\\"{ type: dashboard.deviceTypeValue }\\\"\\n                    ngNonBindable\\n                  >\\n                    This dashboard is shared between all devices of the type\\n                    <i>{{ type }}</i>\\n                    .\\n                  </span>\\n                </div>\\n              </div>\\n            </div>\\n            <c8y-dashboard-availability\\n              *ngIf=\\\"!!isReport === false\\\"\\n              [(globalRolesIds)]=\\\"globalRolesIds\\\"\\n              (globalRolesIdsChange)=\\\"dashboardDetailForm?.form?.markAsDirty()\\\"\\n            ></c8y-dashboard-availability>\\n            <c8y-appearance-settings\\n              [(themeClass)]=\\\"styling.themeClass\\\"\\n              [(headerClass)]=\\\"styling.headerClass\\\"\\n            ></c8y-appearance-settings>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"col-sm-6\\\">\\n                <c8y-form-group class=\\\"p-b-24 m-b-0\\\">\\n                  <label for=\\\"margin\\\">{{ 'Widget margin' | translate }}</label>\\n                  <div class=\\\"input-group\\\">\\n                    <input\\n                      id=\\\"margin\\\"\\n                      name=\\\"margin\\\"\\n                      type=\\\"number\\\"\\n                      class=\\\"form-control\\\"\\n                      [(ngModel)]=\\\"dashboard.widgetMargin\\\"\\n                      min=\\\"0\\\"\\n                      max=\\\"50\\\"\\n                      placeholder=\\\"{{ DEFAULT_DASHBOARD_MARGIN }}\\\"\\n                    />\\n                    <span class=\\\"input-group-addon\\\">px</span>\\n                  </div>\\n                </c8y-form-group>\\n              </div>\\n              <div class=\\\"col-sm-6\\\">\\n                <c8y-form-group class=\\\"p-b-24 m-b-0\\\">\\n                  <label translate>Widget titles</label>\\n                  <label title=\\\"{{ 'Translate if possible' | translate }}\\\" class=\\\"c8y-checkbox\\\">\\n                    <input\\n                      type=\\\"checkbox\\\"\\n                      name=\\\"translateWidgetTitle\\\"\\n                      [(ngModel)]=\\\"dashboard.translateWidgetTitle\\\"\\n                    />\\n                    <span></span>\\n                    <span>{{ 'Translate if possible' | translate }}</span>\\n                  </label>\\n                </c8y-form-group>\\n              </div>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"col-sm-6\\\">\\n            <c8y-widget-preview\\n              [tab]=\\\"!isNamedDashboard ? dashboard : undefined\\\"\\n              [previewClasses]=\\\"getDashboardPreviewStyle()\\\"\\n            ></c8y-widget-preview>\\n          </div>\\n        </div>\\n      </form>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"modal-footer\\\">\\n    <button\\n      class=\\\"btn btn-default\\\"\\n      type=\\\"button\\\"\\n      title=\\\"{{ 'Cancel' | translate }}\\\"\\n      (click)=\\\"close()\\\"\\n    >\\n      {{ 'Cancel' | translate }}\\n    </button>\\n    <button\\n      class=\\\"btn btn-primary\\\"\\n      type=\\\"button\\\"\\n      title=\\\"{{ 'Save' | translate }}\\\"\\n      (click)=\\\"save()\\\"\\n      [disabled]=\\\"dashboardDetailForm.form.invalid || dashboardDetailForm.form.pristine\\\"\\n    >\\n      {{ 'Save' | translate }}\\n    </button>\\n  </div>\\n</div>\\n\"\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: ngx_bootstrap_modal__WEBPACK_IMPORTED_MODULE_2__.BsModalRef\n    }, {\n      type: undefined,\n      decorators: [{\n        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Inject,\n        args: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ICON_LIST]\n      }]\n    }, {\n      type: ContextDashboardService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.NavigatorService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.Permissions\n    }, {\n      type: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__.TranslateService\n    }];\n  },\n  propDecorators: {\n    dashboardDetailForm: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewChild,\n      args: ['dashboardDetailForm', {\n        static: true\n      }]\n    }]\n  }\n});\nclass AddDashboardFactory {\n  constructor(permissions, contextDashboardService, bsModal, contextRoute) {\n    this.permissions = permissions;\n    this.contextDashboardService = contextDashboardService;\n    this.bsModal = bsModal;\n    this.contextRoute = contextRoute;\n  }\n  get(activatedRoute) {\n    var _this13 = this;\n    return _asyncToGenerator(function* () {\n      var _this13$currentContex;\n      _this13.currentContext = _this13.contextRoute.getContextData(activatedRoute);\n      if ([_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Device, _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Group].includes((_this13$currentContex = _this13.currentContext) === null || _this13$currentContex === void 0 ? void 0 : _this13$currentContex.context) && (yield _this13.hasPermission(_this13.currentContext.contextData))) {\n        return [{\n          component: AddDashboardComponent,\n          priority: -Infinity\n        }];\n      }\n      return [];\n    })();\n  }\n  addDashboard() {\n    var _this14 = this;\n    return _asyncToGenerator(function* () {\n      let initialState;\n      if (_this14.currentContext.context === _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Device) {\n        initialState = {\n          deviceType: _this14.currentContext.contextData.type\n        };\n      }\n      const modal = _this14.bsModal.show(DashboardDetailComponent, {\n        class: 'modal-lg',\n        ariaDescribedby: 'modal-body',\n        ariaLabelledBy: 'modal-title',\n        initialState,\n        ignoreBackdropClick: true\n      }).content;\n      try {\n        const dashboardCfg = yield modal.result;\n        const dashboardMO = yield _this14.contextDashboardService.create(dashboardCfg, _this14.currentContext);\n        yield _this14.contextDashboardService.navigateToDashboard(dashboardMO);\n        modal.close();\n      } catch (ex) {\n        // intended empty\n      }\n    })();\n  }\n  hasPermission(context) {\n    var _this15 = this;\n    return _asyncToGenerator(function* () {\n      if (context !== null && context !== void 0 && context.id) {\n        return yield _this15.permissions.canEdit(['ROLE_INVENTORY_ADMIN', 'ROLE_INVENTORY_CREATE'], context);\n      }\n      return _this15.permissions.hasAnyRole(['ROLE_INVENTORY_ADMIN', 'ROLE_INVENTORY_CREATE']);\n    })();\n  }\n}\nAddDashboardFactory.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: AddDashboardFactory,\n  deps: [{\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.Permissions\n  }, {\n    token: ContextDashboardService\n  }, {\n    token: ngx_bootstrap_modal__WEBPACK_IMPORTED_MODULE_2__.BsModalService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ContextRouteService\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Injectable\n});\nAddDashboardFactory.prov = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareInjectable\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: AddDashboardFactory,\n  providedIn: 'root'\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: AddDashboardFactory,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.Permissions\n    }, {\n      type: ContextDashboardService\n    }, {\n      type: ngx_bootstrap_modal__WEBPACK_IMPORTED_MODULE_2__.BsModalService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ContextRouteService\n    }];\n  }\n});\nclass AddDashboardComponent {\n  constructor(addDashboardFactory) {\n    this.addDashboardFactory = addDashboardFactory;\n  }\n  addDashboard() {\n    this.addDashboardFactory.addDashboard();\n  }\n}\nAddDashboardComponent.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: AddDashboardComponent,\n  deps: [{\n    token: AddDashboardFactory\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Component\n});\nAddDashboardComponent.cmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareComponent\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  type: AddDashboardComponent,\n  selector: \"li[c8y-add-dashboard]\",\n  host: {\n    classAttribute: \"d-flex a-i-stretch\"\n  },\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  template: \"<button\\n  class=\\\"btn btn-dot p-l-sm-8 p-r-sm-8 p-l-xs-16 p-r-xs-16\\\"\\n  [attr.aria-label]=\\\"'Add dashboard' | translate\\\"\\n  tooltip=\\\"{{ 'Add dashboard' | translate }}\\\"\\n  placement=\\\"right\\\"\\n  container=\\\"body\\\"\\n  type=\\\"button\\\"\\n  [delay]=\\\"500\\\"\\n  (click)=\\\"addDashboard()\\\"\\n>\\n  <i\\n    class=\\\"icon-20 m-l-4 m-r-4\\\"\\n    c8yIcon=\\\"plus-circle\\\"\\n  ></i>\\n</button>\\n<div class=\\\"p-r-sm-32\\\"></div>\\n\",\n  dependencies: [{\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.IconDirective,\n    selector: \"[c8yIcon]\",\n    inputs: [\"c8yIcon\"]\n  }, {\n    kind: \"directive\",\n    type: ngx_bootstrap_tooltip__WEBPACK_IMPORTED_MODULE_13__.TooltipDirective,\n    selector: \"[tooltip], [tooltipHtml]\",\n    inputs: [\"adaptivePosition\", \"tooltip\", \"placement\", \"triggers\", \"container\", \"containerClass\", \"boundariesElement\", \"isOpen\", \"isDisabled\", \"delay\", \"tooltipHtml\", \"tooltipPlacement\", \"tooltipIsOpen\", \"tooltipEnable\", \"tooltipAppendToBody\", \"tooltipAnimation\", \"tooltipClass\", \"tooltipContext\", \"tooltipPopupDelay\", \"tooltipFadeDuration\", \"tooltipTrigger\"],\n    outputs: [\"tooltipChange\", \"onShown\", \"onHidden\", \"tooltipStateChanged\"],\n    exportAs: [\"bs-tooltip\"]\n  }, {\n    kind: \"pipe\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.C8yTranslatePipe,\n    name: \"translate\"\n  }]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: AddDashboardComponent,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,\n    args: [{\n      selector: 'li[c8y-add-dashboard]',\n      host: {\n        class: 'd-flex a-i-stretch'\n      },\n      template: \"<button\\n  class=\\\"btn btn-dot p-l-sm-8 p-r-sm-8 p-l-xs-16 p-r-xs-16\\\"\\n  [attr.aria-label]=\\\"'Add dashboard' | translate\\\"\\n  tooltip=\\\"{{ 'Add dashboard' | translate }}\\\"\\n  placement=\\\"right\\\"\\n  container=\\\"body\\\"\\n  type=\\\"button\\\"\\n  [delay]=\\\"500\\\"\\n  (click)=\\\"addDashboard()\\\"\\n>\\n  <i\\n    class=\\\"icon-20 m-l-4 m-r-4\\\"\\n    c8yIcon=\\\"plus-circle\\\"\\n  ></i>\\n</button>\\n<div class=\\\"p-r-sm-32\\\"></div>\\n\"\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: AddDashboardFactory\n    }];\n  }\n});\n\n/**\n * A hook to define the default widgets of the home dashboard in the cockpit app.\n */\nconst COCKPIT_HOME_DASHBOARD_CONFIG = new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken('CockpitHomeDashboardConfig');\n/**\n * An array of widgets that is per default placed on the home dashboard of the cockpit app.\n */\nconst DEFAULT_COCKPIT_HOME_WIDGETS = [{\n  name: 'cockpit.welcome.widget',\n  title: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Welcome to Cockpit'),\n  _x: 0,\n  _y: 0,\n  _height: 5,\n  _width: 12,\n  classes: {\n    'panel-title-hidden': true\n  }\n}, {\n  name: 'Asset Alarms',\n  title: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Active, critical alarms'),\n  _x: 0,\n  _y: 5,\n  _height: 4,\n  _width: 6\n}, {\n  name: 'Recent Alarms',\n  title: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Recent alarms'),\n  _x: 0,\n  _y: 9,\n  _height: 4,\n  _width: 6\n}, {\n  name: 'Map',\n  title: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Map'),\n  _x: 6,\n  _y: 5,\n  _height: 8,\n  _width: 6\n}];\nclass WidgetService {\n  constructor(dynamicComponentService, translateService, moduleConfig) {\n    this.dynamicComponentService = dynamicComponentService;\n    this.translateService = translateService;\n    this.moduleConfig = moduleConfig;\n    this.dynamicComponentService.items$.subscribe(widgets => {\n      this.widgets = widgets;\n    });\n  }\n  getWidgetDefinition(componentId) {\n    var _this16 = this;\n    return _asyncToGenerator(function* () {\n      return _this16.dynamicComponentService.getById(componentId);\n    })();\n  }\n  getWidgetDefinitions() {\n    const translatedComponents = this.widgets.map(cmp => ({\n      ...cmp,\n      label: this.translateService.instant(cmp.label)\n    }));\n    // cloneDeep and injector lead to a performance issue. We removing the injectors here,\n    // as they are not needed, to avoid use of a lot of CPU for cloning.\n    const translatedComponentsWithoutInjector = translatedComponents.map(cmp => (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.omit)(cmp, 'injector'));\n    return (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.cloneDeep)((0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.sortBy)(translatedComponentsWithoutInjector, 'label').filter(this.moduleConfig.widgetFilter));\n  }\n  mapLegacy(widget) {\n    var _this17 = this;\n    return _asyncToGenerator(function* () {\n      const cmp = yield _this17.getWidgetDefinition(widget.componentId || widget.name);\n      widget = _this17.mapDisplaySettings(widget, cmp);\n      if ((0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.get)(cmp, 'data.settings.upgrade')) {\n        widget.widgetComponent = cmp.data.settings.widgetComponent;\n        widget.configComponent = cmp.data.settings.configComponent;\n        widget.templateUrl = cmp.data.settings.templateUrl;\n        widget.configTemplateUrl = cmp.data.settings.configTemplateUrl;\n        widget.transformConfigWithContext = cmp.data.settings.componentTransformConfigWithContext || cmp.data.settings.transformConfigWithContext || widget.transformConfigWithContext;\n      } else {\n        delete widget.templateUrl;\n        delete widget.configTemplateUrl;\n      }\n      return widget;\n    })();\n  }\n  mapDisplaySettings(widget, cmp) {\n    var _cmp$data;\n    if (cmp !== null && cmp !== void 0 && (_cmp$data = cmp.data) !== null && _cmp$data !== void 0 && _cmp$data.displaySettings) {\n      widget.config = {\n        displaySettings: cmp.data.displaySettings,\n        ...(widget.config || {})\n      };\n    }\n    return widget;\n  }\n}\nWidgetService.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: WidgetService,\n  deps: [{\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.DynamicComponentService\n  }, {\n    token: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__.TranslateService\n  }, {\n    token: CONTEXT_DASHBOARD_CONFIG,\n    optional: true\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Injectable\n});\nWidgetService.prov = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareInjectable\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: WidgetService,\n  providedIn: 'root'\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: WidgetService,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.DynamicComponentService\n    }, {\n      type: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__.TranslateService\n    }, {\n      type: undefined,\n      decorators: [{\n        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Optional\n      }, {\n        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Inject,\n        args: [CONTEXT_DASHBOARD_CONFIG]\n      }]\n    }];\n  }\n});\nclass WidgetConfigComponent {\n  constructor(widgetService, modal, inventory, contextDashboardService) {\n    this.widgetService = widgetService;\n    this.modal = modal;\n    this.inventory = inventory;\n    this.contextDashboardService = contextDashboardService;\n    this.mode = 'select';\n    this.searchChange$ = new rxjs__WEBPACK_IMPORTED_MODULE_7__.Subject();\n    this.searchTerm = '';\n    this.styling = {\n      headerClass: 'panel-title-regular',\n      contentClass: 'panel-content-light'\n    };\n    this.defaultStyling = {\n      headerClass: 'panel-title-regular',\n      contentClass: 'panel-content-light'\n    };\n    this.possibleStyling = {\n      WIDGET_HEADER_CLASSES,\n      WIDGET_CONTENT_CLASSES\n    };\n    this.isUpgrade = false;\n    this.result = new Promise((resolve, reject) => {\n      this._save = resolve;\n      this._cancel = reject;\n    });\n  }\n  get isEdit() {\n    return !!this.current;\n  }\n  get isDeviceTypeDashboard() {\n    var _this$mo$c8y_Dashboar, _this$mo$c8y_Dashboar2;\n    return !!((_this$mo$c8y_Dashboar = this.mo.c8y_Dashboard) !== null && _this$mo$c8y_Dashboar !== void 0 && _this$mo$c8y_Dashboar.deviceType) && !!((_this$mo$c8y_Dashboar2 = this.mo.c8y_Dashboard) !== null && _this$mo$c8y_Dashboar2 !== void 0 && _this$mo$c8y_Dashboar2.deviceTypeValue);\n  }\n  ngAfterContentInit() {\n    var _this18 = this;\n    return _asyncToGenerator(function* () {\n      var _this18$widgetConfig;\n      _this18.components = _this18.widgetService.getWidgetDefinitions();\n      if (_this18.selected) {\n        _this18.current = (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.clone)(_this18.selected);\n        _this18.select(_this18.selected, _this18.isEdit ? 'config' : 'select');\n      }\n      _this18.searchSub = _this18.searchChange$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.switchMap)(event => (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.iif)(() => event.which !== 13, (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.timer)(200), (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.timer)(10)))).subscribe(() => {\n        _this18.search();\n      });\n      _this18.setStylings();\n      if ((_this18$widgetConfig = _this18.widgetConfig) !== null && _this18$widgetConfig !== void 0 && _this18$widgetConfig.device) {\n        const {\n          data\n        } = yield _this18.inventory.detail(_this18.widgetConfig.device.id);\n        _this18.selectedDevice = data;\n      }\n    })();\n  }\n  checkIfDeviceRequired() {\n    return !this.widgetConfig || !this.widgetConfig.settings.deviceTargetNotRequired && !this.widgetConfig.device && !this.widgetConfig.settings.noDeviceTarget;\n  }\n  selectionChanged(selection) {\n    var _selection$change;\n    this.widgetConfig.device = selection === null || selection === void 0 ? void 0 : (_selection$change = selection.change) === null || _selection$change === void 0 ? void 0 : _selection$change.item;\n    this.dynamicComponent.emitConfigChange({\n      device: this.widgetConfig.device\n    });\n  }\n  save() {\n    var _this19 = this;\n    return _asyncToGenerator(function* () {\n      var _this19$selected, _this19$selected$reso;\n      const hookSuccess = yield _this19.dynamicComponent.callLifeCycleHooks().toPromise();\n      if (!hookSuccess) {\n        return;\n      }\n      const {\n        _x,\n        _y,\n        _width,\n        _height\n      } = _this19.selected.data;\n      if (_this19.widgetConfig && _this19.widgetConfig.device &&\n      // serializing will be handled by resolver\n      !((_this19$selected = _this19.selected) !== null && _this19$selected !== void 0 && (_this19$selected$reso = _this19$selected.resolve) !== null && _this19$selected$reso !== void 0 && _this19$selected$reso.device)) {\n        const {\n          id,\n          name\n        } = _this19.widgetConfig.device;\n        _this19.widgetConfig.device = {\n          id,\n          name\n        };\n      }\n      const widget = {\n        _x,\n        _y,\n        _width,\n        _height,\n        config: (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.omit)(_this19.widgetConfig, ['settings', 'displaySettings']),\n        title: _this19.selected.data.title,\n        componentId: _this19.selected.id,\n        id: _this19.isEdit ? _this19.current.data.id : String(Math.random()).substr(2),\n        classes: _this19.getStyle(),\n        ...(!_this19.isEdit ? _this19.widgetConfig.settings.widgetDefaults : {})\n      };\n      _this19._save(widget);\n    })();\n  }\n  select(cmp, mode = 'config') {\n    cmp.data = cmp.data || {};\n    this.selected = cmp;\n    this.isUpgrade = !!(0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.get)(cmp, 'data.settings.upgrade');\n    this.contextDashboardService.formDisabled = this.isUpgrade;\n    if (this.isEdit) {\n      const {\n        _x,\n        _y,\n        _width,\n        _height,\n        classes,\n        title\n      } = this.current.data;\n      this.selected.data = {\n        ...this.selected.data,\n        _x,\n        _y,\n        _width,\n        _height,\n        classes,\n        title\n      };\n    }\n    this.widgetConfig = (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.cloneDeep)(this.composeWidgetConfig(this.selected, this.context));\n    this.selected.data.title = this.selected.data.title || cmp.label;\n    this.componentLabel = cmp.label;\n    this.mode = mode;\n  }\n  search() {\n    if (this.searchTerm.length > 0) {\n      this.searchResult = this.components.filter(cmp => new RegExp((0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.escapeRegExp)(this.searchTerm.trim()), 'i').test(cmp.label));\n    } else {\n      this.resetSearch();\n    }\n  }\n  resetSearch() {\n    this.searchTerm = '';\n    this.searchResult = undefined;\n  }\n  changeMode(mode) {\n    this.mode = mode;\n  }\n  close() {\n    this._cancel();\n    this.modal.hide();\n  }\n  getStyle(isPreview = false) {\n    const cssClasses = {};\n    if (isPreview || !this.isDashboardDefaultStyle(this.styling.headerClass)) {\n      cssClasses[this.styling.headerClass] = true;\n    }\n    if (isPreview || !this.isDashboardDefaultStyle(this.styling.contentClass)) {\n      cssClasses[this.styling.contentClass] = true;\n    }\n    if (isPreview) {\n      cssClasses[`dashboard-theme-${this.defaultStyling.contentClass.split('-').pop()}`] = true;\n    }\n    return cssClasses;\n  }\n  ngOnDestroy() {\n    this.contextDashboardService.formDisabled = true;\n    if (this.searchSub) {\n      this.searchSub.unsubscribe();\n    }\n  }\n  hasConfig() {\n    var _this$widgetConfig$se, _this$dynamicComponen;\n    if ((_this$widgetConfig$se = this.widgetConfig.settings) !== null && _this$widgetConfig$se !== void 0 && _this$widgetConfig$se.upgrade) {\n      var _this$widgetConfig$se2, _this$widgetConfig$se3;\n      return ((_this$widgetConfig$se2 = this.widgetConfig.settings) === null || _this$widgetConfig$se2 === void 0 ? void 0 : _this$widgetConfig$se2.configComponent) || ((_this$widgetConfig$se3 = this.widgetConfig.settings) === null || _this$widgetConfig$se3 === void 0 ? void 0 : _this$widgetConfig$se3.configTemplateUrl);\n    }\n    return !((_this$dynamicComponen = this.dynamicComponent) !== null && _this$dynamicComponen !== void 0 && _this$dynamicComponen.error);\n  }\n  setStylings() {\n    var _this$mo$c8y_Dashboar3, _this$mo$c8y_Dashboar4;\n    const dashboardClasses = ((_this$mo$c8y_Dashboar3 = this.mo.c8y_Dashboard) === null || _this$mo$c8y_Dashboar3 === void 0 ? void 0 : _this$mo$c8y_Dashboar3.classes) && Object.keys(this.mo.c8y_Dashboard.classes) || [];\n    const dashboardWidgetClasses = ((_this$mo$c8y_Dashboar4 = this.mo.c8y_Dashboard) === null || _this$mo$c8y_Dashboar4 === void 0 ? void 0 : _this$mo$c8y_Dashboar4.widgetClasses) && Object.keys(this.mo.c8y_Dashboard.widgetClasses) || [];\n    const widgetClasses = this.isEdit ? Object.keys(this.current.data.classes) : [];\n    this.styling = this.setDefaultStyle([...dashboardClasses, ...dashboardWidgetClasses, ...widgetClasses]);\n    this.defaultStyling = this.setDefaultStyle([...dashboardClasses, ...dashboardWidgetClasses]);\n  }\n  isDashboardDefaultStyle(className) {\n    const allClasses = {\n      ...this.mo.c8y_Dashboard.classes,\n      ...this.mo.c8y_Dashboard.widgetClasses\n    };\n    const styles = Object.keys(allClasses).map(cssClass => ({\n      class: cssClass\n    }));\n    const style = this.contextDashboardService.getStyling(styles, className.split('-').pop(), undefined);\n    return !!style;\n  }\n  setDefaultStyle(setClasses) {\n    let contentClass = this.styling.contentClass;\n    let headerClass = this.styling.headerClass;\n    const styles = this.contextDashboardService.getFilteredDashboardStyles(setClasses).map(c => c.split('-').pop());\n    styles.forEach(styleName => {\n      contentClass = this.contextDashboardService.getStyling(WIDGET_CONTENT_CLASSES, styleName, contentClass);\n      headerClass = this.contextDashboardService.getStyling(WIDGET_HEADER_CLASSES, styleName, headerClass);\n    });\n    return {\n      headerClass,\n      contentClass\n    };\n  }\n  composeWidgetConfig(selectedComponent, context = {}) {\n    const setting = {\n      settings: {\n        ...selectedComponent.data.settings,\n        ...(0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.get)(selectedComponent.data.settings, 'ng1.options'),\n        ...(0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.get)(selectedComponent.data, 'ng1.options'),\n        context,\n        dashboardMo: this.mo.c8y_Dashboard\n      },\n      ...selectedComponent.data.config\n    };\n    return this.applyTargetIfDeviceDashboard(setting);\n  }\n  applyTargetIfDeviceDashboard(widgetConfig) {\n    const isDeviceType = this.contextDashboardService.isDeviceType(this.mo);\n    if (isDeviceType) {\n      widgetConfig.settings.hideTarget = isDeviceType;\n      const noDeviceTarget = widgetConfig.settings.ng1 ? widgetConfig.settings.ng1.options.noDeviceTarget : widgetConfig.settings.noDeviceTarget;\n      if (!noDeviceTarget) {\n        widgetConfig.device = {\n          id: this.context.id,\n          name: this.context.name\n        };\n      }\n    }\n    return widgetConfig;\n  }\n}\nWidgetConfigComponent.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: WidgetConfigComponent,\n  deps: [{\n    token: WidgetService\n  }, {\n    token: ngx_bootstrap_modal__WEBPACK_IMPORTED_MODULE_2__.BsModalRef\n  }, {\n    token: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n  }, {\n    token: ContextDashboardService\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Component\n});\nWidgetConfigComponent.cmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareComponent\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  type: WidgetConfigComponent,\n  selector: \"c8y-widget-config\",\n  viewQueries: [{\n    propertyName: \"dynamicComponent\",\n    first: true,\n    predicate: [\"config\"],\n    descendants: true\n  }],\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  template: \"<div class=\\\"modal-header separator\\\">\\n  <div\\n    class=\\\"h3\\\"\\n    title=\\\"{{ 'Add widget' | translate }}\\\"\\n    id=\\\"modal-title\\\"\\n    *ngIf=\\\"!current\\\"\\n    translate\\n  >\\n    Add widget\\n  </div>\\n  <div\\n    class=\\\"h3\\\"\\n    title=\\\"{{ 'Edit widget' | translate }}\\\"\\n    id=\\\"modal-title\\\"\\n    *ngIf=\\\"current\\\"\\n    translate\\n  >\\n    Edit widget\\n  </div>\\n</div>\\n<form\\n  name=\\\"form\\\"\\n  #configForm=\\\"ngForm\\\"\\n>\\n  <div\\n    class=\\\"c8y-modal-tabs\\\"\\n    id=\\\"modal-body\\\"\\n  >\\n    <div class=\\\"tabContainer\\\">\\n      <ul class=\\\"nav nav-tabs nav-tabsc8y p-l-24\\\">\\n        <li [class.active]=\\\"mode === 'select'\\\">\\n          <button\\n            class=\\\"btn\\\"\\n            title=\\\"{{ 'Select widget' | translate }}\\\"\\n            type=\\\"button\\\"\\n            (click)=\\\"changeMode('select'); (false)\\\"\\n          >\\n            <i c8yIcon=\\\"th-large\\\"></i>\\n            <span translate>Select widget</span>\\n          </button>\\n        </li>\\n        <li [class.active]=\\\"mode === 'config'\\\">\\n          <button\\n            class=\\\"btn\\\"\\n            title=\\\"{{ 'Configuration' | translate }}\\\"\\n            type=\\\"button\\\"\\n            [disabled]=\\\"!selected\\\"\\n            (click)=\\\"changeMode('config'); (false)\\\"\\n          >\\n            <i c8yIcon=\\\"cog\\\"></i>\\n            <span translate>Configuration</span>\\n          </button>\\n        </li>\\n        <li [class.active]=\\\"mode === 'style'\\\">\\n          <button\\n            class=\\\"btn\\\"\\n            title=\\\"{{ 'Appearance' | translate }}\\\"\\n            type=\\\"button\\\"\\n            [disabled]=\\\"!selected\\\"\\n            (click)=\\\"changeMode('style'); (false)\\\"\\n          >\\n            <i c8yIcon=\\\"paint-brush\\\"></i>\\n            <span translate>Appearance</span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"modal-inner-scroll modal-inner-scroll--fixed\\\">\\n    <div\\n      class=\\\"bg-level-0 p-l-24 p-r-24 p-t-8 p-b-8 sticky-header-top-0\\\"\\n      style=\\\"z-index: 2\\\"\\n      *ngIf=\\\"mode === 'select'\\\"\\n    >\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-sm-6\\\">\\n          <div class=\\\"input-group input-group-search\\\">\\n            <input\\n              class=\\\"form-control\\\"\\n              [attr.aria-label]=\\\"'Search' | translate\\\"\\n              placeholder=\\\"{{ 'Search\\u2026' | translate }}\\\"\\n              type=\\\"text\\\"\\n              data-cy=\\\"widget-config--Search\\\"\\n              [(ngModel)]=\\\"searchTerm\\\"\\n              [ngModelOptions]=\\\"{ standalone: true }\\\"\\n              (keydown)=\\\"searchChange$.next($event)\\\"\\n            />\\n            <span class=\\\"input-group-btn\\\">\\n              <button\\n                class=\\\"btn btn-dot\\\"\\n                title=\\\"{{ 'Search' | translate }}\\\"\\n                type=\\\"button\\\"\\n                (click)=\\\"resetSearch()\\\"\\n              >\\n                <i [c8yIcon]=\\\"searchTerm.length === 0 ? 'search' : 'close'\\\"></i>\\n              </button>\\n            </span>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n    <div\\n      class=\\\"modal-body bg-level-2\\\"\\n      *ngIf=\\\"mode === 'select'\\\"\\n    >\\n      <div class=\\\"card-group card-select m-b-0\\\">\\n        <div\\n          class=\\\"col-md-3 col-sm-4 col-xs-6\\\"\\n          title=\\\"{{ cmp.description | translate }}\\\"\\n          *ngFor=\\\"let cmp of searchResult || components\\\"\\n        >\\n          <button\\n            class=\\\"btn-clean d-col card p-8\\\"\\n            [class.active]=\\\"selected === cmp\\\"\\n            type=\\\"button\\\"\\n            (click)=\\\"select(cmp)\\\"\\n          >\\n            <div\\n              class=\\\"text-center p-8 m-b-8 d-col flex-center flex-grow bg-level-2\\\"\\n              role=\\\"presentation\\\"\\n            >\\n              <ng-container *ngIf=\\\"!cmp.previewImage; else previewImage\\\">\\n                <div class=\\\"h1\\\"><i c8yIcon=\\\"file-image-o\\\"></i></div>\\n                <small translate>Preview not available</small>\\n              </ng-container>\\n              <ng-template #previewImage>\\n                <img\\n                  class=\\\"widget-thumbnail\\\"\\n                  alt\\n                  [src]=\\\"cmp.previewImage\\\"\\n                />\\n              </ng-template>\\n            </div>\\n            <p class=\\\"card-title text-truncate\\\">\\n              <c8y-highlight\\n                text=\\\"{{ cmp.label | translate }}\\\"\\n                [pattern]=\\\"searchTerm\\\"\\n              ></c8y-highlight>\\n            </p>\\n          </button>\\n        </div>\\n\\n        <div\\n          class=\\\"c8y-empty-state text-center\\\"\\n          *ngIf=\\\"searchResult && searchResult.length === 0\\\"\\n        >\\n          <div\\n            class=\\\"h1\\\"\\n            c8yIcon=\\\"search\\\"\\n          ></div>\\n          <h3 translate>No widgets found.</h3>\\n          <div class=\\\"d-flex\\\">\\n            <p\\n              class=\\\"m-r-8\\\"\\n              translate\\n            >\\n              Rephrase your search term.\\n            </p>\\n            <button\\n              class=\\\"btn btn-primary\\\"\\n              title=\\\"{{ 'Reset search' | translate }}\\\"\\n              type=\\\"button\\\"\\n              (click)=\\\"resetSearch()\\\"\\n            >\\n              {{ 'Reset search' | translate }}\\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- The following is intentional set to hidden to allow the ViewChild ref in the controller -->\\n    <div\\n      class=\\\"d-flex d-col fit-h\\\"\\n      *ngIf=\\\"selected\\\"\\n      [ngClass]=\\\"{ hidden: mode !== 'config' }\\\"\\n    >\\n      <div class=\\\"p-t-16 flex-no-shrink separator-bottom p-b-16\\\">\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-sm-4\\\">\\n            <div class=\\\"p-l-24\\\">\\n              <div class=\\\"text-left text-medium h4\\\">\\n                {{ selected.label | translate }}\\n              </div>\\n              <p>\\n                {{ selected.description | translate }}\\n              </p>\\n            </div>\\n          </div>\\n          <div class=\\\"col-sm-8\\\">\\n            <div class=\\\"p-r-24\\\">\\n              <c8y-form-group>\\n                <label\\n                  for=\\\"widgetTitle\\\"\\n                  translate\\n                >\\n                  Title\\n                </label>\\n                <input\\n                  class=\\\"form-control\\\"\\n                  id=\\\"widgetTitle\\\"\\n                  placeholder=\\\"{{ 'e.g.' | translate }} {{ componentLabel | translate }}\\\"\\n                  name=\\\"title\\\"\\n                  type=\\\"text\\\"\\n                  required\\n                  [(ngModel)]=\\\"selected.data.title\\\"\\n                />\\n              </c8y-form-group>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n      <div\\n        class=\\\"row flex-grow\\\"\\n        [ngClass]=\\\"{ 'd-flex': widgetConfig.options || hasConfig() }\\\"\\n      >\\n        <div\\n          class=\\\"a-s-stretch\\\"\\n          *ngIf=\\\"!widgetConfig.settings?.noDeviceTarget\\\"\\n          [ngClass]=\\\"{\\n            'bg-level-1 col-sm-4 p-r-0': hasConfig(),\\n            'bg-level-0 col-sm-12': !hasConfig()\\n          }\\\"\\n        >\\n          <div\\n            class=\\\"fit-h bg-inherit p-l-16\\\"\\n            [ngClass]=\\\"{ 'p-r-24': !hasConfig() }\\\"\\n          >\\n            <div class=\\\"p-relative bg-inherit\\\">\\n              <c8y-asset-selector-miller\\n                class=\\\"d-block bg-inherit p-relative\\\"\\n                style=\\\"height: calc(100vh - 422px)\\\"\\n                (onSelected)=\\\"selectionChanged($event)\\\"\\n                (onClearSelected)=\\\"selectionChanged()\\\"\\n                [config]=\\\"{\\n                  view: 'miller',\\n                  groupsSelectable: this.widgetConfig.settings?.groupsSelectable,\\n                  showChildDevices: true,\\n                  columnHeaders: true,\\n                  showUnassignedDevices: true,\\n                  search: !this.widgetConfig.settings.context?.additionParents,\\n                  showFilter: true,\\n                  singleColumn: !!this.hasConfig()\\n                }\\\"\\n                [asset]=\\\"widgetConfig.settings?.context\\\"\\n                [selectedDevice]=\\\"selectedDevice\\\"\\n              ></c8y-asset-selector-miller>\\n            </div>\\n          </div>\\n        </div>\\n        <div\\n          [ngClass]=\\\"{\\n            'col-sm-8': !widgetConfig.settings?.noDeviceTarget,\\n            'col-sm-12': widgetConfig.settings?.noDeviceTarget,\\n            'sr-only': !hasConfig()\\n          }\\\"\\n        >\\n          <c8y-dynamic-component\\n            class=\\\"d-block\\\"\\n            style=\\\"height: {{ hasConfig() ? 'calc(100vh - 422px)' : '0' }}\\\"\\n            [ngClass]=\\\"{ 'inner-scroll p-r-24': !widgetConfig.settings?.noDeviceTarget }\\\"\\n            [componentId]=\\\"selected.id\\\"\\n            mode=\\\"config\\\"\\n            [config]=\\\"widgetConfig\\\"\\n            [notFoundError]=\\\"false\\\"\\n            #config\\n          ></c8y-dynamic-component>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div\\n      class=\\\"modal-body p-t-0\\\"\\n      style=\\\"height: calc(100vh - 310px)\\\"\\n      *ngIf=\\\"mode === 'style'\\\"\\n    >\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-xs-6\\\">\\n          <c8y-appearance-settings\\n            [(themeClass)]=\\\"styling.contentClass\\\"\\n            [(headerClass)]=\\\"styling.headerClass\\\"\\n            [possibleStylingTheme]=\\\"possibleStyling.WIDGET_CONTENT_CLASSES\\\"\\n            [possibleStylingHeader]=\\\"possibleStyling.WIDGET_HEADER_CLASSES\\\"\\n            [defaultThemeClass]=\\\"defaultStyling.contentClass\\\"\\n            [defaultHeaderClass]=\\\"defaultStyling.headerClass\\\"\\n          ></c8y-appearance-settings>\\n        </div>\\n        <div class=\\\"col-xs-6 sticky-header-top-0\\\">\\n          <c8y-widget-preview\\n            style=\\\"height: calc(100vh - 382px)\\\"\\n            [previewClasses]=\\\"getStyle(true)\\\"\\n          ></c8y-widget-preview>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"modal-footer\\\">\\n    <button\\n      class=\\\"btn btn-default\\\"\\n      title=\\\"{{ 'Cancel' | translate }}\\\"\\n      type=\\\"button\\\"\\n      (click)=\\\"close()\\\"\\n    >\\n      {{ 'Cancel' | translate }}\\n    </button>\\n    <button\\n      class=\\\"btn btn-primary\\\"\\n      title=\\\"{{ 'Save' | translate }}\\\"\\n      type=\\\"submit\\\"\\n      (click)=\\\"save()\\\"\\n      [disabled]=\\\"\\n        contextDashboardService.formDisabled || configForm.invalid || checkIfDeviceRequired()\\n      \\\"\\n      c8yProductExperience\\n      [actionName]=\\\"current ? 'editWidget' : 'createWidget'\\\"\\n      [actionData]=\\\"{ widgetName: selected && selected.id }\\\"\\n    >\\n      {{ 'Save' | translate }}\\n    </button>\\n  </div>\\n</form>\\n\",\n  dependencies: [{\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.IconDirective,\n    selector: \"[c8yIcon]\",\n    inputs: [\"c8yIcon\"]\n  }, {\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.C8yTranslateDirective,\n    selector: \"[translate],[ngx-translate]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgClass,\n    selector: \"[ngClass]\",\n    inputs: [\"class\", \"ngClass\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgForOf,\n    selector: \"[ngFor][ngForOf]\",\n    inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgIf,\n    selector: \"[ngIf]\",\n    inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"]\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.HighlightComponent,\n    selector: \"c8y-highlight\",\n    inputs: [\"pattern\", \"text\", \"elementClass\", \"shouldTrimPattern\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__[\"NgNoValidate\"],\n    selector: \"form:not([ngNoForm]):not([ngNativeValidate])\"\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.DefaultValueAccessor,\n    selector: \"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgControlStatus,\n    selector: \"[formControlName],[ngModel],[formControl]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgControlStatusGroup,\n    selector: \"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.RequiredValidator,\n    selector: \":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]\",\n    inputs: [\"required\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgModel,\n    selector: \"[ngModel]:not([formControlName]):not([formControl])\",\n    inputs: [\"name\", \"disabled\", \"ngModel\", \"ngModelOptions\"],\n    outputs: [\"ngModelChange\"],\n    exportAs: [\"ngModel\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgForm,\n    selector: \"form:not([ngNoForm]):not([formGroup]),ng-form,[ngForm]\",\n    inputs: [\"ngFormOptions\"],\n    outputs: [\"ngSubmit\"],\n    exportAs: [\"ngForm\"]\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.FormGroupComponent,\n    selector: \"c8y-form-group\",\n    inputs: [\"hasError\", \"hasWarning\", \"hasSuccess\", \"novalidation\", \"status\"]\n  }, {\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.RequiredInputPlaceholderDirective,\n    selector: \"input[required], input[formControlName]\"\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.DynamicComponentComponent,\n    selector: \"c8y-dynamic-component\",\n    inputs: [\"componentId\", \"config\", \"mode\", \"notFoundError\", \"executeResolvers\"],\n    outputs: [\"updateWidgetClasses\"]\n  }, {\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ProductExperienceDirective,\n    selector: \"[c8yProductExperience]\",\n    inputs: [\"actionName\", \"actionData\", \"inherit\", \"suppressDataOverriding\"]\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components_assets_navigator__WEBPACK_IMPORTED_MODULE_14__.MillerViewComponent,\n    selector: \"c8y-asset-selector-miller\",\n    inputs: [\"config\", \"asset\", \"selectedDevice\", \"rootNode\", \"container\"],\n    outputs: [\"onSelected\", \"onClearSelected\"]\n  }, {\n    kind: \"component\",\n    type: AppearanceSettingsComponent,\n    selector: \"c8y-appearance-settings\",\n    inputs: [\"themeClass\", \"headerClass\", \"defaultThemeClass\", \"defaultHeaderClass\", \"possibleStylingTheme\", \"possibleStylingHeader\"],\n    outputs: [\"themeClassChange\", \"headerClassChange\"]\n  }, {\n    kind: \"component\",\n    type: WidgetPreviewComponent,\n    selector: \"c8y-widget-preview\",\n    inputs: [\"previewClasses\", \"tab\"]\n  }, {\n    kind: \"pipe\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.C8yTranslatePipe,\n    name: \"translate\"\n  }]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: WidgetConfigComponent,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,\n    args: [{\n      selector: 'c8y-widget-config',\n      template: \"<div class=\\\"modal-header separator\\\">\\n  <div\\n    class=\\\"h3\\\"\\n    title=\\\"{{ 'Add widget' | translate }}\\\"\\n    id=\\\"modal-title\\\"\\n    *ngIf=\\\"!current\\\"\\n    translate\\n  >\\n    Add widget\\n  </div>\\n  <div\\n    class=\\\"h3\\\"\\n    title=\\\"{{ 'Edit widget' | translate }}\\\"\\n    id=\\\"modal-title\\\"\\n    *ngIf=\\\"current\\\"\\n    translate\\n  >\\n    Edit widget\\n  </div>\\n</div>\\n<form\\n  name=\\\"form\\\"\\n  #configForm=\\\"ngForm\\\"\\n>\\n  <div\\n    class=\\\"c8y-modal-tabs\\\"\\n    id=\\\"modal-body\\\"\\n  >\\n    <div class=\\\"tabContainer\\\">\\n      <ul class=\\\"nav nav-tabs nav-tabsc8y p-l-24\\\">\\n        <li [class.active]=\\\"mode === 'select'\\\">\\n          <button\\n            class=\\\"btn\\\"\\n            title=\\\"{{ 'Select widget' | translate }}\\\"\\n            type=\\\"button\\\"\\n            (click)=\\\"changeMode('select'); (false)\\\"\\n          >\\n            <i c8yIcon=\\\"th-large\\\"></i>\\n            <span translate>Select widget</span>\\n          </button>\\n        </li>\\n        <li [class.active]=\\\"mode === 'config'\\\">\\n          <button\\n            class=\\\"btn\\\"\\n            title=\\\"{{ 'Configuration' | translate }}\\\"\\n            type=\\\"button\\\"\\n            [disabled]=\\\"!selected\\\"\\n            (click)=\\\"changeMode('config'); (false)\\\"\\n          >\\n            <i c8yIcon=\\\"cog\\\"></i>\\n            <span translate>Configuration</span>\\n          </button>\\n        </li>\\n        <li [class.active]=\\\"mode === 'style'\\\">\\n          <button\\n            class=\\\"btn\\\"\\n            title=\\\"{{ 'Appearance' | translate }}\\\"\\n            type=\\\"button\\\"\\n            [disabled]=\\\"!selected\\\"\\n            (click)=\\\"changeMode('style'); (false)\\\"\\n          >\\n            <i c8yIcon=\\\"paint-brush\\\"></i>\\n            <span translate>Appearance</span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"modal-inner-scroll modal-inner-scroll--fixed\\\">\\n    <div\\n      class=\\\"bg-level-0 p-l-24 p-r-24 p-t-8 p-b-8 sticky-header-top-0\\\"\\n      style=\\\"z-index: 2\\\"\\n      *ngIf=\\\"mode === 'select'\\\"\\n    >\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-sm-6\\\">\\n          <div class=\\\"input-group input-group-search\\\">\\n            <input\\n              class=\\\"form-control\\\"\\n              [attr.aria-label]=\\\"'Search' | translate\\\"\\n              placeholder=\\\"{{ 'Search\\u2026' | translate }}\\\"\\n              type=\\\"text\\\"\\n              data-cy=\\\"widget-config--Search\\\"\\n              [(ngModel)]=\\\"searchTerm\\\"\\n              [ngModelOptions]=\\\"{ standalone: true }\\\"\\n              (keydown)=\\\"searchChange$.next($event)\\\"\\n            />\\n            <span class=\\\"input-group-btn\\\">\\n              <button\\n                class=\\\"btn btn-dot\\\"\\n                title=\\\"{{ 'Search' | translate }}\\\"\\n                type=\\\"button\\\"\\n                (click)=\\\"resetSearch()\\\"\\n              >\\n                <i [c8yIcon]=\\\"searchTerm.length === 0 ? 'search' : 'close'\\\"></i>\\n              </button>\\n            </span>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n    <div\\n      class=\\\"modal-body bg-level-2\\\"\\n      *ngIf=\\\"mode === 'select'\\\"\\n    >\\n      <div class=\\\"card-group card-select m-b-0\\\">\\n        <div\\n          class=\\\"col-md-3 col-sm-4 col-xs-6\\\"\\n          title=\\\"{{ cmp.description | translate }}\\\"\\n          *ngFor=\\\"let cmp of searchResult || components\\\"\\n        >\\n          <button\\n            class=\\\"btn-clean d-col card p-8\\\"\\n            [class.active]=\\\"selected === cmp\\\"\\n            type=\\\"button\\\"\\n            (click)=\\\"select(cmp)\\\"\\n          >\\n            <div\\n              class=\\\"text-center p-8 m-b-8 d-col flex-center flex-grow bg-level-2\\\"\\n              role=\\\"presentation\\\"\\n            >\\n              <ng-container *ngIf=\\\"!cmp.previewImage; else previewImage\\\">\\n                <div class=\\\"h1\\\"><i c8yIcon=\\\"file-image-o\\\"></i></div>\\n                <small translate>Preview not available</small>\\n              </ng-container>\\n              <ng-template #previewImage>\\n                <img\\n                  class=\\\"widget-thumbnail\\\"\\n                  alt\\n                  [src]=\\\"cmp.previewImage\\\"\\n                />\\n              </ng-template>\\n            </div>\\n            <p class=\\\"card-title text-truncate\\\">\\n              <c8y-highlight\\n                text=\\\"{{ cmp.label | translate }}\\\"\\n                [pattern]=\\\"searchTerm\\\"\\n              ></c8y-highlight>\\n            </p>\\n          </button>\\n        </div>\\n\\n        <div\\n          class=\\\"c8y-empty-state text-center\\\"\\n          *ngIf=\\\"searchResult && searchResult.length === 0\\\"\\n        >\\n          <div\\n            class=\\\"h1\\\"\\n            c8yIcon=\\\"search\\\"\\n          ></div>\\n          <h3 translate>No widgets found.</h3>\\n          <div class=\\\"d-flex\\\">\\n            <p\\n              class=\\\"m-r-8\\\"\\n              translate\\n            >\\n              Rephrase your search term.\\n            </p>\\n            <button\\n              class=\\\"btn btn-primary\\\"\\n              title=\\\"{{ 'Reset search' | translate }}\\\"\\n              type=\\\"button\\\"\\n              (click)=\\\"resetSearch()\\\"\\n            >\\n              {{ 'Reset search' | translate }}\\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- The following is intentional set to hidden to allow the ViewChild ref in the controller -->\\n    <div\\n      class=\\\"d-flex d-col fit-h\\\"\\n      *ngIf=\\\"selected\\\"\\n      [ngClass]=\\\"{ hidden: mode !== 'config' }\\\"\\n    >\\n      <div class=\\\"p-t-16 flex-no-shrink separator-bottom p-b-16\\\">\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-sm-4\\\">\\n            <div class=\\\"p-l-24\\\">\\n              <div class=\\\"text-left text-medium h4\\\">\\n                {{ selected.label | translate }}\\n              </div>\\n              <p>\\n                {{ selected.description | translate }}\\n              </p>\\n            </div>\\n          </div>\\n          <div class=\\\"col-sm-8\\\">\\n            <div class=\\\"p-r-24\\\">\\n              <c8y-form-group>\\n                <label\\n                  for=\\\"widgetTitle\\\"\\n                  translate\\n                >\\n                  Title\\n                </label>\\n                <input\\n                  class=\\\"form-control\\\"\\n                  id=\\\"widgetTitle\\\"\\n                  placeholder=\\\"{{ 'e.g.' | translate }} {{ componentLabel | translate }}\\\"\\n                  name=\\\"title\\\"\\n                  type=\\\"text\\\"\\n                  required\\n                  [(ngModel)]=\\\"selected.data.title\\\"\\n                />\\n              </c8y-form-group>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n      <div\\n        class=\\\"row flex-grow\\\"\\n        [ngClass]=\\\"{ 'd-flex': widgetConfig.options || hasConfig() }\\\"\\n      >\\n        <div\\n          class=\\\"a-s-stretch\\\"\\n          *ngIf=\\\"!widgetConfig.settings?.noDeviceTarget\\\"\\n          [ngClass]=\\\"{\\n            'bg-level-1 col-sm-4 p-r-0': hasConfig(),\\n            'bg-level-0 col-sm-12': !hasConfig()\\n          }\\\"\\n        >\\n          <div\\n            class=\\\"fit-h bg-inherit p-l-16\\\"\\n            [ngClass]=\\\"{ 'p-r-24': !hasConfig() }\\\"\\n          >\\n            <div class=\\\"p-relative bg-inherit\\\">\\n              <c8y-asset-selector-miller\\n                class=\\\"d-block bg-inherit p-relative\\\"\\n                style=\\\"height: calc(100vh - 422px)\\\"\\n                (onSelected)=\\\"selectionChanged($event)\\\"\\n                (onClearSelected)=\\\"selectionChanged()\\\"\\n                [config]=\\\"{\\n                  view: 'miller',\\n                  groupsSelectable: this.widgetConfig.settings?.groupsSelectable,\\n                  showChildDevices: true,\\n                  columnHeaders: true,\\n                  showUnassignedDevices: true,\\n                  search: !this.widgetConfig.settings.context?.additionParents,\\n                  showFilter: true,\\n                  singleColumn: !!this.hasConfig()\\n                }\\\"\\n                [asset]=\\\"widgetConfig.settings?.context\\\"\\n                [selectedDevice]=\\\"selectedDevice\\\"\\n              ></c8y-asset-selector-miller>\\n            </div>\\n          </div>\\n        </div>\\n        <div\\n          [ngClass]=\\\"{\\n            'col-sm-8': !widgetConfig.settings?.noDeviceTarget,\\n            'col-sm-12': widgetConfig.settings?.noDeviceTarget,\\n            'sr-only': !hasConfig()\\n          }\\\"\\n        >\\n          <c8y-dynamic-component\\n            class=\\\"d-block\\\"\\n            style=\\\"height: {{ hasConfig() ? 'calc(100vh - 422px)' : '0' }}\\\"\\n            [ngClass]=\\\"{ 'inner-scroll p-r-24': !widgetConfig.settings?.noDeviceTarget }\\\"\\n            [componentId]=\\\"selected.id\\\"\\n            mode=\\\"config\\\"\\n            [config]=\\\"widgetConfig\\\"\\n            [notFoundError]=\\\"false\\\"\\n            #config\\n          ></c8y-dynamic-component>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div\\n      class=\\\"modal-body p-t-0\\\"\\n      style=\\\"height: calc(100vh - 310px)\\\"\\n      *ngIf=\\\"mode === 'style'\\\"\\n    >\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-xs-6\\\">\\n          <c8y-appearance-settings\\n            [(themeClass)]=\\\"styling.contentClass\\\"\\n            [(headerClass)]=\\\"styling.headerClass\\\"\\n            [possibleStylingTheme]=\\\"possibleStyling.WIDGET_CONTENT_CLASSES\\\"\\n            [possibleStylingHeader]=\\\"possibleStyling.WIDGET_HEADER_CLASSES\\\"\\n            [defaultThemeClass]=\\\"defaultStyling.contentClass\\\"\\n            [defaultHeaderClass]=\\\"defaultStyling.headerClass\\\"\\n          ></c8y-appearance-settings>\\n        </div>\\n        <div class=\\\"col-xs-6 sticky-header-top-0\\\">\\n          <c8y-widget-preview\\n            style=\\\"height: calc(100vh - 382px)\\\"\\n            [previewClasses]=\\\"getStyle(true)\\\"\\n          ></c8y-widget-preview>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"modal-footer\\\">\\n    <button\\n      class=\\\"btn btn-default\\\"\\n      title=\\\"{{ 'Cancel' | translate }}\\\"\\n      type=\\\"button\\\"\\n      (click)=\\\"close()\\\"\\n    >\\n      {{ 'Cancel' | translate }}\\n    </button>\\n    <button\\n      class=\\\"btn btn-primary\\\"\\n      title=\\\"{{ 'Save' | translate }}\\\"\\n      type=\\\"submit\\\"\\n      (click)=\\\"save()\\\"\\n      [disabled]=\\\"\\n        contextDashboardService.formDisabled || configForm.invalid || checkIfDeviceRequired()\\n      \\\"\\n      c8yProductExperience\\n      [actionName]=\\\"current ? 'editWidget' : 'createWidget'\\\"\\n      [actionData]=\\\"{ widgetName: selected && selected.id }\\\"\\n    >\\n      {{ 'Save' | translate }}\\n    </button>\\n  </div>\\n</form>\\n\"\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: WidgetService\n    }, {\n      type: ngx_bootstrap_modal__WEBPACK_IMPORTED_MODULE_2__.BsModalRef\n    }, {\n      type: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n    }, {\n      type: ContextDashboardService\n    }];\n  },\n  propDecorators: {\n    dynamicComponent: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewChild,\n      args: ['config', {\n        static: false\n      }]\n    }]\n  }\n});\n\n/**\n * The context dashboard is a dashboard which resolves it data from the current context (device or group)\n * it is displayed on. It usually uses the route.data for it, but you can pass\n * a different managedObject to the [mo] input parameter to change that behavior.\n */\nclass ContextDashboardComponent {\n  constructor(route, router, contextDashboardService, alert, renderer, moduleConfig, widgetService, bsModal, inventory, gainsightService, actionBarService, translateService, modal) {\n    this.route = route;\n    this.router = router;\n    this.contextDashboardService = contextDashboardService;\n    this.alert = alert;\n    this.renderer = renderer;\n    this.moduleConfig = moduleConfig;\n    this.widgetService = widgetService;\n    this.bsModal = bsModal;\n    this.inventory = inventory;\n    this.gainsightService = gainsightService;\n    this.actionBarService = actionBarService;\n    this.translateService = translateService;\n    this.modal = modal;\n    this.childrenClasses = '';\n    this.setTitle = false;\n    this.disabled = false;\n    this.defaultWidgets = [];\n    this.canCopy = true;\n    this.canDelete = true;\n    this.isLoading = true;\n    this.showContextHelpButton = true;\n    this.class = '';\n    this.widgets = [];\n  }\n  ngOnInit() {\n    if (!this.name) {\n      this.loadContextDashboard();\n      return;\n    }\n    this.loadNamedDashboard();\n  }\n  /**\n   * Applies the current context to the widget\n   * @param widget The widget to apply the context to.\n   */\n  applyDeviceTarget(widget) {\n    if (widget.config.device) {\n      widget.config.device = {\n        id: this.context.id,\n        name: this.context.name\n      };\n    }\n  }\n  /**\n   * Removes the route listener.\n   */\n  ngOnDestroy() {\n    if (this.dataSub) {\n      this.dataSub.unsubscribe();\n    }\n  }\n  /**\n   * Restores the dashboard widgets to the default widgets.\n   */\n  restore() {\n    var _this20 = this;\n    return _asyncToGenerator(function* () {\n      const mesg = (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('You are about to reset this dashboard. All changes to the dashboard will get lost and cannot be recovered. Do you want to proceed?');\n      try {\n        yield _this20.modal.confirm((0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Reset dashboard'), mesg, _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.Status.WARNING, {\n          ok: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Reset`dashboard`'),\n          cancel: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Cancel')\n        });\n        _this20.isLoading = true;\n        _this20.mo.c8y_Dashboard.children = _this20.contextDashboardService.mapWidgets(_this20.defaultWidgets);\n        yield _this20.contextDashboardService.update(_this20.mo);\n        yield _this20.onLoad();\n      } catch (error) {\n        if (error) {\n          _this20.alert.addServerFailure(error);\n        }\n      } finally {\n        _this20.isLoading = false;\n      }\n    })();\n  }\n  /**\n   * Updates all dashboards children's. Useful for position changes on the dashboard.\n   * @param child The child to change.\n   */\n  updateDashboardChildren(child) {\n    var _this21 = this;\n    return _asyncToGenerator(function* () {\n      const {\n        children\n      } = child;\n      const dashboardMO = _this21.mo;\n      const mappedChildren = (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.keyBy)(children.map(c => _this21.componentToWidget(c)), 'id');\n      dashboardMO.c8y_Dashboard.children = mappedChildren;\n      return _this21.contextDashboardService.update(dashboardMO);\n    })();\n  }\n  /**\n   * Copies the dashboard and current context to a clipboard.\n   */\n  copyDashboard() {\n    var _this22 = this;\n    return _asyncToGenerator(function* () {\n      var _this22$route$parent$;\n      const viewContext = (_this22$route$parent$ = _this22.route.parent.snapshot.data) === null || _this22$route$parent$ === void 0 ? void 0 : _this22$route$parent$.context;\n      _this22.contextDashboardService.copyClipboard = {\n        dashboard: (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.cloneDeep)(_this22.mo.c8y_Dashboard),\n        context: (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.cloneDeep)({\n          context: viewContext,\n          contextData: _this22.context\n        })\n      };\n      if (viewContext) {\n        const ctx = viewContext.split('/').shift();\n        const msg = _this22.translateService.instant('Dashboard copied. Navigate to the desired {{ ctx }} and select \"Paste dashboard\"', {\n          ctx\n        });\n        _this22.alert.success(msg);\n      }\n      _this22.actionBarService.refresh();\n    })();\n  }\n  /**\n   * Remove the complete dashboard and navigate away.\n   */\n  deleteDashboard() {\n    var _this23 = this;\n    return _asyncToGenerator(function* () {\n      yield _this23.contextDashboardService.delete(_this23.mo);\n      if (_this23.route.parent) {\n        const route = _this23.route.parent.snapshot.url.map(segment => segment.path).join('/');\n        _this23.router.navigateByUrl(route);\n      }\n    })();\n  }\n  /**\n   * Edits the current dashboard\n   */\n  editDashboard() {\n    var _this24 = this;\n    return _asyncToGenerator(function* () {\n      const isReport = _this24.contextDashboardService.isReport(_this24.mo);\n      if (isReport) {\n        const {\n          name,\n          icon,\n          priority,\n          c8y_IsNavigatorNode,\n          description\n        } = _this24.context;\n        Object.assign(_this24.dashboard, {\n          name,\n          icon,\n          priority,\n          c8y_IsNavigatorNode,\n          description\n        });\n      }\n      const initialState = {\n        dashboard: _this24.dashboard,\n        deviceType: _this24.context.type,\n        isDeviceType: _this24.contextDashboardService.isDeviceType(_this24.mo),\n        isNamedDashboard: _this24.contextDashboardService.isNamed(_this24.mo),\n        isReport\n      };\n      const modal = _this24.bsModal.show(DashboardDetailComponent, {\n        class: 'modal-lg',\n        ariaDescribedby: 'modal-body',\n        ariaLabelledBy: 'modal-title',\n        initialState,\n        ignoreBackdropClick: true\n      }).content;\n      try {\n        const dashboardMO = (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.cloneDeep)(_this24.mo);\n        const cfg = yield modal.result;\n        if (isReport) {\n          const {\n            name,\n            icon,\n            c8y_IsNavigatorNode,\n            priority,\n            description,\n            ...dashboardCfg\n          } = cfg;\n          dashboardMO.c8y_Dashboard = dashboardCfg;\n          _this24.updateReport({\n            id: _this24.context.id,\n            name,\n            icon,\n            c8y_IsNavigatorNode,\n            priority,\n            description\n          });\n        } else {\n          dashboardMO.c8y_Dashboard = cfg;\n        }\n        yield _this24.contextDashboardService.update(dashboardMO);\n        yield _this24.contextDashboardService.refreshTabs(dashboardMO);\n        _this24.onLoad();\n        modal.close();\n      } catch (ex) {\n        // intended empty\n      }\n    })();\n  }\n  get isDeviceTypeDashboard() {\n    var _this$dashboard;\n    return !!((_this$dashboard = this.dashboard) !== null && _this$dashboard !== void 0 && _this$dashboard.deviceType) && !!this.dashboard.deviceTypeValue;\n  }\n  /**\n   * Edits a widget on the dashboard.\n   * @param change The widget change event.\n   */\n  editWidget(change) {\n    var _this25 = this;\n    return _asyncToGenerator(function* () {\n      const {\n        x,\n        y,\n        width,\n        height\n      } = change.source;\n      const component = yield _this25.widgetService.getWidgetDefinition(change.widget.name || change.widget.componentId);\n      if (!component) {\n        _this25.addWidget();\n        return;\n      }\n      yield _this25.addWidget({\n        ...component,\n        data: {\n          ...component.data,\n          ...change.widget,\n          _x: x,\n          _y: y,\n          _width: width,\n          _height: height\n        }\n      });\n    })();\n  }\n  /**\n   * Adds a widget to the dashboard.\n   * @param selected Define a selected component to switch to edit mode directly.\n   */\n  addWidget(selected) {\n    var _this26 = this;\n    return _asyncToGenerator(function* () {\n      const partialCloneSelected = selected ? {\n        ...selected,\n        data: (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.cloneDeep)(selected.data)\n      } : selected;\n      const initialState = {\n        mo: _this26.mo,\n        context: _this26.context.c8y_Report ? {} : _this26.context,\n        selected: partialCloneSelected\n      };\n      const modal = _this26.bsModal.show(WidgetConfigComponent, {\n        class: 'modal-lg',\n        ariaDescribedby: 'modal-body',\n        ariaLabelledBy: 'modal-title',\n        initialState,\n        ignoreBackdropClick: true\n      }).content;\n      try {\n        const newWidget = yield modal.result;\n        if (!_this26.mo.c8y_Dashboard.children) {\n          _this26.mo.c8y_Dashboard.children = {};\n        }\n        _this26.mo.c8y_Dashboard.children[newWidget.id] = newWidget;\n        _this26.contextDashboardService.update(_this26.mo);\n        newWidget.classes = _this26.mergeWidgetClasses(newWidget);\n        yield _this26.updateWidget(newWidget);\n        modal.close();\n      } catch (ex) {\n        // intended empty\n      }\n    })();\n  }\n  /**\n   * Updates a widget or adds a new one if it doesn't exist on\n   * the dashboard.\n   * @param widget The new widget\n   */\n  updateWidget(widget) {\n    var _this27 = this;\n    return _asyncToGenerator(function* () {\n      const index = (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.findIndex)(_this27.widgets, {\n        id: widget.id\n      });\n      const isNew = index === -1;\n      const mappedWidget = yield _this27.widgetService.mapLegacy(widget);\n      if (isNew) {\n        _this27.widgets.push(mappedWidget);\n      } else {\n        _this27.widgets.splice(index, 1, mappedWidget);\n      }\n    })();\n  }\n  /**\n   * Removes a widget and rearranges the remaining ones\n   * if necessary.\n   * @param change The change event.\n   */\n  deleteWidget(change) {\n    var _this28 = this;\n    return _asyncToGenerator(function* () {\n      const widgetTitle = change.widget.title;\n      try {\n        yield _this28.modal.confirm((0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Remove widget'), _this28.translateService.instant((0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('You are about to remove widget \"{{ widgetTitle }}\" from your dashboard. Do you want to proceed?'), {\n          widgetTitle\n        }), _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.Status.DANGER, {\n          ok: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Remove'),\n          cancel: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Cancel')\n        });\n      } catch (e) {\n        // on cancel: do nothing\n        return;\n      }\n      try {\n        const {\n          widget,\n          source\n        } = change;\n        delete _this28.mo.c8y_Dashboard.children[widget.id];\n        const removed = _this28.widgets.find(({\n          id\n        }) => id === widget.id);\n        _this28.widgets.splice(_this28.widgets.indexOf(removed), 1);\n        const {\n          dashboard\n        } = source;\n        dashboard.children = dashboard.children.filter(c => c.data.id !== widget.id);\n        // using setTimeout to give the component the chance to remove it.\n        const sleep = timeout => new Promise(resolve => setTimeout(resolve, timeout));\n        yield sleep(0);\n        const child = new _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.DashboardChildChange(source);\n        child.collapseUpAll();\n        yield _this28.updateDashboardChildren(child);\n      } catch (e) {\n        _this28.alert.addServerFailure(e);\n      }\n    })();\n  }\n  /**\n   * This is a workaround to ensure that the dragged-element\n   * (which is attached to the body) has the right styling.\n   */\n  addDashboardClassToBody() {\n    this.class.split(' ').forEach(cssClass => {\n      this.renderer.addClass(document.body, cssClass);\n    });\n  }\n  /**\n   * This is a workaround to ensure that the dragged-element\n   * (which is attached to the body) has the right styling.\n   */\n  removeDashboardClassFromBody() {\n    this.class.split(' ').forEach(cssClass => {\n      this.renderer.removeClass(document.body, cssClass);\n    });\n  }\n  /**\n   * Changes the dashboard settings to frozen or vice versa.\n   * @param settings The current settings of the dashboard.\n   */\n  toggleFreeze(settings) {\n    var _this29 = this;\n    return _asyncToGenerator(function* () {\n      _this29.toggleIsFrozenFlag(settings);\n      try {\n        yield _this29.contextDashboardService.update(_this29.mo);\n        if (_this29.dashboard.isFrozen) {\n          _this29.alert.success((0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Your dashboard is locked now.'));\n        } else {\n          _this29.alert.success((0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Your dashboard is unlocked now.'));\n        }\n      } catch (ex) {\n        _this29.alert.addServerFailure(ex);\n        _this29.toggleIsFrozenFlag(settings);\n      }\n    })();\n  }\n  updateReport(mo) {\n    var _this30 = this;\n    return _asyncToGenerator(function* () {\n      const res = yield _this30.inventory.update(mo);\n      _this30.context = res.data;\n      if (_this30.route.parent) {\n        _this30.route.parent.snapshot.data.contextData = _this30.context;\n      }\n      _this30.contextDashboardService.updateNavigatorItem(res.data);\n    })();\n  }\n  toggleIsFrozenFlag(settings) {\n    settings.isFrozen = !settings.isFrozen;\n    this.dashboard.isFrozen = settings.isFrozen;\n  }\n  loadContextDashboard() {\n    this.dataSub = this.route.data.subscribe(({\n      dashboard\n    }) => {\n      var _this$context;\n      this.context = this.route.parent.snapshot.data.contextData;\n      this.title = (_this$context = this.context) === null || _this$context === void 0 ? void 0 : _this$context.name;\n      this.mo = dashboard;\n      this.dashboard = this.mo.c8y_Dashboard;\n      this.onLoad(true);\n    });\n  }\n  loadNamedDashboard() {\n    this.dataSub = this.contextDashboardService.getNamedDashboardOrCreate(this.name, this.defaultWidgets, this.context).subscribe(mo => {\n      this.context = this.context || {};\n      this.mo = mo;\n      this.dashboard = this.mo.c8y_Dashboard;\n      this.onLoad(true);\n    });\n  }\n  onLoad(trackExperience) {\n    var _this31 = this;\n    return _asyncToGenerator(function* () {\n      const canEditDashboard = yield _this31.contextDashboardService.canEditDashboard(_this31.mo);\n      _this31.disabled = !canEditDashboard;\n      _this31.canCopy = _this31.contextDashboardService.isDeviceDashboard(_this31.mo) || _this31.contextDashboardService.isDeviceType(_this31.mo) || _this31.contextDashboardService.isGroupDashboard(_this31.mo);\n      const dashboardChildren = (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.cloneDeep)(_this31.mo.c8y_Dashboard.children);\n      const isDeviceType = _this31.contextDashboardService.isDeviceType(_this31.mo);\n      const isReport = _this31.contextDashboardService.isReport(_this31.mo);\n      const dashboardClasses = {\n        'c8y-grid-dashboard': true,\n        dashboard: true,\n        ..._this31.dashboard.classes\n      };\n      _this31.isCopyDisabled = !_this31.canCopyDashboard();\n      _this31.widgets = yield Promise.all((0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.values)(dashboardChildren).map(widget => {\n        widget.classes = _this31.mergeWidgetClasses(widget);\n        if (isDeviceType) {\n          _this31.applyDeviceTarget(widget);\n        }\n        if (trackExperience) {\n          _this31.gainsightService.triggerEvent('loadWidget', {\n            widgetName: widget.componentId || widget.name\n          });\n        }\n        return _this31.widgetService.mapLegacy(widget);\n      }));\n      _this31.class = Object.keys(dashboardClasses).join(' ');\n      if (isReport) {\n        _this31.addReportDashboardSettings();\n      }\n      _this31.isLoading = false;\n    })();\n  }\n  mergeWidgetClasses(widget) {\n    const hasHeaderClass = WIDGET_HEADER_CLASSES.find(el => widget.classes && widget.classes[el.class]);\n    const widgetClasses = hasHeaderClass ? {\n      ...widget.classes\n    } : {\n      ...this.dashboard.widgetClasses,\n      ...widget.classes\n    };\n    return {\n      card: true,\n      'card-dashboard': true,\n      [(0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.kebabCase)(widget.componentId || widget.name)]: true,\n      ...widgetClasses\n    };\n  }\n  componentToWidget(child) {\n    return {\n      ...(0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.omit)(child.data, ['componentTransformConfigWithContext', 'transformConfigWithContext']),\n      ...{\n        _x: child.x,\n        _y: child.y,\n        _width: child.width,\n        _height: child.height\n      }\n    };\n  }\n  addReportDashboardSettings() {\n    this.setTitle = true;\n    this.title = this.context.name;\n    this.breadcrumbSettings = {\n      icon: 'th',\n      label: 'Reports',\n      path: 'reports'\n    };\n    this.canDelete = false;\n  }\n  canCopyDashboard() {\n    const allDashboardChildrenAreValid = (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.every)(this.mo.c8y_Dashboard.children, child => {\n      const config = child.config || {};\n      const dataPoints = config.datapoints || [];\n      return !(config.device && config.device.id !== this.context.id || (0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.some)(dataPoints, dataPoint => dataPoint.__target.id !== this.context.id));\n    });\n    return allDashboardChildrenAreValid;\n  }\n}\nContextDashboardComponent.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ContextDashboardComponent,\n  deps: [{\n    token: _angular_router__WEBPACK_IMPORTED_MODULE_3__.ActivatedRoute\n  }, {\n    token: _angular_router__WEBPACK_IMPORTED_MODULE_3__.Router\n  }, {\n    token: ContextDashboardService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.AlertService\n  }, {\n    token: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Renderer2\n  }, {\n    token: CONTEXT_DASHBOARD_CONFIG\n  }, {\n    token: WidgetService\n  }, {\n    token: ngx_bootstrap_modal__WEBPACK_IMPORTED_MODULE_2__.BsModalService\n  }, {\n    token: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.GainsightService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ActionBarService\n  }, {\n    token: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__.TranslateService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ModalService\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Component\n});\nContextDashboardComponent.cmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareComponent\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  type: ContextDashboardComponent,\n  selector: \"c8y-context-dashboard\",\n  inputs: {\n    name: \"name\",\n    childrenClasses: \"childrenClasses\",\n    context: \"context\",\n    setTitle: \"setTitle\",\n    disabled: \"disabled\",\n    defaultWidgets: \"defaultWidgets\",\n    canCopy: \"canCopy\",\n    canDelete: \"canDelete\",\n    isLoading: \"isLoading\",\n    breadcrumbSettings: \"breadcrumbSettings\",\n    showContextHelpButton: \"showContextHelpButton\"\n  },\n  host: {\n    properties: {\n      \"class\": \"this.class\"\n    },\n    styleAttribute: \"\\n      display: block;\\n    \",\n    classAttribute: \"dashboard c8y-grid-dashboard\"\n  },\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  template: \"<c8y-title *ngIf=\\\"title\\\">\\n  {{ title }}\\n</c8y-title>\\n\\n<c8y-action-bar-item *ngIf=\\\"defaultWidgets.length > 0\\\" [placement]=\\\"'right'\\\" [priority]=\\\"-1\\\">\\n  <button\\n    class=\\\"btn btn-link\\\"\\n    [disabled]=\\\"dashboard?.isFrozen || disabled\\\"\\n    (click)=\\\"restore()\\\"\\n    title=\\\"{{ 'Reset dashboard' | translate }}\\\"\\n    type=\\\"button\\\"\\n    px-event=\\\"Reset dashboard\\\"\\n    data-cy=\\\"context-dashboard--button-reset-dashboard\\\"\\n  >\\n    <i class=\\\"m-r-4\\\" c8yIcon=\\\"reset\\\"></i>\\n    {{ 'Reset dashboard' | translate }}\\n  </button>\\n</c8y-action-bar-item>\\n\\n<c8y-help *ngIf=\\\"showContextHelpButton\\\" src=\\\"/users-guide/cockpit/#dashboards\\\"></c8y-help>\\n\\n<c8y-widgets-dashboard\\n  [context]=\\\"context\\\"\\n  [contextDashboard]=\\\"dashboard\\\"\\n  [widgets]=\\\"widgets\\\"\\n  [settings]=\\\"{\\n    isLoading: isLoading,\\n    isFrozen: dashboard?.isFrozen,\\n    isDisabled: disabled,\\n    canDelete: canDelete,\\n    translateWidgetTitle: dashboard?.translateWidgetTitle,\\n    allowFullscreen: moduleConfig.allowFullscreen,\\n    title: setTitle ? dashboard.name || title : undefined,\\n    widgetMargin: dashboard?.widgetMargin,\\n    canCopy: canCopy,\\n    isCopyDisabled: isCopyDisabled,\\n    columns: dashboard?.columns || 12\\n  }\\\"\\n  [breadcrumb]=\\\"breadcrumbSettings\\\"\\n  (onFreeze)=\\\"toggleFreeze($event)\\\"\\n  (onChangeDashboard)=\\\"updateDashboardChildren($event)\\\"\\n  (onAddWidget)=\\\"addWidget()\\\"\\n  (onEditWidget)=\\\"editWidget($event)\\\"\\n  (onDeleteWidget)=\\\"deleteWidget($event)\\\"\\n  (onChangeStart)=\\\"addDashboardClassToBody()\\\"\\n  (onChangeEnd)=\\\"removeDashboardClassFromBody()\\\"\\n  (onEditDashboard)=\\\"editDashboard()\\\"\\n  (onCopyDashboard)=\\\"copyDashboard()\\\"\\n  (onDeleteDashboard)=\\\"deleteDashboard()\\\"\\n></c8y-widgets-dashboard>\\n\",\n  dependencies: [{\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ActionBarItemComponent,\n    selector: \"c8y-action-bar-item\",\n    inputs: [\"placement\", \"priority\", \"itemClass\", \"injector\", \"groupId\"]\n  }, {\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.IconDirective,\n    selector: \"[c8yIcon]\",\n    inputs: [\"c8yIcon\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgIf,\n    selector: \"[ngIf]\",\n    inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"]\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.TitleComponent,\n    selector: \"c8y-title\",\n    inputs: [\"pageTitleUpdate\"]\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.WidgetsDashboardComponent,\n    selector: \"c8y-widgets-dashboard\",\n    inputs: [\"widgets\", \"context\", \"contextDashboard\", \"settings\", \"breadcrumb\"],\n    outputs: [\"onAddWidget\", \"onEditWidget\", \"onDeleteWidget\", \"onChangeDashboard\", \"onEditDashboard\", \"onCopyDashboard\", \"onDeleteDashboard\", \"onFreeze\", \"onChangeStart\", \"onChangeEnd\"]\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.HelpComponent,\n    selector: \"c8y-help\",\n    inputs: [\"src\", \"isCollapsed\", \"priority\", \"icon\"]\n  }, {\n    kind: \"pipe\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.C8yTranslatePipe,\n    name: \"translate\"\n  }]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ContextDashboardComponent,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,\n    args: [{\n      selector: 'c8y-context-dashboard',\n      host: {\n        style: `\n      display: block;\n    `,\n        class: 'dashboard c8y-grid-dashboard'\n      },\n      template: \"<c8y-title *ngIf=\\\"title\\\">\\n  {{ title }}\\n</c8y-title>\\n\\n<c8y-action-bar-item *ngIf=\\\"defaultWidgets.length > 0\\\" [placement]=\\\"'right'\\\" [priority]=\\\"-1\\\">\\n  <button\\n    class=\\\"btn btn-link\\\"\\n    [disabled]=\\\"dashboard?.isFrozen || disabled\\\"\\n    (click)=\\\"restore()\\\"\\n    title=\\\"{{ 'Reset dashboard' | translate }}\\\"\\n    type=\\\"button\\\"\\n    px-event=\\\"Reset dashboard\\\"\\n    data-cy=\\\"context-dashboard--button-reset-dashboard\\\"\\n  >\\n    <i class=\\\"m-r-4\\\" c8yIcon=\\\"reset\\\"></i>\\n    {{ 'Reset dashboard' | translate }}\\n  </button>\\n</c8y-action-bar-item>\\n\\n<c8y-help *ngIf=\\\"showContextHelpButton\\\" src=\\\"/users-guide/cockpit/#dashboards\\\"></c8y-help>\\n\\n<c8y-widgets-dashboard\\n  [context]=\\\"context\\\"\\n  [contextDashboard]=\\\"dashboard\\\"\\n  [widgets]=\\\"widgets\\\"\\n  [settings]=\\\"{\\n    isLoading: isLoading,\\n    isFrozen: dashboard?.isFrozen,\\n    isDisabled: disabled,\\n    canDelete: canDelete,\\n    translateWidgetTitle: dashboard?.translateWidgetTitle,\\n    allowFullscreen: moduleConfig.allowFullscreen,\\n    title: setTitle ? dashboard.name || title : undefined,\\n    widgetMargin: dashboard?.widgetMargin,\\n    canCopy: canCopy,\\n    isCopyDisabled: isCopyDisabled,\\n    columns: dashboard?.columns || 12\\n  }\\\"\\n  [breadcrumb]=\\\"breadcrumbSettings\\\"\\n  (onFreeze)=\\\"toggleFreeze($event)\\\"\\n  (onChangeDashboard)=\\\"updateDashboardChildren($event)\\\"\\n  (onAddWidget)=\\\"addWidget()\\\"\\n  (onEditWidget)=\\\"editWidget($event)\\\"\\n  (onDeleteWidget)=\\\"deleteWidget($event)\\\"\\n  (onChangeStart)=\\\"addDashboardClassToBody()\\\"\\n  (onChangeEnd)=\\\"removeDashboardClassFromBody()\\\"\\n  (onEditDashboard)=\\\"editDashboard()\\\"\\n  (onCopyDashboard)=\\\"copyDashboard()\\\"\\n  (onDeleteDashboard)=\\\"deleteDashboard()\\\"\\n></c8y-widgets-dashboard>\\n\"\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: _angular_router__WEBPACK_IMPORTED_MODULE_3__.ActivatedRoute\n    }, {\n      type: _angular_router__WEBPACK_IMPORTED_MODULE_3__.Router\n    }, {\n      type: ContextDashboardService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.AlertService\n    }, {\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Renderer2\n    }, {\n      type: undefined,\n      decorators: [{\n        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Inject,\n        args: [CONTEXT_DASHBOARD_CONFIG]\n      }]\n    }, {\n      type: WidgetService\n    }, {\n      type: ngx_bootstrap_modal__WEBPACK_IMPORTED_MODULE_2__.BsModalService\n    }, {\n      type: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.GainsightService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ActionBarService\n    }, {\n      type: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__.TranslateService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ModalService\n    }];\n  },\n  propDecorators: {\n    name: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }],\n    childrenClasses: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }],\n    context: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }],\n    setTitle: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }],\n    disabled: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }],\n    defaultWidgets: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }],\n    canCopy: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }],\n    canDelete: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }],\n    isLoading: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }],\n    breadcrumbSettings: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }],\n    showContextHelpButton: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input\n    }],\n    class: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.HostBinding,\n      args: ['class']\n    }]\n  }\n});\nclass CockpitDashboardComponent {\n  constructor(appState, homeDashboardConfig) {\n    var _appState$currentAppl, _appState$currentAppl2, _appState$currentAppl3, _appState$currentAppl4;\n    this.appState = appState;\n    this.homeDashboardConfig = homeDashboardConfig;\n    this.defaultWidgets = DEFAULT_COCKPIT_HOME_WIDGETS;\n    this.dashboardName = 'home-cockpit1';\n    this.pageTitle = (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Home');\n    const config = {\n      ...this.homeDashboardConfig,\n      dashboardName: (_appState$currentAppl = appState.currentApplication.value) === null || _appState$currentAppl === void 0 ? void 0 : (_appState$currentAppl2 = _appState$currentAppl.config) === null || _appState$currentAppl2 === void 0 ? void 0 : _appState$currentAppl2.homeDashboardName,\n      userSpecific: (_appState$currentAppl3 = appState.currentApplication.value) === null || _appState$currentAppl3 === void 0 ? void 0 : (_appState$currentAppl4 = _appState$currentAppl3.config) === null || _appState$currentAppl4 === void 0 ? void 0 : _appState$currentAppl4.userSpecificHomeDashboard\n    };\n    this.applyDashboardConfig(config);\n  }\n  applyDashboardConfig(config) {\n    if (!config) {\n      return;\n    }\n    if (config.dashboardName) {\n      this.dashboardName = config.dashboardName;\n    }\n    if (config.defaultWidgets) {\n      this.defaultWidgets = config.defaultWidgets;\n    }\n    if (config.userSpecific && this.appState.currentUser.value) {\n      this.dashboardName = `${this.appState.currentUser.value.userName.replace(/\\./g, '__')}_${this.dashboardName}`;\n    }\n    if (config.pageTitle) {\n      this.pageTitle = config.pageTitle;\n    }\n  }\n}\nCockpitDashboardComponent.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: CockpitDashboardComponent,\n  deps: [{\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.AppStateService\n  }, {\n    token: COCKPIT_HOME_DASHBOARD_CONFIG,\n    optional: true\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Component\n});\nCockpitDashboardComponent.cmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareComponent\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  type: CockpitDashboardComponent,\n  selector: \"c8y-cockpit-dashboard\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  template: \"<c8y-title>\\n  {{ pageTitle | translate }}\\n</c8y-title>\\n\\n<c8y-context-dashboard\\n  [name]=\\\"dashboardName\\\"\\n  [defaultWidgets]=\\\"defaultWidgets\\\"\\n  [canDelete]=\\\"false\\\"\\n></c8y-context-dashboard>\\n\",\n  dependencies: [{\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.TitleComponent,\n    selector: \"c8y-title\",\n    inputs: [\"pageTitleUpdate\"]\n  }, {\n    kind: \"component\",\n    type: ContextDashboardComponent,\n    selector: \"c8y-context-dashboard\",\n    inputs: [\"name\", \"childrenClasses\", \"context\", \"setTitle\", \"disabled\", \"defaultWidgets\", \"canCopy\", \"canDelete\", \"isLoading\", \"breadcrumbSettings\", \"showContextHelpButton\"]\n  }, {\n    kind: \"pipe\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.C8yTranslatePipe,\n    name: \"translate\"\n  }]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: CockpitDashboardComponent,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,\n    args: [{\n      selector: 'c8y-cockpit-dashboard',\n      template: \"<c8y-title>\\n  {{ pageTitle | translate }}\\n</c8y-title>\\n\\n<c8y-context-dashboard\\n  [name]=\\\"dashboardName\\\"\\n  [defaultWidgets]=\\\"defaultWidgets\\\"\\n  [canDelete]=\\\"false\\\"\\n></c8y-context-dashboard>\\n\"\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.AppStateService\n    }, {\n      type: undefined,\n      decorators: [{\n        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Optional\n      }, {\n        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Inject,\n        args: [COCKPIT_HOME_DASHBOARD_CONFIG]\n      }]\n    }];\n  }\n});\nclass PasteDashboardActionComponent {\n  constructor(vcRef, router, contextDashboardService, inventoryService) {\n    this.vcRef = vcRef;\n    this.router = router;\n    this.contextDashboardService = contextDashboardService;\n    this.inventoryService = inventoryService;\n    this.dashboardName = '';\n  }\n  ngOnInit() {\n    this.vcRef.createEmbeddedView(this.templatePaste);\n    const clipboard = this.contextDashboardService.copyClipboard;\n    if (clipboard) {\n      this.dashboardName = clipboard.dashboard.name;\n    }\n  }\n  pasteDashboard() {\n    var _this32 = this;\n    return _asyncToGenerator(function* () {\n      let context;\n      const currentUrl = _this32.router.url;\n      const isDevice = new RegExp(/device\\/\\d+/).test(currentUrl);\n      const isGroup = new RegExp(/group\\/\\d+/).test(currentUrl);\n      const id = currentUrl.match(/\\d+/)[0];\n      if (isDevice) {\n        context = {\n          context: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Device,\n          contextData: yield _this32.getContextMo(id)\n        };\n      } else if (isGroup) {\n        context = {\n          context: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Group,\n          contextData: yield _this32.getContextMo(id)\n        };\n      }\n      _this32.contextDashboardService.pasteDashboard(context);\n    })();\n  }\n  getContextMo(id) {\n    var _this33 = this;\n    return _asyncToGenerator(function* () {\n      return (yield _this33.inventoryService.detail(id)).data;\n    })();\n  }\n}\nPasteDashboardActionComponent.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: PasteDashboardActionComponent,\n  deps: [{\n    token: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewContainerRef\n  }, {\n    token: _angular_router__WEBPACK_IMPORTED_MODULE_3__.Router\n  }, {\n    token: ContextDashboardService\n  }, {\n    token: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Component\n});\nPasteDashboardActionComponent.cmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareComponent\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  type: PasteDashboardActionComponent,\n  selector: \"c8y-paste-dashboard-action\",\n  viewQueries: [{\n    propertyName: \"templatePaste\",\n    first: true,\n    predicate: [\"templatePaste\"],\n    descendants: true,\n    read: _angular_core__WEBPACK_IMPORTED_MODULE_0__.TemplateRef,\n    static: true\n  }],\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  template: `\n    <ng-template #templatePaste>\n      <li>\n        <button title=\"{{ 'Paste dashboard' | translate }}\" (click)=\"pasteDashboard()\">\n          <i class=\"m-r-4\" c8yIcon=\"clipboard\"></i><span translate>Paste dashboard</span>&nbsp;<span\n            >\"{{ dashboardName }}\"</span\n          >\n        </button>\n      </li>\n    </ng-template>\n  `,\n  isInline: true,\n  dependencies: [{\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.IconDirective,\n    selector: \"[c8yIcon]\",\n    inputs: [\"c8yIcon\"]\n  }, {\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.C8yTranslateDirective,\n    selector: \"[translate],[ngx-translate]\"\n  }, {\n    kind: \"pipe\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.C8yTranslatePipe,\n    name: \"translate\"\n  }]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: PasteDashboardActionComponent,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,\n    args: [{\n      selector: 'c8y-paste-dashboard-action',\n      template: `\n    <ng-template #templatePaste>\n      <li>\n        <button title=\"{{ 'Paste dashboard' | translate }}\" (click)=\"pasteDashboard()\">\n          <i class=\"m-r-4\" c8yIcon=\"clipboard\"></i><span translate>Paste dashboard</span>&nbsp;<span\n            >\"{{ dashboardName }}\"</span\n          >\n        </button>\n      </li>\n    </ng-template>\n  `\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewContainerRef\n    }, {\n      type: _angular_router__WEBPACK_IMPORTED_MODULE_3__.Router\n    }, {\n      type: ContextDashboardService\n    }, {\n      type: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n    }];\n  },\n  propDecorators: {\n    templatePaste: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewChild,\n      args: ['templatePaste', {\n        read: _angular_core__WEBPACK_IMPORTED_MODULE_0__.TemplateRef,\n        static: true\n      }]\n    }]\n  }\n});\nclass DashboardActionBarFactory {\n  constructor(contextDashboardService) {\n    this.contextDashboardService = contextDashboardService;\n  }\n  get(activeRoute) {\n    const actions = [];\n    const data = !activeRoute.parent || activeRoute.snapshot.data.context ? activeRoute.snapshot.data : activeRoute.parent.snapshot.data;\n    const {\n      contextData\n    } = data;\n    const canPaste = contextData && [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Device, _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Group].includes(data.context) && this.contextDashboardService.copyClipboard;\n    if (canPaste) {\n      actions.push({\n        priority: -10,\n        placement: 'more',\n        template: PasteDashboardActionComponent\n      });\n    }\n    return actions;\n  }\n}\nDashboardActionBarFactory.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DashboardActionBarFactory,\n  deps: [{\n    token: ContextDashboardService\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Injectable\n});\nDashboardActionBarFactory.prov = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareInjectable\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DashboardActionBarFactory,\n  providedIn: 'root'\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DashboardActionBarFactory,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: ContextDashboardService\n    }];\n  }\n});\nclass DeviceDashboardGuard {\n  constructor(contextDashboardService) {\n    this.contextDashboardService = contextDashboardService;\n  }\n  canActivate(route) {\n    return this.contextDashboardService.activateDashboards(route, [ContextDashboardType.Device, ContextDashboardType.DeviceType]);\n  }\n}\nDeviceDashboardGuard.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DeviceDashboardGuard,\n  deps: [{\n    token: ContextDashboardService\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Injectable\n});\nDeviceDashboardGuard.prov = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareInjectable\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DeviceDashboardGuard\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DeviceDashboardGuard,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable\n  }],\n  ctorParameters: function () {\n    return [{\n      type: ContextDashboardService\n    }];\n  }\n});\nclass GroupDashboardGuard {\n  constructor(contextDashboardService) {\n    this.contextDashboardService = contextDashboardService;\n  }\n  canActivate(route) {\n    return this.contextDashboardService.activateDashboards(route, [ContextDashboardType.Group]);\n  }\n}\nGroupDashboardGuard.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: GroupDashboardGuard,\n  deps: [{\n    token: ContextDashboardService\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Injectable\n});\nGroupDashboardGuard.prov = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareInjectable\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: GroupDashboardGuard\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: GroupDashboardGuard,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable\n  }],\n  ctorParameters: function () {\n    return [{\n      type: ContextDashboardService\n    }];\n  }\n});\nconst defaultConfig = {\n  allowFullscreen: true,\n  widgetFilter({\n    data\n  }) {\n    return !(data && data.settings && data.settings.noNewWidgets);\n  },\n  routes: [{\n    path: 'dashboard/:dashboardId',\n    component: ContextDashboardComponent,\n    canActivate: [DeviceDashboardGuard],\n    context: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Device\n  }, {\n    path: 'dashboard/:dashboardId',\n    component: ContextDashboardComponent,\n    canActivate: [GroupDashboardGuard],\n    context: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Group\n  }]\n};\nclass ContextDashboardModule {\n  static config(config = {}) {\n    return {\n      ngModule: ContextDashboardModule,\n      providers: [{\n        provide: CONTEXT_DASHBOARD_CONFIG,\n        useValue: {\n          ...defaultConfig,\n          ...config\n        }\n      }, ContextDashboardService, DeviceDashboardGuard, GroupDashboardGuard, (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.hookRoute)({\n        ...defaultConfig,\n        ...config\n      }.routes), (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.hookTab)(AddDashboardFactory, {\n        providerType: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.HookProviderTypes.ExistingProvider\n      }), (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.hookActionBar)(DashboardActionBarFactory)]\n    };\n  }\n}\nContextDashboardModule.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ContextDashboardModule,\n  deps: [],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].NgModule\n});\nContextDashboardModule.mod = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareNgModule\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ContextDashboardModule,\n  declarations: [AppearanceSettingsComponent, ContextDashboardComponent, WidgetConfigComponent, WidgetPreviewComponent, DashboardDetailComponent, AddDashboardComponent, PasteDashboardActionComponent, DashboardAvailabilityComponent],\n  imports: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.CoreModule, ngx_bootstrap_tooltip__WEBPACK_IMPORTED_MODULE_13__.TooltipModule, ngx_bootstrap_popover__WEBPACK_IMPORTED_MODULE_11__.PopoverModule, _c8y_ngx_components_assets_navigator__WEBPACK_IMPORTED_MODULE_14__.AssetSelectorModule, ngx_bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_12__.BsDropdownModule],\n  exports: [ContextDashboardComponent, WidgetConfigComponent]\n});\nContextDashboardModule.inj = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareInjector\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ContextDashboardModule,\n  providers: [WidgetService, {\n    provide: CONTEXT_DASHBOARD_CONFIG,\n    useValue: defaultConfig\n  }],\n  imports: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.CoreModule, ngx_bootstrap_tooltip__WEBPACK_IMPORTED_MODULE_13__.TooltipModule, ngx_bootstrap_popover__WEBPACK_IMPORTED_MODULE_11__.PopoverModule, _c8y_ngx_components_assets_navigator__WEBPACK_IMPORTED_MODULE_14__.AssetSelectorModule, ngx_bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_12__.BsDropdownModule.forRoot()]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ContextDashboardModule,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,\n    args: [{\n      declarations: [AppearanceSettingsComponent, ContextDashboardComponent, WidgetConfigComponent, WidgetPreviewComponent, DashboardDetailComponent, AddDashboardComponent, PasteDashboardActionComponent, DashboardAvailabilityComponent],\n      imports: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.CoreModule, ngx_bootstrap_tooltip__WEBPACK_IMPORTED_MODULE_13__.TooltipModule, ngx_bootstrap_popover__WEBPACK_IMPORTED_MODULE_11__.PopoverModule, _c8y_ngx_components_assets_navigator__WEBPACK_IMPORTED_MODULE_14__.AssetSelectorModule, ngx_bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_12__.BsDropdownModule.forRoot()],\n      exports: [ContextDashboardComponent, WidgetConfigComponent],\n      entryComponents: [ContextDashboardComponent, WidgetConfigComponent, DashboardDetailComponent, PasteDashboardActionComponent],\n      providers: [WidgetService, {\n        provide: CONTEXT_DASHBOARD_CONFIG,\n        useValue: defaultConfig\n      }]\n    }]\n  }]\n});\nclass CockpitDashboardModule {\n  static config(config = {}) {\n    return {\n      ngModule: CockpitDashboardModule,\n      providers: [{\n        provide: COCKPIT_HOME_DASHBOARD_CONFIG,\n        useValue: config\n      }]\n    };\n  }\n}\nCockpitDashboardModule.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: CockpitDashboardModule,\n  deps: [],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].NgModule\n});\nCockpitDashboardModule.mod = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareNgModule\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: CockpitDashboardModule,\n  declarations: [CockpitDashboardComponent],\n  imports: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.CoreModule, ContextDashboardModule]\n});\nCockpitDashboardModule.inj = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareInjector\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: CockpitDashboardModule,\n  providers: [(0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.hookNavigator)({\n    label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Home'),\n    icon: 'home',\n    priority: 10000,\n    path: '/'\n  })],\n  imports: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.CoreModule, ContextDashboardModule.config({\n    routes: [{\n      path: 'dashboard/:dashboardId',\n      component: ContextDashboardComponent,\n      canActivate: [DeviceDashboardGuard],\n      context: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Device\n    }, {\n      path: 'dashboard/:dashboardId',\n      component: ContextDashboardComponent,\n      canActivate: [GroupDashboardGuard],\n      context: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Group\n    }, {\n      path: '',\n      component: CockpitDashboardComponent\n    }]\n  })]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: CockpitDashboardModule,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,\n    args: [{\n      imports: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.CoreModule, ContextDashboardModule.config({\n        routes: [{\n          path: 'dashboard/:dashboardId',\n          component: ContextDashboardComponent,\n          canActivate: [DeviceDashboardGuard],\n          context: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Device\n        }, {\n          path: 'dashboard/:dashboardId',\n          component: ContextDashboardComponent,\n          canActivate: [GroupDashboardGuard],\n          context: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Group\n        }, {\n          path: '',\n          component: CockpitDashboardComponent\n        }]\n      })],\n      declarations: [CockpitDashboardComponent],\n      providers: [(0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.hookNavigator)({\n        label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Home'),\n        icon: 'home',\n        priority: 10000,\n        path: '/'\n      })]\n    }]\n  }]\n});\nclass DeviceInfoDashboardComponent {\n  constructor(router, widgetService, translateService) {\n    this.router = router;\n    this.widgetService = widgetService;\n    this.translateService = translateService;\n    this.isLoading$ = new rxjs__WEBPACK_IMPORTED_MODULE_7__.BehaviorSubject(true);\n    this.DEVICE_INFO_WIDGETS = [{\n      componentId: 'assetNotesWidget',\n      title: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Message of the day'),\n      classes: {\n        'panel-title-hidden': true\n      },\n      _x: 0,\n      _y: 0,\n      _height: 2,\n      _width: 12\n    }, {\n      name: 'deviceStatusWidget',\n      title: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Device status'),\n      _x: 0,\n      _y: 2,\n      _height: 5,\n      _width: 4\n    }, {\n      name: 'Data points graph',\n      title: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Device and communication'),\n      _x: 4,\n      _y: 2,\n      _height: 5,\n      _width: 8,\n      config: {\n        interval: 'hours',\n        aggregation: 'NONE',\n        realtime: true,\n        datapointsInitialDisplayLimit: 3,\n        datapoints: [{\n          fragment: 'c8y_Battery',\n          series: 'level',\n          label: this.translateService.instant('Battery: level'),\n          unit: '%',\n          renderType: 'min',\n          lineType: 'line',\n          color: '#5e07b3',\n          __active: true\n        }, {\n          fragment: 'c8y_SignalStrength',\n          series: 'rssi',\n          label: this.translateService.instant('Signal: RSSI'),\n          unit: 'dBm',\n          renderType: 'min',\n          lineType: 'line',\n          color: '#a7d0f1',\n          __active: true\n        }, {\n          fragment: 'c8y_MemoryMeasurement',\n          series: 'Used',\n          label: this.translateService.instant('Memory: used'),\n          unit: 'MB',\n          renderType: 'min',\n          lineType: 'line',\n          color: '#f75229',\n          __active: true\n        }, {\n          fragment: 'c8y_CPUMeasurement',\n          series: 'Workload',\n          label: this.translateService.instant('CPU: workload'),\n          unit: '%',\n          renderType: 'min',\n          lineType: 'line',\n          color: '#b24f3e',\n          __active: true\n        }, {\n          fragment: 'c8y_NetworkStatistics',\n          series: 'Upload',\n          label: this.translateService.instant('Network: upload'),\n          unit: 'KB/s',\n          renderType: 'min',\n          lineType: 'line',\n          color: '#88c039',\n          __active: true\n        }, {\n          fragment: 'c8y_SignalStrength',\n          series: 'RCSP',\n          label: this.translateService.instant('Signal: RCSP'),\n          renderType: 'min',\n          lineType: 'line',\n          color: '#5e2f19',\n          __active: true\n        }, {\n          fragment: 'c8y_SignalStrength',\n          series: 'RSCP',\n          label: this.translateService.instant('Signal: RSCP'),\n          renderType: 'min',\n          lineType: 'line',\n          color: '#5e2f19',\n          __active: true\n        }, {\n          fragment: 'c8y_SignalStrength',\n          series: 'RSRP',\n          label: this.translateService.instant('Signal: RSRP'),\n          renderType: 'min',\n          lineType: 'line',\n          color: '#43ba3b',\n          __active: true\n        }, {\n          fragment: 'c8y_SignalStrength',\n          series: 'RSRQ',\n          label: this.translateService.instant('Signal: RSRQ'),\n          renderType: 'min',\n          lineType: 'line',\n          color: '#14b0b3',\n          __active: true\n        }, {\n          fragment: 'c8y_SignalStrength',\n          series: 'ber',\n          label: this.translateService.instant('Signal: BER'),\n          unit: '%',\n          renderType: 'min',\n          lineType: 'line',\n          color: '#44ff33',\n          __active: true\n        }, {\n          fragment: 'c8y_SignalStrength',\n          series: 'ECN0',\n          label: this.translateService.instant('Signal: ECN0'),\n          renderType: 'min',\n          lineType: 'line',\n          color: '#873efa',\n          __active: true\n        }, {\n          fragment: 'c8y_NetworkStatistics',\n          series: 'Download',\n          label: this.translateService.instant('Network: download'),\n          unit: 'KB/s',\n          renderType: 'min',\n          lineType: 'line',\n          color: '#f27a45',\n          __active: true\n        }, {\n          fragment: 'c8y_MemoryMeasurement',\n          series: 'Total',\n          label: this.translateService.instant('Memory: total'),\n          unit: 'MB',\n          renderType: 'min',\n          lineType: 'line',\n          color: '#dadd8c',\n          __active: true\n        }],\n        alarmsEventsConfigs: [{\n          label: 'c8y_LocationUpdate',\n          timelineType: 'EVENT',\n          color: '#6f6cd0',\n          filters: {\n            type: 'c8y_LocationUpdate'\n          },\n          __active: true\n        }, {\n          label: 'c8y_UnavailabilityAlarm',\n          timelineType: 'ALARM',\n          color: '#375bf2',\n          filters: {\n            type: 'c8y_UnavailabilityAlarm'\n          },\n          __active: true\n        }]\n      },\n      transformConfigWithContext(config, context, c8yDevices) {\n        'ngInject';\n\n        return c8yDevices.getSupportedSeries(context.id).then(supportedMeasurementSeries => config.datapoints.filter(configMeasurement => supportedMeasurementSeries.find(supportedSeries => supportedSeries.fragment === configMeasurement.fragment && supportedSeries.series === configMeasurement.series))).then(datapoints => ({\n          ...config,\n          ...{\n            datapoints\n          }\n        }));\n      }\n    }, {\n      name: 'Asset Properties',\n      title: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Device data'),\n      config: {\n        options: {\n          properties: [],\n          allowDisplayAndEditKnownProperties: true,\n          hiddenPropertiesKeyPaths: ['owner']\n        }\n      },\n      _x: 0,\n      _y: 7,\n      _height: 8,\n      _width: 4\n    }, {\n      name: 'Alarm list',\n      title: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Active, critical alarms'),\n      _x: 4,\n      _y: 7,\n      _height: 4,\n      _width: 4,\n      config: {\n        options: {\n          orderMode: 'ACTIVE_FIRST',\n          severity: {\n            CRITICAL: true\n          },\n          status: {\n            ACTIVE: true,\n            ACKNOWLEDGED: false,\n            CLEARED: false\n          },\n          types: []\n        }\n      }\n    }, {\n      name: 'deviceGroupAssignmentWidget',\n      title: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Group assignment'),\n      _x: 8,\n      _y: 7,\n      _height: 4,\n      _width: 4\n    }, {\n      componentId: 'Map',\n      title: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Location'),\n      _x: 4,\n      _y: 11,\n      _height: 4,\n      _width: 8\n    }];\n    this.currentContext$ = this.router.parent.data.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.map)(({\n      contextData\n    }) => {\n      this.title = contextData.name;\n      return contextData;\n    }));\n    this.widgets$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.from)(this.DEVICE_INFO_WIDGETS).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.mergeMap)(widget => this.widgetService.mapLegacy(widget)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.map)(widget => ({\n      ...widget,\n      config: {\n        ...widget.config,\n        device: this.router.parent.snapshot.data.contextData\n      }\n    })), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.toArray)());\n    this.widgetsSubscription = (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.combineLatest)([this.widgets$, this.currentContext$]).subscribe(() => {\n      this.isLoading$.next(false);\n    });\n  }\n  ngOnDestroy() {\n    this.widgetsSubscription.unsubscribe();\n  }\n}\nDeviceInfoDashboardComponent.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DeviceInfoDashboardComponent,\n  deps: [{\n    token: _angular_router__WEBPACK_IMPORTED_MODULE_3__.ActivatedRoute\n  }, {\n    token: WidgetService\n  }, {\n    token: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__.TranslateService\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Component\n});\nDeviceInfoDashboardComponent.cmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareComponent\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  type: DeviceInfoDashboardComponent,\n  selector: \"c8y-device-info-dashboard-dashboard\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  template: \"<c8y-title>\\n  {{ title }}\\n</c8y-title>\\n<c8y-widgets-dashboard\\n  [context]=\\\"currentContext$ | async\\\"\\n  [widgets]=\\\"widgets$ | async\\\"\\n  [settings]=\\\"{\\n    isLoading: isLoading$ | async,\\n    isDisabled: true,\\n    canDelete: false,\\n    translateWidgetTitle: true,\\n    allowFullscreen: false,\\n    canCopy: false\\n  }\\\"\\n>\\n</c8y-widgets-dashboard>\\n\",\n  dependencies: [{\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.TitleComponent,\n    selector: \"c8y-title\",\n    inputs: [\"pageTitleUpdate\"]\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.WidgetsDashboardComponent,\n    selector: \"c8y-widgets-dashboard\",\n    inputs: [\"widgets\", \"context\", \"contextDashboard\", \"settings\", \"breadcrumb\"],\n    outputs: [\"onAddWidget\", \"onEditWidget\", \"onDeleteWidget\", \"onChangeDashboard\", \"onEditDashboard\", \"onCopyDashboard\", \"onDeleteDashboard\", \"onFreeze\", \"onChangeStart\", \"onChangeEnd\"]\n  }, {\n    kind: \"pipe\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.AsyncPipe,\n    name: \"async\"\n  }]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DeviceInfoDashboardComponent,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,\n    args: [{\n      selector: 'c8y-device-info-dashboard-dashboard',\n      template: \"<c8y-title>\\n  {{ title }}\\n</c8y-title>\\n<c8y-widgets-dashboard\\n  [context]=\\\"currentContext$ | async\\\"\\n  [widgets]=\\\"widgets$ | async\\\"\\n  [settings]=\\\"{\\n    isLoading: isLoading$ | async,\\n    isDisabled: true,\\n    canDelete: false,\\n    translateWidgetTitle: true,\\n    allowFullscreen: false,\\n    canCopy: false\\n  }\\\"\\n>\\n</c8y-widgets-dashboard>\\n\"\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: _angular_router__WEBPACK_IMPORTED_MODULE_3__.ActivatedRoute\n    }, {\n      type: WidgetService\n    }, {\n      type: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__.TranslateService\n    }];\n  }\n});\nclass DeviceInfoDashboardModule {}\nDeviceInfoDashboardModule.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DeviceInfoDashboardModule,\n  deps: [],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].NgModule\n});\nDeviceInfoDashboardModule.mod = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareNgModule\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DeviceInfoDashboardModule,\n  declarations: [DeviceInfoDashboardComponent],\n  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_10__.CommonModule, _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.CoreModule, ContextDashboardModule]\n});\nDeviceInfoDashboardModule.inj = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareInjector\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DeviceInfoDashboardModule,\n  providers: [(0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.hookRoute)({\n    context: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Device,\n    path: 'device-info',\n    component: DeviceInfoDashboardComponent,\n    label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Info'),\n    priority: 10000,\n    icon: 'asterisk'\n  })],\n  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_10__.CommonModule, _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.CoreModule, ContextDashboardModule]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DeviceInfoDashboardModule,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,\n    args: [{\n      declarations: [DeviceInfoDashboardComponent],\n      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_10__.CommonModule, _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.CoreModule, ContextDashboardModule],\n      exports: [],\n      entryComponents: [DeviceInfoDashboardComponent],\n      providers: [(0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.hookRoute)({\n        context: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Device,\n        path: 'device-info',\n        component: DeviceInfoDashboardComponent,\n        label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Info'),\n        priority: 10000,\n        icon: 'asterisk'\n      })]\n    }]\n  }]\n});\nclass DeviceManagementHomeDashboardComponent {\n  constructor(widgetService) {\n    this.widgetService = widgetService;\n    this.widgets = [];\n    this.dashboardName = 'home-dm1';\n    this.defaultWidgets = [{\n      name: 'devicemanagement.welcome.widget',\n      title: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Quick links'),\n      _x: 0,\n      _y: 0,\n      _height: 4,\n      _width: 6\n    }, {\n      name: 'Recent Alarms',\n      title: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Recent alarms'),\n      _x: 6,\n      _y: 0,\n      _height: 4,\n      _width: 6\n    }];\n  }\n  ngOnInit() {\n    var _this34 = this;\n    this.defaultWidgets.map( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (widget) {\n        yield _this34.widgetService.mapLegacy(widget).then(transformedWidget => _this34.widgets.push(transformedWidget));\n      });\n      return function (_x2) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  }\n}\nDeviceManagementHomeDashboardComponent.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DeviceManagementHomeDashboardComponent,\n  deps: [{\n    token: WidgetService\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Component\n});\nDeviceManagementHomeDashboardComponent.cmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareComponent\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  type: DeviceManagementHomeDashboardComponent,\n  selector: \"c8y-device-management-home-dashboard\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  template: \"<c8y-title>\\n  {{ 'Home' | translate }}\\n</c8y-title>\\n\\n<c8y-context-dashboard\\n  [name]=\\\"dashboardName\\\"\\n  [defaultWidgets]=\\\"defaultWidgets\\\"\\n  [canDelete]=\\\"false\\\"\\n></c8y-context-dashboard>\\n\",\n  dependencies: [{\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.TitleComponent,\n    selector: \"c8y-title\",\n    inputs: [\"pageTitleUpdate\"]\n  }, {\n    kind: \"component\",\n    type: ContextDashboardComponent,\n    selector: \"c8y-context-dashboard\",\n    inputs: [\"name\", \"childrenClasses\", \"context\", \"setTitle\", \"disabled\", \"defaultWidgets\", \"canCopy\", \"canDelete\", \"isLoading\", \"breadcrumbSettings\", \"showContextHelpButton\"]\n  }, {\n    kind: \"pipe\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.C8yTranslatePipe,\n    name: \"translate\"\n  }]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DeviceManagementHomeDashboardComponent,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,\n    args: [{\n      selector: 'c8y-device-management-home-dashboard',\n      template: \"<c8y-title>\\n  {{ 'Home' | translate }}\\n</c8y-title>\\n\\n<c8y-context-dashboard\\n  [name]=\\\"dashboardName\\\"\\n  [defaultWidgets]=\\\"defaultWidgets\\\"\\n  [canDelete]=\\\"false\\\"\\n></c8y-context-dashboard>\\n\"\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: WidgetService\n    }];\n  }\n});\nclass DeviceManagementHomeDashboardModule {}\nDeviceManagementHomeDashboardModule.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DeviceManagementHomeDashboardModule,\n  deps: [],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].NgModule\n});\nDeviceManagementHomeDashboardModule.mod = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareNgModule\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DeviceManagementHomeDashboardModule,\n  declarations: [DeviceManagementHomeDashboardComponent],\n  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_10__.CommonModule, _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.CoreModule, ContextDashboardModule]\n});\nDeviceManagementHomeDashboardModule.inj = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareInjector\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DeviceManagementHomeDashboardModule,\n  providers: [(0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.hookRoute)({\n    path: '',\n    component: DeviceManagementHomeDashboardComponent\n  }), (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.hookNavigator)({\n    label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Home'),\n    icon: 'home',\n    priority: 10000,\n    path: '/'\n  })],\n  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_10__.CommonModule, _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.CoreModule, ContextDashboardModule]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: DeviceManagementHomeDashboardModule,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,\n    args: [{\n      declarations: [DeviceManagementHomeDashboardComponent],\n      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_10__.CommonModule, _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.CoreModule, ContextDashboardModule],\n      exports: [],\n      providers: [(0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.hookRoute)({\n        path: '',\n        component: DeviceManagementHomeDashboardComponent\n      }), (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.hookNavigator)({\n        label: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Home'),\n        icon: 'home',\n        priority: 10000,\n        path: '/'\n      })]\n    }]\n  }]\n});\nclass ReportDashboardListComponent {\n  constructor(inventoryService, contextDashboardService, bsModal, translateService, modal, alertService, reportDashboardService, permissions) {\n    this.inventoryService = inventoryService;\n    this.contextDashboardService = contextDashboardService;\n    this.bsModal = bsModal;\n    this.translateService = translateService;\n    this.modal = modal;\n    this.alertService = alertService;\n    this.reportDashboardService = reportDashboardService;\n    this.permissions = permissions;\n    this.textFilter$ = new rxjs__WEBPACK_IMPORTED_MODULE_7__.BehaviorSubject('');\n    this.reload$ = new rxjs__WEBPACK_IMPORTED_MODULE_7__.BehaviorSubject(null);\n    this.reloading = false;\n    this.reports$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.combineLatest)(this.textFilter$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.debounceTime)(400), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.distinctUntilChanged)()), this.reload$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.tap)(() => {\n      this.reloading = true;\n    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.switchMap)(([text]) => this.loadReports(text)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.tap)(() => {\n      this.reloading = false;\n    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.shareReplay)(1));\n    this.canAddReport = false;\n    this.DELETED_SUCCESS_MSG = (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Report deleted.');\n  }\n  ngOnInit() {\n    this.canAddReport = this.permissions.hasAnyRole(['ROLE_INVENTORY_CREATE', 'ROLE_INVENTORY_ADMIN']);\n  }\n  loadReports(partialName) {\n    var _this35 = this;\n    return _asyncToGenerator(function* () {\n      return partialName ? _this35.reportDashboardService.listReports({\n        filter: {\n          name: `*${partialName}*`\n        }\n      }) : _this35.reportDashboardService.listReports();\n    })();\n  }\n  add() {\n    var _this36 = this;\n    return _asyncToGenerator(function* () {\n      const initialState = {\n        isReport: true,\n        isNamedDashboard: true\n      };\n      const modal = _this36.bsModal.show(DashboardDetailComponent, {\n        class: 'modal-lg',\n        ignoreBackdropClick: true,\n        ariaDescribedby: 'modal-body',\n        ariaLabelledBy: 'modal-title',\n        initialState\n      }).content;\n      try {\n        const cfg = yield modal.result;\n        const {\n          name,\n          icon,\n          c8y_IsNavigatorNode,\n          priority,\n          description,\n          ...dashboardCfg\n        } = cfg;\n        const report = (yield _this36.reportDashboardService.createReport({\n          name,\n          icon,\n          c8y_IsNavigatorNode,\n          priority,\n          description\n        })).data;\n        yield _this36.contextDashboardService.create(dashboardCfg, undefined, `${_this36.contextDashboardService.REPORT_PARTIAL_NAME}${report.id}`);\n        if (report.c8y_IsNavigatorNode) {\n          _this36.reportDashboardService.addReportNavigatorNode(report);\n        }\n        _this36.reload$.next();\n        modal.close();\n      } catch (ex) {\n        if (ex) {\n          throw new Error(`Something went wrong: ${ex}`);\n        }\n      }\n    })();\n  }\n  delete(report) {\n    var _this37 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        var _dashboard$c8y_Dashbo2;\n        const dashboard = yield _this37.contextDashboardService.getDashboard$(`report_${report.id}`, [ContextDashboardType.Named]).toPromise();\n        const isDashboardFrozen = !!(dashboard !== null && dashboard !== void 0 && (_dashboard$c8y_Dashbo2 = dashboard.c8y_Dashboard) !== null && _dashboard$c8y_Dashbo2 !== void 0 && _dashboard$c8y_Dashbo2.isFrozen);\n        const msg = isDashboardFrozen ? (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)(`You are about to delete the report \"{{ reportName }}\". Be aware that the report has a locked dashboard assigned. Do you want to proceed?`) : (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)(`You are about to delete the report \"{{ reportName }}\". Do you want to proceed?`);\n        yield _this37.modal.confirm((0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Delete report'), _this37.translateService.instant(msg, {\n          reportName: report.name\n        }), _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.Status.DANGER, {\n          ok: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Delete'),\n          cancel: (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.gettext)('Cancel')\n        });\n        yield _this37.contextDashboardService.delete(dashboard, false);\n        yield _this37.inventoryService.delete(report.id);\n        _this37.alertService.success(_this37.DELETED_SUCCESS_MSG);\n        if (report.c8y_IsNavigatorNode) {\n          _this37.reportDashboardService.removeNavigatorNode(report);\n        }\n        _this37.reload$.next();\n      } catch (ex) {\n        if (ex) {\n          throw new Error(`Something went wrong: ${ex}`);\n        }\n      }\n    })();\n  }\n  update(report) {\n    var _this38 = this;\n    return _asyncToGenerator(function* () {\n      report.c8y_IsNavigatorNode = report.c8y_IsNavigatorNode ? {} : null;\n      yield _this38.inventoryService.update(report);\n      report.c8y_IsNavigatorNode ? _this38.reportDashboardService.addReportNavigatorNode(report) : _this38.reportDashboardService.removeNavigatorNode(report);\n    })();\n  }\n}\nReportDashboardListComponent.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ReportDashboardListComponent,\n  deps: [{\n    token: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n  }, {\n    token: ContextDashboardService\n  }, {\n    token: ngx_bootstrap_modal__WEBPACK_IMPORTED_MODULE_2__.BsModalService\n  }, {\n    token: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__.TranslateService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ModalService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.AlertService\n  }, {\n    token: ReportDashboardService\n  }, {\n    token: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.Permissions\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Component\n});\nReportDashboardListComponent.cmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareComponent\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  type: ReportDashboardListComponent,\n  selector: \"c8y-report-dashboard-list\",\n  viewQueries: [{\n    propertyName: \"filter\",\n    first: true,\n    predicate: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.FilterInputComponent,\n    descendants: true\n  }],\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  template: \"<c8y-title>\\n  {{ 'Reports' | translate }}\\n</c8y-title>\\n\\n<c8y-action-bar-item [placement]=\\\"'left'\\\" itemClass=\\\"navbar-form\\\">\\n  <div class=\\\"input-group input-group-search\\\">\\n    <input\\n      class=\\\"form-control\\\"\\n      type=\\\"search\\\"\\n      [attr.aria-label]=\\\"'Filter' | translate\\\"\\n      placeholder=\\\"{{ 'Filter\\u2026' | translate }}\\\"\\n      [ngModel]=\\\"textFilter$ | async\\\"\\n      (ngModelChange)=\\\"textFilter$.next($event)\\\"\\n    />\\n    <span class=\\\"input-group-addon\\\">\\n      <i c8yIcon=\\\"search\\\" *ngIf=\\\"(textFilter$ | async).length === 0\\\"></i>\\n      <i\\n        class=\\\"text-muted\\\"\\n        c8yIcon=\\\"times\\\"\\n        *ngIf=\\\"(textFilter$ | async).length > 0\\\"\\n        (click)=\\\"textFilter$.next('')\\\"\\n        px-event=\\\"Clear filtering reports\\\"\\n      ></i>\\n    </span>\\n  </div>\\n</c8y-action-bar-item>\\n\\n<c8y-action-bar-item [placement]=\\\"'right'\\\">\\n  <button\\n    class=\\\"btn btn-link\\\"\\n    type=\\\"button\\\"\\n    title=\\\"{{ 'Add report' | translate }}\\\"\\n    [attr.data-cy]=\\\"'reports-add-report-action-bar-button'\\\"\\n    (click)=\\\"add()\\\"\\n    [disabled]=\\\"!canAddReport\\\"\\n  >\\n    <i c8yIcon=\\\"plus-circle\\\"></i>\\n    {{ 'Add report' | translate }}\\n  </button>\\n  <button\\n    class=\\\"btn btn-dot m-r-16\\\"\\n    type=\\\"button\\\"\\n    aria-label=\\\"{{ 'Info' | translate}}\\\"\\n    popover=\\\"{{ 'You don\\\\'t have permission to add reports' | translate }}\\\"\\n    triggers=\\\"focus\\\"\\n    placement=\\\"top\\\"\\n    container=\\\"body\\\"\\n    *ngIf=\\\"!canAddReport\\\"\\n  >\\n    <i [c8yIcon]=\\\"'info-circle'\\\" class=\\\"text-primary\\\"></i>\\n  </button>\\n</c8y-action-bar-item>\\n\\n<c8y-action-bar-item [placement]=\\\"'right'\\\">\\n  <button\\n    title=\\\"{{ 'Reload' | translate }}\\\"\\n    type=\\\"button\\\"\\n    class=\\\"btn btn-link\\\"\\n    (click)=\\\"loadReports()\\\"\\n  >\\n    <i [ngClass]=\\\"{ 'icon-spin': reloading }\\\" c8yIcon=\\\"refresh\\\"></i>\\n    {{ 'Reload' | translate }}\\n  </button>\\n</c8y-action-bar-item>\\n\\n<c8y-help src=\\\"/users-guide/cockpit/#reports\\\"></c8y-help>\\n\\n<c8y-list-group>\\n  <c8y-li\\n    class=\\\"page-sticky-header hidden-xs hidden-sm\\\"\\n    *ngIf=\\\"(reports$ | async)?.data.length > 0\\\"\\n  >\\n    <c8y-li-icon>\\n      <i class=\\\"p-l-24\\\"></i>\\n    </c8y-li-icon>\\n    <c8y-li-body class=\\\"content-flex-60\\\">\\n      <div class=\\\"col-3\\\">\\n        {{ 'Report' | translate }}\\n      </div>\\n      <div class=\\\"col-6\\\">\\n        {{ 'Description' | translate }}\\n      </div>\\n      <div class=\\\"col-2\\\">\\n        {{ 'Show in navigator' | translate }}\\n      </div>\\n    </c8y-li-body>\\n  </c8y-li>\\n\\n  <c8y-li *c8yFor=\\\"let report of reports$; let i = index; loadMore: 'auto'\\\">\\n    <c8y-li-icon [icon]=\\\"report.icon\\\"></c8y-li-icon>\\n    <c8y-li-body class=\\\"content-flex-60\\\">\\n      <div class=\\\"col-3\\\">\\n        <button\\n          class=\\\"btn-clean\\\"\\n          type=\\\"button\\\"\\n          title=\\\"{{ report.name }}\\\"\\n          routerLink=\\\"/reports/{{ report.id }}\\\"\\n        >\\n          <span class=\\\"text-truncate\\\">\\n            {{ report.name }}\\n          </span>\\n        </button>\\n      </div>\\n      <div class=\\\"col-6\\\">\\n        <p class=\\\"small text-truncate-wrap\\\">\\n          <em class=\\\"text-muted\\\" *ngIf=\\\"!report.description; else showDescription\\\">\\n            {{ 'No description available' | translate }}\\n          </em>\\n          <ng-template #showDescription>\\n            {{ report.description }}\\n          </ng-template>\\n        </p>\\n      </div>\\n      <div class=\\\"col-2 fit-h-20 m-t-xs-8\\\">\\n        <label class=\\\"c8y-switch c8y-switch--inline\\\" title=\\\"{{ 'Show in navigator' | translate }}\\\">\\n          <input\\n            [(ngModel)]=\\\"!!report.c8y_IsNavigatorNode\\\"\\n            type=\\\"checkbox\\\"\\n            (change)=\\\"update(report)\\\"\\n          />\\n          <span></span>\\n          <span class=\\\"visible-xs\\\">\\n            {{ 'Show in navigator' | translate }}\\n          </span>\\n        </label>\\n      </div>\\n      <div class=\\\"col-1 hidden-xs\\\">\\n        <button\\n          class=\\\"btn btn-dot btn-dot--danger showOnHover m-l-auto d-flex\\\"\\n          type=\\\"button\\\"\\n          [attr.aria-label]=\\\"'Remove report' | translate\\\"\\n          tooltip=\\\"{{ 'Remove report' | translate }}\\\"\\n          [delay]=\\\"500\\\"\\n          (click)=\\\"delete(report)\\\"\\n        >\\n          <i c8yIcon=\\\"minus-circle\\\"></i>\\n        </button>\\n      </div>\\n      <div class=\\\"visible-xs p-t-8 text-right\\\">\\n        <button\\n          class=\\\"btn btn-default btn-sm\\\"\\n          type=\\\"button\\\"\\n          title=\\\"{{ 'Remove report' | translate }}\\\"\\n          (click)=\\\"delete(report)\\\"\\n        >\\n          <i c8yIcon=\\\"delete\\\"></i>\\n          {{ 'Remove report' | translate }}\\n        </button>\\n      </div>\\n    </c8y-li-body>\\n  </c8y-li>\\n</c8y-list-group>\\n\\n<c8y-ui-empty-state\\n  *ngIf=\\\"(reports$ | async)?.data.length === 0\\\"\\n  [icon]=\\\"'c8y-reports'\\\"\\n  [title]=\\\"'There are no reports defined.' | translate\\\"\\n  [subtitle]=\\\"'Add a report first.' | translate\\\"\\n>\\n  <p>\\n    <button\\n      class=\\\"btn btn-primary\\\"\\n      type=\\\"button\\\"\\n      title=\\\"{{ 'Add report' | translate }}\\\"\\n      [attr.data-cy]=\\\"'reports-add-report-empty-state-button'\\\"\\n      [disabled]=\\\"!canAddReport\\\"\\n      (click)=\\\"add()\\\"\\n    >\\n      {{ 'Add report' | translate }}\\n    </button>\\n  </p>\\n  <p c8y-guide-docs>\\n    <small translate ngNonBindable>\\n      Find out more in the\\n      <a c8y-guide-href=\\\"users-guide/cockpit/#reports\\\">User guide`KEEP_ORIGINAL`</a>\\n      .\\n    </small>\\n  </p>\\n</c8y-ui-empty-state>\\n\",\n  dependencies: [{\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ActionBarItemComponent,\n    selector: \"c8y-action-bar-item\",\n    inputs: [\"placement\", \"priority\", \"itemClass\", \"injector\", \"groupId\"]\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.EmptyStateComponent,\n    selector: \"c8y-ui-empty-state\",\n    inputs: [\"icon\", \"title\", \"subtitle\", \"horizontal\"]\n  }, {\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.IconDirective,\n    selector: \"[c8yIcon]\",\n    inputs: [\"c8yIcon\"]\n  }, {\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.C8yTranslateDirective,\n    selector: \"[translate],[ngx-translate]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgClass,\n    selector: \"[ngClass]\",\n    inputs: [\"class\", \"ngClass\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgIf,\n    selector: \"[ngIf]\",\n    inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"]\n  }, {\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ForOfDirective,\n    selector: \"[c8yFor]\",\n    inputs: [\"c8yForOf\", \"c8yForLoadMore\", \"c8yForPipe\", \"c8yForNotFound\", \"c8yForMaxIterations\", \"c8yForLoadingTemplate\", \"c8yForLoadNextLabel\", \"c8yForRealtime\", \"c8yForRealtimeOptions\", \"c8yForComparator\", \"c8yForEnableVirtualScroll\", \"c8yForVirtualScrollElementSize\", \"c8yForVirtualScrollStrategy\", \"c8yForVirtualScrollContainerHeight\"],\n    outputs: [\"c8yForCount\"]\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.TitleComponent,\n    selector: \"c8y-title\",\n    inputs: [\"pageTitleUpdate\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.DefaultValueAccessor,\n    selector: \"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.CheckboxControlValueAccessor,\n    selector: \"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgControlStatus,\n    selector: \"[formControlName],[ngModel],[formControl]\"\n  }, {\n    kind: \"directive\",\n    type: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgModel,\n    selector: \"[ngModel]:not([formControlName]):not([formControl])\",\n    inputs: [\"name\", \"disabled\", \"ngModel\", \"ngModelOptions\"],\n    outputs: [\"ngModelChange\"],\n    exportAs: [\"ngModel\"]\n  }, {\n    kind: \"directive\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.GuideHrefDirective,\n    selector: \"[c8y-guide-href]\",\n    inputs: [\"c8y-guide-href\"]\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.GuideDocsComponent,\n    selector: \"[c8y-guide-docs]\"\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ListGroupComponent,\n    selector: \"c8y-list-group\"\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ListItemComponent,\n    selector: \"c8y-list-item, c8y-li\",\n    inputs: [\"active\", \"emptyActions\", \"collapsed\", \"selectable\"],\n    outputs: [\"collapsedChange\"]\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ListItemIconComponent,\n    selector: \"c8y-list-item-icon, c8y-li-icon\",\n    inputs: [\"icon\", \"status\"]\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ListItemBodyComponent,\n    selector: \"c8y-list-item-body, c8y-li-body\",\n    inputs: [\"body\"]\n  }, {\n    kind: \"component\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.HelpComponent,\n    selector: \"c8y-help\",\n    inputs: [\"src\", \"isCollapsed\", \"priority\", \"icon\"]\n  }, {\n    kind: \"directive\",\n    type: ngx_bootstrap_tooltip__WEBPACK_IMPORTED_MODULE_13__.TooltipDirective,\n    selector: \"[tooltip], [tooltipHtml]\",\n    inputs: [\"adaptivePosition\", \"tooltip\", \"placement\", \"triggers\", \"container\", \"containerClass\", \"boundariesElement\", \"isOpen\", \"isDisabled\", \"delay\", \"tooltipHtml\", \"tooltipPlacement\", \"tooltipIsOpen\", \"tooltipEnable\", \"tooltipAppendToBody\", \"tooltipAnimation\", \"tooltipClass\", \"tooltipContext\", \"tooltipPopupDelay\", \"tooltipFadeDuration\", \"tooltipTrigger\"],\n    outputs: [\"tooltipChange\", \"onShown\", \"onHidden\", \"tooltipStateChanged\"],\n    exportAs: [\"bs-tooltip\"]\n  }, {\n    kind: \"directive\",\n    type: _angular_router__WEBPACK_IMPORTED_MODULE_3__.RouterLink,\n    selector: \":not(a):not(area)[routerLink]\",\n    inputs: [\"queryParams\", \"fragment\", \"queryParamsHandling\", \"preserveFragment\", \"skipLocationChange\", \"replaceUrl\", \"state\", \"relativeTo\", \"routerLink\"]\n  }, {\n    kind: \"directive\",\n    type: ngx_bootstrap_popover__WEBPACK_IMPORTED_MODULE_11__.PopoverDirective,\n    selector: \"[popover]\",\n    inputs: [\"adaptivePosition\", \"boundariesElement\", \"popover\", \"popoverContext\", \"popoverTitle\", \"placement\", \"outsideClick\", \"triggers\", \"container\", \"containerClass\", \"isOpen\", \"delay\"],\n    outputs: [\"onShown\", \"onHidden\"],\n    exportAs: [\"bs-popover\"]\n  }, {\n    kind: \"pipe\",\n    type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.C8yTranslatePipe,\n    name: \"translate\"\n  }, {\n    kind: \"pipe\",\n    type: _angular_common__WEBPACK_IMPORTED_MODULE_10__.AsyncPipe,\n    name: \"async\"\n  }]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ReportDashboardListComponent,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,\n    args: [{\n      selector: 'c8y-report-dashboard-list',\n      template: \"<c8y-title>\\n  {{ 'Reports' | translate }}\\n</c8y-title>\\n\\n<c8y-action-bar-item [placement]=\\\"'left'\\\" itemClass=\\\"navbar-form\\\">\\n  <div class=\\\"input-group input-group-search\\\">\\n    <input\\n      class=\\\"form-control\\\"\\n      type=\\\"search\\\"\\n      [attr.aria-label]=\\\"'Filter' | translate\\\"\\n      placeholder=\\\"{{ 'Filter\\u2026' | translate }}\\\"\\n      [ngModel]=\\\"textFilter$ | async\\\"\\n      (ngModelChange)=\\\"textFilter$.next($event)\\\"\\n    />\\n    <span class=\\\"input-group-addon\\\">\\n      <i c8yIcon=\\\"search\\\" *ngIf=\\\"(textFilter$ | async).length === 0\\\"></i>\\n      <i\\n        class=\\\"text-muted\\\"\\n        c8yIcon=\\\"times\\\"\\n        *ngIf=\\\"(textFilter$ | async).length > 0\\\"\\n        (click)=\\\"textFilter$.next('')\\\"\\n        px-event=\\\"Clear filtering reports\\\"\\n      ></i>\\n    </span>\\n  </div>\\n</c8y-action-bar-item>\\n\\n<c8y-action-bar-item [placement]=\\\"'right'\\\">\\n  <button\\n    class=\\\"btn btn-link\\\"\\n    type=\\\"button\\\"\\n    title=\\\"{{ 'Add report' | translate }}\\\"\\n    [attr.data-cy]=\\\"'reports-add-report-action-bar-button'\\\"\\n    (click)=\\\"add()\\\"\\n    [disabled]=\\\"!canAddReport\\\"\\n  >\\n    <i c8yIcon=\\\"plus-circle\\\"></i>\\n    {{ 'Add report' | translate }}\\n  </button>\\n  <button\\n    class=\\\"btn btn-dot m-r-16\\\"\\n    type=\\\"button\\\"\\n    aria-label=\\\"{{ 'Info' | translate}}\\\"\\n    popover=\\\"{{ 'You don\\\\'t have permission to add reports' | translate }}\\\"\\n    triggers=\\\"focus\\\"\\n    placement=\\\"top\\\"\\n    container=\\\"body\\\"\\n    *ngIf=\\\"!canAddReport\\\"\\n  >\\n    <i [c8yIcon]=\\\"'info-circle'\\\" class=\\\"text-primary\\\"></i>\\n  </button>\\n</c8y-action-bar-item>\\n\\n<c8y-action-bar-item [placement]=\\\"'right'\\\">\\n  <button\\n    title=\\\"{{ 'Reload' | translate }}\\\"\\n    type=\\\"button\\\"\\n    class=\\\"btn btn-link\\\"\\n    (click)=\\\"loadReports()\\\"\\n  >\\n    <i [ngClass]=\\\"{ 'icon-spin': reloading }\\\" c8yIcon=\\\"refresh\\\"></i>\\n    {{ 'Reload' | translate }}\\n  </button>\\n</c8y-action-bar-item>\\n\\n<c8y-help src=\\\"/users-guide/cockpit/#reports\\\"></c8y-help>\\n\\n<c8y-list-group>\\n  <c8y-li\\n    class=\\\"page-sticky-header hidden-xs hidden-sm\\\"\\n    *ngIf=\\\"(reports$ | async)?.data.length > 0\\\"\\n  >\\n    <c8y-li-icon>\\n      <i class=\\\"p-l-24\\\"></i>\\n    </c8y-li-icon>\\n    <c8y-li-body class=\\\"content-flex-60\\\">\\n      <div class=\\\"col-3\\\">\\n        {{ 'Report' | translate }}\\n      </div>\\n      <div class=\\\"col-6\\\">\\n        {{ 'Description' | translate }}\\n      </div>\\n      <div class=\\\"col-2\\\">\\n        {{ 'Show in navigator' | translate }}\\n      </div>\\n    </c8y-li-body>\\n  </c8y-li>\\n\\n  <c8y-li *c8yFor=\\\"let report of reports$; let i = index; loadMore: 'auto'\\\">\\n    <c8y-li-icon [icon]=\\\"report.icon\\\"></c8y-li-icon>\\n    <c8y-li-body class=\\\"content-flex-60\\\">\\n      <div class=\\\"col-3\\\">\\n        <button\\n          class=\\\"btn-clean\\\"\\n          type=\\\"button\\\"\\n          title=\\\"{{ report.name }}\\\"\\n          routerLink=\\\"/reports/{{ report.id }}\\\"\\n        >\\n          <span class=\\\"text-truncate\\\">\\n            {{ report.name }}\\n          </span>\\n        </button>\\n      </div>\\n      <div class=\\\"col-6\\\">\\n        <p class=\\\"small text-truncate-wrap\\\">\\n          <em class=\\\"text-muted\\\" *ngIf=\\\"!report.description; else showDescription\\\">\\n            {{ 'No description available' | translate }}\\n          </em>\\n          <ng-template #showDescription>\\n            {{ report.description }}\\n          </ng-template>\\n        </p>\\n      </div>\\n      <div class=\\\"col-2 fit-h-20 m-t-xs-8\\\">\\n        <label class=\\\"c8y-switch c8y-switch--inline\\\" title=\\\"{{ 'Show in navigator' | translate }}\\\">\\n          <input\\n            [(ngModel)]=\\\"!!report.c8y_IsNavigatorNode\\\"\\n            type=\\\"checkbox\\\"\\n            (change)=\\\"update(report)\\\"\\n          />\\n          <span></span>\\n          <span class=\\\"visible-xs\\\">\\n            {{ 'Show in navigator' | translate }}\\n          </span>\\n        </label>\\n      </div>\\n      <div class=\\\"col-1 hidden-xs\\\">\\n        <button\\n          class=\\\"btn btn-dot btn-dot--danger showOnHover m-l-auto d-flex\\\"\\n          type=\\\"button\\\"\\n          [attr.aria-label]=\\\"'Remove report' | translate\\\"\\n          tooltip=\\\"{{ 'Remove report' | translate }}\\\"\\n          [delay]=\\\"500\\\"\\n          (click)=\\\"delete(report)\\\"\\n        >\\n          <i c8yIcon=\\\"minus-circle\\\"></i>\\n        </button>\\n      </div>\\n      <div class=\\\"visible-xs p-t-8 text-right\\\">\\n        <button\\n          class=\\\"btn btn-default btn-sm\\\"\\n          type=\\\"button\\\"\\n          title=\\\"{{ 'Remove report' | translate }}\\\"\\n          (click)=\\\"delete(report)\\\"\\n        >\\n          <i c8yIcon=\\\"delete\\\"></i>\\n          {{ 'Remove report' | translate }}\\n        </button>\\n      </div>\\n    </c8y-li-body>\\n  </c8y-li>\\n</c8y-list-group>\\n\\n<c8y-ui-empty-state\\n  *ngIf=\\\"(reports$ | async)?.data.length === 0\\\"\\n  [icon]=\\\"'c8y-reports'\\\"\\n  [title]=\\\"'There are no reports defined.' | translate\\\"\\n  [subtitle]=\\\"'Add a report first.' | translate\\\"\\n>\\n  <p>\\n    <button\\n      class=\\\"btn btn-primary\\\"\\n      type=\\\"button\\\"\\n      title=\\\"{{ 'Add report' | translate }}\\\"\\n      [attr.data-cy]=\\\"'reports-add-report-empty-state-button'\\\"\\n      [disabled]=\\\"!canAddReport\\\"\\n      (click)=\\\"add()\\\"\\n    >\\n      {{ 'Add report' | translate }}\\n    </button>\\n  </p>\\n  <p c8y-guide-docs>\\n    <small translate ngNonBindable>\\n      Find out more in the\\n      <a c8y-guide-href=\\\"users-guide/cockpit/#reports\\\">User guide`KEEP_ORIGINAL`</a>\\n      .\\n    </small>\\n  </p>\\n</c8y-ui-empty-state>\\n\"\n    }]\n  }],\n  ctorParameters: function () {\n    return [{\n      type: _c8y_client__WEBPACK_IMPORTED_MODULE_4__.InventoryService\n    }, {\n      type: ContextDashboardService\n    }, {\n      type: ngx_bootstrap_modal__WEBPACK_IMPORTED_MODULE_2__.BsModalService\n    }, {\n      type: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__.TranslateService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ModalService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.AlertService\n    }, {\n      type: ReportDashboardService\n    }, {\n      type: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.Permissions\n    }];\n  },\n  propDecorators: {\n    filter: [{\n      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewChild,\n      args: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.FilterInputComponent, {\n        static: false\n      }]\n    }]\n  }\n});\nclass ReportDashboardGuard {\n  constructor(contextDashboardService) {\n    this.contextDashboardService = contextDashboardService;\n  }\n  canActivate(route) {\n    const reportId = route.data.contextData && route.data.contextData.id;\n    return (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.from)(this.contextDashboardService.activateDashboards(route, [ContextDashboardType.Named])).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.tap)(res => {\n      return Array.isArray(res) && res.length === 0 ? this.createDashboardIfNotExist(reportId) : (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(true);\n    }));\n  }\n  createDashboardIfNotExist(reportId) {\n    const dashboardCfg = {};\n    return this.contextDashboardService.create(dashboardCfg, undefined, `report_${reportId}`).then(() => true);\n  }\n}\nReportDashboardGuard.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ReportDashboardGuard,\n  deps: [{\n    token: ContextDashboardService\n  }],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].Injectable\n});\nReportDashboardGuard.prov = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareInjectable\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ReportDashboardGuard\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ReportDashboardGuard,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable\n  }],\n  ctorParameters: function () {\n    return [{\n      type: ContextDashboardService\n    }];\n  }\n});\nclass ReportDashboardModule {}\nReportDashboardModule.fac = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareFactory\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ReportDashboardModule,\n  deps: [],\n  target: _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"FactoryTarget\"].NgModule\n});\nReportDashboardModule.mod = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareNgModule\"]({\n  minVersion: \"14.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ReportDashboardModule,\n  declarations: [ReportDashboardListComponent],\n  imports: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.CoreModule, ContextDashboardModule, ngx_bootstrap_tooltip__WEBPACK_IMPORTED_MODULE_13__.TooltipModule, _angular_router__WEBPACK_IMPORTED_MODULE_3__.RouterModule, ngx_bootstrap_popover__WEBPACK_IMPORTED_MODULE_11__.PopoverModule]\n});\nReportDashboardModule.inj = _angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareInjector\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ReportDashboardModule,\n  providers: [ReportDashboardGuard, ReportDashboardService, (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.hookRoute)({\n    path: 'dashboard/:dashboardId',\n    component: ContextDashboardComponent,\n    canActivate: [ReportDashboardGuard],\n    context: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Report\n  }), (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.hookNavigator)(ReportDashboardNavigationFactory)],\n  imports: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.CoreModule, ContextDashboardModule, ngx_bootstrap_tooltip__WEBPACK_IMPORTED_MODULE_13__.TooltipModule.forRoot(), _angular_router__WEBPACK_IMPORTED_MODULE_3__.RouterModule.forChild([{\n    path: 'reports',\n    component: ReportDashboardListComponent\n  }]), ngx_bootstrap_popover__WEBPACK_IMPORTED_MODULE_11__.PopoverModule]\n});\n_angular_core__WEBPACK_IMPORTED_MODULE_0__[\"ngDeclareClassMetadata\"]({\n  minVersion: \"12.0.0\",\n  version: \"14.0.6\",\n  ngImport: /*#__PURE__*/ (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache || (_angular_core__WEBPACK_IMPORTED_MODULE_0___namespace_cache = __webpack_require__.t(_angular_core__WEBPACK_IMPORTED_MODULE_0__, 2))),\n  type: ReportDashboardModule,\n  decorators: [{\n    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,\n    args: [{\n      declarations: [ReportDashboardListComponent],\n      entryComponents: [],\n      imports: [_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.CoreModule, ContextDashboardModule, ngx_bootstrap_tooltip__WEBPACK_IMPORTED_MODULE_13__.TooltipModule.forRoot(), _angular_router__WEBPACK_IMPORTED_MODULE_3__.RouterModule.forChild([{\n        path: 'reports',\n        component: ReportDashboardListComponent\n      }]), ngx_bootstrap_popover__WEBPACK_IMPORTED_MODULE_11__.PopoverModule],\n      providers: [ReportDashboardGuard, ReportDashboardService, (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.hookRoute)({\n        path: 'dashboard/:dashboardId',\n        component: ContextDashboardComponent,\n        canActivate: [ReportDashboardGuard],\n        context: _c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.ViewContext.Report\n      }), (0,_c8y_ngx_components__WEBPACK_IMPORTED_MODULE_1__.hookNavigator)(ReportDashboardNavigationFactory)]\n    }]\n  }]\n});\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGM4eS9uZ3gtY29tcG9uZW50cy9mZXNtMjAyMC9jOHktbmd4LWNvbXBvbmVudHMtY29udGV4dC1kYXNoYm9hcmQubWpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFVQTtBQStHQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUdBOzs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQVlBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZMQTtBQW1CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTNCQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBR0E7QUFDQTs7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQU1BO0FBQUE7O0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBOztBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBOztBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7OztBQUVBOztBQUdBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBRUE7O0FBR0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBOztBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7QUFHQTtBQUNBOztBQUdBO0FBQ0E7O0FBT0E7QUFDQTs7QUFPQTtBQUNBOztBQU9BO0FBQ0E7O0FBT0E7QUFDQTs7QUFPQTtBQUNBOztBQUtBO0FBQ0E7QUFHQTs7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUtBO0FBQ0E7QUFFQTtBQUlBO0FBV0E7O0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7QUFHQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBS0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUtBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFFQTs7QUFTQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUtBOztBQUtBO0FBQ0E7O0FBTUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7QUFHQTtBQUNBOztBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBOztBQUdBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7Ozs7Ozs7QUF0aUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRkE7Ozs7O0FBRUE7QUFBQTtBQUhBO0FBQUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNuREE7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBN0NBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7O0FBQUE7QUFBQTs7Ozs7QUFBQTtBQUFBO0FBREE7Ozs7Ozs7Ozs7QUNDQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUxBOztBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7OztBQXZDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBOzs7OztBQUNBO0FBQUE7QUFEQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7O0FDQ0E7QUFMQTtBQU9BO0FBRUE7QUFNQTtBQUVBO0FBR0E7QUFHQTtBQW9CQTtBQWxCQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBcENBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUNUQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QURPQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7O0FBRUE7QUFBQTtBQUxBOztBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7QUFJQTtBQURBOztBQUdBO0FBREE7O0FBR0E7QUFEQTs7QUFHQTtBQURBOztBQUdBO0FBREE7O0FBR0E7QUFEQTs7QUFJQTtBQURBOztBQUlBO0FBREE7Ozs7QUVwQkE7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBSUE7Ozs7OztBQVRBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQ3lDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7QUR6Q0E7QUFBQTtBQUpBOztBQUNBO0FBQUE7QUFBQTs7O0FBS0E7QUFEQTs7QUFPQTtBQURBOzs7O0FFQUE7QUF1QkE7QUFDQTtBQUNBO0FBVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFuQkE7OztBQUdBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBY0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTs7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFsRkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FDZUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7OztBRGZBO0FBQUE7QUFKQTs7QUFDQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7QUFTQTtBQURBOztBQVdBO0FBQUE7Ozs7QUVIQTtBQXdDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBYUE7QUFDQTs7QUF2QkE7QUFDQTtBQUdBO0FBQUE7QUFBQTs7QUFzQkE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFLQTs7QUFHQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBS0E7OztBQXBKQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUEwQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQTFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FDMFFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7QUQxUUE7QUFBQTtBQUpBOztBQUNBO0FBQUE7QUFBQTs7Ozs7Ozs7QUE2Q0E7QUFBQTs7Ozs7Ozs7Ozs7OztBQXpDQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7O0FFUEE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBOztBQUdBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBOzs7QUFFQTs7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUFBOzs7Ozs7O0FBOURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUZBOzs7OztBQUVBO0FBQUE7QUFIQTtBQUFBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUNYQTtBQUNBO0FBQUE7O0FBRUE7QUFDQTs7Ozs7OztBQUpBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FDUUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7OztBRFJBO0FBQUE7QUFMQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7QUVIQTs7QUFFQTtBQUNBO0FBcUJBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3REQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBOztBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBSUE7QUFHQTs7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOztBQUdBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7O0FBOURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFPQTtBQUFBO0FBQUE7QUFBQTtBQVBBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUZBOzs7OztBQUVBO0FBQUE7QUFIQTtBQUFBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztBQU9BOztBQUNBO0FBQUE7Ozs7O0FDS0E7QUE0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTlDQTtBQUlBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQWFBO0FBQ0E7QUFDQTtBQUNBOztBQVhBO0FBQ0E7O0FBR0E7QUFBQTtBQUNBOztBQW1CQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBOztBQUdBO0FBQ0E7O0FBUUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTs7QUFJQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7O0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTs7QUFHQTtBQUFBO0FBQ0E7QUFFQTtBQUdBO0FBRUE7QUFLQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFLQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFLQTtBQUtBO0FBRUE7QUFBQTtBQUFBO0FBQUE7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBM1JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FDOFNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7O0FEOVNBO0FBQUE7QUFKQTs7QUFDQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7O0FBNEJBO0FBREE7QUFBQTtBQUFBO0FBQUE7Ozs7O0FFVkE7Ozs7QUFJQTtBQVdBO0FBbUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE1Q0E7QUFJQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFJQTtBQUdBO0FBRUE7O0FBd0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOztBQUdBOzs7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7O0FBR0E7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7O0FBR0E7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBR0E7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBOztBQUdBO0FBQUE7QUFDQTs7QUFHQTs7O0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBOztBQUdBOzs7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7O0FBR0E7Ozs7QUFJQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBR0E7Ozs7QUFJQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTs7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBR0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7OztBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBR0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOztBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBOzs7QUE1ZUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXlDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBekNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQ0FBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7OztBREFBO0FBQUE7QUFWQTtBQUNBO0FBQUE7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7QUEyQ0E7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXZDQTtBQURBOztBQUdBO0FBREE7O0FBR0E7QUFEQTs7QUFHQTtBQURBOztBQUdBO0FBREE7O0FBR0E7QUFEQTs7QUFHQTtBQURBOztBQUdBO0FBREE7O0FBR0E7QUFEQTs7QUFHQTtBQURBOztBQUdBO0FBREE7O0FBSUE7QUFEQTtBQUFBOzs7O0FFOURBO0FBS0E7QUFJQTtBQUhBO0FBR0E7QUFSQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7OztBQXhDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFRQTtBQUFBO0FBQUE7QUFBQTtBQVJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FDSEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7O0FER0E7QUFBQTtBQUpBOztBQUNBO0FBQUE7QUFBQTs7Ozs7Ozs7QUFVQTs7QUFDQTtBQUFBOzs7OztBRUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BOztBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTs7Ozs7OztBQXpDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBWkE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7QUFVQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7OztBQUVBO0FBQUE7QUFkQTtBQUFBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztBQVVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7O0FDWkE7QUFFQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7OztBQXZCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFGQTs7Ozs7QUFFQTtBQUFBO0FBSEE7QUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FDREE7QUFDQTtBQUFBOztBQUVBO0FBQ0E7Ozs7Ozs7QUFKQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7O0FBQUE7QUFBQTs7Ozs7QUFBQTtBQUFBO0FBREE7Ozs7Ozs7O0FDQ0E7QUFDQTtBQUFBOztBQUVBO0FBQ0E7Ozs7Ozs7QUFKQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7O0FBQUE7QUFBQTs7Ozs7QUFBQTtBQUFBO0FBREE7Ozs7Ozs7O0FDc0JBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBbUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBR0E7Ozs7Ozs7QUFoQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUF4QkE7QUFNQTtBQUdBO0FBZUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVJBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFmQTs7Ozs7QUFpQkE7QUFBQTtBQWpDQTtBQUFBO0FBQ0E7QUFVQTtBQU9BO0FBQ0E7QUFNQTtBQUdBO0FBQ0E7QUFDQTtBQUVBOzs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7O0FBVkE7QUFBQTtBQUFBO0FBQUE7Ozs7O0FBQUE7QUFBQTtBQUhBO0FBdEJBOzs7OztBQXlCQTtBQUFBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBckJBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBOzs7OztBQUtBO0FBQUE7QUEzQkE7QUFBQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7O0FDckJBO0FBOFBBO0FBQ0E7QUFDQTtBQUNBO0FBOVBBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUNBO0FBV0E7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7O0FBSUE7QUFDQTs7Ozs7OztBQTlSQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FDRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7QURGQTtBQUFBO0FBSkE7O0FBQ0E7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7QUVXQTs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWZBO0FBQ0E7QUFjQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBWEE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7Ozs7O0FBY0E7QUFBQTtBQWhCQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQ2JBO0FBc0JBO0FBQUE7QUFyQkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFLQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7OztBQTdCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQ0NBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7OztBRERBO0FBQUE7QUFKQTs7QUFDQTtBQUFBO0FBQUE7Ozs7Ozs7O0FFYUE7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFYQTtBQUNBO0FBVUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVJBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBUkE7Ozs7O0FBVUE7QUFBQTtBQVpBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTs7O0FDTUE7QUFxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBM0JBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBOztBQWFBO0FBQ0E7O0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBOztBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOztBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBRUE7QUFNQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7OztBQW5JQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUMySkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7QUQ1SkE7QUFBQTtBQUpBOztBQUNBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7QUVmQTtBQUNBO0FBQUE7O0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFHQTs7QUFJQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFsQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7OztBQUFBO0FBQUE7Ozs7O0FBQUE7QUFBQTtBQURBOzs7Ozs7OztBQ2dDQTs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7QUFBQTtBQUFBO0FBMUJBO0FBWUE7QUFjQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBWkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFoQkE7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBY0E7QUFBQTtBQTNCQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7Ozs7QUN2Q0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdW11bG9jaXR5LWFzc2V0LW92ZXJ2aWV3LXdpZGdldC8uLi8uLi9jb250ZXh0LWRhc2hib2FyZC9jb250ZXh0LWRhc2hib2FyZC5tb2RlbC50cz9kNjU5Iiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2NvbnRleHQtZGFzaGJvYXJkL2NvbnRleHQtZGFzaGJvYXJkLnNlcnZpY2UudHM/MDBkYyIsIndlYnBhY2s6Ly9jdW11bG9jaXR5LWFzc2V0LW92ZXJ2aWV3LXdpZGdldC8uLi8uLi9jb250ZXh0LWRhc2hib2FyZC9yZXBvcnQtZGFzaGJvYXJkL3JlcG9ydC1kYXNoYm9hcmQuc2VydmljZS50cz85NWMyIiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2NvbnRleHQtZGFzaGJvYXJkL3JlcG9ydC1kYXNoYm9hcmQvcmVwb3J0LWRhc2hib2FyZC1uYXZpZ2F0aW9uLmZhY3RvcnkudHM/NzgwMCIsIndlYnBhY2s6Ly9jdW11bG9jaXR5LWFzc2V0LW92ZXJ2aWV3LXdpZGdldC8uLi8uLi9jb250ZXh0LWRhc2hib2FyZC9hcHBlYXJhbmNlLXNldHRpbmdzLmNvbXBvbmVudC50cz82ODhmIiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2NvbnRleHQtZGFzaGJvYXJkL2FwcGVhcmFuY2Utc2V0dGluZ3MuY29tcG9uZW50Lmh0bWw/MzMyNiIsIndlYnBhY2s6Ly9jdW11bG9jaXR5LWFzc2V0LW92ZXJ2aWV3LXdpZGdldC8uLi8uLi9jb250ZXh0LWRhc2hib2FyZC93aWRnZXQtcHJldmlldy5jb21wb25lbnQudHM/MzRhMyIsIndlYnBhY2s6Ly9jdW11bG9jaXR5LWFzc2V0LW92ZXJ2aWV3LXdpZGdldC8uLi8uLi9jb250ZXh0LWRhc2hib2FyZC93aWRnZXQtcHJldmlldy5jb21wb25lbnQuaHRtbD9jZDJmIiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2NvbnRleHQtZGFzaGJvYXJkL2Rhc2hib2FyZC1hdmFpbGFiaWxpdHkuY29tcG9uZW50LnRzPzFhMDQiLCJ3ZWJwYWNrOi8vY3VtdWxvY2l0eS1hc3NldC1vdmVydmlldy13aWRnZXQvLi4vLi4vY29udGV4dC1kYXNoYm9hcmQvZGFzaGJvYXJkLWF2YWlsYWJpbGl0eS5jb21wb25lbnQuaHRtbD81NTA1Iiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2NvbnRleHQtZGFzaGJvYXJkL2Rhc2hib2FyZC1kZXRhaWwuY29tcG9uZW50LnRzPzUwMjEiLCJ3ZWJwYWNrOi8vY3VtdWxvY2l0eS1hc3NldC1vdmVydmlldy13aWRnZXQvLi4vLi4vY29udGV4dC1kYXNoYm9hcmQvZGFzaGJvYXJkLWRldGFpbC5jb21wb25lbnQuaHRtbD9jYmEyIiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2NvbnRleHQtZGFzaGJvYXJkL2FkZC1kYXNoYm9hcmQuZmFjdG9yeS50cz8zNmIxIiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2NvbnRleHQtZGFzaGJvYXJkL2FkZC1kYXNoYm9hcmQuY29tcG9uZW50LnRzP2MwYzIiLCJ3ZWJwYWNrOi8vY3VtdWxvY2l0eS1hc3NldC1vdmVydmlldy13aWRnZXQvLi4vLi4vY29udGV4dC1kYXNoYm9hcmQvYWRkLWRhc2hib2FyZC5jb21wb25lbnQuaHRtbD8zZDJkIiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2NvbnRleHQtZGFzaGJvYXJkL2NvY2twaXQtZGFzaGJvYXJkL2NvY2twaXQtZGFzaGJvYXJkLm1vZGVsLnRzPzQ5NmMiLCJ3ZWJwYWNrOi8vY3VtdWxvY2l0eS1hc3NldC1vdmVydmlldy13aWRnZXQvLi4vLi4vY29udGV4dC1kYXNoYm9hcmQvd2lkZ2V0LnNlcnZpY2UudHM/MTkyMCIsIndlYnBhY2s6Ly9jdW11bG9jaXR5LWFzc2V0LW92ZXJ2aWV3LXdpZGdldC8uLi8uLi9jb250ZXh0LWRhc2hib2FyZC93aWRnZXQtY29uZmlnLmNvbXBvbmVudC50cz9jOTVlIiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2NvbnRleHQtZGFzaGJvYXJkL3dpZGdldC1jb25maWcuY29tcG9uZW50Lmh0bWw/ZTY1OSIsIndlYnBhY2s6Ly9jdW11bG9jaXR5LWFzc2V0LW92ZXJ2aWV3LXdpZGdldC8uLi8uLi9jb250ZXh0LWRhc2hib2FyZC9jb250ZXh0LWRhc2hib2FyZC5jb21wb25lbnQudHM/MWU1NSIsIndlYnBhY2s6Ly9jdW11bG9jaXR5LWFzc2V0LW92ZXJ2aWV3LXdpZGdldC8uLi8uLi9jb250ZXh0LWRhc2hib2FyZC9jb250ZXh0LWRhc2hib2FyZC5jb21wb25lbnQuaHRtbD82YmI3Iiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2NvbnRleHQtZGFzaGJvYXJkL2NvY2twaXQtZGFzaGJvYXJkL2NvY2twaXQtZGFzaGJvYXJkLmNvbXBvbmVudC50cz9hNThiIiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2NvbnRleHQtZGFzaGJvYXJkL2NvY2twaXQtZGFzaGJvYXJkL2NvY2twaXQtZGFzaGJvYXJkLmNvbXBvbmVudC5odG1sPzExNTEiLCJ3ZWJwYWNrOi8vY3VtdWxvY2l0eS1hc3NldC1vdmVydmlldy13aWRnZXQvLi4vLi4vY29udGV4dC1kYXNoYm9hcmQvcGFzdGUtZGFzaGJvYXJkLWFjdGlvbi5jb21wb25lbnQudHM/YzU1YyIsIndlYnBhY2s6Ly9jdW11bG9jaXR5LWFzc2V0LW92ZXJ2aWV3LXdpZGdldC8uLi8uLi9jb250ZXh0LWRhc2hib2FyZC9kYXNoYm9hcmQtYWN0aW9uLWJhci5mYWN0b3J5LnRzP2I1ZjgiLCJ3ZWJwYWNrOi8vY3VtdWxvY2l0eS1hc3NldC1vdmVydmlldy13aWRnZXQvLi4vLi4vY29udGV4dC1kYXNoYm9hcmQvZGV2aWNlLWRhc2hib2FyZC5ndWFyZC50cz81ZTRjIiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2NvbnRleHQtZGFzaGJvYXJkL2dyb3VwLWRhc2hib2FyZC5ndWFyZC50cz8xN2MzIiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2NvbnRleHQtZGFzaGJvYXJkL2NvbnRleHQtZGFzaGJvYXJkLm1vZHVsZS50cz8wY2E1Iiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2NvbnRleHQtZGFzaGJvYXJkL2NvY2twaXQtZGFzaGJvYXJkL2NvY2twaXQtZGFzaGJvYXJkLm1vZHVsZS50cz9iMjRiIiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2NvbnRleHQtZGFzaGJvYXJkL2RldmljZS1pbmZvLWRhc2hib2FyZC9kZXZpY2UtaW5mby1kYXNoYm9hcmQuY29tcG9uZW50LnRzP2U5M2MiLCJ3ZWJwYWNrOi8vY3VtdWxvY2l0eS1hc3NldC1vdmVydmlldy13aWRnZXQvLi4vLi4vY29udGV4dC1kYXNoYm9hcmQvZGV2aWNlLWluZm8tZGFzaGJvYXJkL2RldmljZS1pbmZvLWRhc2hib2FyZC5jb21wb25lbnQuaHRtbD9hYTdlIiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2NvbnRleHQtZGFzaGJvYXJkL2RldmljZS1pbmZvLWRhc2hib2FyZC9kZXZpY2UtaW5mby1kYXNoYm9hcmQubW9kdWxlLnRzPzkwYzgiLCJ3ZWJwYWNrOi8vY3VtdWxvY2l0eS1hc3NldC1vdmVydmlldy13aWRnZXQvLi4vLi4vY29udGV4dC1kYXNoYm9hcmQvZGV2aWNlLW1hbmFnZW1lbnQtaG9tZS1kYXNoYm9hcmQvZGV2aWNlLW1hbmFnZW1lbnQtaG9tZS1kYXNoYm9hcmQuY29tcG9uZW50LnRzPzBjMzUiLCJ3ZWJwYWNrOi8vY3VtdWxvY2l0eS1hc3NldC1vdmVydmlldy13aWRnZXQvLi4vLi4vY29udGV4dC1kYXNoYm9hcmQvZGV2aWNlLW1hbmFnZW1lbnQtaG9tZS1kYXNoYm9hcmQvZGV2aWNlLW1hbmFnZW1lbnQtaG9tZS1kYXNoYm9hcmQuY29tcG9uZW50Lmh0bWw/MzEzOCIsIndlYnBhY2s6Ly9jdW11bG9jaXR5LWFzc2V0LW92ZXJ2aWV3LXdpZGdldC8uLi8uLi9jb250ZXh0LWRhc2hib2FyZC9kZXZpY2UtbWFuYWdlbWVudC1ob21lLWRhc2hib2FyZC9kZXZpY2UtbWFuYWdlbWVudC1ob21lLWRhc2hib2FyZC5tb2R1bGUudHM/YzMwYiIsIndlYnBhY2s6Ly9jdW11bG9jaXR5LWFzc2V0LW92ZXJ2aWV3LXdpZGdldC8uLi8uLi9jb250ZXh0LWRhc2hib2FyZC9yZXBvcnQtZGFzaGJvYXJkL3JlcG9ydC1kYXNoYm9hcmQtbGlzdC5jb21wb25lbnQudHM/YmJlZCIsIndlYnBhY2s6Ly9jdW11bG9jaXR5LWFzc2V0LW92ZXJ2aWV3LXdpZGdldC8uLi8uLi9jb250ZXh0LWRhc2hib2FyZC9yZXBvcnQtZGFzaGJvYXJkL3JlcG9ydC1kYXNoYm9hcmQtbGlzdC5jb21wb25lbnQuaHRtbD85YmJlIiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2NvbnRleHQtZGFzaGJvYXJkL3JlcG9ydC1kYXNoYm9hcmQvcmVwb3J0LWRhc2hib2FyZC5ndWFyZC50cz9kMTdmIiwid2VicGFjazovL2N1bXVsb2NpdHktYXNzZXQtb3ZlcnZpZXctd2lkZ2V0Ly4uLy4uL2NvbnRleHQtZGFzaGJvYXJkL3JlcG9ydC1kYXNoYm9hcmQvcmVwb3J0LWRhc2hib2FyZC5tb2R1bGUudHM/NmRhZSIsIndlYnBhY2s6Ly9jdW11bG9jaXR5LWFzc2V0LW92ZXJ2aWV3LXdpZGdldC8uLi8uLi9jb250ZXh0LWRhc2hib2FyZC9jOHktbmd4LWNvbXBvbmVudHMtY29udGV4dC1kYXNoYm9hcmQudHM/OGRhNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3Rpb25Ub2tlbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSU1hbmFnZWRPYmplY3QgfSBmcm9tICdAYzh5L2NsaWVudCc7XG5pbXBvcnQge1xuICBXaWRnZXQsXG4gIER5bmFtaWNDb21wb25lbnREZWZpbml0aW9uLFxuICBSb3V0ZSxcbiAgZ2V0dGV4dCxcbiAgVmlld0NvbnRleHRcbn0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5cbmV4cG9ydCBjb25zdCBDT05URVhUX0RBU0hCT0FSRF9DT05GSUcgPSBuZXcgSW5qZWN0aW9uVG9rZW48YW55PignQ29udGV4dERhc2hib2FyZENvbmZpZycpO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbnRleHREYXNoYm9hcmRDb25maWcge1xuICB3aWRnZXRGaWx0ZXI/OiAoY29tcG9uZW50OiBEeW5hbWljQ29tcG9uZW50RGVmaW5pdGlvbikgPT4gYm9vbGVhbjtcbiAgYWxsb3dGdWxsc2NyZWVuPzogYm9vbGVhbjtcbiAgcm91dGVzPzogUm91dGVbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb250ZXh0V2lkZ2V0Q29uZmlnIHtcbiAgLyoqXG4gICAqIFNldHRpbmdzIHRoYXQgZGVmaW5lIGhvdyB0aGUgZGVmYXVsdCBjb25maWcgY29tcG9uZW50IGlzXG4gICAqIGRpc3BsYXllZC4gVGhleSBhcmUgc3RhdGljIGFuZCB3aWxsIG5vdCBiZSBzYXZlZC5cbiAgICovXG4gIHNldHRpbmdzPzoge1xuICAgIC8qKlxuICAgICAqIEF2b2lkcyB0byBzaG93IHRoZSB3aWRnZXQgaW4gdGhlIFwiYWRkIHdpZGdldFwiIG1vZGFsXG4gICAgICovXG4gICAgbm9OZXdXaWRnZXRzPzogYm9vbGVhbjtcbiAgICBuZzE/OiB7XG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhpcyB0byBmYWxzZSwgdG8gaGlkZSB0aGUgZGV2aWNlL2dyb3VwIHNlbGVjdG9yXG4gICAgICAgICAqIEBkZXByZWNhdGVkOiBUaGlzIGlzIGN1cnJlbnRseSBvbmx5IGltcGxlbWVudGVkIGluIGFuZ3VsYXJqcyBhbmQgd2lsbCBiZSBleHBvcnRlZCB0byBhIHNlcGFyYXRlIGNvbXBvbmVudC5cbiAgICAgICAgICovXG4gICAgICAgIG5vRGV2aWNlVGFyZ2V0PzogYm9vbGVhbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0aGlzIHRvIGZhbHNlIHRvIG9ubHkgc2VsZWN0IGRldmljZXNcbiAgICAgICAgICogQGRlcHJlY2F0ZWQ6IFRoaXMgaXMgY3VycmVudGx5IG9ubHkgaW1wbGVtZW50ZWQgaW4gYW5ndWxhcmpzIGFuZCB3aWxsIGJlIGV4cG9ydGVkIHRvIGEgc2VwYXJhdGUgY29tcG9uZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZ3JvdXBzU2VsZWN0YWJsZT86IGJvb2xlYW47XG4gICAgICB9O1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgY29udGV4dCBmcm9tIHRoZSBkZXZpY2Ugc2VsZWN0b3IuXG4gICAgICAgKi9cbiAgICAgIGNvbnRleHQ/OiB7XG4gICAgICAgIGlkPzogc3RyaW5nO1xuICAgICAgICBuYW1lPzogc3RyaW5nO1xuICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZGl0aW9uYWwgc2V0dGluZ3MgcGFzc2VkIHRvIHRoZSBjb25maWd1cmF0aW9uIGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBba2V5OiBzdHJpbmddOiBhbnk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHRpbmdzIHRoYXQgYXJlIGluamVjdGVkIGluIGFueSBkaXNwbGF5aW5nIGNvbXBvbmVudC5cbiAgICovXG4gIGRpc3BsYXlTZXR0aW5ncz86IHtcbiAgICAvKipcbiAgICAgKiBJZiBlbmFibGVkIHRoZSB3aWRnZXQgaXMgYm91bmQgdG8gdGhlIGdsb2JhbCB0aW1lIGNvbnRleHQuIFlvdSBjYW4gbGlzdGVuIHRvIG5nT25DaGFuZ2VzKCkgY2hhbmdlIGRldGVjdGlvblxuICAgICAqIHRvIHJlYWN0IHRvIGNoYW5nZXMgb24gdGhlIGNvbnRleHQuIFdoZW4gYSBtb3JlIGRldGFpbGVkIGNvbmZpZ3VyYXRpb24gaXMgbmVlZGVkLCB1c2UgdGhlIDxjOHktd2lkZ2V0LXRpbWUtY29udGV4dD5cbiAgICAgKiBjb21wb25lbnQgaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnbG9iYWxUaW1lQ29udGV4dD86IGJvb2xlYW47XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoYXRldmVyIHNob3VsZCBiZSBhZGRlZCB0byB0aGUgY29uZmlndXJhdGlvbiB3aGVuIGEgd2lkZ2V0IGlzIGNyZWF0ZWQuXG4gICAqL1xuICBjb25maWc/OiB7XG4gICAgLyoqXG4gICAgICogQW55IG90aGVyIGluZm9ybWF0aW9uIHRoYXQgc2hvdWxkIGJlIHN0b3JlZCBoZXJlLlxuICAgICAqL1xuICAgIFtrZXk6IHN0cmluZ106IGFueTtcbiAgfTtcbiAgLyoqXG4gICAqIFRoZSBzZWxlY3RlZCBkZXZpY2Ugb3IgZ3JvdXAgKG5vdGU6IG5hbWluZyBpcyBpbmNvbnNpc3RlbnQgYXMgZ3JvdXAgd2FzIGFkZGVkIGxhdGVyXG4gICAqIGJ1dCBtdXN0IHN0YXkgZm9yIGFscmVhZHkgaW1wbGVtZW50ZWQgd2lkZ2V0cylcbiAgICovXG4gIGRldmljZT86IHtcbiAgICBpZD86IHN0cmluZyB8IG51bWJlcjtcbiAgICBuYW1lPzogc3RyaW5nO1xuICAgIFtrZXk6IHN0cmluZ106IGFueTtcbiAgfTtcbiAgLyoqXG4gICAqIEFueSBvdGhlciBpbmZvcm1hdGlvbiB0aGF0IHNob3VsZCBiZSBzdG9yZWQgaGVyZS5cbiAgICovXG4gIFtrZXk6IHN0cmluZ106IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb250ZXh0RGFzaGJvYXJkTWFuYWdlZE9iamVjdCBleHRlbmRzIElNYW5hZ2VkT2JqZWN0IHtcbiAgYzh5X0Rhc2hib2FyZD86IENvbnRleHREYXNoYm9hcmQ7XG4gIG5hbWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29udGV4dERhc2hib2FyZCB7XG4gIGljb24/OiBzdHJpbmc7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIHByaW9yaXR5PzogbnVtYmVyO1xuICBkZXZpY2VUeXBlPzogYm9vbGVhbjtcbiAgZGV2aWNlVHlwZVZhbHVlPzogc3RyaW5nO1xuICBpc0Zyb3plbj86IGJvb2xlYW47XG4gIGNsYXNzZXM/OiB7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfTtcbiAgd2lkZ2V0Q2xhc3Nlcz86IHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9O1xuICB3aWRnZXRNYXJnaW4/OiBudW1iZXI7XG4gIHRyYW5zbGF0ZVdpZGdldFRpdGxlPzogYm9vbGVhbjtcbiAgZ2xvYmFsPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFRoZSBhbW91bnQgb2YgY29sdW1ucyBvbiB0aGF0IGRhc2hib2FyZC5cbiAgICogQ2FuIGJlIGZyZWVseSBjaG9zZW4sIGJ1dCBwcm9kdWN0IHVzZXMgZWl0aGVyIDEyIG9yIDI0LlxuICAgKi9cbiAgY29sdW1ucz86IG51bWJlcjtcbiAgY2hpbGRyZW4/OiB7XG4gICAgW2lkOiBzdHJpbmddOiBXaWRnZXQ7XG4gIH07XG4gIGdsb2JhbFJvbGVzSWRzPzogRGFzaGJvYXJkR2xvYmFsUm9sZXM7XG4gIGM4eV9Jc05hdmlnYXRvck5vZGU/OiBvYmplY3Q7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBDb250ZXh0RGFzaGJvYXJkVHlwZSB7XG4gIERldmljZSA9ICdkZXZpY2UnLFxuICBEZXZpY2VUeXBlID0gJ3R5cGUnLFxuICBHcm91cCA9ICdncm91cCcsXG4gIE5hbWVkID0gJ25hbWUnLFxuICBSZXBvcnQgPSAncmVwb3J0J1xufVxuXG5leHBvcnQgY29uc3QgV0lER0VUX0hFQURFUl9DTEFTU0VTID0gW1xuICB7XG4gICAgbGFiZWw6IGdldHRleHQoJ1JlZ3VsYXJgc3R5bGVgJyksXG4gICAgY2xhc3M6ICdwYW5lbC10aXRsZS1yZWd1bGFyJyxcbiAgICBkZXNjcmlwdGlvbjogZ2V0dGV4dCgnVGhlIHdpZGdldCBoYXMgbm8gYm9yZGVyIGJldHdlZW4gaGVhZGVyIGFuZCBjb250ZW50LicpXG4gIH0sXG4gIHtcbiAgICBsYWJlbDogZ2V0dGV4dCgnQm9yZGVyYHN0eWxlYCcpLFxuICAgIGNsYXNzOiAncGFuZWwtdGl0bGUtYm9yZGVyJyxcbiAgICBkZXNjcmlwdGlvbjogZ2V0dGV4dCgnVGhlIHdpZGdldCBoYXMgYSBzbWFsbCBzZXBhcmF0aW9uIGJvcmRlciBiZXR3ZWVuIGhlYWRlciBhbmQgY29udGVudC4nKVxuICB9LFxuICB7XG4gICAgbGFiZWw6IGdldHRleHQoJ092ZXJsYXlgc3R5bGVgJyksXG4gICAgY2xhc3M6ICdwYW5lbC10aXRsZS1vdmVybGF5JyxcbiAgICBkZXNjcmlwdGlvbjogZ2V0dGV4dCgnVGhlIHdpZGdldCBjb250ZW50IG92ZXJsYXlzIHRoZSBoZWFkZXIuJylcbiAgfSxcbiAge1xuICAgIGxhYmVsOiBnZXR0ZXh0KCdIaWRkZW5gc3R5bGVgJyksXG4gICAgY2xhc3M6ICdwYW5lbC10aXRsZS1oaWRkZW4nLFxuICAgIGRlc2NyaXB0aW9uOiBnZXR0ZXh0KCdUaGUgd2lkZ2V0IGhlYWRlciBpcyBub3Qgc2hvd24uJylcbiAgfVxuXTtcblxuZXhwb3J0IGNvbnN0IFdJREdFVF9DT05URU5UX0NMQVNTRVMgPSBbXG4gIHtcbiAgICBsYWJlbDogZ2V0dGV4dCgnTWF0Y2ggZGFzaGJvYXJkYHN0eWxlYCcpLFxuICAgIGNsYXNzOiAncGFuZWwtY29udGVudC1saWdodCcsXG4gICAgZGVzY3JpcHRpb246IGdldHRleHQoJ1RoZSB3aWRnZXQgYXBwZWFyYW5jZSBtYXRjaGVzIHRoZSBkYXNoYm9hcmQgYXBwZWFyYW5jZS4nKVxuICB9LFxuICB7XG4gICAgbGFiZWw6IGdldHRleHQoJ0xpZ2h0YHN0eWxlYCcpLFxuICAgIGNsYXNzOiAncGFuZWwtY29udGVudC13aGl0ZScsXG4gICAgZGVzY3JpcHRpb246IGdldHRleHQoJ1RoZSB3aWRnZXQgaGFzIGxpZ2h0IGFwcGVhcmFuY2UsIHRoYXQgaXMsIGRhcmsgdGV4dCBvbiBsaWdodCBiYWNrZ3JvdW5kLicpXG4gIH0sXG4gIHtcbiAgICBsYWJlbDogZ2V0dGV4dCgnRGFya2BzdHlsZWAnKSxcbiAgICBjbGFzczogJ3BhbmVsLWNvbnRlbnQtZGFyaycsXG4gICAgZGVzY3JpcHRpb246IGdldHRleHQoJ1RoZSB3aWRnZXQgaGFzIGRhcmsgYXBwZWFyYW5jZSwgdGhhdCBpcywgbGlnaHQgdGV4dCBvbiBkYXJrIGJhY2tncm91bmQuJylcbiAgfSxcbiAge1xuICAgIGxhYmVsOiBnZXR0ZXh0KCdUcmFuc3BhcmVudGBzdHlsZWAnKSxcbiAgICBjbGFzczogJ3BhbmVsLWNvbnRlbnQtdHJhbnNwYXJlbnQnLFxuICAgIGRlc2NyaXB0aW9uOiBnZXR0ZXh0KCdUaGUgd2lkZ2V0IGhhcyBubyBiYWNrZ3JvdW5kLicpXG4gIH0sXG4gIHtcbiAgICBsYWJlbDogZ2V0dGV4dCgnQnJhbmRlZGBzdHlsZWAnKSxcbiAgICBjbGFzczogJ3BhbmVsLWNvbnRlbnQtYnJhbmRlZCcsXG4gICAgZGVzY3JpcHRpb246IGdldHRleHQoJ1RoZSB3aWRnZXQgaXMgc3R5bGVkIHdpdGggdGhlIG1haW4gYnJhbmQgY29sb3IuJylcbiAgfVxuXTtcblxuZXhwb3J0IGNvbnN0IERBU0hCT0FSRF9USEVNRV9DTEFTU0VTID0gW1xuICB7XG4gICAgbGFiZWw6IGdldHRleHQoJ01hdGNoIFVJYHRoZW1lYCcpLFxuICAgIGNsYXNzOiAnZGFzaGJvYXJkLXRoZW1lLWxpZ2h0JyxcbiAgICBkZXNjcmlwdGlvbjogZ2V0dGV4dCgnVGhlIGRhc2hib2FyZCBhcHBlYXJhbmNlIG1hdGNoZXMgdGhlIFVJIGFwcGVhcmFuY2UuJylcbiAgfSxcbiAge1xuICAgIGxhYmVsOiBnZXR0ZXh0KCdMaWdodGB0aGVtZWAnKSxcbiAgICBjbGFzczogJ2Rhc2hib2FyZC10aGVtZS13aGl0ZScsXG4gICAgZGVzY3JpcHRpb246IGdldHRleHQoXG4gICAgICAnVGhlIGRhc2hib2FyZCBoYXMgbGlnaHQgYXBwZWFyYW5jZSwgdGhhdCBpcywgZGFyayB0ZXh0IG9uIGxpZ2h0IGJhY2tncm91bmQuJ1xuICAgIClcbiAgfSxcbiAge1xuICAgIGxhYmVsOiBnZXR0ZXh0KCdEYXJrYHRoZW1lYCcpLFxuICAgIGNsYXNzOiAnZGFzaGJvYXJkLXRoZW1lLWRhcmsnLFxuICAgIGRlc2NyaXB0aW9uOiBnZXR0ZXh0KFxuICAgICAgJ1RoZSBkYXNoYm9hcmQgaGFzIGRhcmsgYXBwZWFyYW5jZSwgdGhhdCBpcywgbGlnaHQgdGV4dCBvbiBkYXJrIGJhY2tncm91bmQuJ1xuICAgIClcbiAgfSxcbiAgLy8ge1xuICAvLyAgIGxhYmVsOiBnZXR0ZXh0KCdUcmFuc3BhcmVudGB0aGVtZWAnKSxcbiAgLy8gICBjbGFzczogJ2Rhc2hib2FyZC10aGVtZS10cmFuc3BhcmVudCcsXG4gIC8vICAgZGVzY3JpcHRpb246IGdldHRleHQoXG4gIC8vICAgICAnVGhlIGRhc2hib2FyZCBpcyBzdHlsZWQgd2l0aCBhIHRyYW5zcGFyZW50IGJhY2tncm91bmQgYW5kIHRoZXJlZm9yZSBpcyBib3JkZXItbGVzcy4nXG4gIC8vICAgKVxuICAvLyB9LFxuICB7XG4gICAgbGFiZWw6IGdldHRleHQoJ0JyYW5kZWRgdGhlbWVgJyksXG4gICAgY2xhc3M6ICdkYXNoYm9hcmQtdGhlbWUtYnJhbmRlZCcsXG4gICAgZGVzY3JpcHRpb246IGdldHRleHQoJ1RoZSBkYXNoYm9hcmQgaXMgc3R5bGVkIHVzaW5nIHRoZSBicmFuZCBwYWxldHRlLicpXG4gIH1cbl07XG5cbmV4cG9ydCBjb25zdCBTVFlMSU5HX0NMQVNTX1BSRUZJWEVTID0gWydkYXNoYm9hcmQtdGhlbWUtJywgJ3BhbmVsLXRpdGxlLScsICdwYW5lbC1jb250ZW50LSddO1xuXG5leHBvcnQgaW50ZXJmYWNlIERhc2hib2FyZENvcHlDbGlwYm9hcmQge1xuICBkYXNoYm9hcmQ6IENvbnRleHREYXNoYm9hcmQ7XG4gIGNvbnRleHQ6IERhc2hib2FyZENvbnRleHQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGFzaGJvYXJkQ29udGV4dCB7XG4gIGNvbnRleHQ6IFZpZXdDb250ZXh0O1xuICBjb250ZXh0RGF0YTogUGFydGlhbDxJTWFuYWdlZE9iamVjdD47XG59XG5cbmV4cG9ydCBjb25zdCBBTExfR0xPQkFMX1JPTEVTX1NFTEVDVEVEID0gJ2FsbCcgYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBEYXNoYm9hcmRHbG9iYWxSb2xlcyA9IG51bWJlcltdIHwgdHlwZW9mIEFMTF9HTE9CQUxfUk9MRVNfU0VMRUNURUQ7XG5cbmV4cG9ydCBjb25zdCBQUk9EVUNUX0VYUEVSSUVOQ0UgPSB7XG4gIERBU0hCT0FSRDoge1xuICAgIEVWRU5UUzoge1xuICAgICAgREFTSEJPQVJEX0FWQUlMQUJJTElUWTogJ2Rhc2hib2FyZEF2YWlsYWJpbGl0eSdcbiAgICB9LFxuICAgIENPTVBPTkVOVFM6IHtcbiAgICAgIERBU0hCT0FSRF9BVkFJTEFCSUxJVFk6ICdkYXNoYm9hcmQtYXZhaWxhYmlsaXR5J1xuICAgIH0sXG4gICAgQUNUSU9OUzoge1xuICAgICAgQVBQTFlfR0xPQkFMX1JPTEVTX0NIQU5HRVM6ICdhcHBseUdsb2JhbFJvbGVzQ2hhbmdlcydcbiAgICB9XG4gIH1cbn07XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBY3RpdmF0ZWRSb3V0ZVNuYXBzaG90LCBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgSU1hbmFnZWRPYmplY3QsIEludmVudG9yeVNlcnZpY2UsIElSZXN1bHRMaXN0IH0gZnJvbSAnQGM4eS9jbGllbnQnO1xuaW1wb3J0IHtcbiAgQWxlcnRTZXJ2aWNlLFxuICBDb250ZXh0RGF0YSxcbiAgRHluYW1pY0NvbXBvbmVudFNlcnZpY2UsXG4gIGdldEFjdGl2YXRlZFJvdXRlLFxuICBnZXR0ZXh0LFxuICBNb2RhbFNlcnZpY2UsXG4gIE5hdmlnYXRvck5vZGUsXG4gIE5hdmlnYXRvclNlcnZpY2UsXG4gIFBlcm1pc3Npb25zLFxuICBTdGF0dXMsXG4gIFRhYixcbiAgVGFic1NlcnZpY2UsXG4gIFZpZXdDb250ZXh0LFxuICBXaWRnZXRcbn0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5pbXBvcnQgeyBUcmFuc2xhdGVTZXJ2aWNlIH0gZnJvbSAnQG5neC10cmFuc2xhdGUvY29yZSc7XG5pbXBvcnQge1xuICBhc3NpZ24sXG4gIHBpY2ssXG4gIHNvbWUsXG4gIGtleXMsXG4gIGtleUJ5LFxuICBoYXMsXG4gIGdldCxcbiAgZm9yRWFjaCxcbiAgY2xvbmVEZWVwLFxuICByZWR1Y2UsXG4gIHNldFxufSBmcm9tICdsb2Rhc2gtZXMnO1xuaW1wb3J0IHsgY29tYmluZUxhdGVzdCwgZnJvbSwgT2JzZXJ2YWJsZSwgb2YgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7XG4gIGNhdGNoRXJyb3IsXG4gIGZpbHRlcixcbiAgbWFwLFxuICBtZXJnZUFsbCxcbiAgbWVyZ2VNYXAsXG4gIHRhcCxcbiAgdGhyb3dJZkVtcHR5LFxuICB0b0FycmF5XG59IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7XG4gIENvbnRleHREYXNoYm9hcmQsXG4gIENvbnRleHREYXNoYm9hcmRNYW5hZ2VkT2JqZWN0LFxuICBDb250ZXh0RGFzaGJvYXJkVHlwZSxcbiAgRGFzaGJvYXJkQ29udGV4dCxcbiAgRGFzaGJvYXJkQ29weUNsaXBib2FyZCxcbiAgU1RZTElOR19DTEFTU19QUkVGSVhFUyxcbiAgQUxMX0dMT0JBTF9ST0xFU19TRUxFQ1RFRFxufSBmcm9tICcuL2NvbnRleHQtZGFzaGJvYXJkLm1vZGVsJztcblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgQ29udGV4dERhc2hib2FyZFNlcnZpY2Uge1xuICByZWFkb25seSBSRVBPUlRfUEFSVElBTF9OQU1FID0gJ3JlcG9ydF8nO1xuICBjb3B5Q2xpcGJvYXJkOiBEYXNoYm9hcmRDb3B5Q2xpcGJvYXJkO1xuICBwcml2YXRlIHJlYWRvbmx5IElOVkVOVE9SWV9ST0xFUyA9IFsnUk9MRV9JTlZFTlRPUllfQURNSU4nXTtcbiAgcHJpdmF0ZSBjYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZXh0RGFzaGJvYXJkTWFuYWdlZE9iamVjdD4oKTtcbiAgcHJpdmF0ZSByZWFkb25seSBERUZBVUxUX1BBR0VTSVpFID0gMTAwMDtcbiAgcHJpdmF0ZSByZWFkb25seSBGUkFHTUVOVF9OQU1FID0gJ2M4eV9EYXNoYm9hcmQnO1xuICBwcml2YXRlIHJlYWRvbmx5IERBU0hCT0FSRF9ST1VURV9QQVRIID0gJ2Rhc2hib2FyZCc7XG4gIHByaXZhdGUgcmVhZG9ubHkgSU5ERVhfU1BMSVQgPSAnISc7XG4gIHByaXZhdGUgX2Zvcm1EaXNhYmxlZCA9IHRydWU7XG5cbiAgZ2V0IGZvcm1EaXNhYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZm9ybURpc2FibGVkO1xuICB9XG5cbiAgc2V0IGZvcm1EaXNhYmxlZCh2YWx1ZSkge1xuICAgIHRoaXMuX2Zvcm1EaXNhYmxlZCA9IHZhbHVlO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBpbnZlbnRvcnk6IEludmVudG9yeVNlcnZpY2UsXG4gICAgcHJpdmF0ZSB0YWJzOiBUYWJzU2VydmljZSxcbiAgICBwcml2YXRlIG1vZGFsOiBNb2RhbFNlcnZpY2UsXG4gICAgcHJpdmF0ZSB0cmFuc2xhdGVTZXJ2aWNlOiBUcmFuc2xhdGVTZXJ2aWNlLFxuICAgIHByaXZhdGUgcm91dGVyOiBSb3V0ZXIsXG4gICAgcHJpdmF0ZSBuYXZpZ2F0b3I6IE5hdmlnYXRvclNlcnZpY2UsXG4gICAgcHJpdmF0ZSBwZXJtaXNzaW9uczogUGVybWlzc2lvbnMsXG4gICAgcHJpdmF0ZSBhbGVydDogQWxlcnRTZXJ2aWNlLFxuICAgIHByaXZhdGUgZHluYW1pY0NvbXBvbmVudDogRHluYW1pY0NvbXBvbmVudFNlcnZpY2VcbiAgKSB7fVxuXG4gIGFzeW5jIGNyZWF0ZShkYXNoYm9hcmRDZmc6IENvbnRleHREYXNoYm9hcmQsIGNvbnRleHQ/OiBDb250ZXh0RGF0YSwgbmFtZSA9ICcnKSB7XG4gICAgbGV0IGlkID0gJyc7XG4gICAgbGV0IGRhc2hib2FyZFR5cGU7XG5cbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgaWQgPSBjb250ZXh0LmNvbnRleHREYXRhLmlkIGFzIHN0cmluZztcbiAgICAgIGRhc2hib2FyZFR5cGUgPSB0aGlzLmdldERhc2hib2FyZFR5cGVGcm9tVmlld0NvbnRleHQoZGFzaGJvYXJkQ2ZnLCBjb250ZXh0KTtcbiAgICB9XG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIGRhc2hib2FyZFR5cGUgPSBDb250ZXh0RGFzaGJvYXJkVHlwZS5OYW1lZDtcbiAgICB9XG5cbiAgICBjb25zdCBkYXNoYm9hcmQ6IFBhcnRpYWw8SU1hbmFnZWRPYmplY3Q+ID0ge307XG4gICAgYXNzaWduKGRhc2hib2FyZCwgeyBjOHlfRGFzaGJvYXJkOiBkYXNoYm9hcmRDZmcgfSk7XG5cbiAgICBjb25zdCB2YWx1ZSA9XG4gICAgICBkYXNoYm9hcmRUeXBlID09PSBDb250ZXh0RGFzaGJvYXJkVHlwZS5EZXZpY2VUeXBlID8gZGFzaGJvYXJkQ2ZnLmRldmljZVR5cGVWYWx1ZSA6IG5hbWUgfHwgaWQ7XG5cbiAgICBjb25zdCBmcmFnbWVudEtleSA9IHRoaXMuY3JlYXRlRnJhZ21lbnRLZXkoZGFzaGJvYXJkVHlwZSwgdmFsdWUpO1xuICAgIGRhc2hib2FyZFtmcmFnbWVudEtleV0gPSB7fTtcblxuICAgIGlmICh0aGlzLnNob3VsZFNldEdsb2JhbChkYXNoYm9hcmQsIGNvbnRleHQpKSB7XG4gICAgICBhc3NpZ24oZGFzaGJvYXJkLCB7IGM4eV9HbG9iYWw6IHt9IH0pO1xuICAgIH1cbiAgICBkYXNoYm9hcmQubmFtZSA9IGRhc2hib2FyZC5jOHlfRGFzaGJvYXJkLm5hbWU7XG4gICAgY29uc3QgeyBkYXRhIH0gPVxuICAgICAgZGFzaGJvYXJkVHlwZSA9PT0gQ29udGV4dERhc2hib2FyZFR5cGUuR3JvdXAgfHxcbiAgICAgIGRhc2hib2FyZFR5cGUgPT09IENvbnRleHREYXNoYm9hcmRUeXBlLkRldmljZSB8fFxuICAgICAgKGNvbnRleHQgJiYgZGFzaGJvYXJkVHlwZSA9PT0gQ29udGV4dERhc2hib2FyZFR5cGUuTmFtZWQpXG4gICAgICAgID8gYXdhaXQgdGhpcy5pbnZlbnRvcnkuY2hpbGRBZGRpdGlvbnNDcmVhdGUoZGFzaGJvYXJkLCBpZClcbiAgICAgICAgOiBhd2FpdCB0aGlzLmludmVudG9yeS5jcmVhdGUoZGFzaGJvYXJkKTtcbiAgICByZXR1cm4gZGF0YSBhcyBDb250ZXh0RGFzaGJvYXJkTWFuYWdlZE9iamVjdDtcbiAgfVxuXG4gIGFzeW5jIGRldGFpbChkYXNoYm9hcmRNTzogQ29udGV4dERhc2hib2FyZE1hbmFnZWRPYmplY3QpIHtcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHRoaXMuaW52ZW50b3J5LmRldGFpbChkYXNoYm9hcmRNTyk7XG4gICAgdGhpcy5jYWNoZS5zZXQoZGFzaGJvYXJkTU8uaWQsIGRhdGEpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlKGRhc2hib2FyZDogQ29udGV4dERhc2hib2FyZE1hbmFnZWRPYmplY3QpIHtcbiAgICBkYXNoYm9hcmQubmFtZSA9IGRhc2hib2FyZC5jOHlfRGFzaGJvYXJkLm5hbWU7XG4gICAgY29uc3Qga2VlcEZyYWdtZW50cyA9IHRoaXMuY2xlYW4ocGljayhkYXNoYm9hcmQsIFt0aGlzLkZSQUdNRU5UX05BTUUsICdpZCcsICduYW1lJ10pKTtcbiAgICBrZWVwRnJhZ21lbnRzLmM4eV9HbG9iYWwgPSB0aGlzLnNob3VsZFNldEdsb2JhbChkYXNoYm9hcmQpO1xuICAgIGF3YWl0IHRoaXMuc2VyaWFsaXplV2lkZ2V0Q29uZmlncyhrZWVwRnJhZ21lbnRzKTtcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHRoaXMuaW52ZW50b3J5LnVwZGF0ZShrZWVwRnJhZ21lbnRzKTtcbiAgICB0aGlzLmNhY2hlLnNldChkYXNoYm9hcmQuaWQsIGRhdGEpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlKGRhc2hib2FyZDogQ29udGV4dERhc2hib2FyZE1hbmFnZWRPYmplY3QsIHdpdGhDb25maXJtYXRpb24gPSB0cnVlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh3aXRoQ29uZmlybWF0aW9uKSB7XG4gICAgICAgIGxldCBtc2c6IHN0cmluZyA9IGdldHRleHQoXG4gICAgICAgICAgYFlvdSBhcmUgYWJvdXQgdG8gZGVsZXRlIHRoZSBkYXNoYm9hcmQgXCJ7eyBkYXNoYm9hcmROYW1lIH19XCIuIERvIHlvdSB3YW50IHRvIHByb2NlZWQ/YFxuICAgICAgICApO1xuICAgICAgICBpZiAodGhpcy5pc0RldmljZVR5cGUoZGFzaGJvYXJkKSkge1xuICAgICAgICAgIG1zZyA9IGdldHRleHQoXG4gICAgICAgICAgICBgWW91IGFyZSBhYm91dCB0byBkZWxldGUgdGhlIGRhc2hib2FyZCBcInt7IGRhc2hib2FyZE5hbWUgfX1cIiBmcm9tIGFsbCBkZXZpY2VzIG9mIHRoZSB0eXBlIFwie3sgZGV2aWNlVHlwZSB9fVwiLlxuICAgICAgICAgICBEbyB5b3Ugd2FudCB0byBwcm9jZWVkP2BcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMubW9kYWwuY29uZmlybShcbiAgICAgICAgICBnZXR0ZXh0KCdEZWxldGUgZGFzaGJvYXJkJyksXG4gICAgICAgICAgdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQobXNnLCB7XG4gICAgICAgICAgICBkYXNoYm9hcmROYW1lOiBkYXNoYm9hcmQuYzh5X0Rhc2hib2FyZC5uYW1lLFxuICAgICAgICAgICAgZGV2aWNlVHlwZTogZGFzaGJvYXJkLmM4eV9EYXNoYm9hcmQuZGV2aWNlVHlwZVZhbHVlXG4gICAgICAgICAgfSksXG4gICAgICAgICAgU3RhdHVzLkRBTkdFUixcbiAgICAgICAgICB7XG4gICAgICAgICAgICBvazogZ2V0dGV4dCgnRGVsZXRlJyksXG4gICAgICAgICAgICBjYW5jZWw6IGdldHRleHQoJ0NhbmNlbCcpXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5pbnZlbnRvcnkuZGVsZXRlKGRhc2hib2FyZCk7XG4gICAgICBjb25zdCB0YWJUb1JlbW92ZSA9IEFycmF5LmZyb20odGhpcy50YWJzLnN0YXRlKS5maW5kKHRhYiA9PlxuICAgICAgICB0YWIucGF0aC5lbmRzV2l0aChgJHt0aGlzLkRBU0hCT0FSRF9ST1VURV9QQVRIfS8ke2Rhc2hib2FyZC5pZH1gKVxuICAgICAgKTtcbiAgICAgIHRoaXMudGFicy5yZW1vdmUodGFiVG9SZW1vdmUpO1xuICAgICAgdGhpcy50YWJzLnJlZnJlc2goKTtcbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgLy8gaW50ZW5kZWQgZW1wdHlcbiAgICB9XG4gIH1cblxuICBhY3RpdmF0ZURhc2hib2FyZHMoXG4gICAgcm91dGU6IEFjdGl2YXRlZFJvdXRlU25hcHNob3QsXG4gICAgdHlwZXM6IENvbnRleHREYXNoYm9hcmRUeXBlW11cbiAgKTogT2JzZXJ2YWJsZTxib29sZWFuIHwgVGFiW10+IHtcbiAgICBjb25zdCB7IGRhc2hib2FyZElkIH0gPSByb3V0ZS5wYXJhbXM7XG4gICAgaWYgKGRhc2hib2FyZElkKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXREYXNoYm9hcmQkKGRhc2hib2FyZElkLCB0eXBlcywgcm91dGUucGFyZW50LmRhdGEuY29udGV4dERhdGEpLnBpcGUoXG4gICAgICAgIHRhcChkYXNoYm9hcmQgPT4ge1xuICAgICAgICAgIHJvdXRlLmRhdGEgPSB7IGRhc2hib2FyZCB9O1xuICAgICAgICB9KSxcbiAgICAgICAgbWFwKCgpID0+IHRydWUpLFxuICAgICAgICBjYXRjaEVycm9yKCgpID0+IHtcbiAgICAgICAgICByZXR1cm4gb2YoZmFsc2UpO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5nZXRUYWJzJChyb3V0ZS5kYXRhLmNvbnRleHREYXRhLCB0eXBlcyk7XG4gIH1cblxuICBnZXROYW1lZERhc2hib2FyZE9yQ3JlYXRlKG5hbWU6IHN0cmluZywgZGVmYXVsdFdpZGdldHM6IFdpZGdldFtdLCBjb250ZXh0PzogQ29udGV4dERhdGEpIHtcbiAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMubWFwV2lkZ2V0cyhkZWZhdWx0V2lkZ2V0cyk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RGFzaGJvYXJkJChuYW1lLCBbQ29udGV4dERhc2hib2FyZFR5cGUuTmFtZWRdKS5waXBlKFxuICAgICAgdGhyb3dJZkVtcHR5KCksXG4gICAgICBjYXRjaEVycm9yKCgpID0+XG4gICAgICAgIGZyb20oXG4gICAgICAgICAgdGhpcy5jcmVhdGUoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNoaWxkcmVuLFxuICAgICAgICAgICAgICB3aWRnZXRDbGFzc2VzOiB7ICdkYXNoYm9hcmQtdGhlbWUtbGlnaHQnOiB0cnVlLCAncGFuZWwtdGl0bGUtcmVndWxhcic6IHRydWUgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICBuYW1lXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIHJlZnJlc2hUYWJzKGRhc2hib2FyZE1POiBDb250ZXh0RGFzaGJvYXJkTWFuYWdlZE9iamVjdCkge1xuICAgIGlmICghdGhpcy5pc05hbWVkKGRhc2hib2FyZE1PKSkge1xuICAgICAgY29uc3QgdGFiVG9VcGRhdGUgPSBBcnJheS5mcm9tKHRoaXMudGFicy5zdGF0ZSkuZmluZCh0YWIgPT5cbiAgICAgICAgdGFiLnBhdGguZW5kc1dpdGgoYCR7dGhpcy5EQVNIQk9BUkRfUk9VVEVfUEFUSH0vJHtkYXNoYm9hcmRNTy5pZH1gKVxuICAgICAgKTtcblxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuZGV0YWlsKGRhc2hib2FyZE1PKTtcbiAgICAgIGlmICh0YWJUb1VwZGF0ZSkge1xuICAgICAgICBjb25zdCB7IGljb24sIHByaW9yaXR5LCBuYW1lIH0gPSBkYXRhLmM4eV9EYXNoYm9hcmQ7XG4gICAgICAgIHRhYlRvVXBkYXRlLmljb24gPSBpY29uO1xuICAgICAgICB0YWJUb1VwZGF0ZS5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgICB0YWJUb1VwZGF0ZS5sYWJlbCA9IG5hbWU7XG4gICAgICB9XG4gICAgICB0aGlzLnRhYnMucmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZU5hdmlnYXRvckl0ZW0obW86IElNYW5hZ2VkT2JqZWN0KSB7XG4gICAgdGhpcy5uYXZpZ2F0b3Iuc3RhdGUuZm9yRWFjaChub2RlID0+IHtcbiAgICAgIGlmIChub2RlLnBhdGggPT09IGByZXBvcnRzLyR7bW8uaWR9YCkge1xuICAgICAgICB0aGlzLm5hdmlnYXRvci5yZW1vdmUobm9kZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKG1vLmM4eV9Jc05hdmlnYXRvck5vZGUpIHtcbiAgICAgIGNvbnN0IG5vZGVUb0FkZCA9IG5ldyBOYXZpZ2F0b3JOb2RlKHtcbiAgICAgICAgbGFiZWw6IG1vLm5hbWUsXG4gICAgICAgIHBhdGg6IGByZXBvcnRzLyR7bW8uaWR9YCxcbiAgICAgICAgaWNvbjogbW8uaWNvbixcbiAgICAgICAgcHJpb3JpdHk6IG1vLnByaW9yaXR5XG4gICAgICB9KTtcbiAgICAgIHRoaXMubmF2aWdhdG9yLmFkZChub2RlVG9BZGQpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG5hdmlnYXRlVG9EYXNoYm9hcmQoZGFzaGJvYXJkTU86IENvbnRleHREYXNoYm9hcmRNYW5hZ2VkT2JqZWN0KSB7XG4gICAgaWYgKC9kYXNoYm9hcmQvLnRlc3QodGhpcy5yb3V0ZXIudXJsKSkge1xuICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoWycuLicsIGRhc2hib2FyZE1PLmlkXSwge1xuICAgICAgICByZWxhdGl2ZVRvOiBnZXRBY3RpdmF0ZWRSb3V0ZSh0aGlzLnJvdXRlcilcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbJy4uJywgdGhpcy5EQVNIQk9BUkRfUk9VVEVfUEFUSCwgZGFzaGJvYXJkTU8uaWRdLCB7XG4gICAgICAgIHJlbGF0aXZlVG86IGdldEFjdGl2YXRlZFJvdXRlKHRoaXMucm91dGVyKVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY2FuRWRpdERhc2hib2FyZChtbykge1xuICAgIHJldHVybiB0aGlzLnBlcm1pc3Npb25zLmNhbkVkaXQoWydST0xFX0lOVkVOVE9SWV9BRE1JTicsICdST0xFX0lOVkVOVE9SWV9DUkVBVEUnXSwgbW8pO1xuICB9XG5cbiAgaXNOYW1lZChkYXNoYm9hcmQ6IFBhcnRpYWw8Q29udGV4dERhc2hib2FyZE1hbmFnZWRPYmplY3Q+KSB7XG4gICAgcmV0dXJuIHNvbWUoa2V5cyhkYXNoYm9hcmQpLCBwcm9wID0+XG4gICAgICBuZXcgUmVnRXhwKFxuICAgICAgICBgXiR7dGhpcy5GUkFHTUVOVF9OQU1FfSR7dGhpcy5JTkRFWF9TUExJVH0ke0NvbnRleHREYXNoYm9hcmRUeXBlLk5hbWVkfSR7dGhpcy5JTkRFWF9TUExJVH1gXG4gICAgICApLnRlc3QocHJvcClcbiAgICApO1xuICB9XG5cbiAgaXNSZXBvcnQoZGFzaGJvYXJkOiBQYXJ0aWFsPENvbnRleHREYXNoYm9hcmRNYW5hZ2VkT2JqZWN0Pikge1xuICAgIHJldHVybiBzb21lKGtleXMoZGFzaGJvYXJkKSwgcHJvcCA9PlxuICAgICAgbmV3IFJlZ0V4cChcbiAgICAgICAgYF4ke3RoaXMuRlJBR01FTlRfTkFNRX0ke3RoaXMuSU5ERVhfU1BMSVR9JHtDb250ZXh0RGFzaGJvYXJkVHlwZS5OYW1lZH0ke3RoaXMuSU5ERVhfU1BMSVR9JHt0aGlzLlJFUE9SVF9QQVJUSUFMX05BTUV9YFxuICAgICAgKS50ZXN0KHByb3ApXG4gICAgKTtcbiAgfVxuXG4gIGlzRGV2aWNlVHlwZShkYXNoYm9hcmQ6IFBhcnRpYWw8Q29udGV4dERhc2hib2FyZE1hbmFnZWRPYmplY3Q+KSB7XG4gICAgcmV0dXJuIHNvbWUoa2V5cyhkYXNoYm9hcmQpLCBwcm9wID0+XG4gICAgICBuZXcgUmVnRXhwKFxuICAgICAgICBgXiR7dGhpcy5GUkFHTUVOVF9OQU1FfSR7dGhpcy5JTkRFWF9TUExJVH0ke0NvbnRleHREYXNoYm9hcmRUeXBlLkRldmljZVR5cGV9JHt0aGlzLklOREVYX1NQTElUfWBcbiAgICAgICkudGVzdChwcm9wKVxuICAgICk7XG4gIH1cblxuICBpc0RldmljZURhc2hib2FyZChkYXNoYm9hcmQ6IFBhcnRpYWw8Q29udGV4dERhc2hib2FyZE1hbmFnZWRPYmplY3Q+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHNvbWUoa2V5cyhkYXNoYm9hcmQpLCBwcm9wID0+XG4gICAgICBuZXcgUmVnRXhwKFxuICAgICAgICBgXiR7dGhpcy5GUkFHTUVOVF9OQU1FfSR7dGhpcy5JTkRFWF9TUExJVH0ke0NvbnRleHREYXNoYm9hcmRUeXBlLkRldmljZX0ke3RoaXMuSU5ERVhfU1BMSVR9YFxuICAgICAgKS50ZXN0KHByb3ApXG4gICAgKTtcbiAgfVxuXG4gIGlzR3JvdXBEYXNoYm9hcmQoZGFzaGJvYXJkOiBQYXJ0aWFsPENvbnRleHREYXNoYm9hcmRNYW5hZ2VkT2JqZWN0Pik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBzb21lKGtleXMoZGFzaGJvYXJkKSwgcHJvcCA9PlxuICAgICAgbmV3IFJlZ0V4cChcbiAgICAgICAgYF4ke3RoaXMuRlJBR01FTlRfTkFNRX0ke3RoaXMuSU5ERVhfU1BMSVR9JHtDb250ZXh0RGFzaGJvYXJkVHlwZS5Hcm91cH0ke3RoaXMuSU5ERVhfU1BMSVR9YFxuICAgICAgKS50ZXN0KHByb3ApXG4gICAgKTtcbiAgfVxuXG4gIGdldEZpbHRlcmVkRGFzaGJvYXJkU3R5bGVzKHN0eWxlTGlzdDogc3RyaW5nW10pIHtcbiAgICByZXR1cm4gc3R5bGVMaXN0LmZpbHRlcihjID0+XG4gICAgICBTVFlMSU5HX0NMQVNTX1BSRUZJWEVTLnNvbWUoY2xhc3NQcmVmaXggPT4gYy5zdGFydHNXaXRoKGNsYXNzUHJlZml4KSlcbiAgICApO1xuICB9XG5cbiAgZ2V0U3R5bGluZyhzdHlsZUxpc3QsIHN0eWxlTmFtZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgY29uc3Qgc3R5bGluZyA9IHN0eWxlTGlzdC5maW5kKFxuICAgICAgc3R5bGUgPT4gc3R5bGUgJiYgbmV3IFJlZ0V4cChgLSR7c3R5bGVOYW1lfSRgLCAnaScpLnRlc3Qoc3R5bGUuY2xhc3MpXG4gICAgKTtcbiAgICByZXR1cm4gc3R5bGluZyA/IHN0eWxpbmcuY2xhc3MgOiBkZWZhdWx0VmFsdWU7XG4gIH1cblxuICBtYXBXaWRnZXRzKHdpZGdldHM6IFdpZGdldFtdKSB7XG4gICAgcmV0dXJuIGtleUJ5KFxuICAgICAgd2lkZ2V0cy5tYXAod2lkZ2V0ID0+IHtcbiAgICAgICAgd2lkZ2V0LmlkID0gU3RyaW5nKE1hdGgucmFuZG9tKCkpLnN1YnN0cigyKTtcbiAgICAgICAgcmV0dXJuIHdpZGdldDtcbiAgICAgIH0pLFxuICAgICAgJ2lkJ1xuICAgICk7XG4gIH1cblxuICBnZXREYXNoYm9hcmQkKGRhc2hib2FyZElkT3JOYW1lLCBkYXNoYm9hcmRUeXBlOiBDb250ZXh0RGFzaGJvYXJkVHlwZVtdLCBtbz86IElNYW5hZ2VkT2JqZWN0KSB7XG4gICAgY29uc3QgY2FjaGUgPSB0aGlzLmNhY2hlLmdldChkYXNoYm9hcmRJZE9yTmFtZSk7XG5cbiAgICBjb25zdCBkYXNoYm9hcmRzID0gbW9cbiAgICAgID8gdGhpcy5nZXRDb250ZXh0RGFzaGJvYXJkcyhtbywgZGFzaGJvYXJkVHlwZSlcbiAgICAgIDogW3RoaXMuZ2V0TmFtZWREYXNoYm9hcmQoZGFzaGJvYXJkSWRPck5hbWUpXTtcblxuICAgIGNvbnN0IGNhY2hlUmVmcmVzaCA9IHRoaXMuZ2V0Q29udGV4dERhc2hib2FyZHMkKGRhc2hib2FyZHMpLnBpcGUoXG4gICAgICB0YXAoZGFzaGJvYXJkID0+IHRoaXMuY2FjaGVEYXNoYm9hcmQoZGFzaGJvYXJkKSksXG4gICAgICBmaWx0ZXIoXG4gICAgICAgIGRhc2hib2FyZCA9PlxuICAgICAgICAgIGRhc2hib2FyZC5pZCA9PT0gZGFzaGJvYXJkSWRPck5hbWUgfHxcbiAgICAgICAgICBoYXMoXG4gICAgICAgICAgICBkYXNoYm9hcmQsXG4gICAgICAgICAgICBgJHt0aGlzLkZSQUdNRU5UX05BTUV9JHt0aGlzLklOREVYX1NQTElUfSR7Q29udGV4dERhc2hib2FyZFR5cGUuTmFtZWR9JHt0aGlzLklOREVYX1NQTElUfSR7ZGFzaGJvYXJkSWRPck5hbWV9YFxuICAgICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICAgIHJldHVybiBjYWNoZSA/IG9mKGNhY2hlKSA6IGNhY2hlUmVmcmVzaDtcbiAgfVxuXG4gIGFzeW5jIHBhc3RlRGFzaGJvYXJkKG5ld0NvbnRleHQ6IERhc2hib2FyZENvbnRleHQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5jb3B5Q2xpcGJvYXJkKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAodGhpcy5jYW5QYXN0ZURhc2hib2FyZCh0aGlzLmNvcHlDbGlwYm9hcmQsIG5ld0NvbnRleHQuY29udGV4dCkpIHtcbiAgICAgICAgICBjb25zdCBkYXNoYm9hcmRUb1Bhc3RlID0gdGhpcy5jcmVhdGVDb250ZXh0RGFzaGJvYXJkQ29weShcbiAgICAgICAgICAgIHRoaXMuY29weUNsaXBib2FyZC5kYXNoYm9hcmQsXG4gICAgICAgICAgICBuZXdDb250ZXh0LmNvbnRleHREYXRhLFxuICAgICAgICAgICAgdGhpcy5jb3B5Q2xpcGJvYXJkLmNvbnRleHQuY29udGV4dERhdGFcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IGRhc2hib2FyZCA9IGF3YWl0IHRoaXMuY3JlYXRlKHRoaXMuY2xlYW4oZGFzaGJvYXJkVG9QYXN0ZSksIG5ld0NvbnRleHQpO1xuICAgICAgICAgIHRoaXMuY29weUNsaXBib2FyZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB0aGlzLm5hdmlnYXRlVG9EYXNoYm9hcmQoZGFzaGJvYXJkKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHRoaXMuYWxlcnQud2FybmluZyhnZXR0ZXh0KCdJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMgZm9yIHRoaXMgYWN0aW9uLicpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlcmlhbGl6ZVdpZGdldENvbmZpZ3MoZGFzaGJvYXJkOiBDb250ZXh0RGFzaGJvYXJkTWFuYWdlZE9iamVjdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gY2xvbmVEZWVwKGRhc2hib2FyZC5jOHlfRGFzaGJvYXJkLmNoaWxkcmVuKTtcbiAgICBpZiAoIWNoaWxkcmVuKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNvbmZpZ3MgPSBPYmplY3QudmFsdWVzKGNoaWxkcmVuKTtcbiAgICBjb25zdCBkZXRhaWxzID0gY29uZmlncy5tYXAoKHsgY29tcG9uZW50SWQsIGNvbmZpZyB9KSA9PiAoeyBjb21wb25lbnRJZCwgY29uZmlnIH0pKTtcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5keW5hbWljQ29tcG9uZW50LnNlcmlhbGl6ZUNvbmZpZ3MoZGV0YWlscyk7XG4gICAgcmVzdWx0cy5mb3JFYWNoKChyZXN1bHQsIGluZGV4KSA9PiB7XG4gICAgICBPYmplY3QuZW50cmllcyhyZXN1bHQpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBzZXQoZGV0YWlsc1tpbmRleF0uY29uZmlnLCBrZXksIHZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRhc2hib2FyZC5jOHlfRGFzaGJvYXJkLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gIH1cblxuICBwcml2YXRlIGNhblBhc3RlRGFzaGJvYXJkKFxuICAgIGNvcHlDbGlwYm9hcmQ6IERhc2hib2FyZENvcHlDbGlwYm9hcmQsXG4gICAgY3VycmVudENvbnRleHQ6IFZpZXdDb250ZXh0XG4gICk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNsaXBib2FyZFZpZXdDb250ZXh0ID0gY29weUNsaXBib2FyZC5jb250ZXh0LmNvbnRleHQ7XG5cbiAgICBpZiAoY3VycmVudENvbnRleHQgIT09IGNsaXBib2FyZFZpZXdDb250ZXh0KSB7XG4gICAgICBpZiAoY2xpcGJvYXJkVmlld0NvbnRleHQgPT09IFZpZXdDb250ZXh0LkRldmljZSkge1xuICAgICAgICB0aGlzLmFsZXJ0Lndhcm5pbmcoZ2V0dGV4dCgnRGV2aWNlIGRhc2hib2FyZHMgY2FuIG9ubHkgYmUgY29waWVkIGludG8gYSBkZXZpY2UuJykpO1xuICAgICAgfSBlbHNlIGlmIChjbGlwYm9hcmRWaWV3Q29udGV4dCA9PT0gVmlld0NvbnRleHQuR3JvdXApIHtcbiAgICAgICAgdGhpcy5hbGVydC53YXJuaW5nKGdldHRleHQoJ0dyb3VwIGRhc2hib2FyZHMgY2FuIG9ubHkgYmUgY29waWVkIGludG8gYSBncm91cC4nKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVDb250ZXh0RGFzaGJvYXJkQ29weShcbiAgICBkYXNoOiBDb250ZXh0RGFzaGJvYXJkLFxuICAgIG5ld0NvbnRleHQ6IFBhcnRpYWw8SU1hbmFnZWRPYmplY3Q+LFxuICAgIG9sZENvbnRleHQ6IFBhcnRpYWw8SU1hbmFnZWRPYmplY3Q+XG4gICk6IENvbnRleHREYXNoYm9hcmQge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gcmVkdWNlKFxuICAgICAgZGFzaC5jaGlsZHJlbixcbiAgICAgIChfY2hpbGRyZW4sIGNoaWxkKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgaWQgfSA9IGNoaWxkO1xuICAgICAgICBjb25zdCBjZmcgPSBjaGlsZC5jb25maWc7XG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXNUb0NvcHkgPSB7XG4gICAgICAgICAgZGV2aWNlOiBkZXZpY2UgPT4gdGhpcy5yZXBsYWNlQ29udGV4dEluT2JqKGRldmljZSwgbmV3Q29udGV4dCwgb2xkQ29udGV4dCksXG4gICAgICAgICAgZGF0YXBvaW50czogZGF0YVBvaW50cyA9PlxuICAgICAgICAgICAgdGhpcy5yZXBsYWNlQ29udGV4dEluRGF0YVBvaW50cyhkYXRhUG9pbnRzLCBuZXdDb250ZXh0LCBvbGRDb250ZXh0KSxcbiAgICAgICAgICBkYXRhUG9pbnRzOiBkYXRhUG9pbnRzID0+XG4gICAgICAgICAgICB0aGlzLnJlcGxhY2VDb250ZXh0SW5EYXRhUG9pbnRzKGRhdGFQb2ludHMsIG5ld0NvbnRleHQsIG9sZENvbnRleHQpLFxuICAgICAgICAgIGRhdGFwb2ludHNHYXVnZTogZGF0YVBvaW50cyA9PlxuICAgICAgICAgICAgdGhpcy5yZXBsYWNlQ29udGV4dEluRGF0YVBvaW50cyhkYXRhUG9pbnRzLCBuZXdDb250ZXh0LCBvbGRDb250ZXh0KSxcbiAgICAgICAgICBkYXRhcG9pbnRzTGFiZWxzOiBkYXRhUG9pbnRzID0+XG4gICAgICAgICAgICB0aGlzLnJlcGxhY2VDb250ZXh0SW5EYXRhUG9pbnRzKGRhdGFQb2ludHMsIG5ld0NvbnRleHQsIG9sZENvbnRleHQpXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGNmZykge1xuICAgICAgICAgIHRoaXMuY29weVByb3BlcnRpZXMoY2ZnLCBwcm9wZXJ0aWVzVG9Db3B5KTtcbiAgICAgICAgICBpZiAoY2ZnLm9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuY29weVByb3BlcnRpZXMoY2ZnLm9wdGlvbnMsIHByb3BlcnRpZXNUb0NvcHkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIF9jaGlsZHJlbltpZF0gPSBjbG9uZURlZXAoY2hpbGQpO1xuICAgICAgICByZXR1cm4gX2NoaWxkcmVuO1xuICAgICAgfSxcbiAgICAgIHt9XG4gICAgKTtcblxuICAgIGRhc2guY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICByZXR1cm4gZGFzaDtcbiAgfVxuXG4gIHByaXZhdGUgY29weVByb3BlcnRpZXMob2JqLCBwcm9wZXJ0aWVzVG9Db3B5KSB7XG4gICAgZm9yRWFjaChwcm9wZXJ0aWVzVG9Db3B5LCAoY29weUZuLCBwcm9wZXJ0eSkgPT4ge1xuICAgICAgaWYgKG9ialtwcm9wZXJ0eV0pIHtcbiAgICAgICAgb2JqW3Byb3BlcnR5XSA9IGNvcHlGbihvYmpbcHJvcGVydHldKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVwbGFjZUNvbnRleHRJbkRhdGFQb2ludHMoXG4gICAgZGF0YVBvaW50cyxcbiAgICBuZXdDb250ZXh0OiBQYXJ0aWFsPElNYW5hZ2VkT2JqZWN0PixcbiAgICBvbGRDb250ZXh0OiBQYXJ0aWFsPElNYW5hZ2VkT2JqZWN0PlxuICApIHtcbiAgICBkYXRhUG9pbnRzLmZvckVhY2goZHAgPT4ge1xuICAgICAgZHAuX190YXJnZXQgPSB0aGlzLnJlcGxhY2VDb250ZXh0SW5PYmooZHAuX190YXJnZXQsIG5ld0NvbnRleHQsIG9sZENvbnRleHQpO1xuICAgIH0pO1xuICAgIHJldHVybiBkYXRhUG9pbnRzO1xuICB9XG5cbiAgcHJpdmF0ZSByZXBsYWNlQ29udGV4dEluT2JqKFxuICAgIG9iajogUGFydGlhbDxJTWFuYWdlZE9iamVjdD4sXG4gICAgbmV3Q29udGV4dDogUGFydGlhbDxJTWFuYWdlZE9iamVjdD4sXG4gICAgb2xkQ29udGV4dDogUGFydGlhbDxJTWFuYWdlZE9iamVjdD5cbiAgKSB7XG4gICAgaWYgKG9iaiAmJiBvYmouaWQgPT09IG9sZENvbnRleHQuaWQpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCBwaWNrKG5ld0NvbnRleHQsIFsnaWQnLCAnbmFtZSddKSk7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICBwcml2YXRlIGdldFRhYnMkKG1vOiBDb250ZXh0RGFzaGJvYXJkTWFuYWdlZE9iamVjdCwgZGFzaGJvYXJkVHlwZTogQ29udGV4dERhc2hib2FyZFR5cGVbXSkge1xuICAgIGNvbnN0IGRhc2hib2FyZHMgPSB0aGlzLmdldENvbnRleHREYXNoYm9hcmRzKG1vLCBkYXNoYm9hcmRUeXBlKTtcblxuICAgIHJldHVybiB0aGlzLmdldENvbnRleHREYXNoYm9hcmRzJChkYXNoYm9hcmRzKS5waXBlKFxuICAgICAgbWVyZ2VNYXAoZGFzaGJvYXJkID0+IHRoaXMudmVyaWZ5RGFzaGJvYXJkQXZhaWxhYmlsaXR5JChkYXNoYm9hcmQpKSxcbiAgICAgIG1lcmdlTWFwKChbZGFzaGJvYXJkXSkgPT4gdGhpcy5yZW1vdmVEYXNoYm9hcmRNb1Byb3BlcnR5KGRhc2hib2FyZCkpLFxuICAgICAgdGFwKGRhc2hib2FyZCA9PiB0aGlzLmNhY2hlRGFzaGJvYXJkKGRhc2hib2FyZCkpLFxuICAgICAgbWFwKGRhc2hib2FyZCA9PiB0aGlzLmNyZWF0ZURhc2hib2FyZFRhYihkYXNoYm9hcmQpKSxcbiAgICAgIHRvQXJyYXkoKVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIHZlcmlmeURhc2hib2FyZEF2YWlsYWJpbGl0eSQoZGFzaGJvYXJkOiBDb250ZXh0RGFzaGJvYXJkTWFuYWdlZE9iamVjdCkge1xuICAgIGNvbnN0IGdsb2JhbFJvbGVzSWRzID0gZGFzaGJvYXJkPy5jOHlfRGFzaGJvYXJkPy5nbG9iYWxSb2xlc0lkcztcbiAgICBjb25zdCBjYW5FZGl0ID0gZnJvbShcbiAgICAgIHRoaXMucGVybWlzc2lvbnMuY2FuRWRpdCh0aGlzLklOVkVOVE9SWV9ST0xFUywgZGFzaGJvYXJkLCB7IHNraXBSZXF1ZXN0Q2hlY2s6IHRydWUgfSlcbiAgICApO1xuICAgIGNvbnN0IGhhc0FueUdsb2JhbFJvbGUgPVxuICAgICAgIWdsb2JhbFJvbGVzSWRzIHx8IGdsb2JhbFJvbGVzSWRzID09PSBBTExfR0xPQkFMX1JPTEVTX1NFTEVDVEVEXG4gICAgICAgID8gb2YodHJ1ZSlcbiAgICAgICAgOiBvZih0aGlzLnBlcm1pc3Npb25zLmhhc0FueUdsb2JhbFJvbGUoZ2xvYmFsUm9sZXNJZHMpKTtcblxuICAgIHJldHVybiBjb21iaW5lTGF0ZXN0KFtvZihkYXNoYm9hcmQpLCBjYW5FZGl0LCBoYXNBbnlHbG9iYWxSb2xlXSkucGlwZShcbiAgICAgIGZpbHRlcigoWywgY2FuRWRpdCwgaGFzQW55R2xvYmFsUm9sZV0pID0+IGNhbkVkaXQgfHwgaGFzQW55R2xvYmFsUm9sZSlcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRDb250ZXh0RGFzaGJvYXJkcyQocmVxdWVzdHM6IEFycmF5PFByb21pc2U8SVJlc3VsdExpc3Q8SU1hbmFnZWRPYmplY3Q+Pj4pIHtcbiAgICByZXR1cm4gZnJvbShyZXF1ZXN0cykucGlwZShcbiAgICAgIG1lcmdlQWxsKCksXG4gICAgICBtZXJnZU1hcChyZXNwb25zZSA9PiByZXNwb25zZS5kYXRhIGFzIENvbnRleHREYXNoYm9hcmRNYW5hZ2VkT2JqZWN0W10pXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgYWxyZWFkeSBjb3JydXB0ZWQgZGFzaGJvYXJkcyBmcm9tIGRhc2hib2FyZE1vIHByb3BlcnR5LlxuICAgKiBBZGRlZCB0byBmaXggZGFzaGJvYXJkcyBvbiB0aGUgY2xvdWQgaW5zdGFuY2UgKGV1LWxhdGVzdCkuXG4gICAqIEBkZXByZWNhdGVkIFRoaXMgaXMgZ29pbmcgdG8gYmUgcmVtb3ZlZCBhZnRlciAxMDA3LjcuMC5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgcmVtb3ZlRGFzaGJvYXJkTW9Qcm9wZXJ0eShcbiAgICBkYXNoYm9hcmQ6IENvbnRleHREYXNoYm9hcmRNYW5hZ2VkT2JqZWN0XG4gICk6IFByb21pc2U8Q29udGV4dERhc2hib2FyZE1hbmFnZWRPYmplY3Q+IHtcbiAgICBjb25zdCBkYXNoYm9hcmRDb3B5ID0gY2xvbmVEZWVwKGRhc2hib2FyZCk7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBnZXQoZGFzaGJvYXJkQ29weSwgJ2M4eV9EYXNoYm9hcmQuY2hpbGRyZW4nKTtcbiAgICBsZXQgdXBkYXRlRGFzaGJvYXJkID0gZmFsc2U7XG5cbiAgICBmb3JFYWNoKGNoaWxkcmVuLCBjaGlsZCA9PiB7XG4gICAgICBpZiAoZ2V0KGNoaWxkLCAnY29tcG9uZW50VHJhbnNmb3JtQ29uZmlnV2l0aENvbnRleHQnKSkge1xuICAgICAgICBkZWxldGUgY2hpbGQuY29tcG9uZW50VHJhbnNmb3JtQ29uZmlnV2l0aENvbnRleHQ7XG4gICAgICAgIHVwZGF0ZURhc2hib2FyZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoZ2V0KGNoaWxkLCAnY29uZmlnLmRhc2hib2FyZE1vJykpIHtcbiAgICAgICAgZGVsZXRlIGNoaWxkLmNvbmZpZy5kYXNoYm9hcmRNbztcbiAgICAgICAgdXBkYXRlRGFzaGJvYXJkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICh1cGRhdGVEYXNoYm9hcmQpIHtcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKGRhc2hib2FyZENvcHkpO1xuICAgIH1cbiAgICByZXR1cm4gZGFzaGJvYXJkQ29weTtcbiAgfVxuXG4gIHByaXZhdGUgY2FjaGVEYXNoYm9hcmQoZGFzaGJvYXJkOiBDb250ZXh0RGFzaGJvYXJkTWFuYWdlZE9iamVjdCkge1xuICAgIHRoaXMuY2FjaGUuc2V0KGRhc2hib2FyZC5pZCwgZGFzaGJvYXJkKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlRGFzaGJvYXJkVGFiKGRhc2hib2FyZDogQ29udGV4dERhc2hib2FyZE1hbmFnZWRPYmplY3QpIHtcbiAgICBjb25zdCB7IGM4eV9EYXNoYm9hcmQ6IF9kYXNoYm9hcmQsIGlkIH0gPSBkYXNoYm9hcmQ7XG4gICAgcmV0dXJuIHtcbiAgICAgIGljb246IF9kYXNoYm9hcmQuaWNvbixcbiAgICAgIHBhdGg6IGAke3RoaXMuREFTSEJPQVJEX1JPVVRFX1BBVEh9LyR7aWR9YCxcbiAgICAgIGxhYmVsOiBfZGFzaGJvYXJkLm5hbWUsXG4gICAgICBwcmlvcml0eTogX2Rhc2hib2FyZC5wcmlvcml0eSxcbiAgICAgIGhpZGU6IHRoaXMuaXNSZXBvcnQoZGFzaGJvYXJkKVxuICAgIH0gYXMgVGFiO1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhbihkYXNoYm9hcmQpIHtcbiAgICBjb25zdCBqc29uU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZGFzaGJvYXJkLCAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgaWYgKGtleSA9PT0gJyQkaGFzaEtleScgfHwga2V5ID09PSAna2xhc3NlcycpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBKU09OLnBhcnNlKGpzb25TdHJpbmcpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXROYW1lZERhc2hib2FyZChuYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5pbnZlbnRvcnkubGlzdCh7XG4gICAgICBmcmFnbWVudFR5cGU6IGAke3RoaXMuRlJBR01FTlRfTkFNRX0ke3RoaXMuSU5ERVhfU1BMSVR9JHtDb250ZXh0RGFzaGJvYXJkVHlwZS5OYW1lZH0ke3RoaXMuSU5ERVhfU1BMSVR9JHtuYW1lfWAsXG4gICAgICBwYWdlU2l6ZTogMVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRDb250ZXh0RGFzaGJvYXJkcyhtbzogSU1hbmFnZWRPYmplY3QsIGRhc2hib2FyZFR5cGU6IENvbnRleHREYXNoYm9hcmRUeXBlW10pIHtcbiAgICByZXR1cm4gZGFzaGJvYXJkVHlwZS5tYXAoKHR5cGU6IENvbnRleHREYXNoYm9hcmRUeXBlKSA9PlxuICAgICAgdGhpcy5pbnZlbnRvcnkubGlzdCh7XG4gICAgICAgIGZyYWdtZW50VHlwZTogdGhpcy5jcmVhdGVEYXNoYm9hcmRGcmFnbWVudChtbywgdHlwZSksXG4gICAgICAgIHBhZ2VTaXplOiB0aGlzLkRFRkFVTFRfUEFHRVNJWkVcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlRGFzaGJvYXJkRnJhZ21lbnQobW86IElNYW5hZ2VkT2JqZWN0LCB0eXBlOiBDb250ZXh0RGFzaGJvYXJkVHlwZSkge1xuICAgIGxldCB2YWx1ZTtcbiAgICBpZiAobW8uYzh5X1JlcG9ydCkge1xuICAgICAgdmFsdWUgPSBgJHt0aGlzLlJFUE9SVF9QQVJUSUFMX05BTUV9JHttby5pZH1gO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSA9IHR5cGUgPT09IENvbnRleHREYXNoYm9hcmRUeXBlLkRldmljZVR5cGUgPyBtby50eXBlIDogbW8uaWQ7XG4gICAgfVxuICAgIHJldHVybiBgJHt0aGlzLkZSQUdNRU5UX05BTUV9JHt0aGlzLklOREVYX1NQTElUfSR7dHlwZX0ke3RoaXMuSU5ERVhfU1BMSVR9JHt2YWx1ZX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXREYXNoYm9hcmRUeXBlRnJvbVZpZXdDb250ZXh0KGRhc2hib2FyZENmZywgY29udGV4dCkge1xuICAgIGxldCBkYXNoYm9hcmRUeXBlO1xuICAgIGlmIChjb250ZXh0LmNvbnRleHQgPT09IFZpZXdDb250ZXh0LkRldmljZSkge1xuICAgICAgZGFzaGJvYXJkVHlwZSA9IGRhc2hib2FyZENmZy5kZXZpY2VUeXBlXG4gICAgICAgID8gQ29udGV4dERhc2hib2FyZFR5cGUuRGV2aWNlVHlwZVxuICAgICAgICA6IENvbnRleHREYXNoYm9hcmRUeXBlLkRldmljZTtcbiAgICB9XG4gICAgaWYgKGNvbnRleHQuY29udGV4dCA9PT0gVmlld0NvbnRleHQuR3JvdXApIHtcbiAgICAgIGRhc2hib2FyZFR5cGUgPSBDb250ZXh0RGFzaGJvYXJkVHlwZS5Hcm91cDtcbiAgICB9XG4gICAgcmV0dXJuIGRhc2hib2FyZFR5cGU7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUZyYWdtZW50S2V5KGNvbnRleHREYXNoYm9hcmRUeXBlOiBDb250ZXh0RGFzaGJvYXJkVHlwZSwgdmFsdWU6IHN0cmluZykge1xuICAgIHJldHVybiBbdGhpcy5GUkFHTUVOVF9OQU1FLCBjb250ZXh0RGFzaGJvYXJkVHlwZSwgdmFsdWVdLmpvaW4odGhpcy5JTkRFWF9TUExJVCk7XG4gIH1cblxuICBwcml2YXRlIHNob3VsZFNldEdsb2JhbChkYXNoYm9hcmQ6IFBhcnRpYWw8Q29udGV4dERhc2hib2FyZE1hbmFnZWRPYmplY3Q+LCBjb250ZXh0Pykge1xuICAgIGlmIChcbiAgICAgICghY29udGV4dCAmJiB0aGlzLmlzTmFtZWQoZGFzaGJvYXJkKSAmJiAhdGhpcy5pc1JlcG9ydChkYXNoYm9hcmQpKSB8fFxuICAgICAgdGhpcy5pc0RldmljZVR5cGUoZGFzaGJvYXJkKVxuICAgICkge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSU1hbmFnZWRPYmplY3QsIEludmVudG9yeVNlcnZpY2UsIFF1ZXJpZXNVdGlsIH0gZnJvbSAnQGM4eS9jbGllbnQnO1xuaW1wb3J0IHsgTmF2aWdhdG9yTm9kZSwgTmF2aWdhdG9yU2VydmljZSB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgUmVwb3J0RGFzaGJvYXJkU2VydmljZSB7XG4gIHByaXZhdGUgcXVlcmllc1V0aWw6IFF1ZXJpZXNVdGlsO1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGludmVudG9yeVNlcnZpY2U6IEludmVudG9yeVNlcnZpY2UsXG4gICAgcHJpdmF0ZSBuYXZpZ2F0b3JTZXJ2aWNlOiBOYXZpZ2F0b3JTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMucXVlcmllc1V0aWwgPSBuZXcgUXVlcmllc1V0aWwoKTtcbiAgfVxuXG4gIGxpc3RSZXBvcnRzKG9wdGlvbnM6IHsgZmlsdGVyPzogYW55OyBwYWdlU2l6ZT86IG51bWJlciB9ID0ge30pIHtcbiAgICBsZXQgcXVlcnkgPSB7IF9faGFzOiAnYzh5X1JlcG9ydCcgfTtcbiAgICBpZiAob3B0aW9ucy5maWx0ZXIpIHtcbiAgICAgIHF1ZXJ5ID0gdGhpcy5xdWVyaWVzVXRpbC5hZGRBbmRGaWx0ZXIocXVlcnksIG9wdGlvbnMuZmlsdGVyKTtcbiAgICB9XG4gICAgY29uc3QgZmlsdGVycyA9IHtcbiAgICAgIHF1ZXJ5OiB0aGlzLnF1ZXJpZXNVdGlsLmJ1aWxkUXVlcnkocXVlcnkpLFxuICAgICAgcGFnZVNpemU6IG9wdGlvbnMucGFnZVNpemUgfHwgNTAsXG4gICAgICB3aXRoVG90YWxQYWdlczogdHJ1ZVxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuaW52ZW50b3J5U2VydmljZS5saXN0KGZpbHRlcnMpO1xuICB9XG5cbiAgY3JlYXRlUmVwb3J0KHJlcG9ydENmZzogUGFydGlhbDxJTWFuYWdlZE9iamVjdD4pIHtcbiAgICBjb25zdCByZXBvcnQ6IFBhcnRpYWw8SU1hbmFnZWRPYmplY3Q+ID0ge307XG4gICAgT2JqZWN0LmFzc2lnbihyZXBvcnQsIHJlcG9ydENmZyk7XG4gICAgT2JqZWN0LmFzc2lnbihyZXBvcnQsIHsgYzh5X1JlcG9ydDoge30gfSk7XG4gICAgcmV0dXJuIHRoaXMuaW52ZW50b3J5U2VydmljZS5jcmVhdGUocmVwb3J0KTtcbiAgfVxuXG4gIGFkZFJlcG9ydE5hdmlnYXRvck5vZGUocmVwb3J0OiBJTWFuYWdlZE9iamVjdCk6IHZvaWQge1xuICAgIGNvbnN0IG5vZGUgPSBuZXcgTmF2aWdhdG9yTm9kZSh7XG4gICAgICBsYWJlbDogcmVwb3J0Lm5hbWUsXG4gICAgICBwYXRoOiBgcmVwb3J0cy8ke3JlcG9ydC5pZH1gLFxuICAgICAgaWNvbjogcmVwb3J0Lmljb24sXG4gICAgICBwcmlvcml0eTogcmVwb3J0LnByaW9yaXR5XG4gICAgfSk7XG4gICAgdGhpcy5uYXZpZ2F0b3JTZXJ2aWNlLmFkZChub2RlKTtcbiAgfVxuXG4gIHJlbW92ZU5hdmlnYXRvck5vZGUocmVwb3J0OiBJTWFuYWdlZE9iamVjdCkge1xuICAgIHRoaXMubmF2aWdhdG9yU2VydmljZS5zdGF0ZS5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgaWYgKG5vZGUucGF0aCA9PT0gYHJlcG9ydHMvJHtyZXBvcnQuaWR9YCkge1xuICAgICAgICB0aGlzLm5hdmlnYXRvclNlcnZpY2UucmVtb3ZlKG5vZGUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IElNYW5hZ2VkT2JqZWN0LCBJbnZlbnRvcnlTZXJ2aWNlIH0gZnJvbSAnQGM4eS9jbGllbnQnO1xuaW1wb3J0IHsgTmF2aWdhdG9yTm9kZSwgTmF2aWdhdG9yU2VydmljZSwgZ2V0dGV4dCB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgUmVwb3J0RGFzaGJvYXJkU2VydmljZSB9IGZyb20gJy4vcmVwb3J0LWRhc2hib2FyZC5zZXJ2aWNlJztcblxuY29uc3QgUkVQT1JUU19OQVZJR0FUT1JfTk9ERV9QUklPUklUWSA9IDQwO1xuZXhwb3J0IGNvbnN0IFJFUE9SVF9ERUZBVUxUX05BVklHQVRJT05fTk9ERV9QUklPUklUWSA9IDMwO1xuXG5ASW5qZWN0YWJsZSh7IHByb3ZpZGVkSW46ICdyb290JyB9KVxuZXhwb3J0IGNsYXNzIFJlcG9ydERhc2hib2FyZE5hdmlnYXRpb25GYWN0b3J5IHtcbiAgbG9hZGVkID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBuYXZpZ2F0b3JTZXJ2aWNlOiBOYXZpZ2F0b3JTZXJ2aWNlLFxuICAgIHByaXZhdGUgaW52ZW50b3J5U2VydmljZTogSW52ZW50b3J5U2VydmljZSxcbiAgICBwcml2YXRlIHJlcG9ydERhc2hib2FyZFNlcnZpY2U6IFJlcG9ydERhc2hib2FyZFNlcnZpY2VcbiAgKSB7fVxuXG4gIGFzeW5jIGdldCgpIHtcbiAgICBpZiAoIXRoaXMubG9hZGVkKSB7XG4gICAgICB0aGlzLmxvYWRlZCA9IHRydWU7XG5cbiAgICAgIHRoaXMubmF2aWdhdG9yU2VydmljZS5hZGQoXG4gICAgICAgIG5ldyBOYXZpZ2F0b3JOb2RlKHtcbiAgICAgICAgICBsYWJlbDogZ2V0dGV4dCgnUmVwb3J0cycpLFxuICAgICAgICAgIHBhdGg6ICdyZXBvcnRzJyxcbiAgICAgICAgICBpY29uOiAnYzh5LXJlcG9ydHMnLFxuICAgICAgICAgIGZlYXR1cmVJZDogJ3JlcG9ydHMnLFxuICAgICAgICAgIHByaW9yaXR5OiBSRVBPUlRTX05BVklHQVRPUl9OT0RFX1BSSU9SSVRZXG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICBjb25zdCByZXBvcnRzOiBJTWFuYWdlZE9iamVjdFtdID0gKFxuICAgICAgICBhd2FpdCB0aGlzLnJlcG9ydERhc2hib2FyZFNlcnZpY2UubGlzdFJlcG9ydHMoe1xuICAgICAgICAgIGZpbHRlcjogeyBfX2hhczogJ2M4eV9Jc05hdmlnYXRvck5vZGUnIH0sXG4gICAgICAgICAgcGFnZVNpemU6IDIwMDBcbiAgICAgICAgfSlcbiAgICAgICkuZGF0YTtcbiAgICAgIHJlcG9ydHMuZm9yRWFjaChyZXBvcnQgPT4ge1xuICAgICAgICBjb25zdCBub2RlID0gbmV3IE5hdmlnYXRvck5vZGUoe1xuICAgICAgICAgIGxhYmVsOiByZXBvcnQubmFtZSxcbiAgICAgICAgICBwYXRoOiBgcmVwb3J0cy8ke3JlcG9ydC5pZH1gLFxuICAgICAgICAgIGljb246IHJlcG9ydC5pY29uLFxuICAgICAgICAgIHByaW9yaXR5OiByZXBvcnQucHJpb3JpdHksXG4gICAgICAgICAgcm91dGVyTGlua0V4YWN0OiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5uYXZpZ2F0b3JTZXJ2aWNlLmFkZChub2RlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IERBU0hCT0FSRF9USEVNRV9DTEFTU0VTLCBXSURHRVRfSEVBREVSX0NMQVNTRVMgfSBmcm9tICcuL2NvbnRleHQtZGFzaGJvYXJkLm1vZGVsJztcbmltcG9ydCB7IENvbnRyb2xDb250YWluZXIsIE5nRm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYzh5LWFwcGVhcmFuY2Utc2V0dGluZ3MnLFxuICB0ZW1wbGF0ZVVybDogJy4vYXBwZWFyYW5jZS1zZXR0aW5ncy5jb21wb25lbnQuaHRtbCcsXG4gIHZpZXdQcm92aWRlcnM6IFt7IHByb3ZpZGU6IENvbnRyb2xDb250YWluZXIsIHVzZUV4aXN0aW5nOiBOZ0Zvcm0gfV1cbn0pXG5leHBvcnQgY2xhc3MgQXBwZWFyYW5jZVNldHRpbmdzQ29tcG9uZW50IHtcbiAgQElucHV0KClcbiAgdGhlbWVDbGFzcyA9ICdkYXNoYm9hcmQtdGhlbWUtbGlnaHQnO1xuICBASW5wdXQoKVxuICBoZWFkZXJDbGFzcyA9ICdwYW5lbC10aXRsZS1yZWd1bGFyJztcbiAgQElucHV0KClcbiAgZGVmYXVsdFRoZW1lQ2xhc3M6IHN0cmluZztcbiAgQElucHV0KClcbiAgZGVmYXVsdEhlYWRlckNsYXNzOiBzdHJpbmc7XG4gIEBPdXRwdXQoKVxuICB0aGVtZUNsYXNzQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxzdHJpbmc+KCk7XG4gIEBPdXRwdXQoKVxuICBoZWFkZXJDbGFzc0NoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuXG4gIEBJbnB1dCgpXG4gIHBvc3NpYmxlU3R5bGluZ1RoZW1lID0gREFTSEJPQVJEX1RIRU1FX0NMQVNTRVM7XG5cbiAgQElucHV0KClcbiAgcG9zc2libGVTdHlsaW5nSGVhZGVyID0gV0lER0VUX0hFQURFUl9DTEFTU0VTO1xuXG4gIHRoZW1lQ2xhc3NDbGljayh2YWx1ZSkge1xuICAgIHZhbHVlID0gdGhpcy5yZXNldFRvRGVmYXVsdCh2YWx1ZSwgdGhpcy50aGVtZUNsYXNzLCB0aGlzLmRlZmF1bHRUaGVtZUNsYXNzKTtcbiAgICB0aGlzLnRoZW1lQ2xhc3MgPSB2YWx1ZTtcbiAgICB0aGlzLnRoZW1lQ2xhc3NDaGFuZ2UuZW1pdCh2YWx1ZSk7XG4gIH1cblxuICBoZWFkZXJDbGFzc0NsaWNrKHZhbHVlKSB7XG4gICAgdmFsdWUgPSB0aGlzLnJlc2V0VG9EZWZhdWx0KHZhbHVlLCB0aGlzLmhlYWRlckNsYXNzLCB0aGlzLmRlZmF1bHRIZWFkZXJDbGFzcyk7XG4gICAgdGhpcy5oZWFkZXJDbGFzcyA9IHZhbHVlO1xuICAgIHRoaXMuaGVhZGVyQ2xhc3NDaGFuZ2UuZW1pdCh2YWx1ZSk7XG4gIH1cblxuICBwcml2YXRlIHJlc2V0VG9EZWZhdWx0KHZhbHVlOiBzdHJpbmcsIGNvbXBhcmVUbzogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IHN0cmluZykge1xuICAgIGlmIChkZWZhdWx0VmFsdWUgJiYgdmFsdWUgPT09IGNvbXBhcmVUbykge1xuICAgICAgdmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufVxuIiwiPGRpdiBjbGFzcz1cImxlZ2VuZCBmb3JtLWJsb2NrXCI+XG4gIDxzcGFuIHRyYW5zbGF0ZT5MYXlvdXQ8L3NwYW4+XG48L2Rpdj5cbjxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgPGRpdiBjbGFzcz1cImNvbC1zbS02IG0tYi0zMlwiPlxuICAgIDxsYWJlbCB0cmFuc2xhdGU+VGhlbWU8L2xhYmVsPlxuICAgIDx1bCBjbGFzcz1cImxpc3QtZ3JvdXBcIj5cbiAgICAgIDxsaVxuICAgICAgICBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbSBkLWZsZXggYS1pLWNlbnRlciBwLWwtMCBwLXItMCBmaXQtd1wiXG4gICAgICAgICpuZ0Zvcj1cImxldCB0aGVtZUNsYXNzSXRlbSBvZiBwb3NzaWJsZVN0eWxpbmdUaGVtZTsgbGV0IGkgPSBpbmRleFwiXG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJsaXN0LWl0ZW0tY2hlY2tib3hcIiBzdHlsZT1cIm1heC13aWR0aDogY2FsYygxMDAlIC0gMjRweClcIj5cbiAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJjOHktcmFkaW9cIj5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwicmFkaW9cIlxuICAgICAgICAgICAgICBbaWRdPVwiJ2dyb3VwcmFkaW9jb250ZW50Y2xhc3MnICsgaVwiXG4gICAgICAgICAgICAgIG5hbWU9XCJjb250ZW50XCJcbiAgICAgICAgICAgICAgW3ZhbHVlXT1cInRoZW1lQ2xhc3NJdGVtLmNsYXNzXCJcbiAgICAgICAgICAgICAgW25nTW9kZWxdPVwidGhlbWVDbGFzc1wiXG4gICAgICAgICAgICAgIChjbGljayk9XCJ0aGVtZUNsYXNzQ2xpY2sodGhlbWVDbGFzc0l0ZW0uY2xhc3MpXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8c3Bhbj48L3NwYW4+XG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICBjbGFzcz1cInRleHQtdHJ1bmNhdGVcIlxuICAgICAgICAgICAgICB0aXRsZT1cInt7IHRoZW1lQ2xhc3NJdGVtLmxhYmVsIHwgdHJhbnNsYXRlIH19e3tcbiAgICAgICAgICAgICAgICB0aGVtZUNsYXNzSXRlbS5jbGFzcyA9PT0gZGVmYXVsdFRoZW1lQ2xhc3NcbiAgICAgICAgICAgICAgICAgID8gJyB8ICcgKyAoJ0Rhc2hib2FyZCBkZWZhdWx0JyB8IHRyYW5zbGF0ZSlcbiAgICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgICAgfX1cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8c3Bhbj57eyB0aGVtZUNsYXNzSXRlbS5sYWJlbCB8IHRyYW5zbGF0ZSB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgPGJyIC8+XG4gICAgICAgICAgICAgIDxzbWFsbFxuICAgICAgICAgICAgICAgICpuZ0lmPVwidGhlbWVDbGFzc0l0ZW0uY2xhc3MgPT09IGRlZmF1bHRUaGVtZUNsYXNzXCJcbiAgICAgICAgICAgICAgICBjbGFzcz1cInRleHQtbXV0ZWRcIlxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgRGFzaGJvYXJkIGRlZmF1bHRcbiAgICAgICAgICAgICAgPC9zbWFsbD5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgY2xhc3M9XCJidG4taGVscCBidG4taGVscC0tc20gbS1sLWF1dG9cIlxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiJ0hlbHAnIHwgdHJhbnNsYXRlXCJcbiAgICAgICAgICBwb3BvdmVyPVwie3sgdGhlbWVDbGFzc0l0ZW0uZGVzY3JpcHRpb24gfCB0cmFuc2xhdGUgfX1cIlxuICAgICAgICAgIHBsYWNlbWVudD1cInRvcFwiXG4gICAgICAgICAgdHJpZ2dlcnM9XCJmb2N1c1wiXG4gICAgICAgICAgY29udGFpbmVyPVwiYm9keVwiXG4gICAgICAgID48L2J1dHRvbj5cbiAgICAgIDwvbGk+XG4gICAgPC91bD5cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9XCJjb2wtc20tNlwiPlxuICAgIDxsYWJlbCB0cmFuc2xhdGU+V2lkZ2V0IGhlYWRlciBzdHlsZTwvbGFiZWw+XG4gICAgPHVsIGNsYXNzPVwibGlzdC1ncm91cFwiPlxuICAgICAgPGxpXG4gICAgICAgIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtIGQtZmxleCBhLWktY2VudGVyIHAtbC0wIHAtci0wXCJcbiAgICAgICAgKm5nRm9yPVwibGV0IGhlYWRlckNsYXNzSXRlbSBvZiBwb3NzaWJsZVN0eWxpbmdIZWFkZXI7IGxldCBpID0gaW5kZXhcIlxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibGlzdC1pdGVtLWNoZWNrYm94XCIgc3R5bGU9XCJtYXgtd2lkdGg6IGNhbGMoMTAwJSAtIDI0cHgpXCI+XG4gICAgICAgICAgPGxhYmVsIGNsYXNzPVwiYzh5LXJhZGlvXCI+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cInJhZGlvXCJcbiAgICAgICAgICAgICAgW2lkXT1cIidncm91cHJhZGlvaGVhZGVyY2xhc3MnICsgaVwiXG4gICAgICAgICAgICAgIG5hbWU9XCJoZWFkZXJcIlxuICAgICAgICAgICAgICBbdmFsdWVdPVwiaGVhZGVyQ2xhc3NJdGVtLmNsYXNzXCJcbiAgICAgICAgICAgICAgW25nTW9kZWxdPVwiaGVhZGVyQ2xhc3NcIlxuICAgICAgICAgICAgICAoY2xpY2spPVwiaGVhZGVyQ2xhc3NDbGljayhoZWFkZXJDbGFzc0l0ZW0uY2xhc3MpXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8c3Bhbj48L3NwYW4+XG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICBjbGFzcz1cInRleHQtdHJ1bmNhdGVcIlxuICAgICAgICAgICAgICB0aXRsZT1cInt7IGhlYWRlckNsYXNzSXRlbS5sYWJlbCB8IHRyYW5zbGF0ZSB9fXt7XG4gICAgICAgICAgICAgICAgaGVhZGVyQ2xhc3NJdGVtLmNsYXNzID09PSBkZWZhdWx0SGVhZGVyQ2xhc3NcbiAgICAgICAgICAgICAgICAgID8gJyB8ICcgKyAoJ0Rhc2hib2FyZCBkZWZhdWx0JyB8IHRyYW5zbGF0ZSlcbiAgICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgICAgfX1cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8c3Bhbj57eyBoZWFkZXJDbGFzc0l0ZW0ubGFiZWwgfCB0cmFuc2xhdGUgfX08L3NwYW4+XG4gICAgICAgICAgICAgIDxiciAvPlxuICAgICAgICAgICAgICA8c21hbGxcbiAgICAgICAgICAgICAgICAqbmdJZj1cImhlYWRlckNsYXNzSXRlbS5jbGFzcyA9PT0gZGVmYXVsdEhlYWRlckNsYXNzXCJcbiAgICAgICAgICAgICAgICBjbGFzcz1cInRleHQtbXV0ZWRcIlxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgRGFzaGJvYXJkIGRlZmF1bHRcbiAgICAgICAgICAgICAgPC9zbWFsbD5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIGNsYXNzPVwiYnRuLWhlbHAgYnRuLWhlbHAtLXNtIG0tbC1hdXRvXCJcbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cIidIZWxwJyB8IHRyYW5zbGF0ZVwiXG4gICAgICAgICAgcG9wb3Zlcj1cInt7IGhlYWRlckNsYXNzSXRlbS5kZXNjcmlwdGlvbiB8IHRyYW5zbGF0ZSB9fVwiXG4gICAgICAgICAgcGxhY2VtZW50PVwidG9wXCJcbiAgICAgICAgICB0cmlnZ2Vycz1cImZvY3VzXCJcbiAgICAgICAgICBjb250YWluZXI9XCJib2R5XCJcbiAgICAgICAgPjwvYnV0dG9uPlxuICAgICAgPC9saT5cbiAgICA8L3VsPlxuICA8L2Rpdj5cbjwvZGl2PlxuIiwiaW1wb3J0IHsgSW5wdXQsIENvbXBvbmVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjOHktd2lkZ2V0LXByZXZpZXcnLFxuICB0ZW1wbGF0ZVVybDogJy4vd2lkZ2V0LXByZXZpZXcuY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIFdpZGdldFByZXZpZXdDb21wb25lbnQge1xuICBASW5wdXQoKVxuICBwcmV2aWV3Q2xhc3NlczogeyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0gPSB7XG4gICAgJ2Rhc2hib2FyZC10aGVtZS1saWdodCc6IHRydWUsXG4gICAgJ3BhbmVsLXRpdGxlLXJlZ3VsYXInOiB0cnVlXG4gIH07XG5cbiAgQElucHV0KClcbiAgdGFiOiB7IG5hbWU6IHN0cmluZzsgaWNvbjogc3RyaW5nIH07XG59XG4iLCI8ZGl2IGNsYXNzPVwibGVnZW5kIGZvcm0tYmxvY2tcIiB0cmFuc2xhdGU+UHJldmlldzwvZGl2PlxuPGxhYmVsICpuZ0lmPVwidGFiXCIgdHJhbnNsYXRlPlRhYiBhbmQgbGF5b3V0PC9sYWJlbD5cbjxsYWJlbCAqbmdJZj1cIiF0YWJcIiB0cmFuc2xhdGU+TGF5b3V0PC9sYWJlbD5cbjxkaXYgY2xhc3M9XCJkYXNoYm9hcmQtcHJldmlldy1zbG90XCIgW25nQ2xhc3NdPVwicHJldmlld0NsYXNzZXNcIj5cbiAgPGRpdlxuICAgIGNsYXNzPVwicGFnZS10YWJzIHBhZ2UtdGFicy1ob3Jpem9udGFsIG5hdmlnYXRvci1vcGVuIHAtYWJzb2x1dGUgb3ZlcmZsb3ctaGlkZGVuXCJcbiAgICBzdHlsZT1cImxlZnQ6IDA7IG1hcmdpbjogMCAxNXB4XCJcbiAgICAqbmdJZj1cInRhYlwiXG4gID5cbiAgICA8ZGl2IGNsYXNzPVwidGFiQ29udGFpbmVyIGhpZGRlbi14c1wiPlxuICAgICAgPHVsIHJvbGU9XCJtZW51XCIgY2xhc3M9XCJuYXYgbmF2LXRhYnMgbmF2LXRhYnNjOHlcIj5cbiAgICAgICAgPGxpIHJvbGU9XCJtZW51aXRlbVwiIGNsYXNzPVwiYWN0aXZlXCIgc3R5bGU9XCJsZWZ0OiAxNnB4XCI+XG4gICAgICAgICAgPGEgcm91dGVybGlua2FjdGl2ZT1cIlwiIHRpdGxlPVwie3sgdGFiLm5hbWUgfX1cIj5cbiAgICAgICAgICAgIDxpIGNsYXNzPVwidGV4dC1wcmltYXJ5XCIgW2M4eUljb25dPVwidGFiLmljb25cIj48L2k+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInR4dFwiPnt7IHRhYi5uYW1lIH19PC9zcGFuPlxuICAgICAgICAgIDwvYT5cbiAgICAgICAgPC9saT5cbiAgICAgIDwvdWw+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cInZpc2libGUteHMgbW9iaWxlLXRhYnNcIj48L2Rpdj5cbiAgPC9kaXY+XG4gIDxkaXYgW25nQ2xhc3NdPVwieyAnbS10LTY0JzogISF0YWIgfVwiPlxuICAgIDxkaXYgY2xhc3M9XCJjYXJkIGNhcmQtZGFzaGJvYXJkXCIgc3R5bGU9XCJoZWlnaHQ6IDMwMHB4XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1oZWFkZXItYWN0aW9uc1wiIHN0eWxlPVwiei1pbmRleDogOFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC10aXRsZVwiPlxuICAgICAgICAgIDxzcGFuIHRyYW5zbGF0ZT5XaWRnZXQgdGl0bGU8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyLWFjdGlvbnNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwib3B0aW9uc0J0biBkcm9wZG93blwiPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgdGl0bGU9XCJ7eyAnU2V0dGluZ3MnIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICAgICAgICAgKGNsaWNrKT1cIihmYWxzZSlcIlxuICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tZG90IGRyb3Bkb3duLXRvZ2dsZSBjOHktZHJvcGRvd25cIlxuICAgICAgICAgICAgICBhcmlhLWhhc3BvcHVwPVwidHJ1ZVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxpIGM4eUljb249XCJjb2dcIj48L2k+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWlubmVyLXNjcm9sbCBwLXQtMTZcIj5cbiAgICAgICAgPHAgdHJhbnNsYXRlPldpZGdldCBleGFtcGxlIGNvbnRlbnQuPC9wPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9kaXY+XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBJVXNlckdyb3VwLCBVc2VyR3JvdXBTZXJ2aWNlIH0gZnJvbSAnQGM4eS9jbGllbnQnO1xuaW1wb3J0IHsgR2FpbnNpZ2h0U2VydmljZSwgSXRlbSB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuaW1wb3J0IHtcbiAgRGFzaGJvYXJkR2xvYmFsUm9sZXMsXG4gIEFMTF9HTE9CQUxfUk9MRVNfU0VMRUNURUQsXG4gIFBST0RVQ1RfRVhQRVJJRU5DRVxufSBmcm9tICcuL2NvbnRleHQtZGFzaGJvYXJkLm1vZGVsJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYzh5LWRhc2hib2FyZC1hdmFpbGFiaWxpdHknLFxuICB0ZW1wbGF0ZVVybDogJy4vZGFzaGJvYXJkLWF2YWlsYWJpbGl0eS5jb21wb25lbnQuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgRGFzaGJvYXJkQXZhaWxhYmlsaXR5Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgLyoqXG4gICAqIElkcyBvZiBnbG9iYWwgcm9sZXMgYXNzaWduZWQgdG8gdGhlIGRhc2hib2FyZCBvciBhIHN0cmluZyBcImFsbFwiIGluZGljYXRpbmcgdGhlIHNlbGVjdGlvbiBvZiBhbGwgZ2xvYmFsIHJvbGVzLlxuICAgKiBUaGUgdmFsdWUgdW5kZWZpbmVkIGlzIHRyZWF0ZWQgYXMgZXF1aXZhbGVudCB0byAnYWxsJy5cbiAgICovXG4gIEBJbnB1dCgpXG4gIGdldCBnbG9iYWxSb2xlc0lkcygpOiBEYXNoYm9hcmRHbG9iYWxSb2xlcyB7XG4gICAgcmV0dXJuIHRoaXMuX2dsb2JhbFJvbGVzSWRzO1xuICB9XG4gIHNldCBnbG9iYWxSb2xlc0lkcyhpZHM6IERhc2hib2FyZEdsb2JhbFJvbGVzKSB7XG4gICAgaWYgKCFpZHMgfHwgaWRzID09PSBBTExfR0xPQkFMX1JPTEVTX1NFTEVDVEVEKSB7XG4gICAgICB0aGlzLl9nbG9iYWxSb2xlc0lkcyA9IEFMTF9HTE9CQUxfUk9MRVNfU0VMRUNURUQ7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2dsb2JhbFJvbGVzSWRzID0gWy4uLmlkc107XG4gIH1cbiAgQE91dHB1dCgpIGdsb2JhbFJvbGVzSWRzQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxEYXNoYm9hcmRHbG9iYWxSb2xlcz4oKTtcbiAgZ2xvYmFsUm9sZXNJdGVtczogSXRlbVtdID0gW107XG4gIGdsb2JhbFJvbGVzSXRlbXNTZWxlY3RlZDogSXRlbVtdID0gW107XG4gIHByaXZhdGUgZ2xvYmFsUm9sZXM6IElVc2VyR3JvdXBbXSA9IFtdO1xuICBwcml2YXRlIFBBR0VfU0laRSA9IDEwMDtcbiAgcHJpdmF0ZSBfZ2xvYmFsUm9sZXNJZHM6IERhc2hib2FyZEdsb2JhbFJvbGVzO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgdXNlckdyb3VwU2VydmljZTogVXNlckdyb3VwU2VydmljZSxcbiAgICBwcml2YXRlIGdhaW5zaWdodFNlcnZpY2U6IEdhaW5zaWdodFNlcnZpY2VcbiAgKSB7fVxuXG4gIGFzeW5jIG5nT25Jbml0KCkge1xuICAgIHRoaXMuZ2xvYmFsUm9sZXMgPSBhd2FpdCB0aGlzLmdldEdsb2JhbFJvbGVzKCk7XG4gICAgdGhpcy5nbG9iYWxSb2xlc0l0ZW1zID0gdGhpcy5tYXBHbG9iYWxSb2xlc1RvSXRlbXMoKTtcbiAgICB0aGlzLmdsb2JhbFJvbGVzSXRlbXNTZWxlY3RlZCA9IHRoaXMuZ2V0U2VsZWN0ZWRHbG9iYWxSb2xlc0l0ZW1zKCk7XG4gIH1cblxuICBvblNlbGVjdGVkKGl0ZW1zOiBJdGVtW10pIHtcbiAgICBpZiAoIWl0ZW1zIHx8ICFBcnJheS5pc0FycmF5KGl0ZW1zKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGFsbEl0ZW1zU2VsZWN0ZWQgPSBpdGVtcy5sZW5ndGggPT09IHRoaXMuZ2xvYmFsUm9sZXNJdGVtcy5sZW5ndGg7XG4gICAgdGhpcy5nbG9iYWxSb2xlc0l0ZW1zU2VsZWN0ZWQgPSBpdGVtcztcblxuICAgIGlmIChhbGxJdGVtc1NlbGVjdGVkKSB7XG4gICAgICB0aGlzLmdsb2JhbFJvbGVzSWRzQ2hhbmdlLmVtaXQoQUxMX0dMT0JBTF9ST0xFU19TRUxFQ1RFRCk7XG4gICAgICB0aGlzLmdhaW5zaWdodFNlcnZpY2UudHJpZ2dlckV2ZW50KFxuICAgICAgICBQUk9EVUNUX0VYUEVSSUVOQ0UuREFTSEJPQVJELkVWRU5UUy5EQVNIQk9BUkRfQVZBSUxBQklMSVRZLFxuICAgICAgICB7XG4gICAgICAgICAgY29tcG9uZW50OiBQUk9EVUNUX0VYUEVSSUVOQ0UuREFTSEJPQVJELkNPTVBPTkVOVFMuREFTSEJPQVJEX0FWQUlMQUJJTElUWSxcbiAgICAgICAgICBhY3Rpb246IFBST0RVQ1RfRVhQRVJJRU5DRS5EQVNIQk9BUkQuQUNUSU9OUy5BUFBMWV9HTE9CQUxfUk9MRVNfQ0hBTkdFUyxcbiAgICAgICAgICBnbG9iYWxSb2xlczogQUxMX0dMT0JBTF9ST0xFU19TRUxFQ1RFRFxuICAgICAgICB9XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzZWxlY3RlZEdsb2JhbFJvbGVzSWRzID0gaXRlbXMubWFwKGkgPT4gaS5pZCk7XG4gICAgICB0aGlzLmdsb2JhbFJvbGVzSWRzQ2hhbmdlLmVtaXQoWy4uLnNlbGVjdGVkR2xvYmFsUm9sZXNJZHNdKTtcblxuICAgICAgdGhpcy5nYWluc2lnaHRTZXJ2aWNlLnRyaWdnZXJFdmVudChcbiAgICAgICAgUFJPRFVDVF9FWFBFUklFTkNFLkRBU0hCT0FSRC5FVkVOVFMuREFTSEJPQVJEX0FWQUlMQUJJTElUWSxcbiAgICAgICAge1xuICAgICAgICAgIGNvbXBvbmVudDogUFJPRFVDVF9FWFBFUklFTkNFLkRBU0hCT0FSRC5DT01QT05FTlRTLkRBU0hCT0FSRF9BVkFJTEFCSUxJVFksXG4gICAgICAgICAgYWN0aW9uOiBQUk9EVUNUX0VYUEVSSUVOQ0UuREFTSEJPQVJELkFDVElPTlMuQVBQTFlfR0xPQkFMX1JPTEVTX0NIQU5HRVMsXG4gICAgICAgICAgZ2xvYmFsUm9sZXM6IHNlbGVjdGVkR2xvYmFsUm9sZXNJZHM/LnNvcnQoKT8uam9pbigpXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRHbG9iYWxSb2xlcygpIHtcbiAgICByZXR1cm4gKGF3YWl0IHRoaXMudXNlckdyb3VwU2VydmljZS5saXN0KHsgcGFnZVNpemU6IHRoaXMuUEFHRV9TSVpFIH0pKS5kYXRhO1xuICB9XG5cbiAgcHJpdmF0ZSBtYXBHbG9iYWxSb2xlc1RvSXRlbXMoKTogSXRlbVtdIHtcbiAgICByZXR1cm4gdGhpcy5nbG9iYWxSb2xlcy5tYXAoKHsgbmFtZSwgaWQgfSkgPT4gKHtcbiAgICAgIG5hbWUsXG4gICAgICBpZFxuICAgIH0pKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0U2VsZWN0ZWRHbG9iYWxSb2xlc0l0ZW1zKCk6IEl0ZW1bXSB7XG4gICAgaWYgKCF0aGlzLmdsb2JhbFJvbGVzSWRzIHx8IHRoaXMuZ2xvYmFsUm9sZXNJZHMgPT09IEFMTF9HTE9CQUxfUk9MRVNfU0VMRUNURUQpIHtcbiAgICAgIHJldHVybiB0aGlzLmdsb2JhbFJvbGVzSXRlbXM7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmdsb2JhbFJvbGVzSWRzXG4gICAgICAubWFwKGdsb2JhbFJvbGVJZCA9PiB0aGlzLmdsb2JhbFJvbGVzSXRlbXMuZmluZChnUiA9PiBnUi5pZCA9PT0gZ2xvYmFsUm9sZUlkKSlcbiAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG4gIH1cbn1cbiIsIjxjOHktZm9ybS1ncm91cCBjbGFzcz1cInAtYi0yNCBtLWItMFwiPlxuICA8ZGl2IGNsYXNzPVwibGVnZW5kIGZvcm0tYmxvY2tcIj5cbiAgICA8c3Bhbj57eyAnQXZhaWxhYmlsaXR5JyB8IHRyYW5zbGF0ZSB9fTwvc3Bhbj5cbiAgPC9kaXY+XG4gIDxsYWJlbCBmb3I9XCJhdmFpbGFiaWxpdHlcIj5cbiAgICA8c3BhbiBjbGFzcz1cIm0tci00XCIgaWQ9XCJhdmFpbGFiaWxpdHlcIj5cbiAgICAgIHt7ICdHbG9iYWwgcm9sZXMnIHwgdHJhbnNsYXRlIH19XG4gICAgPC9zcGFuPlxuICAgIDxidXR0b25cbiAgICAgIGNsYXNzPVwiYnRuLWhlbHAgYnRuLWhlbHAtLXNtXCJcbiAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCInSGVscCcgfCB0cmFuc2xhdGVcIlxuICAgICAgcG9wb3Zlcj1cInt7XG4gICAgICAgICdTZWxlY3QgdGhlIGdsb2JhbCByb2xlcyBmb3Igd2hpY2ggdGhlIGRhc2hib2FyZCB3aWxsIGJlIGF2YWlsYWJsZScgfCB0cmFuc2xhdGVcbiAgICAgIH19XCJcbiAgICAgIHRyaWdnZXJzPVwiZm9jdXNcIlxuICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgY29udGFpbmVyPVwiYm9keVwiXG4gICAgPlxuICAgIDwvYnV0dG9uPlxuICA8L2xhYmVsPlxuICA8Yzh5LXNlbGVjdFxuICAgIHN0eWxlPVwid2lkdGg6IDE4MHB4XCJcbiAgICBbaXRlbXNdPVwiZ2xvYmFsUm9sZXNJdGVtc1wiXG4gICAgW3NlbGVjdGVkXT1cImdsb2JhbFJvbGVzSXRlbXNTZWxlY3RlZFwiXG4gICAgKG9uQ2hhbmdlKT1cIm9uU2VsZWN0ZWQoJGV2ZW50KVwiXG4gID48L2M4eS1zZWxlY3Q+XG48L2M4eS1mb3JtLWdyb3VwPlxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBJbmplY3QsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTmdGb3JtIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHtcbiAgZ2V0dGV4dCxcbiAgSUNPTl9MSVNULFxuICBOYXZpZ2F0b3JOb2RlLFxuICBOYXZpZ2F0b3JTZXJ2aWNlLFxuICBQZXJtaXNzaW9uc1xufSBmcm9tICdAYzh5L25neC1jb21wb25lbnRzJztcbmltcG9ydCB7IFRyYW5zbGF0ZVNlcnZpY2UgfSBmcm9tICdAbmd4LXRyYW5zbGF0ZS9jb3JlJztcbmltcG9ydCB7IGNsb25lIH0gZnJvbSAnbG9kYXNoLWVzJztcbmltcG9ydCB7IEJzTW9kYWxSZWYgfSBmcm9tICduZ3gtYm9vdHN0cmFwL21vZGFsJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7XG4gIENvbnRleHREYXNoYm9hcmQsXG4gIERBU0hCT0FSRF9USEVNRV9DTEFTU0VTLFxuICBXSURHRVRfSEVBREVSX0NMQVNTRVMsXG4gIERhc2hib2FyZEdsb2JhbFJvbGVzXG59IGZyb20gJy4vY29udGV4dC1kYXNoYm9hcmQubW9kZWwnO1xuaW1wb3J0IHsgQ29udGV4dERhc2hib2FyZFNlcnZpY2UgfSBmcm9tICcuL2NvbnRleHQtZGFzaGJvYXJkLnNlcnZpY2UnO1xuaW1wb3J0IHsgUkVQT1JUX0RFRkFVTFRfTkFWSUdBVElPTl9OT0RFX1BSSU9SSVRZIH0gZnJvbSAnLi9yZXBvcnQtZGFzaGJvYXJkL3JlcG9ydC1kYXNoYm9hcmQtbmF2aWdhdGlvbi5mYWN0b3J5JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYzh5LWRhc2hib2FyZC1kZXRhaWwnLFxuICB0ZW1wbGF0ZVVybDogJy4vZGFzaGJvYXJkLWRldGFpbC5jb21wb25lbnQuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgRGFzaGJvYXJkRGV0YWlsQ29tcG9uZW50IHtcbiAgQFZpZXdDaGlsZCgnZGFzaGJvYXJkRGV0YWlsRm9ybScsIHsgc3RhdGljOiB0cnVlIH0pIGRhc2hib2FyZERldGFpbEZvcm06IE5nRm9ybTtcbiAgZGFzaGJvYXJkOiBDb250ZXh0RGFzaGJvYXJkO1xuICBjdXJyZW50RGFzaGJvYXJkOiBDb250ZXh0RGFzaGJvYXJkO1xuICBkYXNoYm9hcmROYW1lOiBzdHJpbmc7XG4gIGlzUmVwb3J0OiBib29sZWFuO1xuICBkZXZpY2VUeXBlOiBzdHJpbmc7XG4gIGlzTmFtZWREYXNoYm9hcmQ6IGJvb2xlYW47XG4gIGlzRGV2aWNlVHlwZTogYm9vbGVhbjtcbiAgaWNvbnM6IHN0cmluZ1tdO1xuICBmaWx0ZXJlZEljb25zOiBzdHJpbmdbXTtcbiAgc3R5bGluZyA9IHtcbiAgICB0aGVtZUNsYXNzOiAnZGFzaGJvYXJkLXRoZW1lLWxpZ2h0JyxcbiAgICBoZWFkZXJDbGFzczogJ3BhbmVsLXRpdGxlLXJlZ3VsYXInXG4gIH07XG4gIHBvc3NpYmxlU3R5bGluZyA9IHsgREFTSEJPQVJEX1RIRU1FX0NMQVNTRVMsIFdJREdFVF9IRUFERVJfQ0xBU1NFUyB9O1xuICB0aXRsZTogc3RyaW5nO1xuICBuYW1lUGxhY2Vob2xkZXI6IHN0cmluZztcbiAgbmF2aWdhdG9yTm9kZXMkOiBPYnNlcnZhYmxlPE5hdmlnYXRvck5vZGVbXT47XG4gIHJlc3VsdDogUHJvbWlzZTxDb250ZXh0RGFzaGJvYXJkPiA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB0aGlzLl9zYXZlID0gcmVzb2x2ZTtcbiAgICB0aGlzLl9jYW5jZWwgPSByZWplY3Q7XG4gIH0pO1xuICBnbG9iYWxSb2xlc0lkczogRGFzaGJvYXJkR2xvYmFsUm9sZXM7XG5cbiAgYXBwbHlUb0RldmljZXNPZlR5cGVQZXJtaXR0ZWQ6IGJvb2xlYW47XG4gIGdldCBhcHBseVRvRGV2aWNlc09mVHlwZVRpdGxlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdGV4dCA9IHRoaXMuYXBwbHlUb0RldmljZXNPZlR5cGVQZXJtaXR0ZWRcbiAgICAgID8gZ2V0dGV4dCgnQXBwbHkgZGFzaGJvYXJkIHRvIGFsbCBkZXZpY2VzIG9mIHR5cGUge3sgdHlwZSB9fScpXG4gICAgICA6IGdldHRleHQoJ0FwcGx5IGRhc2hib2FyZCB0byBhbGwgZGV2aWNlcyBvZiB0eXBlIHt7IHR5cGUgfX0gKHBlcm1pc3Npb24gcmVxdWlyZWQpJyk7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KHRleHQsIHsgdHlwZTogdGhpcy5kYXNoYm9hcmQuZGV2aWNlVHlwZVZhbHVlIH0pO1xuICB9XG5cbiAgcmVhZG9ubHkgREVGQVVMVF9EQVNIQk9BUkRfTUFSR0lOID0gMTI7XG4gIHJlYWRvbmx5IERFRkFVTFRfREFTSEJPQVJEX0lDT04gPSAndGgnO1xuICByZWFkb25seSBERUZBVUxUX0RBU0hCT0FSRF9QUklPUklUWSA9IDEwMDAwO1xuXG4gIHByaXZhdGUgX3NhdmU7XG4gIHByaXZhdGUgX2NhbmNlbDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIG1vZGFsOiBCc01vZGFsUmVmLFxuICAgIEBJbmplY3QoSUNPTl9MSVNUKSBpY29uTGlzdDogc3RyaW5nW10sXG4gICAgcHJpdmF0ZSBjb250ZXh0RGFzaGJvYXJkU2VydmljZTogQ29udGV4dERhc2hib2FyZFNlcnZpY2UsXG4gICAgcHJpdmF0ZSBuYXZpZ2F0b3JTZXJ2aWNlOiBOYXZpZ2F0b3JTZXJ2aWNlLFxuICAgIHByaXZhdGUgcGVybWlzc2lvbnNTZXJ2aWNlOiBQZXJtaXNzaW9ucyxcbiAgICBwcml2YXRlIHRyYW5zbGF0ZVNlcnZpY2U6IFRyYW5zbGF0ZVNlcnZpY2VcbiAgKSB7XG4gICAgdGhpcy5pY29ucyA9IGljb25MaXN0O1xuICAgIHRoaXMuZmlsdGVyZWRJY29ucyA9IGljb25MaXN0O1xuICB9XG5cbiAgbmdBZnRlckNvbnRlbnRJbml0KCk6IHZvaWQge1xuICAgIGNvbnN0IGRlZmF1bHREYXNoYm9hcmRDZmc6IFBhcnRpYWw8Q29udGV4dERhc2hib2FyZD4gPSB7XG4gICAgICBuYW1lOiB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCh0aGlzLmlzUmVwb3J0ID8gZ2V0dGV4dCgnUmVwb3J0JykgOiBnZXR0ZXh0KCdEYXNoYm9hcmQnKSksXG4gICAgICBwcmlvcml0eTogdGhpcy5pc1JlcG9ydFxuICAgICAgICA/IFJFUE9SVF9ERUZBVUxUX05BVklHQVRJT05fTk9ERV9QUklPUklUWVxuICAgICAgICA6IHRoaXMuREVGQVVMVF9EQVNIQk9BUkRfUFJJT1JJVFksXG4gICAgICBpY29uOiB0aGlzLkRFRkFVTFRfREFTSEJPQVJEX0lDT04sXG4gICAgICBkZXZpY2VUeXBlVmFsdWU6IHRoaXMuZGV2aWNlVHlwZVxuICAgIH07XG5cbiAgICBpZiAodGhpcy5kYXNoYm9hcmQpIHtcbiAgICAgIHRoaXMuY3VycmVudERhc2hib2FyZCA9IGNsb25lKHRoaXMuZGFzaGJvYXJkKTtcbiAgICAgIHRoaXMuZGFzaGJvYXJkTmFtZSA9IHRoaXMuY3VycmVudERhc2hib2FyZC5uYW1lO1xuICAgICAgdGhpcy5zZXREYXNoYm9hcmRTdHlsZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRhc2hib2FyZCA9IGRlZmF1bHREYXNoYm9hcmRDZmc7XG4gICAgICB0aGlzLmRhc2hib2FyZE5hbWUgPSB0aGlzLmRhc2hib2FyZC5uYW1lO1xuICAgICAgdGhpcy5kYXNoYm9hcmREZXRhaWxGb3JtLmZvcm0ubWFya0FzRGlydHkoKTtcbiAgICB9XG4gICAgdGhpcy5zZXRUaXRsZSgpO1xuICAgIHRoaXMuc2V0dXBBcHBseVRvRGV2aWNlc09mVHlwZUNoZWNrYm94KCk7XG4gICAgdGhpcy5uYXZpZ2F0b3JOb2RlcyQgPSB0aGlzLm5hdmlnYXRvclNlcnZpY2UuaXRlbXMkO1xuICAgIHRoaXMubmFtZVBsYWNlaG9sZGVyID0gdGhpcy5pc1JlcG9ydCA/IGdldHRleHQoJ2UuZy4gTXkgcmVwb3J0JykgOiBnZXR0ZXh0KCdlLmcuIE15IGRhc2hib2FyZCcpO1xuICAgIHRoaXMuZ2xvYmFsUm9sZXNJZHMgPSB0aGlzLmRhc2hib2FyZC5nbG9iYWxSb2xlc0lkcztcbiAgfVxuXG4gIHNldFRpdGxlKCkge1xuICAgIGlmICghdGhpcy5jdXJyZW50RGFzaGJvYXJkKSB7XG4gICAgICB0aGlzLnRpdGxlID0gdGhpcy5pc1JlcG9ydCA/IGdldHRleHQoJ0FkZCByZXBvcnQnKSA6IGdldHRleHQoJ0FkZCBkYXNoYm9hcmQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50aXRsZSA9IHRoaXMuaXNSZXBvcnQgPyBnZXR0ZXh0KCdFZGl0IHJlcG9ydCcpIDogZ2V0dGV4dCgnRWRpdCBkYXNoYm9hcmQnKTtcbiAgICB9XG4gIH1cblxuICBzZXR1cEFwcGx5VG9EZXZpY2VzT2ZUeXBlQ2hlY2tib3goKSB7XG4gICAgY29uc3Qgcm9sZXNUb0NoZWNrID0gWydST0xFX0lOVkVOVE9SWV9DUkVBVEUnLCAnUk9MRV9JTlZFTlRPUllfQURNSU4nXTtcbiAgICB0aGlzLmFwcGx5VG9EZXZpY2VzT2ZUeXBlUGVybWl0dGVkID0gdGhpcy5wZXJtaXNzaW9uc1NlcnZpY2UuaGFzQW55Um9sZShyb2xlc1RvQ2hlY2spO1xuICB9XG5cbiAgc2F2ZSgpIHtcbiAgICB0aGlzLmRhc2hib2FyZC5nbG9iYWxSb2xlc0lkcyA9IHRoaXMuZ2xvYmFsUm9sZXNJZHM7XG4gICAgdGhpcy5kYXNoYm9hcmQubmFtZSA9IHRoaXMuZGFzaGJvYXJkTmFtZTtcbiAgICB0aGlzLmRhc2hib2FyZC5jbGFzc2VzID0geyBbdGhpcy5zdHlsaW5nLnRoZW1lQ2xhc3NdOiB0cnVlIH07XG4gICAgdGhpcy5kYXNoYm9hcmQud2lkZ2V0Q2xhc3NlcyA9IHsgW3RoaXMuc3R5bGluZy5oZWFkZXJDbGFzc106IHRydWUgfTtcbiAgICB0aGlzLmRhc2hib2FyZC5jOHlfSXNOYXZpZ2F0b3JOb2RlID0gdGhpcy5kYXNoYm9hcmQuYzh5X0lzTmF2aWdhdG9yTm9kZVxuICAgICAgPyB7fVxuICAgICAgOiB0aGlzLmN1cnJlbnREYXNoYm9hcmRcbiAgICAgID8gbnVsbFxuICAgICAgOiB1bmRlZmluZWQ7XG4gICAgdGhpcy5fc2F2ZSh0aGlzLmRhc2hib2FyZCk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICB0aGlzLm1vZGFsLmhpZGUoKTtcbiAgfVxuXG4gIGdldERhc2hib2FyZFByZXZpZXdTdHlsZSgpIHtcbiAgICBjb25zdCBjc3NDbGFzc2VzID0ge307XG4gICAgY3NzQ2xhc3Nlc1t0aGlzLnN0eWxpbmcuaGVhZGVyQ2xhc3NdID0gdHJ1ZTtcbiAgICBjc3NDbGFzc2VzW3RoaXMuc3R5bGluZy50aGVtZUNsYXNzXSA9IHRydWU7XG4gICAgcmV0dXJuIGNzc0NsYXNzZXM7XG4gIH1cblxuICBzZWxlY3RJY29uKGljb24pIHtcbiAgICB0aGlzLmRhc2hib2FyZC5pY29uID0gaWNvbjtcbiAgICB0aGlzLmRhc2hib2FyZERldGFpbEZvcm0uZm9ybS5tYXJrQXNEaXJ0eSgpO1xuICB9XG5cbiAgdXBkYXRlRmlsdGVyZWQodGVybTogc3RyaW5nKSB7XG4gICAgaWYgKHRlcm0pIHtcbiAgICAgIGNvbnN0IHNlYXJjaCA9IG5ldyBSZWdFeHAodGVybSwgJ2knKTtcbiAgICAgIHRoaXMuZmlsdGVyZWRJY29ucyA9IHRoaXMuaWNvbnMuZmlsdGVyKHZhbCA9PiBzZWFyY2gudGVzdCh2YWwpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5maWx0ZXJlZEljb25zID0gdGhpcy5pY29ucztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldERhc2hib2FyZFN0eWxlKCkge1xuICAgIGNvbnN0IGFsbENsYXNzZXMgPSB7XG4gICAgICAuLi50aGlzLmRhc2hib2FyZC5jbGFzc2VzLFxuICAgICAgLi4udGhpcy5kYXNoYm9hcmQud2lkZ2V0Q2xhc3Nlc1xuICAgIH07XG5cbiAgICBjb25zdCBzdHlsZXMgPSBPYmplY3Qua2V5cyhhbGxDbGFzc2VzKS5tYXAoYyA9PiBjLnNwbGl0KCctJykucG9wKCkpO1xuICAgIHN0eWxlcy5mb3JFYWNoKHN0eWxlTmFtZSA9PiB7XG4gICAgICB0aGlzLnN0eWxpbmcudGhlbWVDbGFzcyA9IHRoaXMuY29udGV4dERhc2hib2FyZFNlcnZpY2UuZ2V0U3R5bGluZyhcbiAgICAgICAgREFTSEJPQVJEX1RIRU1FX0NMQVNTRVMsXG4gICAgICAgIHN0eWxlTmFtZSxcbiAgICAgICAgdGhpcy5zdHlsaW5nLnRoZW1lQ2xhc3NcbiAgICAgICk7XG4gICAgICB0aGlzLnN0eWxpbmcuaGVhZGVyQ2xhc3MgPSB0aGlzLmNvbnRleHREYXNoYm9hcmRTZXJ2aWNlLmdldFN0eWxpbmcoXG4gICAgICAgIFdJREdFVF9IRUFERVJfQ0xBU1NFUyxcbiAgICAgICAgc3R5bGVOYW1lLFxuICAgICAgICB0aGlzLnN0eWxpbmcuaGVhZGVyQ2xhc3NcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJ2aWV3cG9ydC1tb2RhbFwiPlxuICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyIHNlcGFyYXRvci1ib3R0b21cIj5cbiAgICA8aDMgaWQ9XCJtb2RhbC10aXRsZVwiPnt7IHRpdGxlIHwgdHJhbnNsYXRlIH19PC9oMz5cbiAgPC9kaXY+XG5cbiAgPGRpdiBjbGFzcz1cIm1vZGFsLWlubmVyLXNjcm9sbFwiIGlkPVwibW9kYWwtYm9keVwiPlxuICAgIDxkaXYgY2xhc3M9XCJwLWwtMjQgcC1yLTI0XCI+XG4gICAgICA8Zm9ybSAjZGFzaGJvYXJkRGV0YWlsRm9ybT1cIm5nRm9ybVwiIGNsYXNzPVwiZC1jb250ZW50c1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS02XCI+XG4gICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiIWlzTmFtZWREYXNoYm9hcmQgfHwgaXNSZXBvcnRcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxlZ2VuZCBmb3JtLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4+e3sgJ0dlbmVyYWwnIHwgdHJhbnNsYXRlIH19PC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImQtZmxleFwiPlxuICAgICAgICAgICAgICAgIDxjOHktZm9ybS1ncm91cCBjbGFzcz1cIm0tci0xNlwiPlxuICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZC1ibG9ja1wiPnt7ICdJY29uJyB8IHRyYW5zbGF0ZSB9fTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGRyb3Bkb3duIGNsYXNzPVwiZHJvcGRvd25cIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwie3sgJ0ljb24nIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0bi1kZWZhdWx0IGJ0biBidG4tZ3JheVwiXG4gICAgICAgICAgICAgICAgICAgICAgYXJpYS1oYXNwb3B1cD1cInRydWVcIlxuICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duVG9nZ2xlXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8aSBjOHlJY29uPVwie3sgZGFzaGJvYXJkLmljb24gfX1cIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjYXJldFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDx1bFxuICAgICAgICAgICAgICAgICAgICAgICpkcm9wZG93bk1lbnVcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImRyb3Bkb3duLW1lbnUgbW9kYWwtaW5uZXItc2Nyb2xsIGRyb3Bkb3duLW1lbnUtZ3JpZC00IG0tbC0wXCJcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT1cIm1heC1oZWlnaHQ6IDI1MHB4XCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IGljb24gb2YgZmlsdGVyZWRJY29uc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpIChjbGljayk9XCJzZWxlY3RJY29uKGljb24pXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJpbnRlcmFjdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJ7eyBpY29uIH19XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJ7IGFjdGl2ZTogZGFzaGJvYXJkLmljb24gPT09IGljb24gfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImljb25cIiBbYzh5SWNvbl09XCJpY29uXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9jOHktZm9ybS1ncm91cD5cbiAgICAgICAgICAgICAgICA8Yzh5LWZvcm0tZ3JvdXAgY2xhc3M9XCJmbGV4LWdyb3dcIj5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtLXItNFwiIGlkPVwibWVudUxhYmVsXCI+e3sgJ01lbnUgbGFiZWwnIHwgdHJhbnNsYXRlIH19PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJidG4taGVscCBidG4taGVscC0tc21cIlxuICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiJ0hlbHAnIHwgdHJhbnNsYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICBwb3BvdmVyPVwie3tcbiAgICAgICAgICAgICAgICAgICAgICAgICdNZW51IGxhYmVsIHRvIGRpc3BsYXkgaW4gc3VibWVudSB3aGVuIGRhc2hib2FyZCBpcyBhdHRhY2hlZCcgfCB0cmFuc2xhdGVcbiAgICAgICAgICAgICAgICAgICAgICB9fVwiXG4gICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIlxuICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJzPVwiZm9jdXNcIlxuICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcj1cImJvZHlcIlxuICAgICAgICAgICAgICAgICAgICA+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIGlkPVwibWVudUxhYmVsXCJcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgWyhuZ01vZGVsKV09XCJkYXNoYm9hcmROYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJ7eyBuYW1lUGxhY2Vob2xkZXIgfCB0cmFuc2xhdGUgfX1cIlxuICAgICAgICAgICAgICAgICAgICBtYXhsZW5ndGg9XCI1MTJcIlxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2M4eS1mb3JtLWdyb3VwPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGM4eS1mb3JtLWdyb3VwICpuZ0lmPVwiaXNSZXBvcnRcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgaWQ9XCJkZXNjcmlwdGlvblwiPnt7ICdEZXNjcmlwdGlvbiAnIHwgdHJhbnNsYXRlIH19PC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWxsZWRieT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sXCJcbiAgICAgICAgICAgICAgICAgIHJvd3M9XCIyXCJcbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICBbKG5nTW9kZWwpXT1cImRhc2hib2FyZC5kZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgPjwvdGV4dGFyZWE+XG4gICAgICAgICAgICAgIDwvYzh5LWZvcm0tZ3JvdXA+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTZcIiAqbmdJZj1cIiFpc1JlcG9ydFwiPlxuICAgICAgICAgICAgICAgICAgPGM4eS1mb3JtLWdyb3VwPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicG9zaXRpb25OYXZcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm0tci00XCIgaWQ9XCJwb3NpdGlvbk5hdlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3sgJ1Bvc2l0aW9uIGluIG5hdmlnYXRpb24nIHwgdHJhbnNsYXRlIH19XG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuLWhlbHAgYnRuLWhlbHAtLXNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCInSGVscCcgfCB0cmFuc2xhdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wb3Zlcj1cInt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICdQb3NpdGlvbiBpbiBuYXZpZ2F0aW9uIG1lbnUgKDEwMDAwIGZpcnN0LCAtMTAwMDAgbGFzdCknIHwgdHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJyaWdodFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2Vycz1cImZvY3VzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcj1cImJvZHlcIlxuICAgICAgICAgICAgICAgICAgICAgID48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgaWQ9XCJwb3NpdGlvbk5hdlwiXG4gICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIlxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJwcmlvcml0eVwiXG4gICAgICAgICAgICAgICAgICAgICAgWyhuZ01vZGVsKV09XCJkYXNoYm9hcmQucHJpb3JpdHlcIlxuICAgICAgICAgICAgICAgICAgICAgIG1pbj1cIi0xMDAwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgbWF4PVwiMTAwMDBcIlxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwie3sgJ2UuZy4nIHwgdHJhbnNsYXRlIH19IDUwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvYzh5LWZvcm0tZ3JvdXA+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTZcIiAqbmdJZj1cImlzUmVwb3J0XCI+XG4gICAgICAgICAgICAgICAgICA8bGFiZWwgdHJhbnNsYXRlPk5hdmlnYXRvciBtZW51IGl0ZW08L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgPGM4eS1mb3JtLWdyb3VwPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgdGl0bGU9XCJ7eyAnU2hvdyBpbiBuYXZpZ2F0b3InIHwgdHJhbnNsYXRlIH19XCIgY2xhc3M9XCJjOHktY2hlY2tib3hcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwiaXNOYXZpZ2F0b3JOb2RlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFsobmdNb2RlbCldPVwiISFkYXNoYm9hcmQuYzh5X0lzTmF2aWdhdG9yTm9kZVwiXG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e3sgJ1Nob3cgaW4gbmF2aWdhdG9yJyB8IHRyYW5zbGF0ZSB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIDwvYzh5LWZvcm0tZ3JvdXA+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS02XCIgKm5nSWY9XCJpc1JlcG9ydFwiPlxuICAgICAgICAgICAgICAgICAgPGM4eS1mb3JtLWdyb3VwPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicG9zaXRpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm0tci00XCI+e3sgJ1Bvc2l0aW9uIGluIG5hdmlnYXRvcicgfCB0cmFuc2xhdGUgfX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICNwb3NpdGlvbkluTmF2UG9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1Bvc2l0aW9uIGluIG5hdmlnYXRvciAoMTAwMDEgZmlyc3QsIC0xMDAwMCBsYXN0KS4nIHwgdHJhbnNsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19Jm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHt7ICdFeGlzdGluZyBub2RlczonIHwgdHJhbnNsYXRlIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJsaXN0LXVuc3R5bGVkIG0tdC0xNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgKm5nRm9yPVwibGV0IG5vZGUgb2YgbmF2aWdhdG9yTm9kZXMkIHwgYXN5bmNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBbYzh5SWNvbl09XCJub2RlLmljb25cIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ3b3JkLWJyZWFrIG0tbC00IG0tci0xNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5sYWJlbC5sZW5ndGggPiAxNVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKG5vZGUubGFiZWwgfCBzbGljZTogMDoxNSkgKyAnLi4uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbm9kZS5sYWJlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwdWxsLXJpZ2h0XCI+e3sgbm9kZS5wcmlvcml0eSB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0bi1oZWxwIGJ0bi1oZWxwLS1zbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiJ0hlbHAnIHwgdHJhbnNsYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtwb3BvdmVyXT1cInBvc2l0aW9uSW5OYXZQb3BcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcnM9XCJmb2N1c1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJyaWdodFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXI9XCJib2R5XCJcbiAgICAgICAgICAgICAgICAgICAgICA+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgICAgICAgICAgICAgIGZvcj1cInBvc2l0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXG4gICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInByaW9yaXR5XCJcbiAgICAgICAgICAgICAgICAgICAgICBbKG5nTW9kZWwpXT1cImRhc2hib2FyZC5wcmlvcml0eVwiXG4gICAgICAgICAgICAgICAgICAgICAgbWluPVwiLTEwMDAwXCJcbiAgICAgICAgICAgICAgICAgICAgICBtYXg9XCIyMDAwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJ7eyAnZS5nLicgfCB0cmFuc2xhdGUgfX0gNTAwXCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvYzh5LWZvcm0tZ3JvdXA+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIDxkaXYgKm5nSWY9XCIhY3VycmVudERhc2hib2FyZCAmJiBkZXZpY2VUeXBlXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT1cInt7IGFwcGx5VG9EZXZpY2VzT2ZUeXBlVGl0bGUgfX1cIiBjbGFzcz1cImM4eS1jaGVja2JveFwiPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJkZXZpY2VUeXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICBbKG5nTW9kZWwpXT1cImRhc2hib2FyZC5kZXZpY2VUeXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVwiIWFwcGx5VG9EZXZpY2VzT2ZUeXBlUGVybWl0dGVkXCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwibS1yLTRcIlxuICAgICAgICAgICAgICAgICAgICAgIFt0cmFuc2xhdGVQYXJhbXNdPVwieyB0eXBlOiBkYXNoYm9hcmQuZGV2aWNlVHlwZVZhbHVlIH1cIlxuICAgICAgICAgICAgICAgICAgICAgIG5nTm9uQmluZGFibGVcbiAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIEFwcGx5IGRhc2hib2FyZCB0byBhbGwgZGV2aWNlcyBvZiB0eXBlXG4gICAgICAgICAgICAgICAgICAgICAgPGk+e3sgdHlwZSB9fTwvaT5cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvIG0tYi0yNFwiICpuZ0lmPVwiaXNEZXZpY2VUeXBlXCI+XG4gICAgICAgICAgICAgICAgICA8aSBjOHktaWNvbj1cImluZm9cIj48L2k+XG4gICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVcbiAgICAgICAgICAgICAgICAgICAgW3RyYW5zbGF0ZVBhcmFtc109XCJ7IHR5cGU6IGRhc2hib2FyZC5kZXZpY2VUeXBlVmFsdWUgfVwiXG4gICAgICAgICAgICAgICAgICAgIG5nTm9uQmluZGFibGVcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgVGhpcyBkYXNoYm9hcmQgaXMgc2hhcmVkIGJldHdlZW4gYWxsIGRldmljZXMgb2YgdGhlIHR5cGVcbiAgICAgICAgICAgICAgICAgICAgPGk+e3sgdHlwZSB9fTwvaT5cbiAgICAgICAgICAgICAgICAgICAgLlxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGM4eS1kYXNoYm9hcmQtYXZhaWxhYmlsaXR5XG4gICAgICAgICAgICAgICpuZ0lmPVwiISFpc1JlcG9ydCA9PT0gZmFsc2VcIlxuICAgICAgICAgICAgICBbKGdsb2JhbFJvbGVzSWRzKV09XCJnbG9iYWxSb2xlc0lkc1wiXG4gICAgICAgICAgICAgIChnbG9iYWxSb2xlc0lkc0NoYW5nZSk9XCJkYXNoYm9hcmREZXRhaWxGb3JtPy5mb3JtPy5tYXJrQXNEaXJ0eSgpXCJcbiAgICAgICAgICAgID48L2M4eS1kYXNoYm9hcmQtYXZhaWxhYmlsaXR5PlxuICAgICAgICAgICAgPGM4eS1hcHBlYXJhbmNlLXNldHRpbmdzXG4gICAgICAgICAgICAgIFsodGhlbWVDbGFzcyldPVwic3R5bGluZy50aGVtZUNsYXNzXCJcbiAgICAgICAgICAgICAgWyhoZWFkZXJDbGFzcyldPVwic3R5bGluZy5oZWFkZXJDbGFzc1wiXG4gICAgICAgICAgICA+PC9jOHktYXBwZWFyYW5jZS1zZXR0aW5ncz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS02XCI+XG4gICAgICAgICAgICAgICAgPGM4eS1mb3JtLWdyb3VwIGNsYXNzPVwicC1iLTI0IG0tYi0wXCI+XG4gICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwibWFyZ2luXCI+e3sgJ1dpZGdldCBtYXJnaW4nIHwgdHJhbnNsYXRlIH19PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICBpZD1cIm1hcmdpblwiXG4gICAgICAgICAgICAgICAgICAgICAgbmFtZT1cIm1hcmdpblwiXG4gICAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIlxuICAgICAgICAgICAgICAgICAgICAgIFsobmdNb2RlbCldPVwiZGFzaGJvYXJkLndpZGdldE1hcmdpblwiXG4gICAgICAgICAgICAgICAgICAgICAgbWluPVwiMFwiXG4gICAgICAgICAgICAgICAgICAgICAgbWF4PVwiNTBcIlxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwie3sgREVGQVVMVF9EQVNIQk9BUkRfTUFSR0lOIH19XCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpbnB1dC1ncm91cC1hZGRvblwiPnB4PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9jOHktZm9ybS1ncm91cD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNlwiPlxuICAgICAgICAgICAgICAgIDxjOHktZm9ybS1ncm91cCBjbGFzcz1cInAtYi0yNCBtLWItMFwiPlxuICAgICAgICAgICAgICAgICAgPGxhYmVsIHRyYW5zbGF0ZT5XaWRnZXQgdGl0bGVzPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCB0aXRsZT1cInt7ICdUcmFuc2xhdGUgaWYgcG9zc2libGUnIHwgdHJhbnNsYXRlIH19XCIgY2xhc3M9XCJjOHktY2hlY2tib3hcIj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwidHJhbnNsYXRlV2lkZ2V0VGl0bGVcIlxuICAgICAgICAgICAgICAgICAgICAgIFsobmdNb2RlbCldPVwiZGFzaGJvYXJkLnRyYW5zbGF0ZVdpZGdldFRpdGxlXCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj57eyAnVHJhbnNsYXRlIGlmIHBvc3NpYmxlJyB8IHRyYW5zbGF0ZSB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPC9jOHktZm9ybS1ncm91cD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNlwiPlxuICAgICAgICAgICAgPGM4eS13aWRnZXQtcHJldmlld1xuICAgICAgICAgICAgICBbdGFiXT1cIiFpc05hbWVkRGFzaGJvYXJkID8gZGFzaGJvYXJkIDogdW5kZWZpbmVkXCJcbiAgICAgICAgICAgICAgW3ByZXZpZXdDbGFzc2VzXT1cImdldERhc2hib2FyZFByZXZpZXdTdHlsZSgpXCJcbiAgICAgICAgICAgID48L2M4eS13aWRnZXQtcHJldmlldz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Zvcm0+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuXG4gIDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj5cbiAgICA8YnV0dG9uXG4gICAgICBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiXG4gICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgIHRpdGxlPVwie3sgJ0NhbmNlbCcgfCB0cmFuc2xhdGUgfX1cIlxuICAgICAgKGNsaWNrKT1cImNsb3NlKClcIlxuICAgID5cbiAgICAgIHt7ICdDYW5jZWwnIHwgdHJhbnNsYXRlIH19XG4gICAgPC9idXR0b24+XG4gICAgPGJ1dHRvblxuICAgICAgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIlxuICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICB0aXRsZT1cInt7ICdTYXZlJyB8IHRyYW5zbGF0ZSB9fVwiXG4gICAgICAoY2xpY2spPVwic2F2ZSgpXCJcbiAgICAgIFtkaXNhYmxlZF09XCJkYXNoYm9hcmREZXRhaWxGb3JtLmZvcm0uaW52YWxpZCB8fCBkYXNoYm9hcmREZXRhaWxGb3JtLmZvcm0ucHJpc3RpbmVcIlxuICAgID5cbiAgICAgIHt7ICdTYXZlJyB8IHRyYW5zbGF0ZSB9fVxuICAgIDwvYnV0dG9uPlxuICA8L2Rpdj5cbjwvZGl2PlxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWN0aXZhdGVkUm91dGUgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgSUlkZW50aWZpZWQgfSBmcm9tICdAYzh5L2NsaWVudCc7XG5pbXBvcnQge1xuICBDb250ZXh0RGF0YSxcbiAgQ29udGV4dFJvdXRlU2VydmljZSxcbiAgRXh0ZW5zaW9uRmFjdG9yeSxcbiAgUGVybWlzc2lvbnMsXG4gIFRhYixcbiAgVmlld0NvbnRleHRcbn0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5pbXBvcnQgeyBCc01vZGFsU2VydmljZSB9IGZyb20gJ25neC1ib290c3RyYXAvbW9kYWwnO1xuaW1wb3J0IHsgQWRkRGFzaGJvYXJkQ29tcG9uZW50IH0gZnJvbSAnLi9hZGQtZGFzaGJvYXJkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBDb250ZXh0RGFzaGJvYXJkTWFuYWdlZE9iamVjdCB9IGZyb20gJy4vY29udGV4dC1kYXNoYm9hcmQubW9kZWwnO1xuaW1wb3J0IHsgQ29udGV4dERhc2hib2FyZFNlcnZpY2UgfSBmcm9tICcuL2NvbnRleHQtZGFzaGJvYXJkLnNlcnZpY2UnO1xuaW1wb3J0IHsgRGFzaGJvYXJkRGV0YWlsQ29tcG9uZW50IH0gZnJvbSAnLi9kYXNoYm9hcmQtZGV0YWlsLmNvbXBvbmVudCc7XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIEFkZERhc2hib2FyZEZhY3RvcnkgaW1wbGVtZW50cyBFeHRlbnNpb25GYWN0b3J5PFRhYj4ge1xuICBjdXJyZW50Q29udGV4dDogQ29udGV4dERhdGE7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBwZXJtaXNzaW9uczogUGVybWlzc2lvbnMsXG4gICAgcHJpdmF0ZSBjb250ZXh0RGFzaGJvYXJkU2VydmljZTogQ29udGV4dERhc2hib2FyZFNlcnZpY2UsXG4gICAgcHJpdmF0ZSBic01vZGFsOiBCc01vZGFsU2VydmljZSxcbiAgICBwcml2YXRlIGNvbnRleHRSb3V0ZTogQ29udGV4dFJvdXRlU2VydmljZVxuICApIHt9XG5cbiAgYXN5bmMgZ2V0KGFjdGl2YXRlZFJvdXRlPzogQWN0aXZhdGVkUm91dGUpOiBQcm9taXNlPFRhYiB8IFRhYltdPiB7XG4gICAgdGhpcy5jdXJyZW50Q29udGV4dCA9IHRoaXMuY29udGV4dFJvdXRlLmdldENvbnRleHREYXRhKGFjdGl2YXRlZFJvdXRlKTtcbiAgICBpZiAoXG4gICAgICBbVmlld0NvbnRleHQuRGV2aWNlLCBWaWV3Q29udGV4dC5Hcm91cF0uaW5jbHVkZXModGhpcy5jdXJyZW50Q29udGV4dD8uY29udGV4dCkgJiZcbiAgICAgIChhd2FpdCB0aGlzLmhhc1Blcm1pc3Npb24odGhpcy5jdXJyZW50Q29udGV4dC5jb250ZXh0RGF0YSkpXG4gICAgKSB7XG4gICAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgY29tcG9uZW50OiBBZGREYXNoYm9hcmRDb21wb25lbnQsXG4gICAgICAgICAgcHJpb3JpdHk6IC1JbmZpbml0eVxuICAgICAgICB9XG4gICAgICBdO1xuICAgIH1cbiAgICByZXR1cm4gW107XG4gIH1cblxuICBhc3luYyBhZGREYXNoYm9hcmQoKSB7XG4gICAgbGV0IGluaXRpYWxTdGF0ZTogeyBkZXZpY2VUeXBlOiBzdHJpbmcgfTtcblxuICAgIGlmICh0aGlzLmN1cnJlbnRDb250ZXh0LmNvbnRleHQgPT09IFZpZXdDb250ZXh0LkRldmljZSkge1xuICAgICAgaW5pdGlhbFN0YXRlID0ge1xuICAgICAgICBkZXZpY2VUeXBlOiB0aGlzLmN1cnJlbnRDb250ZXh0LmNvbnRleHREYXRhLnR5cGVcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgbW9kYWwgPSB0aGlzLmJzTW9kYWwuc2hvdyhEYXNoYm9hcmREZXRhaWxDb21wb25lbnQsIHtcbiAgICAgIGNsYXNzOiAnbW9kYWwtbGcnLFxuICAgICAgYXJpYURlc2NyaWJlZGJ5OiAnbW9kYWwtYm9keScsXG4gICAgICBhcmlhTGFiZWxsZWRCeTogJ21vZGFsLXRpdGxlJyxcbiAgICAgIGluaXRpYWxTdGF0ZSxcbiAgICAgIGlnbm9yZUJhY2tkcm9wQ2xpY2s6IHRydWVcbiAgICB9KS5jb250ZW50IGFzIERhc2hib2FyZERldGFpbENvbXBvbmVudDtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGFzaGJvYXJkQ2ZnID0gYXdhaXQgbW9kYWwucmVzdWx0O1xuICAgICAgY29uc3QgZGFzaGJvYXJkTU86IENvbnRleHREYXNoYm9hcmRNYW5hZ2VkT2JqZWN0ID0gYXdhaXQgdGhpcy5jb250ZXh0RGFzaGJvYXJkU2VydmljZS5jcmVhdGUoXG4gICAgICAgIGRhc2hib2FyZENmZyxcbiAgICAgICAgdGhpcy5jdXJyZW50Q29udGV4dFxuICAgICAgKTtcbiAgICAgIGF3YWl0IHRoaXMuY29udGV4dERhc2hib2FyZFNlcnZpY2UubmF2aWdhdGVUb0Rhc2hib2FyZChkYXNoYm9hcmRNTyk7XG4gICAgICBtb2RhbC5jbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAvLyBpbnRlbmRlZCBlbXB0eVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaGFzUGVybWlzc2lvbihjb250ZXh0OiBJSWRlbnRpZmllZCkge1xuICAgIGlmIChjb250ZXh0Py5pZCkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucGVybWlzc2lvbnMuY2FuRWRpdChcbiAgICAgICAgWydST0xFX0lOVkVOVE9SWV9BRE1JTicsICdST0xFX0lOVkVOVE9SWV9DUkVBVEUnXSxcbiAgICAgICAgY29udGV4dFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucGVybWlzc2lvbnMuaGFzQW55Um9sZShbJ1JPTEVfSU5WRU5UT1JZX0FETUlOJywgJ1JPTEVfSU5WRU5UT1JZX0NSRUFURSddKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBZGREYXNoYm9hcmRGYWN0b3J5IH0gZnJvbSAnLi9hZGQtZGFzaGJvYXJkLmZhY3RvcnknO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdsaVtjOHktYWRkLWRhc2hib2FyZF0nLFxuICB0ZW1wbGF0ZVVybDogJy4vYWRkLWRhc2hib2FyZC5jb21wb25lbnQuaHRtbCcsXG4gIGhvc3Q6IHsgY2xhc3M6ICdkLWZsZXggYS1pLXN0cmV0Y2gnIH1cbn0pXG5leHBvcnQgY2xhc3MgQWRkRGFzaGJvYXJkQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBhZGREYXNoYm9hcmRGYWN0b3J5OiBBZGREYXNoYm9hcmRGYWN0b3J5KSB7fVxuXG4gIGFkZERhc2hib2FyZCgpIHtcbiAgICB0aGlzLmFkZERhc2hib2FyZEZhY3RvcnkuYWRkRGFzaGJvYXJkKCk7XG4gIH1cbn1cbiIsIjxidXR0b25cbiAgY2xhc3M9XCJidG4gYnRuLWRvdCBwLWwtc20tOCBwLXItc20tOCBwLWwteHMtMTYgcC1yLXhzLTE2XCJcbiAgW2F0dHIuYXJpYS1sYWJlbF09XCInQWRkIGRhc2hib2FyZCcgfCB0cmFuc2xhdGVcIlxuICB0b29sdGlwPVwie3sgJ0FkZCBkYXNoYm9hcmQnIHwgdHJhbnNsYXRlIH19XCJcbiAgcGxhY2VtZW50PVwicmlnaHRcIlxuICBjb250YWluZXI9XCJib2R5XCJcbiAgdHlwZT1cImJ1dHRvblwiXG4gIFtkZWxheV09XCI1MDBcIlxuICAoY2xpY2spPVwiYWRkRGFzaGJvYXJkKClcIlxuPlxuICA8aVxuICAgIGNsYXNzPVwiaWNvbi0yMCBtLWwtNCBtLXItNFwiXG4gICAgYzh5SWNvbj1cInBsdXMtY2lyY2xlXCJcbiAgPjwvaT5cbjwvYnV0dG9uPlxuPGRpdiBjbGFzcz1cInAtci1zbS0zMlwiPjwvZGl2PlxuIiwiaW1wb3J0IHsgSW5qZWN0aW9uVG9rZW4gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGdldHRleHQsIFdpZGdldCB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuXG4vKipcbiAqIEEgaG9vayB0byBkZWZpbmUgdGhlIGRlZmF1bHQgd2lkZ2V0cyBvZiB0aGUgaG9tZSBkYXNoYm9hcmQgaW4gdGhlIGNvY2twaXQgYXBwLlxuICovXG5leHBvcnQgY29uc3QgQ09DS1BJVF9IT01FX0RBU0hCT0FSRF9DT05GSUcgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ0NvY2twaXRIb21lRGFzaGJvYXJkQ29uZmlnJyk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29ja3BpdERhc2hib2FyZENvbmZpZyB7XG4gIC8qKlxuICAgKiBBbGxvd3MgdG8gaGF2ZSBjdXN0b21pemVkIGRhc2hib2FyZCBjb250ZXh0IG5hbWUgaW4gY2FzZSB0aGUgQ29ja3BpdERhc2hib2FyZE1vZHVsZSBpcyB1c2VkIGluIGRpZmZlcmVudCBhcHBzIGFuZCBzaG91bGQgaGF2ZSBpbmRpdmlkdWFsIGhvbWUgZGFzaGJvYXJkcyBwZXIgYXBwXG4gICAqL1xuICBkYXNoYm9hcmROYW1lPzogc3RyaW5nO1xuICAvKipcbiAgICogQWxsb3dzIHRvIGRlZmluZSB0aGUgZGVmYXVsdCB3aWRnZXRzIHNob3duIG9uIHRoZSBDb2NrcGl0IEhvbWUgcGFnZVxuICAgKi9cbiAgZGVmYXVsdFdpZGdldHM/OiBXaWRnZXRbXTtcbiAgLyoqXG4gICAqIEFsbG93cyB0byBoYXZlIGEgZGlmZmVyZW50IHBhZ2UgdGl0bGUgdGhhbiB0aGUgZGVmYXVsdCAnSG9tZSdcbiAgICovXG4gIHBhZ2VUaXRsZT86IHN0cmluZztcbiAgLyoqXG4gICAqIEFsbG93cyB0byBoYXZlIGluZGl2aWR1YWwgaG9tZSBkYXNoYm9hcmRzIHBlciB1c2VyXG4gICAqL1xuICB1c2VyU3BlY2lmaWM/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIEFuIGFycmF5IG9mIHdpZGdldHMgdGhhdCBpcyBwZXIgZGVmYXVsdCBwbGFjZWQgb24gdGhlIGhvbWUgZGFzaGJvYXJkIG9mIHRoZSBjb2NrcGl0IGFwcC5cbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfQ09DS1BJVF9IT01FX1dJREdFVFMgPSBbXG4gIHtcbiAgICBuYW1lOiAnY29ja3BpdC53ZWxjb21lLndpZGdldCcsXG4gICAgdGl0bGU6IGdldHRleHQoJ1dlbGNvbWUgdG8gQ29ja3BpdCcpLFxuICAgIF94OiAwLFxuICAgIF95OiAwLFxuICAgIF9oZWlnaHQ6IDUsXG4gICAgX3dpZHRoOiAxMixcbiAgICBjbGFzc2VzOiB7ICdwYW5lbC10aXRsZS1oaWRkZW4nOiB0cnVlIH1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdBc3NldCBBbGFybXMnLFxuICAgIHRpdGxlOiBnZXR0ZXh0KCdBY3RpdmUsIGNyaXRpY2FsIGFsYXJtcycpLFxuICAgIF94OiAwLFxuICAgIF95OiA1LFxuICAgIF9oZWlnaHQ6IDQsXG4gICAgX3dpZHRoOiA2XG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmVjZW50IEFsYXJtcycsXG4gICAgdGl0bGU6IGdldHRleHQoJ1JlY2VudCBhbGFybXMnKSxcbiAgICBfeDogMCxcbiAgICBfeTogOSxcbiAgICBfaGVpZ2h0OiA0LFxuICAgIF93aWR0aDogNlxuICB9LFxuICB7XG4gICAgbmFtZTogJ01hcCcsXG4gICAgdGl0bGU6IGdldHRleHQoJ01hcCcpLFxuICAgIF94OiA2LFxuICAgIF95OiA1LFxuICAgIF9oZWlnaHQ6IDgsXG4gICAgX3dpZHRoOiA2XG4gIH1cbl0gYXMgV2lkZ2V0W107XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlLCBJbmplY3QsIE9wdGlvbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBzb3J0QnksIGNsb25lRGVlcCwgZ2V0LCBvbWl0IH0gZnJvbSAnbG9kYXNoLWVzJztcbmltcG9ydCB7IER5bmFtaWNDb21wb25lbnRTZXJ2aWNlLCBEeW5hbWljQ29tcG9uZW50RGVmaW5pdGlvbiwgV2lkZ2V0IH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5pbXBvcnQgeyBUcmFuc2xhdGVTZXJ2aWNlIH0gZnJvbSAnQG5neC10cmFuc2xhdGUvY29yZSc7XG5pbXBvcnQgeyBDb250ZXh0RGFzaGJvYXJkQ29uZmlnLCBDT05URVhUX0RBU0hCT0FSRF9DT05GSUcgfSBmcm9tICcuL2NvbnRleHQtZGFzaGJvYXJkLm1vZGVsJztcblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgV2lkZ2V0U2VydmljZSB7XG4gIHdpZGdldHM6IER5bmFtaWNDb21wb25lbnREZWZpbml0aW9uW107XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBkeW5hbWljQ29tcG9uZW50U2VydmljZTogRHluYW1pY0NvbXBvbmVudFNlcnZpY2UsXG4gICAgcHJpdmF0ZSB0cmFuc2xhdGVTZXJ2aWNlOiBUcmFuc2xhdGVTZXJ2aWNlLFxuICAgIEBPcHRpb25hbCgpXG4gICAgQEluamVjdChDT05URVhUX0RBU0hCT0FSRF9DT05GSUcpXG4gICAgcHVibGljIG1vZHVsZUNvbmZpZzogQ29udGV4dERhc2hib2FyZENvbmZpZ1xuICApIHtcbiAgICB0aGlzLmR5bmFtaWNDb21wb25lbnRTZXJ2aWNlLml0ZW1zJC5zdWJzY3JpYmUod2lkZ2V0cyA9PiB7XG4gICAgICB0aGlzLndpZGdldHMgPSB3aWRnZXRzO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0V2lkZ2V0RGVmaW5pdGlvbihjb21wb25lbnRJZCk6IFByb21pc2U8RHluYW1pY0NvbXBvbmVudERlZmluaXRpb24+IHtcbiAgICByZXR1cm4gdGhpcy5keW5hbWljQ29tcG9uZW50U2VydmljZS5nZXRCeUlkKGNvbXBvbmVudElkKTtcbiAgfVxuXG4gIGdldFdpZGdldERlZmluaXRpb25zKCkge1xuICAgIGNvbnN0IHRyYW5zbGF0ZWRDb21wb25lbnRzID0gdGhpcy53aWRnZXRzLm1hcChjbXAgPT4gKHtcbiAgICAgIC4uLmNtcCxcbiAgICAgIGxhYmVsOiB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudChjbXAubGFiZWwpXG4gICAgfSkpO1xuXG4gICAgLy8gY2xvbmVEZWVwIGFuZCBpbmplY3RvciBsZWFkIHRvIGEgcGVyZm9ybWFuY2UgaXNzdWUuIFdlIHJlbW92aW5nIHRoZSBpbmplY3RvcnMgaGVyZSxcbiAgICAvLyBhcyB0aGV5IGFyZSBub3QgbmVlZGVkLCB0byBhdm9pZCB1c2Ugb2YgYSBsb3Qgb2YgQ1BVIGZvciBjbG9uaW5nLlxuICAgIGNvbnN0IHRyYW5zbGF0ZWRDb21wb25lbnRzV2l0aG91dEluamVjdG9yID0gdHJhbnNsYXRlZENvbXBvbmVudHMubWFwKGNtcCA9PlxuICAgICAgb21pdChjbXAsICdpbmplY3RvcicpXG4gICAgKTtcbiAgICByZXR1cm4gY2xvbmVEZWVwKFxuICAgICAgc29ydEJ5KHRyYW5zbGF0ZWRDb21wb25lbnRzV2l0aG91dEluamVjdG9yLCAnbGFiZWwnKS5maWx0ZXIodGhpcy5tb2R1bGVDb25maWcud2lkZ2V0RmlsdGVyKVxuICAgICk7XG4gIH1cblxuICBhc3luYyBtYXBMZWdhY3kod2lkZ2V0OiBQYXJ0aWFsPFdpZGdldD4pOiBQcm9taXNlPFdpZGdldD4ge1xuICAgIGNvbnN0IGNtcCA9IGF3YWl0IHRoaXMuZ2V0V2lkZ2V0RGVmaW5pdGlvbih3aWRnZXQuY29tcG9uZW50SWQgfHwgd2lkZ2V0Lm5hbWUpO1xuICAgIHdpZGdldCA9IHRoaXMubWFwRGlzcGxheVNldHRpbmdzKHdpZGdldCwgY21wKTtcblxuICAgIGlmIChnZXQoY21wLCAnZGF0YS5zZXR0aW5ncy51cGdyYWRlJykpIHtcbiAgICAgIHdpZGdldC53aWRnZXRDb21wb25lbnQgPSBjbXAuZGF0YS5zZXR0aW5ncy53aWRnZXRDb21wb25lbnQ7XG4gICAgICB3aWRnZXQuY29uZmlnQ29tcG9uZW50ID0gY21wLmRhdGEuc2V0dGluZ3MuY29uZmlnQ29tcG9uZW50O1xuICAgICAgd2lkZ2V0LnRlbXBsYXRlVXJsID0gY21wLmRhdGEuc2V0dGluZ3MudGVtcGxhdGVVcmw7XG4gICAgICB3aWRnZXQuY29uZmlnVGVtcGxhdGVVcmwgPSBjbXAuZGF0YS5zZXR0aW5ncy5jb25maWdUZW1wbGF0ZVVybDtcbiAgICAgIHdpZGdldC50cmFuc2Zvcm1Db25maWdXaXRoQ29udGV4dCA9XG4gICAgICAgIGNtcC5kYXRhLnNldHRpbmdzLmNvbXBvbmVudFRyYW5zZm9ybUNvbmZpZ1dpdGhDb250ZXh0IHx8XG4gICAgICAgIGNtcC5kYXRhLnNldHRpbmdzLnRyYW5zZm9ybUNvbmZpZ1dpdGhDb250ZXh0IHx8XG4gICAgICAgIHdpZGdldC50cmFuc2Zvcm1Db25maWdXaXRoQ29udGV4dDtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVsZXRlIHdpZGdldC50ZW1wbGF0ZVVybDtcbiAgICAgIGRlbGV0ZSB3aWRnZXQuY29uZmlnVGVtcGxhdGVVcmw7XG4gICAgfVxuICAgIHJldHVybiB3aWRnZXQgYXMgV2lkZ2V0O1xuICB9XG5cbiAgcHJpdmF0ZSBtYXBEaXNwbGF5U2V0dGluZ3MoXG4gICAgd2lkZ2V0OiBQYXJ0aWFsPFdpZGdldD4sXG4gICAgY21wOiBEeW5hbWljQ29tcG9uZW50RGVmaW5pdGlvblxuICApOiBQYXJ0aWFsPFdpZGdldD4ge1xuICAgIGlmIChjbXA/LmRhdGE/LmRpc3BsYXlTZXR0aW5ncykge1xuICAgICAgd2lkZ2V0LmNvbmZpZyA9IHsgZGlzcGxheVNldHRpbmdzOiBjbXAuZGF0YS5kaXNwbGF5U2V0dGluZ3MsIC4uLih3aWRnZXQuY29uZmlnIHx8IHt9KSB9O1xuICAgIH1cbiAgICByZXR1cm4gd2lkZ2V0O1xuICB9XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIE9uRGVzdHJveSwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBEeW5hbWljQ29tcG9uZW50RGVmaW5pdGlvbiwgV2lkZ2V0LCBEeW5hbWljQ29tcG9uZW50Q29tcG9uZW50IH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5pbXBvcnQgeyBBc3NldFNlbGVjdGlvbkNoYW5nZUV2ZW50IH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cy9hc3NldHMtbmF2aWdhdG9yJztcbmltcG9ydCB7IGNsb25lLCBjbG9uZURlZXAsIGVzY2FwZVJlZ0V4cCwgZ2V0LCBvbWl0IH0gZnJvbSAnbG9kYXNoLWVzJztcbmltcG9ydCB7IEJzTW9kYWxSZWYgfSBmcm9tICduZ3gtYm9vdHN0cmFwL21vZGFsJztcbmltcG9ydCB7IGlpZiwgU3ViamVjdCwgU3Vic2NyaXB0aW9uLCB0aW1lciB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgc3dpdGNoTWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHtcbiAgQ29udGV4dERhc2hib2FyZE1hbmFnZWRPYmplY3QsXG4gIFdJREdFVF9DT05URU5UX0NMQVNTRVMsXG4gIFdJREdFVF9IRUFERVJfQ0xBU1NFUyxcbiAgQ29udGV4dFdpZGdldENvbmZpZ1xufSBmcm9tICcuL2NvbnRleHQtZGFzaGJvYXJkLm1vZGVsJztcbmltcG9ydCB7IFdpZGdldFNlcnZpY2UgfSBmcm9tICcuL3dpZGdldC5zZXJ2aWNlJztcbmltcG9ydCB7IENvbnRleHREYXNoYm9hcmRTZXJ2aWNlIH0gZnJvbSAnLi9jb250ZXh0LWRhc2hib2FyZC5zZXJ2aWNlJztcbmltcG9ydCB7IElNYW5hZ2VkT2JqZWN0LCBJbnZlbnRvcnlTZXJ2aWNlIH0gZnJvbSAnQGM4eS9jbGllbnQnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjOHktd2lkZ2V0LWNvbmZpZycsXG4gIHRlbXBsYXRlVXJsOiAnLi93aWRnZXQtY29uZmlnLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBXaWRnZXRDb25maWdDb21wb25lbnQgaW1wbGVtZW50cyBPbkRlc3Ryb3kge1xuICBzZWxlY3RlZERldmljZTogSU1hbmFnZWRPYmplY3Q7XG4gIG1vZGU6ICdjb25maWcnIHwgJ3NlbGVjdCcgfCAnc3R5bGUnID0gJ3NlbGVjdCc7XG4gIHNlYXJjaFJlc3VsdDogRHluYW1pY0NvbXBvbmVudERlZmluaXRpb25bXTtcbiAgY29tcG9uZW50czogRHluYW1pY0NvbXBvbmVudERlZmluaXRpb25bXTtcbiAgc2VsZWN0ZWQ6IER5bmFtaWNDb21wb25lbnREZWZpbml0aW9uO1xuICBzZWFyY2hDaGFuZ2UkID0gbmV3IFN1YmplY3QoKTtcbiAgc2VhcmNoVGVybSA9ICcnO1xuICBjb250ZXh0OiBhbnk7XG4gIGNvbXBvbmVudExhYmVsOiBzdHJpbmc7XG4gIG1vOiBDb250ZXh0RGFzaGJvYXJkTWFuYWdlZE9iamVjdDtcbiAgc3R5bGluZyA9IHtcbiAgICBoZWFkZXJDbGFzczogJ3BhbmVsLXRpdGxlLXJlZ3VsYXInLFxuICAgIGNvbnRlbnRDbGFzczogJ3BhbmVsLWNvbnRlbnQtbGlnaHQnXG4gIH07XG4gIGRlZmF1bHRTdHlsaW5nID0ge1xuICAgIGhlYWRlckNsYXNzOiAncGFuZWwtdGl0bGUtcmVndWxhcicsXG4gICAgY29udGVudENsYXNzOiAncGFuZWwtY29udGVudC1saWdodCdcbiAgfTtcbiAgcG9zc2libGVTdHlsaW5nID0geyBXSURHRVRfSEVBREVSX0NMQVNTRVMsIFdJREdFVF9DT05URU5UX0NMQVNTRVMgfTtcbiAgY3VycmVudDogYW55O1xuICB3aWRnZXRDb25maWc6IENvbnRleHRXaWRnZXRDb25maWc7XG4gIGlzVXBncmFkZSA9IGZhbHNlO1xuXG4gIEBWaWV3Q2hpbGQoJ2NvbmZpZycsIHsgc3RhdGljOiBmYWxzZSB9KVxuICBkeW5hbWljQ29tcG9uZW50OiBEeW5hbWljQ29tcG9uZW50Q29tcG9uZW50O1xuXG4gIGdldCBpc0VkaXQoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5jdXJyZW50O1xuICB9XG5cbiAgZ2V0IGlzRGV2aWNlVHlwZURhc2hib2FyZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISF0aGlzLm1vLmM4eV9EYXNoYm9hcmQ/LmRldmljZVR5cGUgJiYgISF0aGlzLm1vLmM4eV9EYXNoYm9hcmQ/LmRldmljZVR5cGVWYWx1ZTtcbiAgfVxuXG4gIHJlc3VsdDogUHJvbWlzZTxXaWRnZXQ+ID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHRoaXMuX3NhdmUgPSByZXNvbHZlO1xuICAgIHRoaXMuX2NhbmNlbCA9IHJlamVjdDtcbiAgfSk7XG5cbiAgcHJpdmF0ZSBzZWFyY2hTdWI6IFN1YnNjcmlwdGlvbjtcbiAgcHJpdmF0ZSBfc2F2ZTogKHZhbHVlOiBXaWRnZXQpID0+IHZvaWQ7XG4gIHByaXZhdGUgX2NhbmNlbDogKHJlYXNvbj86IGFueSkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHdpZGdldFNlcnZpY2U6IFdpZGdldFNlcnZpY2UsXG4gICAgcHJpdmF0ZSBtb2RhbDogQnNNb2RhbFJlZixcbiAgICBwcml2YXRlIGludmVudG9yeTogSW52ZW50b3J5U2VydmljZSxcbiAgICBwdWJsaWMgY29udGV4dERhc2hib2FyZFNlcnZpY2U6IENvbnRleHREYXNoYm9hcmRTZXJ2aWNlXG4gICkge31cblxuICBhc3luYyBuZ0FmdGVyQ29udGVudEluaXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5jb21wb25lbnRzID0gdGhpcy53aWRnZXRTZXJ2aWNlLmdldFdpZGdldERlZmluaXRpb25zKCk7XG5cbiAgICBpZiAodGhpcy5zZWxlY3RlZCkge1xuICAgICAgdGhpcy5jdXJyZW50ID0gY2xvbmUodGhpcy5zZWxlY3RlZCk7XG4gICAgICB0aGlzLnNlbGVjdCh0aGlzLnNlbGVjdGVkLCB0aGlzLmlzRWRpdCA/ICdjb25maWcnIDogJ3NlbGVjdCcpO1xuICAgIH1cblxuICAgIHRoaXMuc2VhcmNoU3ViID0gdGhpcy5zZWFyY2hDaGFuZ2UkXG4gICAgICAucGlwZShcbiAgICAgICAgc3dpdGNoTWFwKChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4gaWlmKCgpID0+IGV2ZW50LndoaWNoICE9PSAxMywgdGltZXIoMjAwKSwgdGltZXIoMTApKSlcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICB0aGlzLnNlYXJjaCgpO1xuICAgICAgfSk7XG5cbiAgICB0aGlzLnNldFN0eWxpbmdzKCk7XG4gICAgaWYgKHRoaXMud2lkZ2V0Q29uZmlnPy5kZXZpY2UpIHtcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgdGhpcy5pbnZlbnRvcnkuZGV0YWlsKHRoaXMud2lkZ2V0Q29uZmlnLmRldmljZS5pZCk7XG4gICAgICB0aGlzLnNlbGVjdGVkRGV2aWNlID0gZGF0YTtcbiAgICB9XG4gIH1cblxuICBjaGVja0lmRGV2aWNlUmVxdWlyZWQoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICF0aGlzLndpZGdldENvbmZpZyB8fFxuICAgICAgKCF0aGlzLndpZGdldENvbmZpZy5zZXR0aW5ncy5kZXZpY2VUYXJnZXROb3RSZXF1aXJlZCAmJlxuICAgICAgICAhdGhpcy53aWRnZXRDb25maWcuZGV2aWNlICYmXG4gICAgICAgICF0aGlzLndpZGdldENvbmZpZy5zZXR0aW5ncy5ub0RldmljZVRhcmdldClcbiAgICApO1xuICB9XG5cbiAgc2VsZWN0aW9uQ2hhbmdlZChzZWxlY3Rpb24/OiBBc3NldFNlbGVjdGlvbkNoYW5nZUV2ZW50KSB7XG4gICAgdGhpcy53aWRnZXRDb25maWcuZGV2aWNlID0gc2VsZWN0aW9uPy5jaGFuZ2U/Lml0ZW07XG4gICAgdGhpcy5keW5hbWljQ29tcG9uZW50LmVtaXRDb25maWdDaGFuZ2Uoe1xuICAgICAgZGV2aWNlOiB0aGlzLndpZGdldENvbmZpZy5kZXZpY2VcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHNhdmUoKSB7XG4gICAgY29uc3QgaG9va1N1Y2Nlc3MgPSBhd2FpdCB0aGlzLmR5bmFtaWNDb21wb25lbnQuY2FsbExpZmVDeWNsZUhvb2tzKCkudG9Qcm9taXNlKCk7XG4gICAgaWYgKCFob29rU3VjY2Vzcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHsgX3gsIF95LCBfd2lkdGgsIF9oZWlnaHQgfSA9IHRoaXMuc2VsZWN0ZWQuZGF0YTtcblxuICAgIGlmIChcbiAgICAgIHRoaXMud2lkZ2V0Q29uZmlnICYmXG4gICAgICB0aGlzLndpZGdldENvbmZpZy5kZXZpY2UgJiZcbiAgICAgIC8vIHNlcmlhbGl6aW5nIHdpbGwgYmUgaGFuZGxlZCBieSByZXNvbHZlclxuICAgICAgIXRoaXMuc2VsZWN0ZWQ/LnJlc29sdmU/LmRldmljZVxuICAgICkge1xuICAgICAgY29uc3QgeyBpZCwgbmFtZSB9ID0gdGhpcy53aWRnZXRDb25maWcuZGV2aWNlO1xuICAgICAgdGhpcy53aWRnZXRDb25maWcuZGV2aWNlID0geyBpZCwgbmFtZSB9O1xuICAgIH1cblxuICAgIGNvbnN0IHdpZGdldCA9IHtcbiAgICAgIF94LFxuICAgICAgX3ksXG4gICAgICBfd2lkdGgsXG4gICAgICBfaGVpZ2h0LFxuICAgICAgY29uZmlnOiBvbWl0KHRoaXMud2lkZ2V0Q29uZmlnLCBbJ3NldHRpbmdzJywgJ2Rpc3BsYXlTZXR0aW5ncyddKSxcbiAgICAgIHRpdGxlOiB0aGlzLnNlbGVjdGVkLmRhdGEudGl0bGUsXG4gICAgICBjb21wb25lbnRJZDogdGhpcy5zZWxlY3RlZC5pZCxcbiAgICAgIGlkOiB0aGlzLmlzRWRpdCA/IHRoaXMuY3VycmVudC5kYXRhLmlkIDogU3RyaW5nKE1hdGgucmFuZG9tKCkpLnN1YnN0cigyKSxcbiAgICAgIGNsYXNzZXM6IHRoaXMuZ2V0U3R5bGUoKSxcbiAgICAgIC4uLighdGhpcy5pc0VkaXQgPyB0aGlzLndpZGdldENvbmZpZy5zZXR0aW5ncy53aWRnZXREZWZhdWx0cyA6IHt9KVxuICAgIH0gYXMgV2lkZ2V0O1xuXG4gICAgdGhpcy5fc2F2ZSh3aWRnZXQpO1xuICB9XG5cbiAgc2VsZWN0KGNtcCwgbW9kZTogJ3NlbGVjdCcgfCAnY29uZmlnJyA9ICdjb25maWcnKSB7XG4gICAgY21wLmRhdGEgPSBjbXAuZGF0YSB8fCB7fTtcbiAgICB0aGlzLnNlbGVjdGVkID0gY21wO1xuXG4gICAgdGhpcy5pc1VwZ3JhZGUgPSAhIWdldChjbXAsICdkYXRhLnNldHRpbmdzLnVwZ3JhZGUnKTtcbiAgICB0aGlzLmNvbnRleHREYXNoYm9hcmRTZXJ2aWNlLmZvcm1EaXNhYmxlZCA9IHRoaXMuaXNVcGdyYWRlO1xuXG4gICAgaWYgKHRoaXMuaXNFZGl0KSB7XG4gICAgICBjb25zdCB7IF94LCBfeSwgX3dpZHRoLCBfaGVpZ2h0LCBjbGFzc2VzLCB0aXRsZSB9ID0gdGhpcy5jdXJyZW50LmRhdGE7XG4gICAgICB0aGlzLnNlbGVjdGVkLmRhdGEgPSB7IC4uLnRoaXMuc2VsZWN0ZWQuZGF0YSwgX3gsIF95LCBfd2lkdGgsIF9oZWlnaHQsIGNsYXNzZXMsIHRpdGxlIH07XG4gICAgfVxuXG4gICAgdGhpcy53aWRnZXRDb25maWcgPSBjbG9uZURlZXAodGhpcy5jb21wb3NlV2lkZ2V0Q29uZmlnKHRoaXMuc2VsZWN0ZWQsIHRoaXMuY29udGV4dCkpO1xuXG4gICAgdGhpcy5zZWxlY3RlZC5kYXRhLnRpdGxlID0gdGhpcy5zZWxlY3RlZC5kYXRhLnRpdGxlIHx8IGNtcC5sYWJlbDtcbiAgICB0aGlzLmNvbXBvbmVudExhYmVsID0gY21wLmxhYmVsO1xuICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gIH1cblxuICBzZWFyY2goKSB7XG4gICAgaWYgKHRoaXMuc2VhcmNoVGVybS5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnNlYXJjaFJlc3VsdCA9IHRoaXMuY29tcG9uZW50cy5maWx0ZXIoY21wID0+XG4gICAgICAgIG5ldyBSZWdFeHAoZXNjYXBlUmVnRXhwKHRoaXMuc2VhcmNoVGVybS50cmltKCkpLCAnaScpLnRlc3QoY21wLmxhYmVsKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZXNldFNlYXJjaCgpO1xuICAgIH1cbiAgfVxuXG4gIHJlc2V0U2VhcmNoKCkge1xuICAgIHRoaXMuc2VhcmNoVGVybSA9ICcnO1xuICAgIHRoaXMuc2VhcmNoUmVzdWx0ID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgY2hhbmdlTW9kZShtb2RlOiAnY29uZmlnJyB8ICdzZWxlY3QnIHwgJ3N0eWxlJykge1xuICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9jYW5jZWwoKTtcbiAgICB0aGlzLm1vZGFsLmhpZGUoKTtcbiAgfVxuXG4gIGdldFN0eWxlKGlzUHJldmlldyA9IGZhbHNlKSB7XG4gICAgY29uc3QgY3NzQ2xhc3NlcyA9IHt9O1xuICAgIGlmIChpc1ByZXZpZXcgfHwgIXRoaXMuaXNEYXNoYm9hcmREZWZhdWx0U3R5bGUodGhpcy5zdHlsaW5nLmhlYWRlckNsYXNzKSkge1xuICAgICAgY3NzQ2xhc3Nlc1t0aGlzLnN0eWxpbmcuaGVhZGVyQ2xhc3NdID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoaXNQcmV2aWV3IHx8ICF0aGlzLmlzRGFzaGJvYXJkRGVmYXVsdFN0eWxlKHRoaXMuc3R5bGluZy5jb250ZW50Q2xhc3MpKSB7XG4gICAgICBjc3NDbGFzc2VzW3RoaXMuc3R5bGluZy5jb250ZW50Q2xhc3NdID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoaXNQcmV2aWV3KSB7XG4gICAgICBjc3NDbGFzc2VzW2BkYXNoYm9hcmQtdGhlbWUtJHt0aGlzLmRlZmF1bHRTdHlsaW5nLmNvbnRlbnRDbGFzcy5zcGxpdCgnLScpLnBvcCgpfWBdID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3NzQ2xhc3NlcztcbiAgfVxuXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMuY29udGV4dERhc2hib2FyZFNlcnZpY2UuZm9ybURpc2FibGVkID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5zZWFyY2hTdWIpIHtcbiAgICAgIHRoaXMuc2VhcmNoU3ViLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICB9XG5cbiAgaGFzQ29uZmlnKCkge1xuICAgIGlmICh0aGlzLndpZGdldENvbmZpZy5zZXR0aW5ncz8udXBncmFkZSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy53aWRnZXRDb25maWcuc2V0dGluZ3M/LmNvbmZpZ0NvbXBvbmVudCB8fCB0aGlzLndpZGdldENvbmZpZy5zZXR0aW5ncz8uY29uZmlnVGVtcGxhdGVVcmxcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiAhdGhpcy5keW5hbWljQ29tcG9uZW50Py5lcnJvcjtcbiAgfVxuXG4gIHByaXZhdGUgc2V0U3R5bGluZ3MoKTogdm9pZCB7XG4gICAgY29uc3QgZGFzaGJvYXJkQ2xhc3Nlczogc3RyaW5nW10gPVxuICAgICAgKHRoaXMubW8uYzh5X0Rhc2hib2FyZD8uY2xhc3NlcyAmJiBPYmplY3Qua2V5cyh0aGlzLm1vLmM4eV9EYXNoYm9hcmQuY2xhc3NlcykpIHx8IFtdO1xuICAgIGNvbnN0IGRhc2hib2FyZFdpZGdldENsYXNzZXM6IHN0cmluZ1tdID1cbiAgICAgICh0aGlzLm1vLmM4eV9EYXNoYm9hcmQ/LndpZGdldENsYXNzZXMgJiYgT2JqZWN0LmtleXModGhpcy5tby5jOHlfRGFzaGJvYXJkLndpZGdldENsYXNzZXMpKSB8fFxuICAgICAgW107XG4gICAgY29uc3Qgd2lkZ2V0Q2xhc3Nlczogc3RyaW5nW10gPSB0aGlzLmlzRWRpdCA/IE9iamVjdC5rZXlzKHRoaXMuY3VycmVudC5kYXRhLmNsYXNzZXMpIDogW107XG5cbiAgICB0aGlzLnN0eWxpbmcgPSB0aGlzLnNldERlZmF1bHRTdHlsZShbXG4gICAgICAuLi5kYXNoYm9hcmRDbGFzc2VzLFxuICAgICAgLi4uZGFzaGJvYXJkV2lkZ2V0Q2xhc3NlcyxcbiAgICAgIC4uLndpZGdldENsYXNzZXNcbiAgICBdKTtcbiAgICB0aGlzLmRlZmF1bHRTdHlsaW5nID0gdGhpcy5zZXREZWZhdWx0U3R5bGUoWy4uLmRhc2hib2FyZENsYXNzZXMsIC4uLmRhc2hib2FyZFdpZGdldENsYXNzZXNdKTtcbiAgfVxuXG4gIHByaXZhdGUgaXNEYXNoYm9hcmREZWZhdWx0U3R5bGUoY2xhc3NOYW1lKSB7XG4gICAgY29uc3QgYWxsQ2xhc3NlcyA9IHtcbiAgICAgIC4uLnRoaXMubW8uYzh5X0Rhc2hib2FyZC5jbGFzc2VzLFxuICAgICAgLi4udGhpcy5tby5jOHlfRGFzaGJvYXJkLndpZGdldENsYXNzZXNcbiAgICB9O1xuICAgIGNvbnN0IHN0eWxlcyA9IE9iamVjdC5rZXlzKGFsbENsYXNzZXMpLm1hcChjc3NDbGFzcyA9PiAoeyBjbGFzczogY3NzQ2xhc3MgfSkpO1xuICAgIGNvbnN0IHN0eWxlID0gdGhpcy5jb250ZXh0RGFzaGJvYXJkU2VydmljZS5nZXRTdHlsaW5nKFxuICAgICAgc3R5bGVzLFxuICAgICAgY2xhc3NOYW1lLnNwbGl0KCctJykucG9wKCksXG4gICAgICB1bmRlZmluZWRcbiAgICApO1xuICAgIHJldHVybiAhIXN0eWxlO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXREZWZhdWx0U3R5bGUoc2V0Q2xhc3Nlczogc3RyaW5nW10pIHtcbiAgICBsZXQgY29udGVudENsYXNzID0gdGhpcy5zdHlsaW5nLmNvbnRlbnRDbGFzcztcbiAgICBsZXQgaGVhZGVyQ2xhc3MgPSB0aGlzLnN0eWxpbmcuaGVhZGVyQ2xhc3M7XG4gICAgY29uc3Qgc3R5bGVzID0gdGhpcy5jb250ZXh0RGFzaGJvYXJkU2VydmljZVxuICAgICAgLmdldEZpbHRlcmVkRGFzaGJvYXJkU3R5bGVzKHNldENsYXNzZXMpXG4gICAgICAubWFwKGMgPT4gYy5zcGxpdCgnLScpLnBvcCgpKTtcbiAgICBzdHlsZXMuZm9yRWFjaChzdHlsZU5hbWUgPT4ge1xuICAgICAgY29udGVudENsYXNzID0gdGhpcy5jb250ZXh0RGFzaGJvYXJkU2VydmljZS5nZXRTdHlsaW5nKFxuICAgICAgICBXSURHRVRfQ09OVEVOVF9DTEFTU0VTLFxuICAgICAgICBzdHlsZU5hbWUsXG4gICAgICAgIGNvbnRlbnRDbGFzc1xuICAgICAgKTtcbiAgICAgIGhlYWRlckNsYXNzID0gdGhpcy5jb250ZXh0RGFzaGJvYXJkU2VydmljZS5nZXRTdHlsaW5nKFxuICAgICAgICBXSURHRVRfSEVBREVSX0NMQVNTRVMsXG4gICAgICAgIHN0eWxlTmFtZSxcbiAgICAgICAgaGVhZGVyQ2xhc3NcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4geyBoZWFkZXJDbGFzcywgY29udGVudENsYXNzIH07XG4gIH1cblxuICBwcml2YXRlIGNvbXBvc2VXaWRnZXRDb25maWcoc2VsZWN0ZWRDb21wb25lbnQsIGNvbnRleHQgPSB7fSkge1xuICAgIGNvbnN0IHNldHRpbmcgPSB7XG4gICAgICBzZXR0aW5nczoge1xuICAgICAgICAuLi5zZWxlY3RlZENvbXBvbmVudC5kYXRhLnNldHRpbmdzLFxuICAgICAgICAuLi5nZXQoc2VsZWN0ZWRDb21wb25lbnQuZGF0YS5zZXR0aW5ncywgJ25nMS5vcHRpb25zJyksXG4gICAgICAgIC4uLmdldChzZWxlY3RlZENvbXBvbmVudC5kYXRhLCAnbmcxLm9wdGlvbnMnKSxcbiAgICAgICAgY29udGV4dCxcbiAgICAgICAgZGFzaGJvYXJkTW86IHRoaXMubW8uYzh5X0Rhc2hib2FyZFxuICAgICAgfSxcbiAgICAgIC4uLnNlbGVjdGVkQ29tcG9uZW50LmRhdGEuY29uZmlnXG4gICAgfSBhcyBDb250ZXh0V2lkZ2V0Q29uZmlnO1xuICAgIHJldHVybiB0aGlzLmFwcGx5VGFyZ2V0SWZEZXZpY2VEYXNoYm9hcmQoc2V0dGluZyk7XG4gIH1cblxuICBwcml2YXRlIGFwcGx5VGFyZ2V0SWZEZXZpY2VEYXNoYm9hcmQod2lkZ2V0Q29uZmlnOiBDb250ZXh0V2lkZ2V0Q29uZmlnKSB7XG4gICAgY29uc3QgaXNEZXZpY2VUeXBlID0gdGhpcy5jb250ZXh0RGFzaGJvYXJkU2VydmljZS5pc0RldmljZVR5cGUodGhpcy5tbyk7XG5cbiAgICBpZiAoaXNEZXZpY2VUeXBlKSB7XG4gICAgICB3aWRnZXRDb25maWcuc2V0dGluZ3MuaGlkZVRhcmdldCA9IGlzRGV2aWNlVHlwZTtcblxuICAgICAgY29uc3Qgbm9EZXZpY2VUYXJnZXQgPSB3aWRnZXRDb25maWcuc2V0dGluZ3MubmcxXG4gICAgICAgID8gd2lkZ2V0Q29uZmlnLnNldHRpbmdzLm5nMS5vcHRpb25zLm5vRGV2aWNlVGFyZ2V0XG4gICAgICAgIDogd2lkZ2V0Q29uZmlnLnNldHRpbmdzLm5vRGV2aWNlVGFyZ2V0O1xuXG4gICAgICBpZiAoIW5vRGV2aWNlVGFyZ2V0KSB7XG4gICAgICAgIHdpZGdldENvbmZpZy5kZXZpY2UgPSB7XG4gICAgICAgICAgaWQ6IHRoaXMuY29udGV4dC5pZCxcbiAgICAgICAgICBuYW1lOiB0aGlzLmNvbnRleHQubmFtZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gd2lkZ2V0Q29uZmlnO1xuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyIHNlcGFyYXRvclwiPlxuICA8ZGl2XG4gICAgY2xhc3M9XCJoM1wiXG4gICAgdGl0bGU9XCJ7eyAnQWRkIHdpZGdldCcgfCB0cmFuc2xhdGUgfX1cIlxuICAgIGlkPVwibW9kYWwtdGl0bGVcIlxuICAgICpuZ0lmPVwiIWN1cnJlbnRcIlxuICAgIHRyYW5zbGF0ZVxuICA+XG4gICAgQWRkIHdpZGdldFxuICA8L2Rpdj5cbiAgPGRpdlxuICAgIGNsYXNzPVwiaDNcIlxuICAgIHRpdGxlPVwie3sgJ0VkaXQgd2lkZ2V0JyB8IHRyYW5zbGF0ZSB9fVwiXG4gICAgaWQ9XCJtb2RhbC10aXRsZVwiXG4gICAgKm5nSWY9XCJjdXJyZW50XCJcbiAgICB0cmFuc2xhdGVcbiAgPlxuICAgIEVkaXQgd2lkZ2V0XG4gIDwvZGl2PlxuPC9kaXY+XG48Zm9ybVxuICBuYW1lPVwiZm9ybVwiXG4gICNjb25maWdGb3JtPVwibmdGb3JtXCJcbj5cbiAgPGRpdlxuICAgIGNsYXNzPVwiYzh5LW1vZGFsLXRhYnNcIlxuICAgIGlkPVwibW9kYWwtYm9keVwiXG4gID5cbiAgICA8ZGl2IGNsYXNzPVwidGFiQ29udGFpbmVyXCI+XG4gICAgICA8dWwgY2xhc3M9XCJuYXYgbmF2LXRhYnMgbmF2LXRhYnNjOHkgcC1sLTI0XCI+XG4gICAgICAgIDxsaSBbY2xhc3MuYWN0aXZlXT1cIm1vZGUgPT09ICdzZWxlY3QnXCI+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgY2xhc3M9XCJidG5cIlxuICAgICAgICAgICAgdGl0bGU9XCJ7eyAnU2VsZWN0IHdpZGdldCcgfCB0cmFuc2xhdGUgfX1cIlxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAoY2xpY2spPVwiY2hhbmdlTW9kZSgnc2VsZWN0Jyk7IChmYWxzZSlcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxpIGM4eUljb249XCJ0aC1sYXJnZVwiPjwvaT5cbiAgICAgICAgICAgIDxzcGFuIHRyYW5zbGF0ZT5TZWxlY3Qgd2lkZ2V0PC9zcGFuPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2xpPlxuICAgICAgICA8bGkgW2NsYXNzLmFjdGl2ZV09XCJtb2RlID09PSAnY29uZmlnJ1wiPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGNsYXNzPVwiYnRuXCJcbiAgICAgICAgICAgIHRpdGxlPVwie3sgJ0NvbmZpZ3VyYXRpb24nIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgW2Rpc2FibGVkXT1cIiFzZWxlY3RlZFwiXG4gICAgICAgICAgICAoY2xpY2spPVwiY2hhbmdlTW9kZSgnY29uZmlnJyk7IChmYWxzZSlcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxpIGM4eUljb249XCJjb2dcIj48L2k+XG4gICAgICAgICAgICA8c3BhbiB0cmFuc2xhdGU+Q29uZmlndXJhdGlvbjwvc3Bhbj5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9saT5cbiAgICAgICAgPGxpIFtjbGFzcy5hY3RpdmVdPVwibW9kZSA9PT0gJ3N0eWxlJ1wiPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGNsYXNzPVwiYnRuXCJcbiAgICAgICAgICAgIHRpdGxlPVwie3sgJ0FwcGVhcmFuY2UnIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgW2Rpc2FibGVkXT1cIiFzZWxlY3RlZFwiXG4gICAgICAgICAgICAoY2xpY2spPVwiY2hhbmdlTW9kZSgnc3R5bGUnKTsgKGZhbHNlKVwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGkgYzh5SWNvbj1cInBhaW50LWJydXNoXCI+PC9pPlxuICAgICAgICAgICAgPHNwYW4gdHJhbnNsYXRlPkFwcGVhcmFuY2U8L3NwYW4+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvbGk+XG4gICAgICA8L3VsPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cblxuICA8ZGl2IGNsYXNzPVwibW9kYWwtaW5uZXItc2Nyb2xsIG1vZGFsLWlubmVyLXNjcm9sbC0tZml4ZWRcIj5cbiAgICA8ZGl2XG4gICAgICBjbGFzcz1cImJnLWxldmVsLTAgcC1sLTI0IHAtci0yNCBwLXQtOCBwLWItOCBzdGlja3ktaGVhZGVyLXRvcC0wXCJcbiAgICAgIHN0eWxlPVwiei1pbmRleDogMlwiXG4gICAgICAqbmdJZj1cIm1vZGUgPT09ICdzZWxlY3QnXCJcbiAgICA+XG4gICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNlwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cCBpbnB1dC1ncm91cC1zZWFyY2hcIj5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXG4gICAgICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiJ1NlYXJjaCcgfCB0cmFuc2xhdGVcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cInt7ICdTZWFyY2jigKYnIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICBkYXRhLWN5PVwid2lkZ2V0LWNvbmZpZy0tU2VhcmNoXCJcbiAgICAgICAgICAgICAgWyhuZ01vZGVsKV09XCJzZWFyY2hUZXJtXCJcbiAgICAgICAgICAgICAgW25nTW9kZWxPcHRpb25zXT1cInsgc3RhbmRhbG9uZTogdHJ1ZSB9XCJcbiAgICAgICAgICAgICAgKGtleWRvd24pPVwic2VhcmNoQ2hhbmdlJC5uZXh0KCRldmVudClcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaW5wdXQtZ3JvdXAtYnRuXCI+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tZG90XCJcbiAgICAgICAgICAgICAgICB0aXRsZT1cInt7ICdTZWFyY2gnIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAoY2xpY2spPVwicmVzZXRTZWFyY2goKVwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8aSBbYzh5SWNvbl09XCJzZWFyY2hUZXJtLmxlbmd0aCA9PT0gMCA/ICdzZWFyY2gnIDogJ2Nsb3NlJ1wiPjwvaT5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdlxuICAgICAgY2xhc3M9XCJtb2RhbC1ib2R5IGJnLWxldmVsLTJcIlxuICAgICAgKm5nSWY9XCJtb2RlID09PSAnc2VsZWN0J1wiXG4gICAgPlxuICAgICAgPGRpdiBjbGFzcz1cImNhcmQtZ3JvdXAgY2FyZC1zZWxlY3QgbS1iLTBcIj5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzPVwiY29sLW1kLTMgY29sLXNtLTQgY29sLXhzLTZcIlxuICAgICAgICAgIHRpdGxlPVwie3sgY21wLmRlc2NyaXB0aW9uIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICAgICAqbmdGb3I9XCJsZXQgY21wIG9mIHNlYXJjaFJlc3VsdCB8fCBjb21wb25lbnRzXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGNsYXNzPVwiYnRuLWNsZWFuIGQtY29sIGNhcmQgcC04XCJcbiAgICAgICAgICAgIFtjbGFzcy5hY3RpdmVdPVwic2VsZWN0ZWQgPT09IGNtcFwiXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIChjbGljayk9XCJzZWxlY3QoY21wKVwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzcz1cInRleHQtY2VudGVyIHAtOCBtLWItOCBkLWNvbCBmbGV4LWNlbnRlciBmbGV4LWdyb3cgYmctbGV2ZWwtMlwiXG4gICAgICAgICAgICAgIHJvbGU9XCJwcmVzZW50YXRpb25cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiIWNtcC5wcmV2aWV3SW1hZ2U7IGVsc2UgcHJldmlld0ltYWdlXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImgxXCI+PGkgYzh5SWNvbj1cImZpbGUtaW1hZ2Utb1wiPjwvaT48L2Rpdj5cbiAgICAgICAgICAgICAgICA8c21hbGwgdHJhbnNsYXRlPlByZXZpZXcgbm90IGF2YWlsYWJsZTwvc21hbGw+XG4gICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgI3ByZXZpZXdJbWFnZT5cbiAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICBjbGFzcz1cIndpZGdldC10aHVtYm5haWxcIlxuICAgICAgICAgICAgICAgICAgYWx0XG4gICAgICAgICAgICAgICAgICBbc3JjXT1cImNtcC5wcmV2aWV3SW1hZ2VcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwiY2FyZC10aXRsZSB0ZXh0LXRydW5jYXRlXCI+XG4gICAgICAgICAgICAgIDxjOHktaGlnaGxpZ2h0XG4gICAgICAgICAgICAgICAgdGV4dD1cInt7IGNtcC5sYWJlbCB8IHRyYW5zbGF0ZSB9fVwiXG4gICAgICAgICAgICAgICAgW3BhdHRlcm5dPVwic2VhcmNoVGVybVwiXG4gICAgICAgICAgICAgID48L2M4eS1oaWdobGlnaHQ+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzcz1cImM4eS1lbXB0eS1zdGF0ZSB0ZXh0LWNlbnRlclwiXG4gICAgICAgICAgKm5nSWY9XCJzZWFyY2hSZXN1bHQgJiYgc2VhcmNoUmVzdWx0Lmxlbmd0aCA9PT0gMFwiXG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzcz1cImgxXCJcbiAgICAgICAgICAgIGM4eUljb249XCJzZWFyY2hcIlxuICAgICAgICAgID48L2Rpdj5cbiAgICAgICAgICA8aDMgdHJhbnNsYXRlPk5vIHdpZGdldHMgZm91bmQuPC9oMz5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZC1mbGV4XCI+XG4gICAgICAgICAgICA8cFxuICAgICAgICAgICAgICBjbGFzcz1cIm0tci04XCJcbiAgICAgICAgICAgICAgdHJhbnNsYXRlXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIFJlcGhyYXNlIHlvdXIgc2VhcmNoIHRlcm0uXG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCJcbiAgICAgICAgICAgICAgdGl0bGU9XCJ7eyAnUmVzZXQgc2VhcmNoJyB8IHRyYW5zbGF0ZSB9fVwiXG4gICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAoY2xpY2spPVwicmVzZXRTZWFyY2goKVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt7ICdSZXNldCBzZWFyY2gnIHwgdHJhbnNsYXRlIH19XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDwhLS0gVGhlIGZvbGxvd2luZyBpcyBpbnRlbnRpb25hbCBzZXQgdG8gaGlkZGVuIHRvIGFsbG93IHRoZSBWaWV3Q2hpbGQgcmVmIGluIHRoZSBjb250cm9sbGVyIC0tPlxuICAgIDxkaXZcbiAgICAgIGNsYXNzPVwiZC1mbGV4IGQtY29sIGZpdC1oXCJcbiAgICAgICpuZ0lmPVwic2VsZWN0ZWRcIlxuICAgICAgW25nQ2xhc3NdPVwieyBoaWRkZW46IG1vZGUgIT09ICdjb25maWcnIH1cIlxuICAgID5cbiAgICAgIDxkaXYgY2xhc3M9XCJwLXQtMTYgZmxleC1uby1zaHJpbmsgc2VwYXJhdG9yLWJvdHRvbSBwLWItMTZcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInAtbC0yNFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1sZWZ0IHRleHQtbWVkaXVtIGg0XCI+XG4gICAgICAgICAgICAgICAge3sgc2VsZWN0ZWQubGFiZWwgfCB0cmFuc2xhdGUgfX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgIHt7IHNlbGVjdGVkLmRlc2NyaXB0aW9uIHwgdHJhbnNsYXRlIH19XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tOFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInAtci0yNFwiPlxuICAgICAgICAgICAgICA8Yzh5LWZvcm0tZ3JvdXA+XG4gICAgICAgICAgICAgICAgPGxhYmVsXG4gICAgICAgICAgICAgICAgICBmb3I9XCJ3aWRnZXRUaXRsZVwiXG4gICAgICAgICAgICAgICAgICB0cmFuc2xhdGVcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBUaXRsZVxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXG4gICAgICAgICAgICAgICAgICBpZD1cIndpZGdldFRpdGxlXCJcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwie3sgJ2UuZy4nIHwgdHJhbnNsYXRlIH19IHt7IGNvbXBvbmVudExhYmVsIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJ0aXRsZVwiXG4gICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgWyhuZ01vZGVsKV09XCJzZWxlY3RlZC5kYXRhLnRpdGxlXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L2M4eS1mb3JtLWdyb3VwPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzPVwicm93IGZsZXgtZ3Jvd1wiXG4gICAgICAgIFtuZ0NsYXNzXT1cInsgJ2QtZmxleCc6IHdpZGdldENvbmZpZy5vcHRpb25zIHx8IGhhc0NvbmZpZygpIH1cIlxuICAgICAgPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3M9XCJhLXMtc3RyZXRjaFwiXG4gICAgICAgICAgKm5nSWY9XCIhd2lkZ2V0Q29uZmlnLnNldHRpbmdzPy5ub0RldmljZVRhcmdldFwiXG4gICAgICAgICAgW25nQ2xhc3NdPVwie1xuICAgICAgICAgICAgJ2JnLWxldmVsLTEgY29sLXNtLTQgcC1yLTAnOiBoYXNDb25maWcoKSxcbiAgICAgICAgICAgICdiZy1sZXZlbC0wIGNvbC1zbS0xMic6ICFoYXNDb25maWcoKVxuICAgICAgICAgIH1cIlxuICAgICAgICA+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3M9XCJmaXQtaCBiZy1pbmhlcml0IHAtbC0xNlwiXG4gICAgICAgICAgICBbbmdDbGFzc109XCJ7ICdwLXItMjQnOiAhaGFzQ29uZmlnKCkgfVwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInAtcmVsYXRpdmUgYmctaW5oZXJpdFwiPlxuICAgICAgICAgICAgICA8Yzh5LWFzc2V0LXNlbGVjdG9yLW1pbGxlclxuICAgICAgICAgICAgICAgIGNsYXNzPVwiZC1ibG9jayBiZy1pbmhlcml0IHAtcmVsYXRpdmVcIlxuICAgICAgICAgICAgICAgIHN0eWxlPVwiaGVpZ2h0OiBjYWxjKDEwMHZoIC0gNDIycHgpXCJcbiAgICAgICAgICAgICAgICAob25TZWxlY3RlZCk9XCJzZWxlY3Rpb25DaGFuZ2VkKCRldmVudClcIlxuICAgICAgICAgICAgICAgIChvbkNsZWFyU2VsZWN0ZWQpPVwic2VsZWN0aW9uQ2hhbmdlZCgpXCJcbiAgICAgICAgICAgICAgICBbY29uZmlnXT1cIntcbiAgICAgICAgICAgICAgICAgIHZpZXc6ICdtaWxsZXInLFxuICAgICAgICAgICAgICAgICAgZ3JvdXBzU2VsZWN0YWJsZTogdGhpcy53aWRnZXRDb25maWcuc2V0dGluZ3M/Lmdyb3Vwc1NlbGVjdGFibGUsXG4gICAgICAgICAgICAgICAgICBzaG93Q2hpbGREZXZpY2VzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgY29sdW1uSGVhZGVyczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHNob3dVbmFzc2lnbmVkRGV2aWNlczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHNlYXJjaDogIXRoaXMud2lkZ2V0Q29uZmlnLnNldHRpbmdzLmNvbnRleHQ/LmFkZGl0aW9uUGFyZW50cyxcbiAgICAgICAgICAgICAgICAgIHNob3dGaWx0ZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgICBzaW5nbGVDb2x1bW46ICEhdGhpcy5oYXNDb25maWcoKVxuICAgICAgICAgICAgICAgIH1cIlxuICAgICAgICAgICAgICAgIFthc3NldF09XCJ3aWRnZXRDb25maWcuc2V0dGluZ3M/LmNvbnRleHRcIlxuICAgICAgICAgICAgICAgIFtzZWxlY3RlZERldmljZV09XCJzZWxlY3RlZERldmljZVwiXG4gICAgICAgICAgICAgID48L2M4eS1hc3NldC1zZWxlY3Rvci1taWxsZXI+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBbbmdDbGFzc109XCJ7XG4gICAgICAgICAgICAnY29sLXNtLTgnOiAhd2lkZ2V0Q29uZmlnLnNldHRpbmdzPy5ub0RldmljZVRhcmdldCxcbiAgICAgICAgICAgICdjb2wtc20tMTInOiB3aWRnZXRDb25maWcuc2V0dGluZ3M/Lm5vRGV2aWNlVGFyZ2V0LFxuICAgICAgICAgICAgJ3NyLW9ubHknOiAhaGFzQ29uZmlnKClcbiAgICAgICAgICB9XCJcbiAgICAgICAgPlxuICAgICAgICAgIDxjOHktZHluYW1pYy1jb21wb25lbnRcbiAgICAgICAgICAgIGNsYXNzPVwiZC1ibG9ja1wiXG4gICAgICAgICAgICBzdHlsZT1cImhlaWdodDoge3sgaGFzQ29uZmlnKCkgPyAnY2FsYygxMDB2aCAtIDQyMnB4KScgOiAnMCcgfX1cIlxuICAgICAgICAgICAgW25nQ2xhc3NdPVwieyAnaW5uZXItc2Nyb2xsIHAtci0yNCc6ICF3aWRnZXRDb25maWcuc2V0dGluZ3M/Lm5vRGV2aWNlVGFyZ2V0IH1cIlxuICAgICAgICAgICAgW2NvbXBvbmVudElkXT1cInNlbGVjdGVkLmlkXCJcbiAgICAgICAgICAgIG1vZGU9XCJjb25maWdcIlxuICAgICAgICAgICAgW2NvbmZpZ109XCJ3aWRnZXRDb25maWdcIlxuICAgICAgICAgICAgW25vdEZvdW5kRXJyb3JdPVwiZmFsc2VcIlxuICAgICAgICAgICAgI2NvbmZpZ1xuICAgICAgICAgID48L2M4eS1keW5hbWljLWNvbXBvbmVudD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXZcbiAgICAgIGNsYXNzPVwibW9kYWwtYm9keSBwLXQtMFwiXG4gICAgICBzdHlsZT1cImhlaWdodDogY2FsYygxMDB2aCAtIDMxMHB4KVwiXG4gICAgICAqbmdJZj1cIm1vZGUgPT09ICdzdHlsZSdcIlxuICAgID5cbiAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbC14cy02XCI+XG4gICAgICAgICAgPGM4eS1hcHBlYXJhbmNlLXNldHRpbmdzXG4gICAgICAgICAgICBbKHRoZW1lQ2xhc3MpXT1cInN0eWxpbmcuY29udGVudENsYXNzXCJcbiAgICAgICAgICAgIFsoaGVhZGVyQ2xhc3MpXT1cInN0eWxpbmcuaGVhZGVyQ2xhc3NcIlxuICAgICAgICAgICAgW3Bvc3NpYmxlU3R5bGluZ1RoZW1lXT1cInBvc3NpYmxlU3R5bGluZy5XSURHRVRfQ09OVEVOVF9DTEFTU0VTXCJcbiAgICAgICAgICAgIFtwb3NzaWJsZVN0eWxpbmdIZWFkZXJdPVwicG9zc2libGVTdHlsaW5nLldJREdFVF9IRUFERVJfQ0xBU1NFU1wiXG4gICAgICAgICAgICBbZGVmYXVsdFRoZW1lQ2xhc3NdPVwiZGVmYXVsdFN0eWxpbmcuY29udGVudENsYXNzXCJcbiAgICAgICAgICAgIFtkZWZhdWx0SGVhZGVyQ2xhc3NdPVwiZGVmYXVsdFN0eWxpbmcuaGVhZGVyQ2xhc3NcIlxuICAgICAgICAgID48L2M4eS1hcHBlYXJhbmNlLXNldHRpbmdzPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbC14cy02IHN0aWNreS1oZWFkZXItdG9wLTBcIj5cbiAgICAgICAgICA8Yzh5LXdpZGdldC1wcmV2aWV3XG4gICAgICAgICAgICBzdHlsZT1cImhlaWdodDogY2FsYygxMDB2aCAtIDM4MnB4KVwiXG4gICAgICAgICAgICBbcHJldmlld0NsYXNzZXNdPVwiZ2V0U3R5bGUodHJ1ZSlcIlxuICAgICAgICAgID48L2M4eS13aWRnZXQtcHJldmlldz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG5cbiAgPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPlxuICAgIDxidXR0b25cbiAgICAgIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCJcbiAgICAgIHRpdGxlPVwie3sgJ0NhbmNlbCcgfCB0cmFuc2xhdGUgfX1cIlxuICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAoY2xpY2spPVwiY2xvc2UoKVwiXG4gICAgPlxuICAgICAge3sgJ0NhbmNlbCcgfCB0cmFuc2xhdGUgfX1cbiAgICA8L2J1dHRvbj5cbiAgICA8YnV0dG9uXG4gICAgICBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiXG4gICAgICB0aXRsZT1cInt7ICdTYXZlJyB8IHRyYW5zbGF0ZSB9fVwiXG4gICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgIChjbGljayk9XCJzYXZlKClcIlxuICAgICAgW2Rpc2FibGVkXT1cIlxuICAgICAgICBjb250ZXh0RGFzaGJvYXJkU2VydmljZS5mb3JtRGlzYWJsZWQgfHwgY29uZmlnRm9ybS5pbnZhbGlkIHx8IGNoZWNrSWZEZXZpY2VSZXF1aXJlZCgpXG4gICAgICBcIlxuICAgICAgYzh5UHJvZHVjdEV4cGVyaWVuY2VcbiAgICAgIFthY3Rpb25OYW1lXT1cImN1cnJlbnQgPyAnZWRpdFdpZGdldCcgOiAnY3JlYXRlV2lkZ2V0J1wiXG4gICAgICBbYWN0aW9uRGF0YV09XCJ7IHdpZGdldE5hbWU6IHNlbGVjdGVkICYmIHNlbGVjdGVkLmlkIH1cIlxuICAgID5cbiAgICAgIHt7ICdTYXZlJyB8IHRyYW5zbGF0ZSB9fVxuICAgIDwvYnV0dG9uPlxuICA8L2Rpdj5cbjwvZm9ybT5cbiIsImltcG9ydCB7IENvbXBvbmVudCwgSG9zdEJpbmRpbmcsIEluamVjdCwgSW5wdXQsIE9uRGVzdHJveSwgT25Jbml0LCBSZW5kZXJlcjIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFjdGl2YXRlZFJvdXRlLCBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHtcbiAgQWN0aW9uQmFyU2VydmljZSxcbiAgQWxlcnRTZXJ2aWNlLFxuICBCcmVhZGNydW1iSXRlbSxcbiAgRGFzaGJvYXJkQ2hhbmdlLFxuICBEYXNoYm9hcmRDaGlsZENoYW5nZSxcbiAgRGFzaGJvYXJkQ2hpbGRDb21wb25lbnQsXG4gIERhc2hib2FyZFNldHRpbmdzLFxuICBEeW5hbWljQ29tcG9uZW50RGVmaW5pdGlvbixcbiAgR2FpbnNpZ2h0U2VydmljZSxcbiAgZ2V0dGV4dCxcbiAgTW9kYWxTZXJ2aWNlLFxuICBTdGF0dXMsXG4gIFdpZGdldCxcbiAgV2lkZ2V0Q2hhbmdlXG59IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgVHJhbnNsYXRlU2VydmljZSB9IGZyb20gJ0BuZ3gtdHJhbnNsYXRlL2NvcmUnO1xuaW1wb3J0IHsgY2xvbmVEZWVwLCBmaW5kSW5kZXgsIGtleUJ5LCBvbWl0LCB2YWx1ZXMsIHNvbWUsIGtlYmFiQ2FzZSwgZXZlcnkgfSBmcm9tICdsb2Rhc2gtZXMnO1xuaW1wb3J0IHsgQnNNb2RhbFNlcnZpY2UgfSBmcm9tICduZ3gtYm9vdHN0cmFwL21vZGFsJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHtcbiAgQ29udGV4dERhc2hib2FyZCxcbiAgQ29udGV4dERhc2hib2FyZENvbmZpZyxcbiAgQ29udGV4dERhc2hib2FyZE1hbmFnZWRPYmplY3QsXG4gIENPTlRFWFRfREFTSEJPQVJEX0NPTkZJRyxcbiAgV0lER0VUX0hFQURFUl9DTEFTU0VTXG59IGZyb20gJy4vY29udGV4dC1kYXNoYm9hcmQubW9kZWwnO1xuaW1wb3J0IHsgQ29udGV4dERhc2hib2FyZFNlcnZpY2UgfSBmcm9tICcuL2NvbnRleHQtZGFzaGJvYXJkLnNlcnZpY2UnO1xuaW1wb3J0IHsgRGFzaGJvYXJkRGV0YWlsQ29tcG9uZW50IH0gZnJvbSAnLi9kYXNoYm9hcmQtZGV0YWlsLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBXaWRnZXRDb25maWdDb21wb25lbnQgfSBmcm9tICcuL3dpZGdldC1jb25maWcuY29tcG9uZW50JztcbmltcG9ydCB7IFdpZGdldFNlcnZpY2UgfSBmcm9tICcuL3dpZGdldC5zZXJ2aWNlJztcbmltcG9ydCB7IElNYW5hZ2VkT2JqZWN0LCBJbnZlbnRvcnlTZXJ2aWNlIH0gZnJvbSAnQGM4eS9jbGllbnQnO1xuXG4vKipcbiAqIFRoZSBjb250ZXh0IGRhc2hib2FyZCBpcyBhIGRhc2hib2FyZCB3aGljaCByZXNvbHZlcyBpdCBkYXRhIGZyb20gdGhlIGN1cnJlbnQgY29udGV4dCAoZGV2aWNlIG9yIGdyb3VwKVxuICogaXQgaXMgZGlzcGxheWVkIG9uLiBJdCB1c3VhbGx5IHVzZXMgdGhlIHJvdXRlLmRhdGEgZm9yIGl0LCBidXQgeW91IGNhbiBwYXNzXG4gKiBhIGRpZmZlcmVudCBtYW5hZ2VkT2JqZWN0IHRvIHRoZSBbbW9dIGlucHV0IHBhcmFtZXRlciB0byBjaGFuZ2UgdGhhdCBiZWhhdmlvci5cbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYzh5LWNvbnRleHQtZGFzaGJvYXJkJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2NvbnRleHQtZGFzaGJvYXJkLmNvbXBvbmVudC5odG1sJyxcbiAgaG9zdDoge1xuICAgIHN0eWxlOiBgXG4gICAgICBkaXNwbGF5OiBibG9jaztcbiAgICBgLFxuICAgIGNsYXNzOiAnZGFzaGJvYXJkIGM4eS1ncmlkLWRhc2hib2FyZCdcbiAgfVxufSlcbmV4cG9ydCBjbGFzcyBDb250ZXh0RGFzaGJvYXJkQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xuICBASW5wdXQoKVxuICBuYW1lOiBzdHJpbmc7XG4gIEBJbnB1dCgpXG4gIGNoaWxkcmVuQ2xhc3NlcyA9ICcnO1xuICBASW5wdXQoKVxuICBjb250ZXh0OiBhbnk7XG4gIEBJbnB1dCgpXG4gIHNldFRpdGxlID0gZmFsc2U7XG4gIEBJbnB1dCgpXG4gIGRpc2FibGVkID0gZmFsc2U7XG4gIEBJbnB1dCgpXG4gIGRlZmF1bHRXaWRnZXRzOiBXaWRnZXRbXSA9IFtdO1xuICBASW5wdXQoKVxuICBjYW5Db3B5ID0gdHJ1ZTtcbiAgQElucHV0KClcbiAgY2FuRGVsZXRlID0gdHJ1ZTtcbiAgQElucHV0KClcbiAgaXNMb2FkaW5nID0gdHJ1ZTtcbiAgQElucHV0KClcbiAgYnJlYWRjcnVtYlNldHRpbmdzOiBCcmVhZGNydW1iSXRlbTtcbiAgQElucHV0KClcbiAgc2hvd0NvbnRleHRIZWxwQnV0dG9uID0gdHJ1ZTtcblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzJylcbiAgY2xhc3MgPSAnJztcblxuICB3aWRnZXRzOiBXaWRnZXRbXSA9IFtdO1xuICBtbzogQ29udGV4dERhc2hib2FyZE1hbmFnZWRPYmplY3Q7XG4gIGRhc2hib2FyZDogQ29udGV4dERhc2hib2FyZDtcbiAgdGl0bGU6IHN0cmluZztcbiAgaXNDb3B5RGlzYWJsZWQ6IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSBkYXRhU3ViOiBTdWJzY3JpcHRpb247XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByb3V0ZTogQWN0aXZhdGVkUm91dGUsXG4gICAgcHJpdmF0ZSByb3V0ZXI6IFJvdXRlcixcbiAgICBwcml2YXRlIGNvbnRleHREYXNoYm9hcmRTZXJ2aWNlOiBDb250ZXh0RGFzaGJvYXJkU2VydmljZSxcbiAgICBwcml2YXRlIGFsZXJ0OiBBbGVydFNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyLFxuICAgIEBJbmplY3QoQ09OVEVYVF9EQVNIQk9BUkRfQ09ORklHKSBwdWJsaWMgbW9kdWxlQ29uZmlnOiBDb250ZXh0RGFzaGJvYXJkQ29uZmlnLFxuICAgIHByaXZhdGUgd2lkZ2V0U2VydmljZTogV2lkZ2V0U2VydmljZSxcbiAgICBwcml2YXRlIGJzTW9kYWw6IEJzTW9kYWxTZXJ2aWNlLFxuICAgIHByaXZhdGUgaW52ZW50b3J5OiBJbnZlbnRvcnlTZXJ2aWNlLFxuICAgIHByaXZhdGUgZ2FpbnNpZ2h0U2VydmljZTogR2FpbnNpZ2h0U2VydmljZSxcbiAgICBwcml2YXRlIGFjdGlvbkJhclNlcnZpY2U6IEFjdGlvbkJhclNlcnZpY2UsXG4gICAgcHJpdmF0ZSB0cmFuc2xhdGVTZXJ2aWNlOiBUcmFuc2xhdGVTZXJ2aWNlLFxuICAgIHByaXZhdGUgbW9kYWw6IE1vZGFsU2VydmljZVxuICApIHt9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKCF0aGlzLm5hbWUpIHtcbiAgICAgIHRoaXMubG9hZENvbnRleHREYXNoYm9hcmQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5sb2FkTmFtZWREYXNoYm9hcmQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBsaWVzIHRoZSBjdXJyZW50IGNvbnRleHQgdG8gdGhlIHdpZGdldFxuICAgKiBAcGFyYW0gd2lkZ2V0IFRoZSB3aWRnZXQgdG8gYXBwbHkgdGhlIGNvbnRleHQgdG8uXG4gICAqL1xuICBhcHBseURldmljZVRhcmdldCh3aWRnZXQpIHtcbiAgICBpZiAod2lkZ2V0LmNvbmZpZy5kZXZpY2UpIHtcbiAgICAgIHdpZGdldC5jb25maWcuZGV2aWNlID0geyBpZDogdGhpcy5jb250ZXh0LmlkLCBuYW1lOiB0aGlzLmNvbnRleHQubmFtZSB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSByb3V0ZSBsaXN0ZW5lci5cbiAgICovXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmRhdGFTdWIpIHtcbiAgICAgIHRoaXMuZGF0YVN1Yi51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN0b3JlcyB0aGUgZGFzaGJvYXJkIHdpZGdldHMgdG8gdGhlIGRlZmF1bHQgd2lkZ2V0cy5cbiAgICovXG4gIGFzeW5jIHJlc3RvcmUoKSB7XG4gICAgY29uc3QgbWVzZyA9IGdldHRleHQoXG4gICAgICAnWW91IGFyZSBhYm91dCB0byByZXNldCB0aGlzIGRhc2hib2FyZC4gQWxsIGNoYW5nZXMgdG8gdGhlIGRhc2hib2FyZCB3aWxsIGdldCBsb3N0IGFuZCBjYW5ub3QgYmUgcmVjb3ZlcmVkLiBEbyB5b3Ugd2FudCB0byBwcm9jZWVkPydcbiAgICApO1xuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMubW9kYWwuY29uZmlybShnZXR0ZXh0KCdSZXNldCBkYXNoYm9hcmQnKSwgbWVzZywgU3RhdHVzLldBUk5JTkcsIHtcbiAgICAgICAgb2s6IGdldHRleHQoJ1Jlc2V0YGRhc2hib2FyZGAnKSxcbiAgICAgICAgY2FuY2VsOiBnZXR0ZXh0KCdDYW5jZWwnKVxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMubW8uYzh5X0Rhc2hib2FyZC5jaGlsZHJlbiA9IHRoaXMuY29udGV4dERhc2hib2FyZFNlcnZpY2UubWFwV2lkZ2V0cyh0aGlzLmRlZmF1bHRXaWRnZXRzKTtcbiAgICAgIGF3YWl0IHRoaXMuY29udGV4dERhc2hib2FyZFNlcnZpY2UudXBkYXRlKHRoaXMubW8pO1xuICAgICAgYXdhaXQgdGhpcy5vbkxvYWQoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRoaXMuYWxlcnQuYWRkU2VydmVyRmFpbHVyZShlcnJvcik7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYWxsIGRhc2hib2FyZHMgY2hpbGRyZW4ncy4gVXNlZnVsIGZvciBwb3NpdGlvbiBjaGFuZ2VzIG9uIHRoZSBkYXNoYm9hcmQuXG4gICAqIEBwYXJhbSBjaGlsZCBUaGUgY2hpbGQgdG8gY2hhbmdlLlxuICAgKi9cbiAgYXN5bmMgdXBkYXRlRGFzaGJvYXJkQ2hpbGRyZW4oY2hpbGQ6IERhc2hib2FyZENoaWxkQ2hhbmdlIHwgRGFzaGJvYXJkQ2hhbmdlKSB7XG4gICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gY2hpbGQ7XG4gICAgY29uc3QgZGFzaGJvYXJkTU86IENvbnRleHREYXNoYm9hcmRNYW5hZ2VkT2JqZWN0ID0gdGhpcy5tbztcbiAgICBjb25zdCBtYXBwZWRDaGlsZHJlbjogeyBbaWQ6IHN0cmluZ106IFdpZGdldCB9ID0ga2V5QnkoXG4gICAgICBjaGlsZHJlbi5tYXAoYyA9PiB0aGlzLmNvbXBvbmVudFRvV2lkZ2V0KGMpKSxcbiAgICAgICdpZCdcbiAgICApO1xuICAgIGRhc2hib2FyZE1PLmM4eV9EYXNoYm9hcmQuY2hpbGRyZW4gPSBtYXBwZWRDaGlsZHJlbjtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0RGFzaGJvYXJkU2VydmljZS51cGRhdGUoZGFzaGJvYXJkTU8pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvcGllcyB0aGUgZGFzaGJvYXJkIGFuZCBjdXJyZW50IGNvbnRleHQgdG8gYSBjbGlwYm9hcmQuXG4gICAqL1xuICBhc3luYyBjb3B5RGFzaGJvYXJkKCkge1xuICAgIGNvbnN0IHZpZXdDb250ZXh0ID0gdGhpcy5yb3V0ZS5wYXJlbnQuc25hcHNob3QuZGF0YT8uY29udGV4dDtcblxuICAgIHRoaXMuY29udGV4dERhc2hib2FyZFNlcnZpY2UuY29weUNsaXBib2FyZCA9IHtcbiAgICAgIGRhc2hib2FyZDogY2xvbmVEZWVwKHRoaXMubW8uYzh5X0Rhc2hib2FyZCksXG4gICAgICBjb250ZXh0OiBjbG9uZURlZXAoe1xuICAgICAgICBjb250ZXh0OiB2aWV3Q29udGV4dCxcbiAgICAgICAgY29udGV4dERhdGE6IHRoaXMuY29udGV4dFxuICAgICAgfSlcbiAgICB9O1xuXG4gICAgaWYgKHZpZXdDb250ZXh0KSB7XG4gICAgICBjb25zdCBjdHggPSB2aWV3Q29udGV4dC5zcGxpdCgnLycpLnNoaWZ0KCk7XG4gICAgICBjb25zdCBtc2cgPSB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudChcbiAgICAgICAgJ0Rhc2hib2FyZCBjb3BpZWQuIE5hdmlnYXRlIHRvIHRoZSBkZXNpcmVkIHt7IGN0eCB9fSBhbmQgc2VsZWN0IFwiUGFzdGUgZGFzaGJvYXJkXCInLFxuICAgICAgICB7IGN0eCB9XG4gICAgICApO1xuICAgICAgdGhpcy5hbGVydC5zdWNjZXNzKG1zZyk7XG4gICAgfVxuICAgIHRoaXMuYWN0aW9uQmFyU2VydmljZS5yZWZyZXNoKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBjb21wbGV0ZSBkYXNoYm9hcmQgYW5kIG5hdmlnYXRlIGF3YXkuXG4gICAqL1xuICBhc3luYyBkZWxldGVEYXNoYm9hcmQoKSB7XG4gICAgYXdhaXQgdGhpcy5jb250ZXh0RGFzaGJvYXJkU2VydmljZS5kZWxldGUodGhpcy5tbyk7XG4gICAgaWYgKHRoaXMucm91dGUucGFyZW50KSB7XG4gICAgICBjb25zdCByb3V0ZSA9IHRoaXMucm91dGUucGFyZW50LnNuYXBzaG90LnVybC5tYXAoc2VnbWVudCA9PiBzZWdtZW50LnBhdGgpLmpvaW4oJy8nKTtcbiAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlQnlVcmwocm91dGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFZGl0cyB0aGUgY3VycmVudCBkYXNoYm9hcmRcbiAgICovXG4gIGFzeW5jIGVkaXREYXNoYm9hcmQoKSB7XG4gICAgY29uc3QgaXNSZXBvcnQgPSB0aGlzLmNvbnRleHREYXNoYm9hcmRTZXJ2aWNlLmlzUmVwb3J0KHRoaXMubW8pO1xuICAgIGlmIChpc1JlcG9ydCkge1xuICAgICAgY29uc3QgeyBuYW1lLCBpY29uLCBwcmlvcml0eSwgYzh5X0lzTmF2aWdhdG9yTm9kZSwgZGVzY3JpcHRpb24gfSA9IHRoaXMuY29udGV4dDtcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5kYXNoYm9hcmQsIHsgbmFtZSwgaWNvbiwgcHJpb3JpdHksIGM4eV9Jc05hdmlnYXRvck5vZGUsIGRlc2NyaXB0aW9uIH0pO1xuICAgIH1cbiAgICBjb25zdCBpbml0aWFsU3RhdGUgPSB7XG4gICAgICBkYXNoYm9hcmQ6IHRoaXMuZGFzaGJvYXJkLFxuICAgICAgZGV2aWNlVHlwZTogdGhpcy5jb250ZXh0LnR5cGUsXG4gICAgICBpc0RldmljZVR5cGU6IHRoaXMuY29udGV4dERhc2hib2FyZFNlcnZpY2UuaXNEZXZpY2VUeXBlKHRoaXMubW8pLFxuICAgICAgaXNOYW1lZERhc2hib2FyZDogdGhpcy5jb250ZXh0RGFzaGJvYXJkU2VydmljZS5pc05hbWVkKHRoaXMubW8pLFxuICAgICAgaXNSZXBvcnRcbiAgICB9O1xuICAgIGNvbnN0IG1vZGFsID0gdGhpcy5ic01vZGFsLnNob3coRGFzaGJvYXJkRGV0YWlsQ29tcG9uZW50LCB7XG4gICAgICBjbGFzczogJ21vZGFsLWxnJyxcbiAgICAgIGFyaWFEZXNjcmliZWRieTogJ21vZGFsLWJvZHknLFxuICAgICAgYXJpYUxhYmVsbGVkQnk6ICdtb2RhbC10aXRsZScsXG4gICAgICBpbml0aWFsU3RhdGUsXG4gICAgICBpZ25vcmVCYWNrZHJvcENsaWNrOiB0cnVlXG4gICAgfSkuY29udGVudCBhcyBEYXNoYm9hcmREZXRhaWxDb21wb25lbnQ7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhc2hib2FyZE1PID0gY2xvbmVEZWVwKHRoaXMubW8pO1xuICAgICAgY29uc3QgY2ZnID0gYXdhaXQgbW9kYWwucmVzdWx0O1xuICAgICAgaWYgKGlzUmVwb3J0KSB7XG4gICAgICAgIGNvbnN0IHsgbmFtZSwgaWNvbiwgYzh5X0lzTmF2aWdhdG9yTm9kZSwgcHJpb3JpdHksIGRlc2NyaXB0aW9uLCAuLi5kYXNoYm9hcmRDZmcgfSA9IGNmZztcbiAgICAgICAgZGFzaGJvYXJkTU8uYzh5X0Rhc2hib2FyZCA9IGRhc2hib2FyZENmZztcbiAgICAgICAgdGhpcy51cGRhdGVSZXBvcnQoe1xuICAgICAgICAgIGlkOiB0aGlzLmNvbnRleHQuaWQsXG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICBpY29uLFxuICAgICAgICAgIGM4eV9Jc05hdmlnYXRvck5vZGUsXG4gICAgICAgICAgcHJpb3JpdHksXG4gICAgICAgICAgZGVzY3JpcHRpb25cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXNoYm9hcmRNTy5jOHlfRGFzaGJvYXJkID0gY2ZnO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLmNvbnRleHREYXNoYm9hcmRTZXJ2aWNlLnVwZGF0ZShkYXNoYm9hcmRNTyk7XG4gICAgICBhd2FpdCB0aGlzLmNvbnRleHREYXNoYm9hcmRTZXJ2aWNlLnJlZnJlc2hUYWJzKGRhc2hib2FyZE1PKTtcbiAgICAgIHRoaXMub25Mb2FkKCk7XG4gICAgICBtb2RhbC5jbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAvLyBpbnRlbmRlZCBlbXB0eVxuICAgIH1cbiAgfVxuXG4gIGdldCBpc0RldmljZVR5cGVEYXNoYm9hcmQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhdGhpcy5kYXNoYm9hcmQ/LmRldmljZVR5cGUgJiYgISF0aGlzLmRhc2hib2FyZC5kZXZpY2VUeXBlVmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogRWRpdHMgYSB3aWRnZXQgb24gdGhlIGRhc2hib2FyZC5cbiAgICogQHBhcmFtIGNoYW5nZSBUaGUgd2lkZ2V0IGNoYW5nZSBldmVudC5cbiAgICovXG4gIGFzeW5jIGVkaXRXaWRnZXQoY2hhbmdlOiBXaWRnZXRDaGFuZ2UpIHtcbiAgICBjb25zdCB7IHgsIHksIHdpZHRoLCBoZWlnaHQgfSA9IGNoYW5nZS5zb3VyY2U7XG4gICAgY29uc3QgY29tcG9uZW50ID0gYXdhaXQgdGhpcy53aWRnZXRTZXJ2aWNlLmdldFdpZGdldERlZmluaXRpb24oXG4gICAgICBjaGFuZ2Uud2lkZ2V0Lm5hbWUgfHwgY2hhbmdlLndpZGdldC5jb21wb25lbnRJZFxuICAgICk7XG4gICAgaWYgKCFjb21wb25lbnQpIHtcbiAgICAgIHRoaXMuYWRkV2lkZ2V0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuYWRkV2lkZ2V0KHtcbiAgICAgIC4uLmNvbXBvbmVudCxcbiAgICAgIGRhdGE6IHsgLi4uY29tcG9uZW50LmRhdGEsIC4uLmNoYW5nZS53aWRnZXQsIF94OiB4LCBfeTogeSwgX3dpZHRoOiB3aWR0aCwgX2hlaWdodDogaGVpZ2h0IH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgd2lkZ2V0IHRvIHRoZSBkYXNoYm9hcmQuXG4gICAqIEBwYXJhbSBzZWxlY3RlZCBEZWZpbmUgYSBzZWxlY3RlZCBjb21wb25lbnQgdG8gc3dpdGNoIHRvIGVkaXQgbW9kZSBkaXJlY3RseS5cbiAgICovXG4gIGFzeW5jIGFkZFdpZGdldChzZWxlY3RlZD86IER5bmFtaWNDb21wb25lbnREZWZpbml0aW9uKSB7XG4gICAgY29uc3QgcGFydGlhbENsb25lU2VsZWN0ZWQgPSBzZWxlY3RlZFxuICAgICAgPyB7XG4gICAgICAgICAgLi4uc2VsZWN0ZWQsXG4gICAgICAgICAgZGF0YTogY2xvbmVEZWVwKHNlbGVjdGVkLmRhdGEpXG4gICAgICAgIH1cbiAgICAgIDogc2VsZWN0ZWQ7XG5cbiAgICBjb25zdCBpbml0aWFsU3RhdGU6IFBhcnRpYWw8V2lkZ2V0Q29uZmlnQ29tcG9uZW50PiA9IHtcbiAgICAgIG1vOiB0aGlzLm1vLFxuICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0LmM4eV9SZXBvcnQgPyB7fSA6IHRoaXMuY29udGV4dCxcbiAgICAgIHNlbGVjdGVkOiBwYXJ0aWFsQ2xvbmVTZWxlY3RlZFxuICAgIH07XG5cbiAgICBjb25zdCBtb2RhbCA9IHRoaXMuYnNNb2RhbC5zaG93KFdpZGdldENvbmZpZ0NvbXBvbmVudCwge1xuICAgICAgY2xhc3M6ICdtb2RhbC1sZycsXG4gICAgICBhcmlhRGVzY3JpYmVkYnk6ICdtb2RhbC1ib2R5JyxcbiAgICAgIGFyaWFMYWJlbGxlZEJ5OiAnbW9kYWwtdGl0bGUnLFxuICAgICAgaW5pdGlhbFN0YXRlLFxuICAgICAgaWdub3JlQmFja2Ryb3BDbGljazogdHJ1ZVxuICAgIH0pLmNvbnRlbnQgYXMgV2lkZ2V0Q29uZmlnQ29tcG9uZW50O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG5ld1dpZGdldCA9IGF3YWl0IG1vZGFsLnJlc3VsdDtcbiAgICAgIGlmICghdGhpcy5tby5jOHlfRGFzaGJvYXJkLmNoaWxkcmVuKSB7XG4gICAgICAgIHRoaXMubW8uYzh5X0Rhc2hib2FyZC5jaGlsZHJlbiA9IHt9O1xuICAgICAgfVxuICAgICAgdGhpcy5tby5jOHlfRGFzaGJvYXJkLmNoaWxkcmVuW25ld1dpZGdldC5pZF0gPSBuZXdXaWRnZXQ7XG4gICAgICB0aGlzLmNvbnRleHREYXNoYm9hcmRTZXJ2aWNlLnVwZGF0ZSh0aGlzLm1vKTtcbiAgICAgIG5ld1dpZGdldC5jbGFzc2VzID0gdGhpcy5tZXJnZVdpZGdldENsYXNzZXMobmV3V2lkZ2V0KTtcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlV2lkZ2V0KG5ld1dpZGdldCk7XG4gICAgICBtb2RhbC5jbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAvLyBpbnRlbmRlZCBlbXB0eVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGEgd2lkZ2V0IG9yIGFkZHMgYSBuZXcgb25lIGlmIGl0IGRvZXNuJ3QgZXhpc3Qgb25cbiAgICogdGhlIGRhc2hib2FyZC5cbiAgICogQHBhcmFtIHdpZGdldCBUaGUgbmV3IHdpZGdldFxuICAgKi9cbiAgYXN5bmMgdXBkYXRlV2lkZ2V0KHdpZGdldCkge1xuICAgIGNvbnN0IGluZGV4ID0gZmluZEluZGV4KHRoaXMud2lkZ2V0cywgeyBpZDogd2lkZ2V0LmlkIH0pO1xuICAgIGNvbnN0IGlzTmV3ID0gaW5kZXggPT09IC0xO1xuICAgIGNvbnN0IG1hcHBlZFdpZGdldCA9IGF3YWl0IHRoaXMud2lkZ2V0U2VydmljZS5tYXBMZWdhY3kod2lkZ2V0KTtcbiAgICBpZiAoaXNOZXcpIHtcbiAgICAgIHRoaXMud2lkZ2V0cy5wdXNoKG1hcHBlZFdpZGdldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMud2lkZ2V0cy5zcGxpY2UoaW5kZXgsIDEsIG1hcHBlZFdpZGdldCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSB3aWRnZXQgYW5kIHJlYXJyYW5nZXMgdGhlIHJlbWFpbmluZyBvbmVzXG4gICAqIGlmIG5lY2Vzc2FyeS5cbiAgICogQHBhcmFtIGNoYW5nZSBUaGUgY2hhbmdlIGV2ZW50LlxuICAgKi9cbiAgYXN5bmMgZGVsZXRlV2lkZ2V0KGNoYW5nZTogV2lkZ2V0Q2hhbmdlKSB7XG4gICAgY29uc3Qgd2lkZ2V0VGl0bGUgPSBjaGFuZ2Uud2lkZ2V0LnRpdGxlO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLm1vZGFsLmNvbmZpcm0oXG4gICAgICAgIGdldHRleHQoJ1JlbW92ZSB3aWRnZXQnKSxcbiAgICAgICAgdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoXG4gICAgICAgICAgZ2V0dGV4dChcbiAgICAgICAgICAgICdZb3UgYXJlIGFib3V0IHRvIHJlbW92ZSB3aWRnZXQgXCJ7eyB3aWRnZXRUaXRsZSB9fVwiIGZyb20geW91ciBkYXNoYm9hcmQuIERvIHlvdSB3YW50IHRvIHByb2NlZWQ/J1xuICAgICAgICAgICksXG4gICAgICAgICAgeyB3aWRnZXRUaXRsZSB9XG4gICAgICAgICksXG4gICAgICAgIFN0YXR1cy5EQU5HRVIsXG4gICAgICAgIHtcbiAgICAgICAgICBvazogZ2V0dGV4dCgnUmVtb3ZlJyksXG4gICAgICAgICAgY2FuY2VsOiBnZXR0ZXh0KCdDYW5jZWwnKVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIG9uIGNhbmNlbDogZG8gbm90aGluZ1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHdpZGdldCwgc291cmNlIH0gPSBjaGFuZ2U7XG4gICAgICBkZWxldGUgdGhpcy5tby5jOHlfRGFzaGJvYXJkLmNoaWxkcmVuW3dpZGdldC5pZF07XG4gICAgICBjb25zdCByZW1vdmVkID0gdGhpcy53aWRnZXRzLmZpbmQoKHsgaWQgfSkgPT4gaWQgPT09IHdpZGdldC5pZCk7XG4gICAgICB0aGlzLndpZGdldHMuc3BsaWNlKHRoaXMud2lkZ2V0cy5pbmRleE9mKHJlbW92ZWQpLCAxKTtcblxuICAgICAgY29uc3QgeyBkYXNoYm9hcmQgfSA9IHNvdXJjZTtcbiAgICAgIGRhc2hib2FyZC5jaGlsZHJlbiA9IGRhc2hib2FyZC5jaGlsZHJlbi5maWx0ZXIoYyA9PiBjLmRhdGEuaWQgIT09IHdpZGdldC5pZCk7XG5cbiAgICAgIC8vIHVzaW5nIHNldFRpbWVvdXQgdG8gZ2l2ZSB0aGUgY29tcG9uZW50IHRoZSBjaGFuY2UgdG8gcmVtb3ZlIGl0LlxuICAgICAgY29uc3Qgc2xlZXAgPSB0aW1lb3V0ID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCB0aW1lb3V0KSk7XG4gICAgICBhd2FpdCBzbGVlcCgwKTtcblxuICAgICAgY29uc3QgY2hpbGQgPSBuZXcgRGFzaGJvYXJkQ2hpbGRDaGFuZ2Uoc291cmNlKTtcbiAgICAgIGNoaWxkLmNvbGxhcHNlVXBBbGwoKTtcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlRGFzaGJvYXJkQ2hpbGRyZW4oY2hpbGQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRoaXMuYWxlcnQuYWRkU2VydmVyRmFpbHVyZShlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyBhIHdvcmthcm91bmQgdG8gZW5zdXJlIHRoYXQgdGhlIGRyYWdnZWQtZWxlbWVudFxuICAgKiAod2hpY2ggaXMgYXR0YWNoZWQgdG8gdGhlIGJvZHkpIGhhcyB0aGUgcmlnaHQgc3R5bGluZy5cbiAgICovXG4gIGFkZERhc2hib2FyZENsYXNzVG9Cb2R5KCkge1xuICAgIHRoaXMuY2xhc3Muc3BsaXQoJyAnKS5mb3JFYWNoKGNzc0NsYXNzID0+IHtcbiAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoZG9jdW1lbnQuYm9keSwgY3NzQ2xhc3MpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgYSB3b3JrYXJvdW5kIHRvIGVuc3VyZSB0aGF0IHRoZSBkcmFnZ2VkLWVsZW1lbnRcbiAgICogKHdoaWNoIGlzIGF0dGFjaGVkIHRvIHRoZSBib2R5KSBoYXMgdGhlIHJpZ2h0IHN0eWxpbmcuXG4gICAqL1xuICByZW1vdmVEYXNoYm9hcmRDbGFzc0Zyb21Cb2R5KCkge1xuICAgIHRoaXMuY2xhc3Muc3BsaXQoJyAnKS5mb3JFYWNoKGNzc0NsYXNzID0+IHtcbiAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoZG9jdW1lbnQuYm9keSwgY3NzQ2xhc3MpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENoYW5nZXMgdGhlIGRhc2hib2FyZCBzZXR0aW5ncyB0byBmcm96ZW4gb3IgdmljZSB2ZXJzYS5cbiAgICogQHBhcmFtIHNldHRpbmdzIFRoZSBjdXJyZW50IHNldHRpbmdzIG9mIHRoZSBkYXNoYm9hcmQuXG4gICAqL1xuICBhc3luYyB0b2dnbGVGcmVlemUoc2V0dGluZ3M6IERhc2hib2FyZFNldHRpbmdzKSB7XG4gICAgdGhpcy50b2dnbGVJc0Zyb3plbkZsYWcoc2V0dGluZ3MpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmNvbnRleHREYXNoYm9hcmRTZXJ2aWNlLnVwZGF0ZSh0aGlzLm1vKTtcbiAgICAgIGlmICh0aGlzLmRhc2hib2FyZC5pc0Zyb3plbikge1xuICAgICAgICB0aGlzLmFsZXJ0LnN1Y2Nlc3MoZ2V0dGV4dCgnWW91ciBkYXNoYm9hcmQgaXMgbG9ja2VkIG5vdy4nKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmFsZXJ0LnN1Y2Nlc3MoZ2V0dGV4dCgnWW91ciBkYXNoYm9hcmQgaXMgdW5sb2NrZWQgbm93LicpKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgdGhpcy5hbGVydC5hZGRTZXJ2ZXJGYWlsdXJlKGV4KTtcbiAgICAgIHRoaXMudG9nZ2xlSXNGcm96ZW5GbGFnKHNldHRpbmdzKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHVwZGF0ZVJlcG9ydChtbzogUGFydGlhbDxJTWFuYWdlZE9iamVjdD4pIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmludmVudG9yeS51cGRhdGUobW8pO1xuICAgIHRoaXMuY29udGV4dCA9IHJlcy5kYXRhO1xuICAgIGlmICh0aGlzLnJvdXRlLnBhcmVudCkge1xuICAgICAgdGhpcy5yb3V0ZS5wYXJlbnQuc25hcHNob3QuZGF0YS5jb250ZXh0RGF0YSA9IHRoaXMuY29udGV4dDtcbiAgICB9XG4gICAgdGhpcy5jb250ZXh0RGFzaGJvYXJkU2VydmljZS51cGRhdGVOYXZpZ2F0b3JJdGVtKHJlcy5kYXRhKTtcbiAgfVxuXG4gIHByaXZhdGUgdG9nZ2xlSXNGcm96ZW5GbGFnKHNldHRpbmdzOiBEYXNoYm9hcmRTZXR0aW5ncykge1xuICAgIHNldHRpbmdzLmlzRnJvemVuID0gIXNldHRpbmdzLmlzRnJvemVuO1xuICAgIHRoaXMuZGFzaGJvYXJkLmlzRnJvemVuID0gc2V0dGluZ3MuaXNGcm96ZW47XG4gIH1cblxuICBwcml2YXRlIGxvYWRDb250ZXh0RGFzaGJvYXJkKCkge1xuICAgIHRoaXMuZGF0YVN1YiA9IHRoaXMucm91dGUuZGF0YS5zdWJzY3JpYmUoKHsgZGFzaGJvYXJkIH0pID0+IHtcbiAgICAgIHRoaXMuY29udGV4dCA9IHRoaXMucm91dGUucGFyZW50LnNuYXBzaG90LmRhdGEuY29udGV4dERhdGE7XG4gICAgICB0aGlzLnRpdGxlID0gdGhpcy5jb250ZXh0Py5uYW1lO1xuICAgICAgdGhpcy5tbyA9IGRhc2hib2FyZDtcbiAgICAgIHRoaXMuZGFzaGJvYXJkID0gdGhpcy5tby5jOHlfRGFzaGJvYXJkO1xuICAgICAgdGhpcy5vbkxvYWQodHJ1ZSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGxvYWROYW1lZERhc2hib2FyZCgpIHtcbiAgICB0aGlzLmRhdGFTdWIgPSB0aGlzLmNvbnRleHREYXNoYm9hcmRTZXJ2aWNlXG4gICAgICAuZ2V0TmFtZWREYXNoYm9hcmRPckNyZWF0ZSh0aGlzLm5hbWUsIHRoaXMuZGVmYXVsdFdpZGdldHMsIHRoaXMuY29udGV4dClcbiAgICAgIC5zdWJzY3JpYmUobW8gPT4ge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmNvbnRleHQgfHwge307XG4gICAgICAgIHRoaXMubW8gPSBtbztcbiAgICAgICAgdGhpcy5kYXNoYm9hcmQgPSB0aGlzLm1vLmM4eV9EYXNoYm9hcmQ7XG4gICAgICAgIHRoaXMub25Mb2FkKHRydWUpO1xuICAgICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG9uTG9hZCh0cmFja0V4cGVyaWVuY2U/OiBib29sZWFuKSB7XG4gICAgY29uc3QgY2FuRWRpdERhc2hib2FyZCA9IGF3YWl0IHRoaXMuY29udGV4dERhc2hib2FyZFNlcnZpY2UuY2FuRWRpdERhc2hib2FyZCh0aGlzLm1vKTtcbiAgICB0aGlzLmRpc2FibGVkID0gIWNhbkVkaXREYXNoYm9hcmQ7XG4gICAgdGhpcy5jYW5Db3B5ID1cbiAgICAgIHRoaXMuY29udGV4dERhc2hib2FyZFNlcnZpY2UuaXNEZXZpY2VEYXNoYm9hcmQodGhpcy5tbykgfHxcbiAgICAgIHRoaXMuY29udGV4dERhc2hib2FyZFNlcnZpY2UuaXNEZXZpY2VUeXBlKHRoaXMubW8pIHx8XG4gICAgICB0aGlzLmNvbnRleHREYXNoYm9hcmRTZXJ2aWNlLmlzR3JvdXBEYXNoYm9hcmQodGhpcy5tbyk7XG4gICAgY29uc3QgZGFzaGJvYXJkQ2hpbGRyZW4gPSBjbG9uZURlZXAodGhpcy5tby5jOHlfRGFzaGJvYXJkLmNoaWxkcmVuKTtcbiAgICBjb25zdCBpc0RldmljZVR5cGUgPSB0aGlzLmNvbnRleHREYXNoYm9hcmRTZXJ2aWNlLmlzRGV2aWNlVHlwZSh0aGlzLm1vKTtcbiAgICBjb25zdCBpc1JlcG9ydCA9IHRoaXMuY29udGV4dERhc2hib2FyZFNlcnZpY2UuaXNSZXBvcnQodGhpcy5tbyk7XG4gICAgY29uc3QgZGFzaGJvYXJkQ2xhc3NlcyA9IHtcbiAgICAgICdjOHktZ3JpZC1kYXNoYm9hcmQnOiB0cnVlLFxuICAgICAgZGFzaGJvYXJkOiB0cnVlLFxuICAgICAgLi4udGhpcy5kYXNoYm9hcmQuY2xhc3Nlc1xuICAgIH07XG4gICAgdGhpcy5pc0NvcHlEaXNhYmxlZCA9ICF0aGlzLmNhbkNvcHlEYXNoYm9hcmQoKTtcbiAgICB0aGlzLndpZGdldHMgPSBhd2FpdCBQcm9taXNlLmFsbDxXaWRnZXQ+KFxuICAgICAgdmFsdWVzKGRhc2hib2FyZENoaWxkcmVuKS5tYXAod2lkZ2V0ID0+IHtcbiAgICAgICAgd2lkZ2V0LmNsYXNzZXMgPSB0aGlzLm1lcmdlV2lkZ2V0Q2xhc3Nlcyh3aWRnZXQpO1xuICAgICAgICBpZiAoaXNEZXZpY2VUeXBlKSB7XG4gICAgICAgICAgdGhpcy5hcHBseURldmljZVRhcmdldCh3aWRnZXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFja0V4cGVyaWVuY2UpIHtcbiAgICAgICAgICB0aGlzLmdhaW5zaWdodFNlcnZpY2UudHJpZ2dlckV2ZW50KCdsb2FkV2lkZ2V0Jywge1xuICAgICAgICAgICAgd2lkZ2V0TmFtZTogd2lkZ2V0LmNvbXBvbmVudElkIHx8IHdpZGdldC5uYW1lXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0U2VydmljZS5tYXBMZWdhY3kod2lkZ2V0KTtcbiAgICAgIH0pXG4gICAgKTtcbiAgICB0aGlzLmNsYXNzID0gT2JqZWN0LmtleXMoZGFzaGJvYXJkQ2xhc3Nlcykuam9pbignICcpO1xuICAgIGlmIChpc1JlcG9ydCkge1xuICAgICAgdGhpcy5hZGRSZXBvcnREYXNoYm9hcmRTZXR0aW5ncygpO1xuICAgIH1cbiAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBtZXJnZVdpZGdldENsYXNzZXMod2lkZ2V0OiBXaWRnZXQpIHtcbiAgICBjb25zdCBoYXNIZWFkZXJDbGFzcyA9IFdJREdFVF9IRUFERVJfQ0xBU1NFUy5maW5kKFxuICAgICAgZWwgPT4gd2lkZ2V0LmNsYXNzZXMgJiYgd2lkZ2V0LmNsYXNzZXNbZWwuY2xhc3NdXG4gICAgKTtcbiAgICBjb25zdCB3aWRnZXRDbGFzc2VzID0gaGFzSGVhZGVyQ2xhc3NcbiAgICAgID8geyAuLi53aWRnZXQuY2xhc3NlcyB9XG4gICAgICA6IHsgLi4udGhpcy5kYXNoYm9hcmQud2lkZ2V0Q2xhc3NlcywgLi4ud2lkZ2V0LmNsYXNzZXMgfTtcbiAgICByZXR1cm4ge1xuICAgICAgY2FyZDogdHJ1ZSxcbiAgICAgICdjYXJkLWRhc2hib2FyZCc6IHRydWUsXG4gICAgICBba2ViYWJDYXNlKHdpZGdldC5jb21wb25lbnRJZCB8fCB3aWRnZXQubmFtZSldOiB0cnVlLFxuICAgICAgLi4ud2lkZ2V0Q2xhc3Nlc1xuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGNvbXBvbmVudFRvV2lkZ2V0KGNoaWxkOiBEYXNoYm9hcmRDaGlsZENvbXBvbmVudCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5vbWl0KGNoaWxkLmRhdGEsIFsnY29tcG9uZW50VHJhbnNmb3JtQ29uZmlnV2l0aENvbnRleHQnLCAndHJhbnNmb3JtQ29uZmlnV2l0aENvbnRleHQnXSksIC8vIHJlbW92ZSBsZWdhY3lcbiAgICAgIC4uLih7XG4gICAgICAgIF94OiBjaGlsZC54LFxuICAgICAgICBfeTogY2hpbGQueSxcbiAgICAgICAgX3dpZHRoOiBjaGlsZC53aWR0aCxcbiAgICAgICAgX2hlaWdodDogY2hpbGQuaGVpZ2h0XG4gICAgICB9IGFzIFdpZGdldClcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRSZXBvcnREYXNoYm9hcmRTZXR0aW5ncygpIHtcbiAgICB0aGlzLnNldFRpdGxlID0gdHJ1ZTtcbiAgICB0aGlzLnRpdGxlID0gdGhpcy5jb250ZXh0Lm5hbWU7XG4gICAgdGhpcy5icmVhZGNydW1iU2V0dGluZ3MgPSB7XG4gICAgICBpY29uOiAndGgnLFxuICAgICAgbGFiZWw6ICdSZXBvcnRzJyxcbiAgICAgIHBhdGg6ICdyZXBvcnRzJ1xuICAgIH07XG4gICAgdGhpcy5jYW5EZWxldGUgPSBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgY2FuQ29weURhc2hib2FyZCgpOiBib29sZWFuIHtcbiAgICBjb25zdCBhbGxEYXNoYm9hcmRDaGlsZHJlbkFyZVZhbGlkID0gZXZlcnkodGhpcy5tby5jOHlfRGFzaGJvYXJkLmNoaWxkcmVuLCBjaGlsZCA9PiB7XG4gICAgICBjb25zdCBjb25maWcgPSBjaGlsZC5jb25maWcgfHwge307XG4gICAgICBjb25zdCBkYXRhUG9pbnRzID0gY29uZmlnLmRhdGFwb2ludHMgfHwgW107XG4gICAgICByZXR1cm4gIShcbiAgICAgICAgKGNvbmZpZy5kZXZpY2UgJiYgY29uZmlnLmRldmljZS5pZCAhPT0gdGhpcy5jb250ZXh0LmlkKSB8fFxuICAgICAgICBzb21lKGRhdGFQb2ludHMsIGRhdGFQb2ludCA9PiBkYXRhUG9pbnQuX190YXJnZXQuaWQgIT09IHRoaXMuY29udGV4dC5pZClcbiAgICAgICk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFsbERhc2hib2FyZENoaWxkcmVuQXJlVmFsaWQ7XG4gIH1cbn1cbiIsIjxjOHktdGl0bGUgKm5nSWY9XCJ0aXRsZVwiPlxuICB7eyB0aXRsZSB9fVxuPC9jOHktdGl0bGU+XG5cbjxjOHktYWN0aW9uLWJhci1pdGVtICpuZ0lmPVwiZGVmYXVsdFdpZGdldHMubGVuZ3RoID4gMFwiIFtwbGFjZW1lbnRdPVwiJ3JpZ2h0J1wiIFtwcmlvcml0eV09XCItMVwiPlxuICA8YnV0dG9uXG4gICAgY2xhc3M9XCJidG4gYnRuLWxpbmtcIlxuICAgIFtkaXNhYmxlZF09XCJkYXNoYm9hcmQ/LmlzRnJvemVuIHx8IGRpc2FibGVkXCJcbiAgICAoY2xpY2spPVwicmVzdG9yZSgpXCJcbiAgICB0aXRsZT1cInt7ICdSZXNldCBkYXNoYm9hcmQnIHwgdHJhbnNsYXRlIH19XCJcbiAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICBweC1ldmVudD1cIlJlc2V0IGRhc2hib2FyZFwiXG4gICAgZGF0YS1jeT1cImNvbnRleHQtZGFzaGJvYXJkLS1idXR0b24tcmVzZXQtZGFzaGJvYXJkXCJcbiAgPlxuICAgIDxpIGNsYXNzPVwibS1yLTRcIiBjOHlJY29uPVwicmVzZXRcIj48L2k+XG4gICAge3sgJ1Jlc2V0IGRhc2hib2FyZCcgfCB0cmFuc2xhdGUgfX1cbiAgPC9idXR0b24+XG48L2M4eS1hY3Rpb24tYmFyLWl0ZW0+XG5cbjxjOHktaGVscCAqbmdJZj1cInNob3dDb250ZXh0SGVscEJ1dHRvblwiIHNyYz1cIi91c2Vycy1ndWlkZS9jb2NrcGl0LyNkYXNoYm9hcmRzXCI+PC9jOHktaGVscD5cblxuPGM4eS13aWRnZXRzLWRhc2hib2FyZFxuICBbY29udGV4dF09XCJjb250ZXh0XCJcbiAgW2NvbnRleHREYXNoYm9hcmRdPVwiZGFzaGJvYXJkXCJcbiAgW3dpZGdldHNdPVwid2lkZ2V0c1wiXG4gIFtzZXR0aW5nc109XCJ7XG4gICAgaXNMb2FkaW5nOiBpc0xvYWRpbmcsXG4gICAgaXNGcm96ZW46IGRhc2hib2FyZD8uaXNGcm96ZW4sXG4gICAgaXNEaXNhYmxlZDogZGlzYWJsZWQsXG4gICAgY2FuRGVsZXRlOiBjYW5EZWxldGUsXG4gICAgdHJhbnNsYXRlV2lkZ2V0VGl0bGU6IGRhc2hib2FyZD8udHJhbnNsYXRlV2lkZ2V0VGl0bGUsXG4gICAgYWxsb3dGdWxsc2NyZWVuOiBtb2R1bGVDb25maWcuYWxsb3dGdWxsc2NyZWVuLFxuICAgIHRpdGxlOiBzZXRUaXRsZSA/IGRhc2hib2FyZC5uYW1lIHx8IHRpdGxlIDogdW5kZWZpbmVkLFxuICAgIHdpZGdldE1hcmdpbjogZGFzaGJvYXJkPy53aWRnZXRNYXJnaW4sXG4gICAgY2FuQ29weTogY2FuQ29weSxcbiAgICBpc0NvcHlEaXNhYmxlZDogaXNDb3B5RGlzYWJsZWQsXG4gICAgY29sdW1uczogZGFzaGJvYXJkPy5jb2x1bW5zIHx8IDEyXG4gIH1cIlxuICBbYnJlYWRjcnVtYl09XCJicmVhZGNydW1iU2V0dGluZ3NcIlxuICAob25GcmVlemUpPVwidG9nZ2xlRnJlZXplKCRldmVudClcIlxuICAob25DaGFuZ2VEYXNoYm9hcmQpPVwidXBkYXRlRGFzaGJvYXJkQ2hpbGRyZW4oJGV2ZW50KVwiXG4gIChvbkFkZFdpZGdldCk9XCJhZGRXaWRnZXQoKVwiXG4gIChvbkVkaXRXaWRnZXQpPVwiZWRpdFdpZGdldCgkZXZlbnQpXCJcbiAgKG9uRGVsZXRlV2lkZ2V0KT1cImRlbGV0ZVdpZGdldCgkZXZlbnQpXCJcbiAgKG9uQ2hhbmdlU3RhcnQpPVwiYWRkRGFzaGJvYXJkQ2xhc3NUb0JvZHkoKVwiXG4gIChvbkNoYW5nZUVuZCk9XCJyZW1vdmVEYXNoYm9hcmRDbGFzc0Zyb21Cb2R5KClcIlxuICAob25FZGl0RGFzaGJvYXJkKT1cImVkaXREYXNoYm9hcmQoKVwiXG4gIChvbkNvcHlEYXNoYm9hcmQpPVwiY29weURhc2hib2FyZCgpXCJcbiAgKG9uRGVsZXRlRGFzaGJvYXJkKT1cImRlbGV0ZURhc2hib2FyZCgpXCJcbj48L2M4eS13aWRnZXRzLWRhc2hib2FyZD5cbiIsImltcG9ydCB7IENvbXBvbmVudCwgSW5qZWN0LCBPcHRpb25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQXBwU3RhdGVTZXJ2aWNlLCBnZXR0ZXh0IH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5pbXBvcnQge1xuICBDb2NrcGl0RGFzaGJvYXJkQ29uZmlnLFxuICBDT0NLUElUX0hPTUVfREFTSEJPQVJEX0NPTkZJRyxcbiAgREVGQVVMVF9DT0NLUElUX0hPTUVfV0lER0VUU1xufSBmcm9tICcuL2NvY2twaXQtZGFzaGJvYXJkLm1vZGVsJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYzh5LWNvY2twaXQtZGFzaGJvYXJkJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2NvY2twaXQtZGFzaGJvYXJkLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBDb2NrcGl0RGFzaGJvYXJkQ29tcG9uZW50IHtcbiAgZGVmYXVsdFdpZGdldHMgPSBERUZBVUxUX0NPQ0tQSVRfSE9NRV9XSURHRVRTO1xuICBkYXNoYm9hcmROYW1lID0gJ2hvbWUtY29ja3BpdDEnO1xuICBwYWdlVGl0bGU6IHN0cmluZyA9IGdldHRleHQoJ0hvbWUnKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGFwcFN0YXRlOiBBcHBTdGF0ZVNlcnZpY2UsXG4gICAgQE9wdGlvbmFsKClcbiAgICBASW5qZWN0KENPQ0tQSVRfSE9NRV9EQVNIQk9BUkRfQ09ORklHKVxuICAgIHByaXZhdGUgaG9tZURhc2hib2FyZENvbmZpZzogQ29ja3BpdERhc2hib2FyZENvbmZpZ1xuICApIHtcbiAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAuLi50aGlzLmhvbWVEYXNoYm9hcmRDb25maWcsXG4gICAgICBkYXNoYm9hcmROYW1lOiBhcHBTdGF0ZS5jdXJyZW50QXBwbGljYXRpb24udmFsdWU/LmNvbmZpZz8uaG9tZURhc2hib2FyZE5hbWUsXG4gICAgICB1c2VyU3BlY2lmaWM6IGFwcFN0YXRlLmN1cnJlbnRBcHBsaWNhdGlvbi52YWx1ZT8uY29uZmlnPy51c2VyU3BlY2lmaWNIb21lRGFzaGJvYXJkXG4gICAgfTtcbiAgICB0aGlzLmFwcGx5RGFzaGJvYXJkQ29uZmlnKGNvbmZpZyk7XG4gIH1cblxuICBwcml2YXRlIGFwcGx5RGFzaGJvYXJkQ29uZmlnKGNvbmZpZzogQ29ja3BpdERhc2hib2FyZENvbmZpZykge1xuICAgIGlmICghY29uZmlnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5kYXNoYm9hcmROYW1lKSB7XG4gICAgICB0aGlzLmRhc2hib2FyZE5hbWUgPSBjb25maWcuZGFzaGJvYXJkTmFtZTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmRlZmF1bHRXaWRnZXRzKSB7XG4gICAgICB0aGlzLmRlZmF1bHRXaWRnZXRzID0gY29uZmlnLmRlZmF1bHRXaWRnZXRzO1xuICAgIH1cblxuICAgIGlmIChjb25maWcudXNlclNwZWNpZmljICYmIHRoaXMuYXBwU3RhdGUuY3VycmVudFVzZXIudmFsdWUpIHtcbiAgICAgIHRoaXMuZGFzaGJvYXJkTmFtZSA9IGAke3RoaXMuYXBwU3RhdGUuY3VycmVudFVzZXIudmFsdWUudXNlck5hbWUucmVwbGFjZSgvXFwuL2csICdfXycpfV8ke1xuICAgICAgICB0aGlzLmRhc2hib2FyZE5hbWVcbiAgICAgIH1gO1xuICAgIH1cblxuICAgIGlmIChjb25maWcucGFnZVRpdGxlKSB7XG4gICAgICB0aGlzLnBhZ2VUaXRsZSA9IGNvbmZpZy5wYWdlVGl0bGU7XG4gICAgfVxuICB9XG59XG4iLCI8Yzh5LXRpdGxlPlxuICB7eyBwYWdlVGl0bGUgfCB0cmFuc2xhdGUgfX1cbjwvYzh5LXRpdGxlPlxuXG48Yzh5LWNvbnRleHQtZGFzaGJvYXJkXG4gIFtuYW1lXT1cImRhc2hib2FyZE5hbWVcIlxuICBbZGVmYXVsdFdpZGdldHNdPVwiZGVmYXVsdFdpZGdldHNcIlxuICBbY2FuRGVsZXRlXT1cImZhbHNlXCJcbj48L2M4eS1jb250ZXh0LWRhc2hib2FyZD5cbiIsImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBUZW1wbGF0ZVJlZiwgVmlld0NoaWxkLCBWaWV3Q29udGFpbmVyUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgSU1hbmFnZWRPYmplY3QsIEludmVudG9yeVNlcnZpY2UgfSBmcm9tICdAYzh5L2NsaWVudCc7XG5pbXBvcnQgeyBWaWV3Q29udGV4dCB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgRGFzaGJvYXJkQ29udGV4dCB9IGZyb20gJy4vY29udGV4dC1kYXNoYm9hcmQubW9kZWwnO1xuaW1wb3J0IHsgQ29udGV4dERhc2hib2FyZFNlcnZpY2UgfSBmcm9tICcuL2NvbnRleHQtZGFzaGJvYXJkLnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjOHktcGFzdGUtZGFzaGJvYXJkLWFjdGlvbicsXG4gIHRlbXBsYXRlOiBgXG4gICAgPG5nLXRlbXBsYXRlICN0ZW1wbGF0ZVBhc3RlPlxuICAgICAgPGxpPlxuICAgICAgICA8YnV0dG9uIHRpdGxlPVwie3sgJ1Bhc3RlIGRhc2hib2FyZCcgfCB0cmFuc2xhdGUgfX1cIiAoY2xpY2spPVwicGFzdGVEYXNoYm9hcmQoKVwiPlxuICAgICAgICAgIDxpIGNsYXNzPVwibS1yLTRcIiBjOHlJY29uPVwiY2xpcGJvYXJkXCI+PC9pPjxzcGFuIHRyYW5zbGF0ZT5QYXN0ZSBkYXNoYm9hcmQ8L3NwYW4+Jm5ic3A7PHNwYW5cbiAgICAgICAgICAgID5cInt7IGRhc2hib2FyZE5hbWUgfX1cIjwvc3BhblxuICAgICAgICAgID5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2xpPlxuICAgIDwvbmctdGVtcGxhdGU+XG4gIGBcbn0pXG5leHBvcnQgY2xhc3MgUGFzdGVEYXNoYm9hcmRBY3Rpb25Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBAVmlld0NoaWxkKCd0ZW1wbGF0ZVBhc3RlJywgeyByZWFkOiBUZW1wbGF0ZVJlZiwgc3RhdGljOiB0cnVlIH0pIHRlbXBsYXRlUGFzdGU7XG4gIGRhc2hib2FyZE5hbWUgPSAnJztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHZjUmVmOiBWaWV3Q29udGFpbmVyUmVmLFxuICAgIHByaXZhdGUgcm91dGVyOiBSb3V0ZXIsXG4gICAgcHJpdmF0ZSBjb250ZXh0RGFzaGJvYXJkU2VydmljZTogQ29udGV4dERhc2hib2FyZFNlcnZpY2UsXG4gICAgcHJpdmF0ZSBpbnZlbnRvcnlTZXJ2aWNlOiBJbnZlbnRvcnlTZXJ2aWNlXG4gICkge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnZjUmVmLmNyZWF0ZUVtYmVkZGVkVmlldyh0aGlzLnRlbXBsYXRlUGFzdGUpO1xuICAgIGNvbnN0IGNsaXBib2FyZCA9IHRoaXMuY29udGV4dERhc2hib2FyZFNlcnZpY2UuY29weUNsaXBib2FyZDtcbiAgICBpZiAoY2xpcGJvYXJkKSB7XG4gICAgICB0aGlzLmRhc2hib2FyZE5hbWUgPSBjbGlwYm9hcmQuZGFzaGJvYXJkLm5hbWU7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcGFzdGVEYXNoYm9hcmQoKSB7XG4gICAgbGV0IGNvbnRleHQ6IERhc2hib2FyZENvbnRleHQ7XG4gICAgY29uc3QgY3VycmVudFVybDogc3RyaW5nID0gdGhpcy5yb3V0ZXIudXJsO1xuICAgIGNvbnN0IGlzRGV2aWNlOiBib29sZWFuID0gbmV3IFJlZ0V4cCgvZGV2aWNlXFwvXFxkKy8pLnRlc3QoY3VycmVudFVybCk7XG4gICAgY29uc3QgaXNHcm91cDogYm9vbGVhbiA9IG5ldyBSZWdFeHAoL2dyb3VwXFwvXFxkKy8pLnRlc3QoY3VycmVudFVybCk7XG4gICAgY29uc3QgaWQgPSBjdXJyZW50VXJsLm1hdGNoKC9cXGQrLylbMF07XG5cbiAgICBpZiAoaXNEZXZpY2UpIHtcbiAgICAgIGNvbnRleHQgPSB7XG4gICAgICAgIGNvbnRleHQ6IFZpZXdDb250ZXh0LkRldmljZSxcbiAgICAgICAgY29udGV4dERhdGE6IGF3YWl0IHRoaXMuZ2V0Q29udGV4dE1vKGlkKVxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGlzR3JvdXApIHtcbiAgICAgIGNvbnRleHQgPSB7XG4gICAgICAgIGNvbnRleHQ6IFZpZXdDb250ZXh0Lkdyb3VwLFxuICAgICAgICBjb250ZXh0RGF0YTogYXdhaXQgdGhpcy5nZXRDb250ZXh0TW8oaWQpXG4gICAgICB9O1xuICAgIH1cbiAgICB0aGlzLmNvbnRleHREYXNoYm9hcmRTZXJ2aWNlLnBhc3RlRGFzaGJvYXJkKGNvbnRleHQpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRDb250ZXh0TW8oaWQ6IHN0cmluZyk6IFByb21pc2U8SU1hbmFnZWRPYmplY3Q+IHtcbiAgICByZXR1cm4gKGF3YWl0IHRoaXMuaW52ZW50b3J5U2VydmljZS5kZXRhaWwoaWQpKS5kYXRhO1xuICB9XG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBY3RpdmF0ZWRSb3V0ZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBWaWV3Q29udGV4dCwgQWN0aW9uQmFyRmFjdG9yeSwgQWN0aW9uQmFySXRlbSB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgQ29udGV4dERhc2hib2FyZFNlcnZpY2UgfSBmcm9tICcuL2NvbnRleHQtZGFzaGJvYXJkLnNlcnZpY2UnO1xuaW1wb3J0IHsgUGFzdGVEYXNoYm9hcmRBY3Rpb25Db21wb25lbnQgfSBmcm9tICcuL3Bhc3RlLWRhc2hib2FyZC1hY3Rpb24uY29tcG9uZW50JztcblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgRGFzaGJvYXJkQWN0aW9uQmFyRmFjdG9yeSBpbXBsZW1lbnRzIEFjdGlvbkJhckZhY3Rvcnkge1xuICByb3V0ZUNoYW5nZXMkOiBPYnNlcnZhYmxlPGFueT47XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY29udGV4dERhc2hib2FyZFNlcnZpY2U6IENvbnRleHREYXNoYm9hcmRTZXJ2aWNlKSB7fVxuICBnZXQoYWN0aXZlUm91dGU6IEFjdGl2YXRlZFJvdXRlKSB7XG4gICAgY29uc3QgYWN0aW9ucyA9IFtdO1xuICAgIGNvbnN0IGRhdGEgPVxuICAgICAgIWFjdGl2ZVJvdXRlLnBhcmVudCB8fCBhY3RpdmVSb3V0ZS5zbmFwc2hvdC5kYXRhLmNvbnRleHRcbiAgICAgICAgPyBhY3RpdmVSb3V0ZS5zbmFwc2hvdC5kYXRhXG4gICAgICAgIDogYWN0aXZlUm91dGUucGFyZW50LnNuYXBzaG90LmRhdGE7XG4gICAgY29uc3QgeyBjb250ZXh0RGF0YSB9ID0gZGF0YTtcbiAgICBjb25zdCBjYW5QYXN0ZSA9XG4gICAgICBjb250ZXh0RGF0YSAmJlxuICAgICAgW1ZpZXdDb250ZXh0LkRldmljZSwgVmlld0NvbnRleHQuR3JvdXBdLmluY2x1ZGVzKGRhdGEuY29udGV4dCkgJiZcbiAgICAgIHRoaXMuY29udGV4dERhc2hib2FyZFNlcnZpY2UuY29weUNsaXBib2FyZDtcblxuICAgIGlmIChjYW5QYXN0ZSkge1xuICAgICAgYWN0aW9ucy5wdXNoKHtcbiAgICAgICAgcHJpb3JpdHk6IC0xMCxcbiAgICAgICAgcGxhY2VtZW50OiAnbW9yZScsXG4gICAgICAgIHRlbXBsYXRlOiBQYXN0ZURhc2hib2FyZEFjdGlvbkNvbXBvbmVudFxuICAgICAgfSBhcyBBY3Rpb25CYXJJdGVtKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWN0aW9ucztcbiAgfVxufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWN0aXZhdGVkUm91dGVTbmFwc2hvdCB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBUYWIgfSBmcm9tICdAYzh5L25neC1jb21wb25lbnRzJztcbmltcG9ydCB7IENvbnRleHREYXNoYm9hcmRUeXBlIH0gZnJvbSAnLi9jb250ZXh0LWRhc2hib2FyZC5tb2RlbCc7XG5pbXBvcnQgeyBDb250ZXh0RGFzaGJvYXJkU2VydmljZSB9IGZyb20gJy4vY29udGV4dC1kYXNoYm9hcmQuc2VydmljZSc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBEZXZpY2VEYXNoYm9hcmRHdWFyZCB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY29udGV4dERhc2hib2FyZFNlcnZpY2U6IENvbnRleHREYXNoYm9hcmRTZXJ2aWNlKSB7fVxuXG4gIGNhbkFjdGl2YXRlKHJvdXRlOiBBY3RpdmF0ZWRSb3V0ZVNuYXBzaG90KTogT2JzZXJ2YWJsZTxib29sZWFuIHwgVGFiW10+IHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0RGFzaGJvYXJkU2VydmljZS5hY3RpdmF0ZURhc2hib2FyZHMocm91dGUsIFtcbiAgICAgIENvbnRleHREYXNoYm9hcmRUeXBlLkRldmljZSxcbiAgICAgIENvbnRleHREYXNoYm9hcmRUeXBlLkRldmljZVR5cGVcbiAgICBdKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWN0aXZhdGVkUm91dGVTbmFwc2hvdCB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBUYWIgfSBmcm9tICdAYzh5L25neC1jb21wb25lbnRzJztcbmltcG9ydCB7IENvbnRleHREYXNoYm9hcmRUeXBlIH0gZnJvbSAnLi9jb250ZXh0LWRhc2hib2FyZC5tb2RlbCc7XG5pbXBvcnQgeyBDb250ZXh0RGFzaGJvYXJkU2VydmljZSB9IGZyb20gJy4vY29udGV4dC1kYXNoYm9hcmQuc2VydmljZSc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBHcm91cERhc2hib2FyZEd1YXJkIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjb250ZXh0RGFzaGJvYXJkU2VydmljZTogQ29udGV4dERhc2hib2FyZFNlcnZpY2UpIHt9XG5cbiAgY2FuQWN0aXZhdGUocm91dGU6IEFjdGl2YXRlZFJvdXRlU25hcHNob3QpOiBPYnNlcnZhYmxlPGJvb2xlYW4gfCBUYWJbXT4ge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHREYXNoYm9hcmRTZXJ2aWNlLmFjdGl2YXRlRGFzaGJvYXJkcyhyb3V0ZSwgW0NvbnRleHREYXNoYm9hcmRUeXBlLkdyb3VwXSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IE1vZHVsZVdpdGhQcm92aWRlcnMsIE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1xuICBDb3JlTW9kdWxlLFxuICBob29rQWN0aW9uQmFyLFxuICBob29rUm91dGUsXG4gIFZpZXdDb250ZXh0LFxuICBob29rVGFiLFxuICBIb29rUHJvdmlkZXJUeXBlc1xufSBmcm9tICdAYzh5L25neC1jb21wb25lbnRzJztcbmltcG9ydCB7IEJzRHJvcGRvd25Nb2R1bGUgfSBmcm9tICduZ3gtYm9vdHN0cmFwL2Ryb3Bkb3duJztcbmltcG9ydCB7IFBvcG92ZXJNb2R1bGUgfSBmcm9tICduZ3gtYm9vdHN0cmFwL3BvcG92ZXInO1xuaW1wb3J0IHsgVG9vbHRpcE1vZHVsZSB9IGZyb20gJ25neC1ib290c3RyYXAvdG9vbHRpcCc7XG5pbXBvcnQgeyBBc3NldFNlbGVjdG9yTW9kdWxlIH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cy9hc3NldHMtbmF2aWdhdG9yJztcbmltcG9ydCB7IEFkZERhc2hib2FyZENvbXBvbmVudCB9IGZyb20gJy4vYWRkLWRhc2hib2FyZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgQWRkRGFzaGJvYXJkRmFjdG9yeSB9IGZyb20gJy4vYWRkLWRhc2hib2FyZC5mYWN0b3J5JztcbmltcG9ydCB7IEFwcGVhcmFuY2VTZXR0aW5nc0NvbXBvbmVudCB9IGZyb20gJy4vYXBwZWFyYW5jZS1zZXR0aW5ncy5jb21wb25lbnQnO1xuaW1wb3J0IHsgQ29udGV4dERhc2hib2FyZENvbXBvbmVudCB9IGZyb20gJy4vY29udGV4dC1kYXNoYm9hcmQuY29tcG9uZW50JztcbmltcG9ydCB7IENvbnRleHREYXNoYm9hcmRDb25maWcsIENPTlRFWFRfREFTSEJPQVJEX0NPTkZJRyB9IGZyb20gJy4vY29udGV4dC1kYXNoYm9hcmQubW9kZWwnO1xuaW1wb3J0IHsgQ29udGV4dERhc2hib2FyZFNlcnZpY2UgfSBmcm9tICcuL2NvbnRleHQtZGFzaGJvYXJkLnNlcnZpY2UnO1xuaW1wb3J0IHsgRGFzaGJvYXJkQWN0aW9uQmFyRmFjdG9yeSB9IGZyb20gJy4vZGFzaGJvYXJkLWFjdGlvbi1iYXIuZmFjdG9yeSc7XG5pbXBvcnQgeyBEYXNoYm9hcmREZXRhaWxDb21wb25lbnQgfSBmcm9tICcuL2Rhc2hib2FyZC1kZXRhaWwuY29tcG9uZW50JztcbmltcG9ydCB7IERldmljZURhc2hib2FyZEd1YXJkIH0gZnJvbSAnLi9kZXZpY2UtZGFzaGJvYXJkLmd1YXJkJztcbmltcG9ydCB7IEdyb3VwRGFzaGJvYXJkR3VhcmQgfSBmcm9tICcuL2dyb3VwLWRhc2hib2FyZC5ndWFyZCc7XG5pbXBvcnQgeyBQYXN0ZURhc2hib2FyZEFjdGlvbkNvbXBvbmVudCB9IGZyb20gJy4vcGFzdGUtZGFzaGJvYXJkLWFjdGlvbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgV2lkZ2V0Q29uZmlnQ29tcG9uZW50IH0gZnJvbSAnLi93aWRnZXQtY29uZmlnLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBXaWRnZXRQcmV2aWV3Q29tcG9uZW50IH0gZnJvbSAnLi93aWRnZXQtcHJldmlldy5jb21wb25lbnQnO1xuaW1wb3J0IHsgV2lkZ2V0U2VydmljZSB9IGZyb20gJy4vd2lkZ2V0LnNlcnZpY2UnO1xuaW1wb3J0IHsgRGFzaGJvYXJkQXZhaWxhYmlsaXR5Q29tcG9uZW50IH0gZnJvbSAnLi9kYXNoYm9hcmQtYXZhaWxhYmlsaXR5LmNvbXBvbmVudCc7XG5cbmNvbnN0IGRlZmF1bHRDb25maWcgPSB7XG4gIGFsbG93RnVsbHNjcmVlbjogdHJ1ZSxcbiAgd2lkZ2V0RmlsdGVyKHsgZGF0YSB9KSB7XG4gICAgcmV0dXJuICEoZGF0YSAmJiBkYXRhLnNldHRpbmdzICYmIGRhdGEuc2V0dGluZ3Mubm9OZXdXaWRnZXRzKTtcbiAgfSxcbiAgcm91dGVzOiBbXG4gICAge1xuICAgICAgcGF0aDogJ2Rhc2hib2FyZC86ZGFzaGJvYXJkSWQnLFxuICAgICAgY29tcG9uZW50OiBDb250ZXh0RGFzaGJvYXJkQ29tcG9uZW50LFxuICAgICAgY2FuQWN0aXZhdGU6IFtEZXZpY2VEYXNoYm9hcmRHdWFyZF0sXG4gICAgICBjb250ZXh0OiBWaWV3Q29udGV4dC5EZXZpY2VcbiAgICB9LFxuICAgIHtcbiAgICAgIHBhdGg6ICdkYXNoYm9hcmQvOmRhc2hib2FyZElkJyxcbiAgICAgIGNvbXBvbmVudDogQ29udGV4dERhc2hib2FyZENvbXBvbmVudCxcbiAgICAgIGNhbkFjdGl2YXRlOiBbR3JvdXBEYXNoYm9hcmRHdWFyZF0sXG4gICAgICBjb250ZXh0OiBWaWV3Q29udGV4dC5Hcm91cFxuICAgIH1cbiAgXVxufTtcblxuQE5nTW9kdWxlKHtcbiAgZGVjbGFyYXRpb25zOiBbXG4gICAgQXBwZWFyYW5jZVNldHRpbmdzQ29tcG9uZW50LFxuICAgIENvbnRleHREYXNoYm9hcmRDb21wb25lbnQsXG4gICAgV2lkZ2V0Q29uZmlnQ29tcG9uZW50LFxuICAgIFdpZGdldFByZXZpZXdDb21wb25lbnQsXG4gICAgRGFzaGJvYXJkRGV0YWlsQ29tcG9uZW50LFxuICAgIEFkZERhc2hib2FyZENvbXBvbmVudCxcbiAgICBQYXN0ZURhc2hib2FyZEFjdGlvbkNvbXBvbmVudCxcbiAgICBEYXNoYm9hcmRBdmFpbGFiaWxpdHlDb21wb25lbnRcbiAgXSxcbiAgaW1wb3J0czogW1xuICAgIENvcmVNb2R1bGUsXG4gICAgVG9vbHRpcE1vZHVsZSxcbiAgICBQb3BvdmVyTW9kdWxlLFxuICAgIEFzc2V0U2VsZWN0b3JNb2R1bGUsXG4gICAgQnNEcm9wZG93bk1vZHVsZS5mb3JSb290KClcbiAgXSxcbiAgZXhwb3J0czogW0NvbnRleHREYXNoYm9hcmRDb21wb25lbnQsIFdpZGdldENvbmZpZ0NvbXBvbmVudF0sXG4gIGVudHJ5Q29tcG9uZW50czogW1xuICAgIENvbnRleHREYXNoYm9hcmRDb21wb25lbnQsXG4gICAgV2lkZ2V0Q29uZmlnQ29tcG9uZW50LFxuICAgIERhc2hib2FyZERldGFpbENvbXBvbmVudCxcbiAgICBQYXN0ZURhc2hib2FyZEFjdGlvbkNvbXBvbmVudFxuICBdLFxuICBwcm92aWRlcnM6IFtcbiAgICBXaWRnZXRTZXJ2aWNlLFxuICAgIHtcbiAgICAgIHByb3ZpZGU6IENPTlRFWFRfREFTSEJPQVJEX0NPTkZJRyxcbiAgICAgIHVzZVZhbHVlOiBkZWZhdWx0Q29uZmlnXG4gICAgfVxuICBdXG59KVxuZXhwb3J0IGNsYXNzIENvbnRleHREYXNoYm9hcmRNb2R1bGUge1xuICBzdGF0aWMgY29uZmlnKGNvbmZpZzogQ29udGV4dERhc2hib2FyZENvbmZpZyA9IHt9KTogTW9kdWxlV2l0aFByb3ZpZGVyczxDb250ZXh0RGFzaGJvYXJkTW9kdWxlPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5nTW9kdWxlOiBDb250ZXh0RGFzaGJvYXJkTW9kdWxlLFxuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBDT05URVhUX0RBU0hCT0FSRF9DT05GSUcsXG4gICAgICAgICAgdXNlVmFsdWU6IHsgLi4uZGVmYXVsdENvbmZpZywgLi4uY29uZmlnIH1cbiAgICAgICAgfSxcbiAgICAgICAgQ29udGV4dERhc2hib2FyZFNlcnZpY2UsXG4gICAgICAgIERldmljZURhc2hib2FyZEd1YXJkLFxuICAgICAgICBHcm91cERhc2hib2FyZEd1YXJkLFxuICAgICAgICBob29rUm91dGUoeyAuLi5kZWZhdWx0Q29uZmlnLCAuLi5jb25maWcgfS5yb3V0ZXMpLFxuICAgICAgICBob29rVGFiKEFkZERhc2hib2FyZEZhY3RvcnksIHsgcHJvdmlkZXJUeXBlOiBIb29rUHJvdmlkZXJUeXBlcy5FeGlzdGluZ1Byb3ZpZGVyIH0pLFxuICAgICAgICBob29rQWN0aW9uQmFyKERhc2hib2FyZEFjdGlvbkJhckZhY3RvcnkpXG4gICAgICBdXG4gICAgfTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTW9kdWxlV2l0aFByb3ZpZGVycywgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbnRleHREYXNoYm9hcmRNb2R1bGUgfSBmcm9tICcuLi9jb250ZXh0LWRhc2hib2FyZC5tb2R1bGUnO1xuaW1wb3J0IHsgQ29udGV4dERhc2hib2FyZENvbXBvbmVudCB9IGZyb20gJy4uL2NvbnRleHQtZGFzaGJvYXJkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBEZXZpY2VEYXNoYm9hcmRHdWFyZCB9IGZyb20gJy4uL2RldmljZS1kYXNoYm9hcmQuZ3VhcmQnO1xuaW1wb3J0IHsgR3JvdXBEYXNoYm9hcmRHdWFyZCB9IGZyb20gJy4uL2dyb3VwLWRhc2hib2FyZC5ndWFyZCc7XG5pbXBvcnQgeyBWaWV3Q29udGV4dCwgaG9va05hdmlnYXRvciwgZ2V0dGV4dCwgQ29yZU1vZHVsZSB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgQ29ja3BpdERhc2hib2FyZENvbXBvbmVudCB9IGZyb20gJy4vY29ja3BpdC1kYXNoYm9hcmQuY29tcG9uZW50JztcbmltcG9ydCB7IENvY2twaXREYXNoYm9hcmRDb25maWcsIENPQ0tQSVRfSE9NRV9EQVNIQk9BUkRfQ09ORklHIH0gZnJvbSAnLi9jb2NrcGl0LWRhc2hib2FyZC5tb2RlbCc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBDb3JlTW9kdWxlLFxuICAgIENvbnRleHREYXNoYm9hcmRNb2R1bGUuY29uZmlnKHtcbiAgICAgIHJvdXRlczogW1xuICAgICAgICB7XG4gICAgICAgICAgcGF0aDogJ2Rhc2hib2FyZC86ZGFzaGJvYXJkSWQnLFxuICAgICAgICAgIGNvbXBvbmVudDogQ29udGV4dERhc2hib2FyZENvbXBvbmVudCxcbiAgICAgICAgICBjYW5BY3RpdmF0ZTogW0RldmljZURhc2hib2FyZEd1YXJkXSxcbiAgICAgICAgICBjb250ZXh0OiBWaWV3Q29udGV4dC5EZXZpY2VcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHBhdGg6ICdkYXNoYm9hcmQvOmRhc2hib2FyZElkJyxcbiAgICAgICAgICBjb21wb25lbnQ6IENvbnRleHREYXNoYm9hcmRDb21wb25lbnQsXG4gICAgICAgICAgY2FuQWN0aXZhdGU6IFtHcm91cERhc2hib2FyZEd1YXJkXSxcbiAgICAgICAgICBjb250ZXh0OiBWaWV3Q29udGV4dC5Hcm91cFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcGF0aDogJycsXG4gICAgICAgICAgY29tcG9uZW50OiBDb2NrcGl0RGFzaGJvYXJkQ29tcG9uZW50XG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICBdLFxuICBkZWNsYXJhdGlvbnM6IFtDb2NrcGl0RGFzaGJvYXJkQ29tcG9uZW50XSxcbiAgcHJvdmlkZXJzOiBbaG9va05hdmlnYXRvcih7IGxhYmVsOiBnZXR0ZXh0KCdIb21lJyksIGljb246ICdob21lJywgcHJpb3JpdHk6IDEwMDAwLCBwYXRoOiAnLycgfSldXG59KVxuZXhwb3J0IGNsYXNzIENvY2twaXREYXNoYm9hcmRNb2R1bGUge1xuICBzdGF0aWMgY29uZmlnKGNvbmZpZzogQ29ja3BpdERhc2hib2FyZENvbmZpZyA9IHt9KTogTW9kdWxlV2l0aFByb3ZpZGVyczxDb2NrcGl0RGFzaGJvYXJkTW9kdWxlPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5nTW9kdWxlOiBDb2NrcGl0RGFzaGJvYXJkTW9kdWxlLFxuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBDT0NLUElUX0hPTUVfREFTSEJPQVJEX0NPTkZJRyxcbiAgICAgICAgICB1c2VWYWx1ZTogY29uZmlnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9O1xuICB9XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFjdGl2YXRlZFJvdXRlIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IGdldHRleHQsIFdpZGdldCB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgVHJhbnNsYXRlU2VydmljZSB9IGZyb20gJ0BuZ3gtdHJhbnNsYXRlL2NvcmUnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBjb21iaW5lTGF0ZXN0LCBmcm9tLCBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBtYXAsIG1lcmdlTWFwLCB0b0FycmF5IH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgV2lkZ2V0U2VydmljZSB9IGZyb20gJy4uL3dpZGdldC5zZXJ2aWNlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgSU1hbmFnZWRPYmplY3QgfSBmcm9tICdAYzh5L2NsaWVudCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2M4eS1kZXZpY2UtaW5mby1kYXNoYm9hcmQtZGFzaGJvYXJkJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2RldmljZS1pbmZvLWRhc2hib2FyZC5jb21wb25lbnQuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgRGV2aWNlSW5mb0Rhc2hib2FyZENvbXBvbmVudCB7XG4gIGN1cnJlbnRDb250ZXh0JDogT2JzZXJ2YWJsZTxJTWFuYWdlZE9iamVjdD47XG4gIHdpZGdldHMkOiBPYnNlcnZhYmxlPFdpZGdldFtdPjtcbiAgaXNMb2FkaW5nJCA9IG5ldyBCZWhhdmlvclN1YmplY3QodHJ1ZSk7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHdpZGdldHNTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcblxuICBERVZJQ0VfSU5GT19XSURHRVRTID0gW1xuICAgIHtcbiAgICAgIGNvbXBvbmVudElkOiAnYXNzZXROb3Rlc1dpZGdldCcsXG4gICAgICB0aXRsZTogZ2V0dGV4dCgnTWVzc2FnZSBvZiB0aGUgZGF5JyksXG4gICAgICBjbGFzc2VzOiB7ICdwYW5lbC10aXRsZS1oaWRkZW4nOiB0cnVlIH0sXG4gICAgICBfeDogMCxcbiAgICAgIF95OiAwLFxuICAgICAgX2hlaWdodDogMixcbiAgICAgIF93aWR0aDogMTJcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdkZXZpY2VTdGF0dXNXaWRnZXQnLFxuICAgICAgdGl0bGU6IGdldHRleHQoJ0RldmljZSBzdGF0dXMnKSxcbiAgICAgIF94OiAwLFxuICAgICAgX3k6IDIsXG4gICAgICBfaGVpZ2h0OiA1LFxuICAgICAgX3dpZHRoOiA0XG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnRGF0YSBwb2ludHMgZ3JhcGgnLFxuICAgICAgdGl0bGU6IGdldHRleHQoJ0RldmljZSBhbmQgY29tbXVuaWNhdGlvbicpLFxuICAgICAgX3g6IDQsXG4gICAgICBfeTogMixcbiAgICAgIF9oZWlnaHQ6IDUsXG4gICAgICBfd2lkdGg6IDgsXG4gICAgICBjb25maWc6IHtcbiAgICAgICAgaW50ZXJ2YWw6ICdob3VycycsXG4gICAgICAgIGFnZ3JlZ2F0aW9uOiAnTk9ORScsXG4gICAgICAgIHJlYWx0aW1lOiB0cnVlLFxuICAgICAgICBkYXRhcG9pbnRzSW5pdGlhbERpc3BsYXlMaW1pdDogMyxcbiAgICAgICAgZGF0YXBvaW50czogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZyYWdtZW50OiAnYzh5X0JhdHRlcnknLFxuICAgICAgICAgICAgc2VyaWVzOiAnbGV2ZWwnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdCYXR0ZXJ5OiBsZXZlbCcpLFxuICAgICAgICAgICAgdW5pdDogJyUnLFxuICAgICAgICAgICAgcmVuZGVyVHlwZTogJ21pbicsXG4gICAgICAgICAgICBsaW5lVHlwZTogJ2xpbmUnLFxuICAgICAgICAgICAgY29sb3I6ICcjNWUwN2IzJyxcbiAgICAgICAgICAgIF9fYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmcmFnbWVudDogJ2M4eV9TaWduYWxTdHJlbmd0aCcsXG4gICAgICAgICAgICBzZXJpZXM6ICdyc3NpJyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgnU2lnbmFsOiBSU1NJJyksXG4gICAgICAgICAgICB1bml0OiAnZEJtJyxcbiAgICAgICAgICAgIHJlbmRlclR5cGU6ICdtaW4nLFxuICAgICAgICAgICAgbGluZVR5cGU6ICdsaW5lJyxcbiAgICAgICAgICAgIGNvbG9yOiAnI2E3ZDBmMScsXG4gICAgICAgICAgICBfX2FjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZnJhZ21lbnQ6ICdjOHlfTWVtb3J5TWVhc3VyZW1lbnQnLFxuICAgICAgICAgICAgc2VyaWVzOiAnVXNlZCcsXG4gICAgICAgICAgICBsYWJlbDogdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ01lbW9yeTogdXNlZCcpLFxuICAgICAgICAgICAgdW5pdDogJ01CJyxcbiAgICAgICAgICAgIHJlbmRlclR5cGU6ICdtaW4nLFxuICAgICAgICAgICAgbGluZVR5cGU6ICdsaW5lJyxcbiAgICAgICAgICAgIGNvbG9yOiAnI2Y3NTIyOScsXG4gICAgICAgICAgICBfX2FjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZnJhZ21lbnQ6ICdjOHlfQ1BVTWVhc3VyZW1lbnQnLFxuICAgICAgICAgICAgc2VyaWVzOiAnV29ya2xvYWQnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdDUFU6IHdvcmtsb2FkJyksXG4gICAgICAgICAgICB1bml0OiAnJScsXG4gICAgICAgICAgICByZW5kZXJUeXBlOiAnbWluJyxcbiAgICAgICAgICAgIGxpbmVUeXBlOiAnbGluZScsXG4gICAgICAgICAgICBjb2xvcjogJyNiMjRmM2UnLFxuICAgICAgICAgICAgX19hY3RpdmU6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZyYWdtZW50OiAnYzh5X05ldHdvcmtTdGF0aXN0aWNzJyxcbiAgICAgICAgICAgIHNlcmllczogJ1VwbG9hZCcsXG4gICAgICAgICAgICBsYWJlbDogdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ05ldHdvcms6IHVwbG9hZCcpLFxuICAgICAgICAgICAgdW5pdDogJ0tCL3MnLFxuICAgICAgICAgICAgcmVuZGVyVHlwZTogJ21pbicsXG4gICAgICAgICAgICBsaW5lVHlwZTogJ2xpbmUnLFxuICAgICAgICAgICAgY29sb3I6ICcjODhjMDM5JyxcbiAgICAgICAgICAgIF9fYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmcmFnbWVudDogJ2M4eV9TaWduYWxTdHJlbmd0aCcsXG4gICAgICAgICAgICBzZXJpZXM6ICdSQ1NQJyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgnU2lnbmFsOiBSQ1NQJyksXG4gICAgICAgICAgICByZW5kZXJUeXBlOiAnbWluJyxcbiAgICAgICAgICAgIGxpbmVUeXBlOiAnbGluZScsXG4gICAgICAgICAgICBjb2xvcjogJyM1ZTJmMTknLFxuICAgICAgICAgICAgX19hY3RpdmU6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZyYWdtZW50OiAnYzh5X1NpZ25hbFN0cmVuZ3RoJyxcbiAgICAgICAgICAgIHNlcmllczogJ1JTQ1AnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdTaWduYWw6IFJTQ1AnKSxcbiAgICAgICAgICAgIHJlbmRlclR5cGU6ICdtaW4nLFxuICAgICAgICAgICAgbGluZVR5cGU6ICdsaW5lJyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzVlMmYxOScsXG4gICAgICAgICAgICBfX2FjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZnJhZ21lbnQ6ICdjOHlfU2lnbmFsU3RyZW5ndGgnLFxuICAgICAgICAgICAgc2VyaWVzOiAnUlNSUCcsXG4gICAgICAgICAgICBsYWJlbDogdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ1NpZ25hbDogUlNSUCcpLFxuICAgICAgICAgICAgcmVuZGVyVHlwZTogJ21pbicsXG4gICAgICAgICAgICBsaW5lVHlwZTogJ2xpbmUnLFxuICAgICAgICAgICAgY29sb3I6ICcjNDNiYTNiJyxcbiAgICAgICAgICAgIF9fYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmcmFnbWVudDogJ2M4eV9TaWduYWxTdHJlbmd0aCcsXG4gICAgICAgICAgICBzZXJpZXM6ICdSU1JRJyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudCgnU2lnbmFsOiBSU1JRJyksXG4gICAgICAgICAgICByZW5kZXJUeXBlOiAnbWluJyxcbiAgICAgICAgICAgIGxpbmVUeXBlOiAnbGluZScsXG4gICAgICAgICAgICBjb2xvcjogJyMxNGIwYjMnLFxuICAgICAgICAgICAgX19hY3RpdmU6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZyYWdtZW50OiAnYzh5X1NpZ25hbFN0cmVuZ3RoJyxcbiAgICAgICAgICAgIHNlcmllczogJ2JlcicsXG4gICAgICAgICAgICBsYWJlbDogdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ1NpZ25hbDogQkVSJyksXG4gICAgICAgICAgICB1bml0OiAnJScsXG4gICAgICAgICAgICByZW5kZXJUeXBlOiAnbWluJyxcbiAgICAgICAgICAgIGxpbmVUeXBlOiAnbGluZScsXG4gICAgICAgICAgICBjb2xvcjogJyM0NGZmMzMnLFxuICAgICAgICAgICAgX19hY3RpdmU6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZyYWdtZW50OiAnYzh5X1NpZ25hbFN0cmVuZ3RoJyxcbiAgICAgICAgICAgIHNlcmllczogJ0VDTjAnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdTaWduYWw6IEVDTjAnKSxcbiAgICAgICAgICAgIHJlbmRlclR5cGU6ICdtaW4nLFxuICAgICAgICAgICAgbGluZVR5cGU6ICdsaW5lJyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzg3M2VmYScsXG4gICAgICAgICAgICBfX2FjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZnJhZ21lbnQ6ICdjOHlfTmV0d29ya1N0YXRpc3RpY3MnLFxuICAgICAgICAgICAgc2VyaWVzOiAnRG93bmxvYWQnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMudHJhbnNsYXRlU2VydmljZS5pbnN0YW50KCdOZXR3b3JrOiBkb3dubG9hZCcpLFxuICAgICAgICAgICAgdW5pdDogJ0tCL3MnLFxuICAgICAgICAgICAgcmVuZGVyVHlwZTogJ21pbicsXG4gICAgICAgICAgICBsaW5lVHlwZTogJ2xpbmUnLFxuICAgICAgICAgICAgY29sb3I6ICcjZjI3YTQ1JyxcbiAgICAgICAgICAgIF9fYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmcmFnbWVudDogJ2M4eV9NZW1vcnlNZWFzdXJlbWVudCcsXG4gICAgICAgICAgICBzZXJpZXM6ICdUb3RhbCcsXG4gICAgICAgICAgICBsYWJlbDogdGhpcy50cmFuc2xhdGVTZXJ2aWNlLmluc3RhbnQoJ01lbW9yeTogdG90YWwnKSxcbiAgICAgICAgICAgIHVuaXQ6ICdNQicsXG4gICAgICAgICAgICByZW5kZXJUeXBlOiAnbWluJyxcbiAgICAgICAgICAgIGxpbmVUeXBlOiAnbGluZScsXG4gICAgICAgICAgICBjb2xvcjogJyNkYWRkOGMnLFxuICAgICAgICAgICAgX19hY3RpdmU6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIGFsYXJtc0V2ZW50c0NvbmZpZ3M6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogJ2M4eV9Mb2NhdGlvblVwZGF0ZScsXG4gICAgICAgICAgICB0aW1lbGluZVR5cGU6ICdFVkVOVCcsXG4gICAgICAgICAgICBjb2xvcjogJyM2ZjZjZDAnLFxuICAgICAgICAgICAgZmlsdGVyczoge1xuICAgICAgICAgICAgICB0eXBlOiAnYzh5X0xvY2F0aW9uVXBkYXRlJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9fYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogJ2M4eV9VbmF2YWlsYWJpbGl0eUFsYXJtJyxcbiAgICAgICAgICAgIHRpbWVsaW5lVHlwZTogJ0FMQVJNJyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzM3NWJmMicsXG4gICAgICAgICAgICBmaWx0ZXJzOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdjOHlfVW5hdmFpbGFiaWxpdHlBbGFybSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfX2FjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHRyYW5zZm9ybUNvbmZpZ1dpdGhDb250ZXh0KGNvbmZpZywgY29udGV4dCwgYzh5RGV2aWNlcykge1xuICAgICAgICAnbmdJbmplY3QnO1xuICAgICAgICByZXR1cm4gYzh5RGV2aWNlc1xuICAgICAgICAgIC5nZXRTdXBwb3J0ZWRTZXJpZXMoY29udGV4dC5pZClcbiAgICAgICAgICAudGhlbihzdXBwb3J0ZWRNZWFzdXJlbWVudFNlcmllcyA9PlxuICAgICAgICAgICAgY29uZmlnLmRhdGFwb2ludHMuZmlsdGVyKGNvbmZpZ01lYXN1cmVtZW50ID0+XG4gICAgICAgICAgICAgIHN1cHBvcnRlZE1lYXN1cmVtZW50U2VyaWVzLmZpbmQoXG4gICAgICAgICAgICAgICAgc3VwcG9ydGVkU2VyaWVzID0+XG4gICAgICAgICAgICAgICAgICBzdXBwb3J0ZWRTZXJpZXMuZnJhZ21lbnQgPT09IGNvbmZpZ01lYXN1cmVtZW50LmZyYWdtZW50ICYmXG4gICAgICAgICAgICAgICAgICBzdXBwb3J0ZWRTZXJpZXMuc2VyaWVzID09PSBjb25maWdNZWFzdXJlbWVudC5zZXJpZXNcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgICAudGhlbihkYXRhcG9pbnRzID0+ICh7IC4uLmNvbmZpZywgLi4ueyBkYXRhcG9pbnRzIH0gfSkpO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ0Fzc2V0IFByb3BlcnRpZXMnLFxuICAgICAgdGl0bGU6IGdldHRleHQoJ0RldmljZSBkYXRhJyksXG4gICAgICBjb25maWc6IHtcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIHByb3BlcnRpZXM6IFtdLFxuICAgICAgICAgIGFsbG93RGlzcGxheUFuZEVkaXRLbm93blByb3BlcnRpZXM6IHRydWUsXG4gICAgICAgICAgaGlkZGVuUHJvcGVydGllc0tleVBhdGhzOiBbJ293bmVyJ11cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF94OiAwLFxuICAgICAgX3k6IDcsXG4gICAgICBfaGVpZ2h0OiA4LFxuICAgICAgX3dpZHRoOiA0XG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnQWxhcm0gbGlzdCcsXG4gICAgICB0aXRsZTogZ2V0dGV4dCgnQWN0aXZlLCBjcml0aWNhbCBhbGFybXMnKSxcbiAgICAgIF94OiA0LFxuICAgICAgX3k6IDcsXG4gICAgICBfaGVpZ2h0OiA0LFxuICAgICAgX3dpZHRoOiA0LFxuICAgICAgY29uZmlnOiB7XG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBvcmRlck1vZGU6ICdBQ1RJVkVfRklSU1QnLFxuICAgICAgICAgIHNldmVyaXR5OiB7IENSSVRJQ0FMOiB0cnVlIH0sXG4gICAgICAgICAgc3RhdHVzOiB7XG4gICAgICAgICAgICBBQ1RJVkU6IHRydWUsXG4gICAgICAgICAgICBBQ0tOT1dMRURHRUQ6IGZhbHNlLFxuICAgICAgICAgICAgQ0xFQVJFRDogZmFsc2VcbiAgICAgICAgICB9LFxuICAgICAgICAgIHR5cGVzOiBbXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnZGV2aWNlR3JvdXBBc3NpZ25tZW50V2lkZ2V0JyxcbiAgICAgIHRpdGxlOiBnZXR0ZXh0KCdHcm91cCBhc3NpZ25tZW50JyksXG4gICAgICBfeDogOCxcbiAgICAgIF95OiA3LFxuICAgICAgX2hlaWdodDogNCxcbiAgICAgIF93aWR0aDogNFxuICAgIH0sXG4gICAge1xuICAgICAgY29tcG9uZW50SWQ6ICdNYXAnLFxuICAgICAgdGl0bGU6IGdldHRleHQoJ0xvY2F0aW9uJyksXG4gICAgICBfeDogNCxcbiAgICAgIF95OiAxMSxcbiAgICAgIF9oZWlnaHQ6IDQsXG4gICAgICBfd2lkdGg6IDhcbiAgICB9XG4gIF0gYXMgV2lkZ2V0W107XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByb3V0ZXI6IEFjdGl2YXRlZFJvdXRlLFxuICAgIHByaXZhdGUgd2lkZ2V0U2VydmljZTogV2lkZ2V0U2VydmljZSxcbiAgICBwcml2YXRlIHRyYW5zbGF0ZVNlcnZpY2U6IFRyYW5zbGF0ZVNlcnZpY2VcbiAgKSB7XG4gICAgdGhpcy5jdXJyZW50Q29udGV4dCQgPSB0aGlzLnJvdXRlci5wYXJlbnQuZGF0YS5waXBlKFxuICAgICAgbWFwKCh7IGNvbnRleHREYXRhIH0pID0+IHtcbiAgICAgICAgdGhpcy50aXRsZSA9IGNvbnRleHREYXRhLm5hbWU7XG4gICAgICAgIHJldHVybiBjb250ZXh0RGF0YTtcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIHRoaXMud2lkZ2V0cyQgPSBmcm9tKHRoaXMuREVWSUNFX0lORk9fV0lER0VUUykucGlwZShcbiAgICAgIG1lcmdlTWFwKHdpZGdldCA9PiB0aGlzLndpZGdldFNlcnZpY2UubWFwTGVnYWN5KHdpZGdldCkpLFxuICAgICAgbWFwKHdpZGdldCA9PiAoe1xuICAgICAgICAuLi53aWRnZXQsXG4gICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgIC4uLndpZGdldC5jb25maWcsXG4gICAgICAgICAgZGV2aWNlOiB0aGlzLnJvdXRlci5wYXJlbnQuc25hcHNob3QuZGF0YS5jb250ZXh0RGF0YVxuICAgICAgICB9XG4gICAgICB9KSksXG4gICAgICB0b0FycmF5KClcbiAgICApO1xuXG4gICAgdGhpcy53aWRnZXRzU3Vic2NyaXB0aW9uID0gY29tYmluZUxhdGVzdChbdGhpcy53aWRnZXRzJCwgdGhpcy5jdXJyZW50Q29udGV4dCRdKS5zdWJzY3JpYmUoXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHRoaXMuaXNMb2FkaW5nJC5uZXh0KGZhbHNlKTtcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy53aWRnZXRzU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gIH1cbn1cbiIsIjxjOHktdGl0bGU+XG4gIHt7IHRpdGxlIH19XG48L2M4eS10aXRsZT5cbjxjOHktd2lkZ2V0cy1kYXNoYm9hcmRcbiAgW2NvbnRleHRdPVwiY3VycmVudENvbnRleHQkIHwgYXN5bmNcIlxuICBbd2lkZ2V0c109XCJ3aWRnZXRzJCB8IGFzeW5jXCJcbiAgW3NldHRpbmdzXT1cIntcbiAgICBpc0xvYWRpbmc6IGlzTG9hZGluZyQgfCBhc3luYyxcbiAgICBpc0Rpc2FibGVkOiB0cnVlLFxuICAgIGNhbkRlbGV0ZTogZmFsc2UsXG4gICAgdHJhbnNsYXRlV2lkZ2V0VGl0bGU6IHRydWUsXG4gICAgYWxsb3dGdWxsc2NyZWVuOiBmYWxzZSxcbiAgICBjYW5Db3B5OiBmYWxzZVxuICB9XCJcbj5cbjwvYzh5LXdpZGdldHMtZGFzaGJvYXJkPlxuIiwiaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb3JlTW9kdWxlLCBob29rUm91dGUsIFZpZXdDb250ZXh0LCBnZXR0ZXh0IH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5pbXBvcnQgeyBDb250ZXh0RGFzaGJvYXJkTW9kdWxlIH0gZnJvbSAnLi4vY29udGV4dC1kYXNoYm9hcmQubW9kdWxlJztcbmltcG9ydCB7IERldmljZUluZm9EYXNoYm9hcmRDb21wb25lbnQgfSBmcm9tICcuL2RldmljZS1pbmZvLWRhc2hib2FyZC5jb21wb25lbnQnO1xuXG5ATmdNb2R1bGUoe1xuICBkZWNsYXJhdGlvbnM6IFtEZXZpY2VJbmZvRGFzaGJvYXJkQ29tcG9uZW50XSxcbiAgaW1wb3J0czogW0NvbW1vbk1vZHVsZSwgQ29yZU1vZHVsZSwgQ29udGV4dERhc2hib2FyZE1vZHVsZV0sXG4gIGV4cG9ydHM6IFtdLFxuICBlbnRyeUNvbXBvbmVudHM6IFtEZXZpY2VJbmZvRGFzaGJvYXJkQ29tcG9uZW50XSxcbiAgcHJvdmlkZXJzOiBbXG4gICAgaG9va1JvdXRlKHtcbiAgICAgIGNvbnRleHQ6IFZpZXdDb250ZXh0LkRldmljZSxcbiAgICAgIHBhdGg6ICdkZXZpY2UtaW5mbycsXG4gICAgICBjb21wb25lbnQ6IERldmljZUluZm9EYXNoYm9hcmRDb21wb25lbnQsXG4gICAgICBsYWJlbDogZ2V0dGV4dCgnSW5mbycpLFxuICAgICAgcHJpb3JpdHk6IDEwMDAwLFxuICAgICAgaWNvbjogJ2FzdGVyaXNrJ1xuICAgIH0pXG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgRGV2aWNlSW5mb0Rhc2hib2FyZE1vZHVsZSB7fVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGdldHRleHQsIFdpZGdldCB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgV2lkZ2V0U2VydmljZSB9IGZyb20gJy4uL3dpZGdldC5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYzh5LWRldmljZS1tYW5hZ2VtZW50LWhvbWUtZGFzaGJvYXJkJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2RldmljZS1tYW5hZ2VtZW50LWhvbWUtZGFzaGJvYXJkLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBEZXZpY2VNYW5hZ2VtZW50SG9tZURhc2hib2FyZENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIHdpZGdldHMgPSBbXTtcbiAgZGFzaGJvYXJkTmFtZSA9ICdob21lLWRtMSc7XG4gIGRlZmF1bHRXaWRnZXRzID0gW1xuICAgIHtcbiAgICAgIG5hbWU6ICdkZXZpY2VtYW5hZ2VtZW50LndlbGNvbWUud2lkZ2V0JyxcbiAgICAgIHRpdGxlOiBnZXR0ZXh0KCdRdWljayBsaW5rcycpLFxuICAgICAgX3g6IDAsXG4gICAgICBfeTogMCxcbiAgICAgIF9oZWlnaHQ6IDQsXG4gICAgICBfd2lkdGg6IDZcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdSZWNlbnQgQWxhcm1zJyxcbiAgICAgIHRpdGxlOiBnZXR0ZXh0KCdSZWNlbnQgYWxhcm1zJyksXG4gICAgICBfeDogNixcbiAgICAgIF95OiAwLFxuICAgICAgX2hlaWdodDogNCxcbiAgICAgIF93aWR0aDogNlxuICAgIH1cbiAgXSBhcyBXaWRnZXRbXTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHdpZGdldFNlcnZpY2U6IFdpZGdldFNlcnZpY2UpIHt9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5kZWZhdWx0V2lkZ2V0cy5tYXAoYXN5bmMgd2lkZ2V0ID0+IHtcbiAgICAgIGF3YWl0IHRoaXMud2lkZ2V0U2VydmljZVxuICAgICAgICAubWFwTGVnYWN5KHdpZGdldClcbiAgICAgICAgLnRoZW4odHJhbnNmb3JtZWRXaWRnZXQgPT4gdGhpcy53aWRnZXRzLnB1c2godHJhbnNmb3JtZWRXaWRnZXQpKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiPGM4eS10aXRsZT5cbiAge3sgJ0hvbWUnIHwgdHJhbnNsYXRlIH19XG48L2M4eS10aXRsZT5cblxuPGM4eS1jb250ZXh0LWRhc2hib2FyZFxuICBbbmFtZV09XCJkYXNoYm9hcmROYW1lXCJcbiAgW2RlZmF1bHRXaWRnZXRzXT1cImRlZmF1bHRXaWRnZXRzXCJcbiAgW2NhbkRlbGV0ZV09XCJmYWxzZVwiXG4+PC9jOHktY29udGV4dC1kYXNoYm9hcmQ+XG4iLCJpbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvcmVNb2R1bGUsIGdldHRleHQsIGhvb2tOYXZpZ2F0b3IsIGhvb2tSb3V0ZSB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgQ29udGV4dERhc2hib2FyZE1vZHVsZSB9IGZyb20gJy4uL2NvbnRleHQtZGFzaGJvYXJkLm1vZHVsZSc7XG5pbXBvcnQgeyBEZXZpY2VNYW5hZ2VtZW50SG9tZURhc2hib2FyZENvbXBvbmVudCB9IGZyb20gJy4vZGV2aWNlLW1hbmFnZW1lbnQtaG9tZS1kYXNoYm9hcmQuY29tcG9uZW50JztcblxuQE5nTW9kdWxlKHtcbiAgZGVjbGFyYXRpb25zOiBbRGV2aWNlTWFuYWdlbWVudEhvbWVEYXNoYm9hcmRDb21wb25lbnRdLFxuICBpbXBvcnRzOiBbQ29tbW9uTW9kdWxlLCBDb3JlTW9kdWxlLCBDb250ZXh0RGFzaGJvYXJkTW9kdWxlXSxcbiAgZXhwb3J0czogW10sXG4gIHByb3ZpZGVyczogW1xuICAgIGhvb2tSb3V0ZSh7XG4gICAgICBwYXRoOiAnJyxcbiAgICAgIGNvbXBvbmVudDogRGV2aWNlTWFuYWdlbWVudEhvbWVEYXNoYm9hcmRDb21wb25lbnRcbiAgICB9KSxcbiAgICBob29rTmF2aWdhdG9yKHsgbGFiZWw6IGdldHRleHQoJ0hvbWUnKSwgaWNvbjogJ2hvbWUnLCBwcmlvcml0eTogMTAwMDAsIHBhdGg6ICcvJyB9KVxuICBdXG59KVxuZXhwb3J0IGNsYXNzIERldmljZU1hbmFnZW1lbnRIb21lRGFzaGJvYXJkTW9kdWxlIHt9XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QsIGNvbWJpbmVMYXRlc3QsIE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEJzTW9kYWxTZXJ2aWNlIH0gZnJvbSAnbmd4LWJvb3RzdHJhcC9tb2RhbCc7XG5pbXBvcnQgeyBJTWFuYWdlZE9iamVjdCwgSW52ZW50b3J5U2VydmljZSwgSVJlc3VsdExpc3QgfSBmcm9tICdAYzh5L2NsaWVudCc7XG5pbXBvcnQgeyBkZWJvdW5jZVRpbWUsIGRpc3RpbmN0VW50aWxDaGFuZ2VkLCBzaGFyZVJlcGxheSwgc3dpdGNoTWFwLCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQge1xuICBGaWx0ZXJJbnB1dENvbXBvbmVudCxcbiAgZ2V0dGV4dCxcbiAgTW9kYWxTZXJ2aWNlLFxuICBTdGF0dXMsXG4gIEFsZXJ0U2VydmljZSxcbiAgUGVybWlzc2lvbnNcbn0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5pbXBvcnQgeyBEYXNoYm9hcmREZXRhaWxDb21wb25lbnQgfSBmcm9tICcuLi9kYXNoYm9hcmQtZGV0YWlsLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBDb250ZXh0RGFzaGJvYXJkU2VydmljZSB9IGZyb20gJy4uL2NvbnRleHQtZGFzaGJvYXJkLnNlcnZpY2UnO1xuaW1wb3J0IHsgQ29udGV4dERhc2hib2FyZFR5cGUgfSBmcm9tICcuLi9jb250ZXh0LWRhc2hib2FyZC5tb2RlbCc7XG5pbXBvcnQgeyBUcmFuc2xhdGVTZXJ2aWNlIH0gZnJvbSAnQG5neC10cmFuc2xhdGUvY29yZSc7XG5pbXBvcnQgeyBSZXBvcnREYXNoYm9hcmRTZXJ2aWNlIH0gZnJvbSAnLi9yZXBvcnQtZGFzaGJvYXJkLnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjOHktcmVwb3J0LWRhc2hib2FyZC1saXN0JyxcbiAgdGVtcGxhdGVVcmw6ICcuL3JlcG9ydC1kYXNoYm9hcmQtbGlzdC5jb21wb25lbnQuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgUmVwb3J0RGFzaGJvYXJkTGlzdENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBWaWV3Q2hpbGQoRmlsdGVySW5wdXRDb21wb25lbnQsIHsgc3RhdGljOiBmYWxzZSB9KSBmaWx0ZXI6IEZpbHRlcklucHV0Q29tcG9uZW50O1xuICB0ZXh0RmlsdGVyJDogQmVoYXZpb3JTdWJqZWN0PHN0cmluZz4gPSBuZXcgQmVoYXZpb3JTdWJqZWN0KCcnKTtcbiAgcmVsb2FkJDogQmVoYXZpb3JTdWJqZWN0PHZvaWQ+ID0gbmV3IEJlaGF2aW9yU3ViamVjdChudWxsKTtcbiAgcmVsb2FkaW5nID0gZmFsc2U7XG4gIHJlcG9ydHMkOiBPYnNlcnZhYmxlPElSZXN1bHRMaXN0PElNYW5hZ2VkT2JqZWN0Pj4gPSBjb21iaW5lTGF0ZXN0KFxuICAgIHRoaXMudGV4dEZpbHRlciQucGlwZShkZWJvdW5jZVRpbWUoNDAwKSwgZGlzdGluY3RVbnRpbENoYW5nZWQoKSksXG4gICAgdGhpcy5yZWxvYWQkXG4gICkucGlwZShcbiAgICB0YXAoKCkgPT4ge1xuICAgICAgdGhpcy5yZWxvYWRpbmcgPSB0cnVlO1xuICAgIH0pLFxuICAgIHN3aXRjaE1hcCgoW3RleHRdKSA9PiB0aGlzLmxvYWRSZXBvcnRzKHRleHQpKSxcbiAgICB0YXAoKCkgPT4ge1xuICAgICAgdGhpcy5yZWxvYWRpbmcgPSBmYWxzZTtcbiAgICB9KSxcbiAgICBzaGFyZVJlcGxheSgxKVxuICApO1xuICBjYW5BZGRSZXBvcnQgPSBmYWxzZTtcbiAgcHJpdmF0ZSByZWFkb25seSBERUxFVEVEX1NVQ0NFU1NfTVNHID0gZ2V0dGV4dCgnUmVwb3J0IGRlbGV0ZWQuJyk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBpbnZlbnRvcnlTZXJ2aWNlOiBJbnZlbnRvcnlTZXJ2aWNlLFxuICAgIHByaXZhdGUgY29udGV4dERhc2hib2FyZFNlcnZpY2U6IENvbnRleHREYXNoYm9hcmRTZXJ2aWNlLFxuICAgIHByaXZhdGUgYnNNb2RhbDogQnNNb2RhbFNlcnZpY2UsXG4gICAgcHJpdmF0ZSB0cmFuc2xhdGVTZXJ2aWNlOiBUcmFuc2xhdGVTZXJ2aWNlLFxuICAgIHByaXZhdGUgbW9kYWw6IE1vZGFsU2VydmljZSxcbiAgICBwcml2YXRlIGFsZXJ0U2VydmljZTogQWxlcnRTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVwb3J0RGFzaGJvYXJkU2VydmljZTogUmVwb3J0RGFzaGJvYXJkU2VydmljZSxcbiAgICBwcml2YXRlIHBlcm1pc3Npb25zOiBQZXJtaXNzaW9uc1xuICApIHt9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5jYW5BZGRSZXBvcnQgPSB0aGlzLnBlcm1pc3Npb25zLmhhc0FueVJvbGUoW1xuICAgICAgJ1JPTEVfSU5WRU5UT1JZX0NSRUFURScsXG4gICAgICAnUk9MRV9JTlZFTlRPUllfQURNSU4nXG4gICAgXSk7XG4gIH1cblxuICBhc3luYyBsb2FkUmVwb3J0cyhwYXJ0aWFsTmFtZT86IHN0cmluZykge1xuICAgIHJldHVybiBwYXJ0aWFsTmFtZVxuICAgICAgPyB0aGlzLnJlcG9ydERhc2hib2FyZFNlcnZpY2UubGlzdFJlcG9ydHMoeyBmaWx0ZXI6IHsgbmFtZTogYCoke3BhcnRpYWxOYW1lfSpgIH0gfSlcbiAgICAgIDogdGhpcy5yZXBvcnREYXNoYm9hcmRTZXJ2aWNlLmxpc3RSZXBvcnRzKCk7XG4gIH1cblxuICBhc3luYyBhZGQoKSB7XG4gICAgY29uc3QgaW5pdGlhbFN0YXRlID0ge1xuICAgICAgaXNSZXBvcnQ6IHRydWUsXG4gICAgICBpc05hbWVkRGFzaGJvYXJkOiB0cnVlXG4gICAgfTtcbiAgICBjb25zdCBtb2RhbCA9IHRoaXMuYnNNb2RhbC5zaG93KERhc2hib2FyZERldGFpbENvbXBvbmVudCwge1xuICAgICAgY2xhc3M6ICdtb2RhbC1sZycsXG4gICAgICBpZ25vcmVCYWNrZHJvcENsaWNrOiB0cnVlLFxuICAgICAgYXJpYURlc2NyaWJlZGJ5OiAnbW9kYWwtYm9keScsXG4gICAgICBhcmlhTGFiZWxsZWRCeTogJ21vZGFsLXRpdGxlJyxcbiAgICAgIGluaXRpYWxTdGF0ZVxuICAgIH0pLmNvbnRlbnQgYXMgRGFzaGJvYXJkRGV0YWlsQ29tcG9uZW50O1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjZmcgPSBhd2FpdCBtb2RhbC5yZXN1bHQ7XG4gICAgICBjb25zdCB7IG5hbWUsIGljb24sIGM4eV9Jc05hdmlnYXRvck5vZGUsIHByaW9yaXR5LCBkZXNjcmlwdGlvbiwgLi4uZGFzaGJvYXJkQ2ZnIH0gPSBjZmc7XG4gICAgICBjb25zdCByZXBvcnQgPSAoXG4gICAgICAgIGF3YWl0IHRoaXMucmVwb3J0RGFzaGJvYXJkU2VydmljZS5jcmVhdGVSZXBvcnQoe1xuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgaWNvbixcbiAgICAgICAgICBjOHlfSXNOYXZpZ2F0b3JOb2RlLFxuICAgICAgICAgIHByaW9yaXR5LFxuICAgICAgICAgIGRlc2NyaXB0aW9uXG4gICAgICAgIH0gYXMgUGFydGlhbDxJTWFuYWdlZE9iamVjdD4pXG4gICAgICApLmRhdGE7XG5cbiAgICAgIGF3YWl0IHRoaXMuY29udGV4dERhc2hib2FyZFNlcnZpY2UuY3JlYXRlKFxuICAgICAgICBkYXNoYm9hcmRDZmcsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgYCR7dGhpcy5jb250ZXh0RGFzaGJvYXJkU2VydmljZS5SRVBPUlRfUEFSVElBTF9OQU1FfSR7cmVwb3J0LmlkfWBcbiAgICAgICk7XG4gICAgICBpZiAocmVwb3J0LmM4eV9Jc05hdmlnYXRvck5vZGUpIHtcbiAgICAgICAgdGhpcy5yZXBvcnREYXNoYm9hcmRTZXJ2aWNlLmFkZFJlcG9ydE5hdmlnYXRvck5vZGUocmVwb3J0KTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVsb2FkJC5uZXh0KCk7XG4gICAgICBtb2RhbC5jbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICBpZiAoZXgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTb21ldGhpbmcgd2VudCB3cm9uZzogJHtleH1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBkZWxldGUocmVwb3J0OiBJTWFuYWdlZE9iamVjdCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXNoYm9hcmQgPSBhd2FpdCB0aGlzLmNvbnRleHREYXNoYm9hcmRTZXJ2aWNlXG4gICAgICAgIC5nZXREYXNoYm9hcmQkKGByZXBvcnRfJHtyZXBvcnQuaWR9YCwgW0NvbnRleHREYXNoYm9hcmRUeXBlLk5hbWVkXSlcbiAgICAgICAgLnRvUHJvbWlzZSgpO1xuICAgICAgY29uc3QgaXNEYXNoYm9hcmRGcm96ZW4gPSAhIWRhc2hib2FyZD8uYzh5X0Rhc2hib2FyZD8uaXNGcm96ZW47XG5cbiAgICAgIGNvbnN0IG1zZyA9IGlzRGFzaGJvYXJkRnJvemVuXG4gICAgICAgID8gZ2V0dGV4dChcbiAgICAgICAgICAgIGBZb3UgYXJlIGFib3V0IHRvIGRlbGV0ZSB0aGUgcmVwb3J0IFwie3sgcmVwb3J0TmFtZSB9fVwiLiBCZSBhd2FyZSB0aGF0IHRoZSByZXBvcnQgaGFzIGEgbG9ja2VkIGRhc2hib2FyZCBhc3NpZ25lZC4gRG8geW91IHdhbnQgdG8gcHJvY2VlZD9gXG4gICAgICAgICAgKVxuICAgICAgICA6IGdldHRleHQoYFlvdSBhcmUgYWJvdXQgdG8gZGVsZXRlIHRoZSByZXBvcnQgXCJ7eyByZXBvcnROYW1lIH19XCIuIERvIHlvdSB3YW50IHRvIHByb2NlZWQ/YCk7XG5cbiAgICAgIGF3YWl0IHRoaXMubW9kYWwuY29uZmlybShcbiAgICAgICAgZ2V0dGV4dCgnRGVsZXRlIHJlcG9ydCcpLFxuICAgICAgICB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UuaW5zdGFudChtc2csIHtcbiAgICAgICAgICByZXBvcnROYW1lOiByZXBvcnQubmFtZVxuICAgICAgICB9KSxcbiAgICAgICAgU3RhdHVzLkRBTkdFUixcbiAgICAgICAge1xuICAgICAgICAgIG9rOiBnZXR0ZXh0KCdEZWxldGUnKSxcbiAgICAgICAgICBjYW5jZWw6IGdldHRleHQoJ0NhbmNlbCcpXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHRoaXMuY29udGV4dERhc2hib2FyZFNlcnZpY2UuZGVsZXRlKGRhc2hib2FyZCwgZmFsc2UpO1xuICAgICAgYXdhaXQgdGhpcy5pbnZlbnRvcnlTZXJ2aWNlLmRlbGV0ZShyZXBvcnQuaWQpO1xuICAgICAgdGhpcy5hbGVydFNlcnZpY2Uuc3VjY2Vzcyh0aGlzLkRFTEVURURfU1VDQ0VTU19NU0cpO1xuICAgICAgaWYgKHJlcG9ydC5jOHlfSXNOYXZpZ2F0b3JOb2RlKSB7XG4gICAgICAgIHRoaXMucmVwb3J0RGFzaGJvYXJkU2VydmljZS5yZW1vdmVOYXZpZ2F0b3JOb2RlKHJlcG9ydCk7XG4gICAgICB9XG4gICAgICB0aGlzLnJlbG9hZCQubmV4dCgpO1xuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICBpZiAoZXgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTb21ldGhpbmcgd2VudCB3cm9uZzogJHtleH1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGUocmVwb3J0OiBJTWFuYWdlZE9iamVjdCkge1xuICAgIHJlcG9ydC5jOHlfSXNOYXZpZ2F0b3JOb2RlID0gcmVwb3J0LmM4eV9Jc05hdmlnYXRvck5vZGUgPyB7fSA6IG51bGw7XG4gICAgYXdhaXQgdGhpcy5pbnZlbnRvcnlTZXJ2aWNlLnVwZGF0ZShyZXBvcnQpO1xuICAgIHJlcG9ydC5jOHlfSXNOYXZpZ2F0b3JOb2RlXG4gICAgICA/IHRoaXMucmVwb3J0RGFzaGJvYXJkU2VydmljZS5hZGRSZXBvcnROYXZpZ2F0b3JOb2RlKHJlcG9ydClcbiAgICAgIDogdGhpcy5yZXBvcnREYXNoYm9hcmRTZXJ2aWNlLnJlbW92ZU5hdmlnYXRvck5vZGUocmVwb3J0KTtcbiAgfVxufVxuIiwiPGM4eS10aXRsZT5cbiAge3sgJ1JlcG9ydHMnIHwgdHJhbnNsYXRlIH19XG48L2M4eS10aXRsZT5cblxuPGM4eS1hY3Rpb24tYmFyLWl0ZW0gW3BsYWNlbWVudF09XCInbGVmdCdcIiBpdGVtQ2xhc3M9XCJuYXZiYXItZm9ybVwiPlxuICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAgaW5wdXQtZ3JvdXAtc2VhcmNoXCI+XG4gICAgPGlucHV0XG4gICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXG4gICAgICB0eXBlPVwic2VhcmNoXCJcbiAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiJ0ZpbHRlcicgfCB0cmFuc2xhdGVcIlxuICAgICAgcGxhY2Vob2xkZXI9XCJ7eyAnRmlsdGVy4oCmJyB8IHRyYW5zbGF0ZSB9fVwiXG4gICAgICBbbmdNb2RlbF09XCJ0ZXh0RmlsdGVyJCB8IGFzeW5jXCJcbiAgICAgIChuZ01vZGVsQ2hhbmdlKT1cInRleHRGaWx0ZXIkLm5leHQoJGV2ZW50KVwiXG4gICAgLz5cbiAgICA8c3BhbiBjbGFzcz1cImlucHV0LWdyb3VwLWFkZG9uXCI+XG4gICAgICA8aSBjOHlJY29uPVwic2VhcmNoXCIgKm5nSWY9XCIodGV4dEZpbHRlciQgfCBhc3luYykubGVuZ3RoID09PSAwXCI+PC9pPlxuICAgICAgPGlcbiAgICAgICAgY2xhc3M9XCJ0ZXh0LW11dGVkXCJcbiAgICAgICAgYzh5SWNvbj1cInRpbWVzXCJcbiAgICAgICAgKm5nSWY9XCIodGV4dEZpbHRlciQgfCBhc3luYykubGVuZ3RoID4gMFwiXG4gICAgICAgIChjbGljayk9XCJ0ZXh0RmlsdGVyJC5uZXh0KCcnKVwiXG4gICAgICAgIHB4LWV2ZW50PVwiQ2xlYXIgZmlsdGVyaW5nIHJlcG9ydHNcIlxuICAgICAgPjwvaT5cbiAgICA8L3NwYW4+XG4gIDwvZGl2PlxuPC9jOHktYWN0aW9uLWJhci1pdGVtPlxuXG48Yzh5LWFjdGlvbi1iYXItaXRlbSBbcGxhY2VtZW50XT1cIidyaWdodCdcIj5cbiAgPGJ1dHRvblxuICAgIGNsYXNzPVwiYnRuIGJ0bi1saW5rXCJcbiAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICB0aXRsZT1cInt7ICdBZGQgcmVwb3J0JyB8IHRyYW5zbGF0ZSB9fVwiXG4gICAgW2F0dHIuZGF0YS1jeV09XCIncmVwb3J0cy1hZGQtcmVwb3J0LWFjdGlvbi1iYXItYnV0dG9uJ1wiXG4gICAgKGNsaWNrKT1cImFkZCgpXCJcbiAgICBbZGlzYWJsZWRdPVwiIWNhbkFkZFJlcG9ydFwiXG4gID5cbiAgICA8aSBjOHlJY29uPVwicGx1cy1jaXJjbGVcIj48L2k+XG4gICAge3sgJ0FkZCByZXBvcnQnIHwgdHJhbnNsYXRlIH19XG4gIDwvYnV0dG9uPlxuICA8YnV0dG9uXG4gICAgY2xhc3M9XCJidG4gYnRuLWRvdCBtLXItMTZcIlxuICAgIHR5cGU9XCJidXR0b25cIlxuICAgIGFyaWEtbGFiZWw9XCJ7eyAnSW5mbycgfCB0cmFuc2xhdGV9fVwiXG4gICAgcG9wb3Zlcj1cInt7ICdZb3UgZG9uXFwndCBoYXZlIHBlcm1pc3Npb24gdG8gYWRkIHJlcG9ydHMnIHwgdHJhbnNsYXRlIH19XCJcbiAgICB0cmlnZ2Vycz1cImZvY3VzXCJcbiAgICBwbGFjZW1lbnQ9XCJ0b3BcIlxuICAgIGNvbnRhaW5lcj1cImJvZHlcIlxuICAgICpuZ0lmPVwiIWNhbkFkZFJlcG9ydFwiXG4gID5cbiAgICA8aSBbYzh5SWNvbl09XCInaW5mby1jaXJjbGUnXCIgY2xhc3M9XCJ0ZXh0LXByaW1hcnlcIj48L2k+XG4gIDwvYnV0dG9uPlxuPC9jOHktYWN0aW9uLWJhci1pdGVtPlxuXG48Yzh5LWFjdGlvbi1iYXItaXRlbSBbcGxhY2VtZW50XT1cIidyaWdodCdcIj5cbiAgPGJ1dHRvblxuICAgIHRpdGxlPVwie3sgJ1JlbG9hZCcgfCB0cmFuc2xhdGUgfX1cIlxuICAgIHR5cGU9XCJidXR0b25cIlxuICAgIGNsYXNzPVwiYnRuIGJ0bi1saW5rXCJcbiAgICAoY2xpY2spPVwibG9hZFJlcG9ydHMoKVwiXG4gID5cbiAgICA8aSBbbmdDbGFzc109XCJ7ICdpY29uLXNwaW4nOiByZWxvYWRpbmcgfVwiIGM4eUljb249XCJyZWZyZXNoXCI+PC9pPlxuICAgIHt7ICdSZWxvYWQnIHwgdHJhbnNsYXRlIH19XG4gIDwvYnV0dG9uPlxuPC9jOHktYWN0aW9uLWJhci1pdGVtPlxuXG48Yzh5LWhlbHAgc3JjPVwiL3VzZXJzLWd1aWRlL2NvY2twaXQvI3JlcG9ydHNcIj48L2M4eS1oZWxwPlxuXG48Yzh5LWxpc3QtZ3JvdXA+XG4gIDxjOHktbGlcbiAgICBjbGFzcz1cInBhZ2Utc3RpY2t5LWhlYWRlciBoaWRkZW4teHMgaGlkZGVuLXNtXCJcbiAgICAqbmdJZj1cIihyZXBvcnRzJCB8IGFzeW5jKT8uZGF0YS5sZW5ndGggPiAwXCJcbiAgPlxuICAgIDxjOHktbGktaWNvbj5cbiAgICAgIDxpIGNsYXNzPVwicC1sLTI0XCI+PC9pPlxuICAgIDwvYzh5LWxpLWljb24+XG4gICAgPGM4eS1saS1ib2R5IGNsYXNzPVwiY29udGVudC1mbGV4LTYwXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiY29sLTNcIj5cbiAgICAgICAge3sgJ1JlcG9ydCcgfCB0cmFuc2xhdGUgfX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImNvbC02XCI+XG4gICAgICAgIHt7ICdEZXNjcmlwdGlvbicgfCB0cmFuc2xhdGUgfX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImNvbC0yXCI+XG4gICAgICAgIHt7ICdTaG93IGluIG5hdmlnYXRvcicgfCB0cmFuc2xhdGUgfX1cbiAgICAgIDwvZGl2PlxuICAgIDwvYzh5LWxpLWJvZHk+XG4gIDwvYzh5LWxpPlxuXG4gIDxjOHktbGkgKmM4eUZvcj1cImxldCByZXBvcnQgb2YgcmVwb3J0cyQ7IGxldCBpID0gaW5kZXg7IGxvYWRNb3JlOiAnYXV0bydcIj5cbiAgICA8Yzh5LWxpLWljb24gW2ljb25dPVwicmVwb3J0Lmljb25cIj48L2M4eS1saS1pY29uPlxuICAgIDxjOHktbGktYm9keSBjbGFzcz1cImNvbnRlbnQtZmxleC02MFwiPlxuICAgICAgPGRpdiBjbGFzcz1cImNvbC0zXCI+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBjbGFzcz1cImJ0bi1jbGVhblwiXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgdGl0bGU9XCJ7eyByZXBvcnQubmFtZSB9fVwiXG4gICAgICAgICAgcm91dGVyTGluaz1cIi9yZXBvcnRzL3t7IHJlcG9ydC5pZCB9fVwiXG4gICAgICAgID5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtdHJ1bmNhdGVcIj5cbiAgICAgICAgICAgIHt7IHJlcG9ydC5uYW1lIH19XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImNvbC02XCI+XG4gICAgICAgIDxwIGNsYXNzPVwic21hbGwgdGV4dC10cnVuY2F0ZS13cmFwXCI+XG4gICAgICAgICAgPGVtIGNsYXNzPVwidGV4dC1tdXRlZFwiICpuZ0lmPVwiIXJlcG9ydC5kZXNjcmlwdGlvbjsgZWxzZSBzaG93RGVzY3JpcHRpb25cIj5cbiAgICAgICAgICAgIHt7ICdObyBkZXNjcmlwdGlvbiBhdmFpbGFibGUnIHwgdHJhbnNsYXRlIH19XG4gICAgICAgICAgPC9lbT5cbiAgICAgICAgICA8bmctdGVtcGxhdGUgI3Nob3dEZXNjcmlwdGlvbj5cbiAgICAgICAgICAgIHt7IHJlcG9ydC5kZXNjcmlwdGlvbiB9fVxuICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDwvcD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImNvbC0yIGZpdC1oLTIwIG0tdC14cy04XCI+XG4gICAgICAgIDxsYWJlbCBjbGFzcz1cImM4eS1zd2l0Y2ggYzh5LXN3aXRjaC0taW5saW5lXCIgdGl0bGU9XCJ7eyAnU2hvdyBpbiBuYXZpZ2F0b3InIHwgdHJhbnNsYXRlIH19XCI+XG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICBbKG5nTW9kZWwpXT1cIiEhcmVwb3J0LmM4eV9Jc05hdmlnYXRvck5vZGVcIlxuICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgIChjaGFuZ2UpPVwidXBkYXRlKHJlcG9ydClcIlxuICAgICAgICAgIC8+XG4gICAgICAgICAgPHNwYW4+PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwidmlzaWJsZS14c1wiPlxuICAgICAgICAgICAge3sgJ1Nob3cgaW4gbmF2aWdhdG9yJyB8IHRyYW5zbGF0ZSB9fVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPC9sYWJlbD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImNvbC0xIGhpZGRlbi14c1wiPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgY2xhc3M9XCJidG4gYnRuLWRvdCBidG4tZG90LS1kYW5nZXIgc2hvd09uSG92ZXIgbS1sLWF1dG8gZC1mbGV4XCJcbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cIidSZW1vdmUgcmVwb3J0JyB8IHRyYW5zbGF0ZVwiXG4gICAgICAgICAgdG9vbHRpcD1cInt7ICdSZW1vdmUgcmVwb3J0JyB8IHRyYW5zbGF0ZSB9fVwiXG4gICAgICAgICAgW2RlbGF5XT1cIjUwMFwiXG4gICAgICAgICAgKGNsaWNrKT1cImRlbGV0ZShyZXBvcnQpXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxpIGM4eUljb249XCJtaW51cy1jaXJjbGVcIj48L2k+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwidmlzaWJsZS14cyBwLXQtOCB0ZXh0LXJpZ2h0XCI+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc21cIlxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIHRpdGxlPVwie3sgJ1JlbW92ZSByZXBvcnQnIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICAgICAoY2xpY2spPVwiZGVsZXRlKHJlcG9ydClcIlxuICAgICAgICA+XG4gICAgICAgICAgPGkgYzh5SWNvbj1cImRlbGV0ZVwiPjwvaT5cbiAgICAgICAgICB7eyAnUmVtb3ZlIHJlcG9ydCcgfCB0cmFuc2xhdGUgfX1cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2M4eS1saS1ib2R5PlxuICA8L2M4eS1saT5cbjwvYzh5LWxpc3QtZ3JvdXA+XG5cbjxjOHktdWktZW1wdHktc3RhdGVcbiAgKm5nSWY9XCIocmVwb3J0cyQgfCBhc3luYyk/LmRhdGEubGVuZ3RoID09PSAwXCJcbiAgW2ljb25dPVwiJ2M4eS1yZXBvcnRzJ1wiXG4gIFt0aXRsZV09XCInVGhlcmUgYXJlIG5vIHJlcG9ydHMgZGVmaW5lZC4nIHwgdHJhbnNsYXRlXCJcbiAgW3N1YnRpdGxlXT1cIidBZGQgYSByZXBvcnQgZmlyc3QuJyB8IHRyYW5zbGF0ZVwiXG4+XG4gIDxwPlxuICAgIDxidXR0b25cbiAgICAgIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCJcbiAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgdGl0bGU9XCJ7eyAnQWRkIHJlcG9ydCcgfCB0cmFuc2xhdGUgfX1cIlxuICAgICAgW2F0dHIuZGF0YS1jeV09XCIncmVwb3J0cy1hZGQtcmVwb3J0LWVtcHR5LXN0YXRlLWJ1dHRvbidcIlxuICAgICAgW2Rpc2FibGVkXT1cIiFjYW5BZGRSZXBvcnRcIlxuICAgICAgKGNsaWNrKT1cImFkZCgpXCJcbiAgICA+XG4gICAgICB7eyAnQWRkIHJlcG9ydCcgfCB0cmFuc2xhdGUgfX1cbiAgICA8L2J1dHRvbj5cbiAgPC9wPlxuICA8cCBjOHktZ3VpZGUtZG9jcz5cbiAgICA8c21hbGwgdHJhbnNsYXRlIG5nTm9uQmluZGFibGU+XG4gICAgICBGaW5kIG91dCBtb3JlIGluIHRoZVxuICAgICAgPGEgYzh5LWd1aWRlLWhyZWY9XCJ1c2Vycy1ndWlkZS9jb2NrcGl0LyNyZXBvcnRzXCI+VXNlciBndWlkZWBLRUVQX09SSUdJTkFMYDwvYT5cbiAgICAgIC5cbiAgICA8L3NtYWxsPlxuICA8L3A+XG48L2M4eS11aS1lbXB0eS1zdGF0ZT5cbiIsImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFjdGl2YXRlZFJvdXRlU25hcHNob3QgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgQ29udGV4dERhc2hib2FyZFR5cGUgfSBmcm9tICcuLi9jb250ZXh0LWRhc2hib2FyZC5tb2RlbCc7XG5pbXBvcnQgeyBDb250ZXh0RGFzaGJvYXJkU2VydmljZSB9IGZyb20gJy4uL2NvbnRleHQtZGFzaGJvYXJkLnNlcnZpY2UnO1xuaW1wb3J0IHsgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgZnJvbSwgT2JzZXJ2YWJsZSwgb2YgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFRhYiB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgUmVwb3J0RGFzaGJvYXJkR3VhcmQge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNvbnRleHREYXNoYm9hcmRTZXJ2aWNlOiBDb250ZXh0RGFzaGJvYXJkU2VydmljZSkge31cblxuICBjYW5BY3RpdmF0ZShyb3V0ZTogQWN0aXZhdGVkUm91dGVTbmFwc2hvdCk6IE9ic2VydmFibGU8Ym9vbGVhbiB8IFRhYltdPiB7XG4gICAgY29uc3QgcmVwb3J0SWQgPSByb3V0ZS5kYXRhLmNvbnRleHREYXRhICYmIHJvdXRlLmRhdGEuY29udGV4dERhdGEuaWQ7XG4gICAgcmV0dXJuIGZyb20oXG4gICAgICB0aGlzLmNvbnRleHREYXNoYm9hcmRTZXJ2aWNlLmFjdGl2YXRlRGFzaGJvYXJkcyhyb3V0ZSwgW0NvbnRleHREYXNoYm9hcmRUeXBlLk5hbWVkXSlcbiAgICApLnBpcGUoXG4gICAgICB0YXAocmVzID0+IHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkocmVzKSAmJiByZXMubGVuZ3RoID09PSAwXG4gICAgICAgICAgPyB0aGlzLmNyZWF0ZURhc2hib2FyZElmTm90RXhpc3QocmVwb3J0SWQpXG4gICAgICAgICAgOiBvZih0cnVlKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIGNyZWF0ZURhc2hib2FyZElmTm90RXhpc3QocmVwb3J0SWQpIHtcbiAgICBjb25zdCBkYXNoYm9hcmRDZmcgPSB7fTtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0RGFzaGJvYXJkU2VydmljZVxuICAgICAgLmNyZWF0ZShkYXNoYm9hcmRDZmcsIHVuZGVmaW5lZCwgYHJlcG9ydF8ke3JlcG9ydElkfWApXG4gICAgICAudGhlbigoKSA9PiB0cnVlKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFJvdXRlck1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBDb3JlTW9kdWxlLCBob29rTmF2aWdhdG9yLCBob29rUm91dGUsIFZpZXdDb250ZXh0IH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5pbXBvcnQgeyBDb250ZXh0RGFzaGJvYXJkTW9kdWxlIH0gZnJvbSAnLi4vY29udGV4dC1kYXNoYm9hcmQubW9kdWxlJztcblxuaW1wb3J0IHsgQ29udGV4dERhc2hib2FyZENvbXBvbmVudCB9IGZyb20gJy4uL2NvbnRleHQtZGFzaGJvYXJkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBSZXBvcnREYXNoYm9hcmRHdWFyZCB9IGZyb20gJy4vcmVwb3J0LWRhc2hib2FyZC5ndWFyZCc7XG5pbXBvcnQgeyBSZXBvcnREYXNoYm9hcmROYXZpZ2F0aW9uRmFjdG9yeSB9IGZyb20gJy4vcmVwb3J0LWRhc2hib2FyZC1uYXZpZ2F0aW9uLmZhY3RvcnknO1xuaW1wb3J0IHsgUmVwb3J0RGFzaGJvYXJkTGlzdENvbXBvbmVudCB9IGZyb20gJy4vcmVwb3J0LWRhc2hib2FyZC1saXN0LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBSZXBvcnREYXNoYm9hcmRTZXJ2aWNlIH0gZnJvbSAnLi9yZXBvcnQtZGFzaGJvYXJkLnNlcnZpY2UnO1xuaW1wb3J0IHsgUG9wb3Zlck1vZHVsZSB9IGZyb20gJ25neC1ib290c3RyYXAvcG9wb3Zlcic7XG5pbXBvcnQgeyBUb29sdGlwTW9kdWxlIH0gZnJvbSAnbmd4LWJvb3RzdHJhcC90b29sdGlwJztcblxuQE5nTW9kdWxlKHtcbiAgZGVjbGFyYXRpb25zOiBbUmVwb3J0RGFzaGJvYXJkTGlzdENvbXBvbmVudF0sXG4gIGVudHJ5Q29tcG9uZW50czogW10sXG4gIGltcG9ydHM6IFtcbiAgICBDb3JlTW9kdWxlLFxuICAgIENvbnRleHREYXNoYm9hcmRNb2R1bGUsXG4gICAgVG9vbHRpcE1vZHVsZS5mb3JSb290KCksXG4gICAgUm91dGVyTW9kdWxlLmZvckNoaWxkKFtcbiAgICAgIHtcbiAgICAgICAgcGF0aDogJ3JlcG9ydHMnLFxuICAgICAgICBjb21wb25lbnQ6IFJlcG9ydERhc2hib2FyZExpc3RDb21wb25lbnRcbiAgICAgIH1cbiAgICBdKSxcbiAgICBQb3BvdmVyTW9kdWxlXG4gIF0sXG4gIHByb3ZpZGVyczogW1xuICAgIFJlcG9ydERhc2hib2FyZEd1YXJkLFxuICAgIFJlcG9ydERhc2hib2FyZFNlcnZpY2UsXG4gICAgaG9va1JvdXRlKHtcbiAgICAgIHBhdGg6ICdkYXNoYm9hcmQvOmRhc2hib2FyZElkJyxcbiAgICAgIGNvbXBvbmVudDogQ29udGV4dERhc2hib2FyZENvbXBvbmVudCxcbiAgICAgIGNhbkFjdGl2YXRlOiBbUmVwb3J0RGFzaGJvYXJkR3VhcmRdLFxuICAgICAgY29udGV4dDogVmlld0NvbnRleHQuUmVwb3J0XG4gICAgfSksXG4gICAgaG9va05hdmlnYXRvcihSZXBvcnREYXNoYm9hcmROYXZpZ2F0aW9uRmFjdG9yeSlcbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBSZXBvcnREYXNoYm9hcmRNb2R1bGUge31cbiIsIi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9pbmRleCc7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@c8y/ngx-components/fesm2020/c8y-ngx-components-context-dashboard.mjs\n");

/***/ })

}]);