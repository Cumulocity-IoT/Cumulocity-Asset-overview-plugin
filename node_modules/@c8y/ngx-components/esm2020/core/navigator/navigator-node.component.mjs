// tslint:disable-next-line:max-line-length
import { Component, ComponentFactoryResolver, Input, QueryList, ViewChild, ViewChildren, ViewContainerRef, Output, EventEmitter } from '@angular/core';
import { RouterLinkActive } from '@angular/router';
import { NavigatorIconComponent } from './navigator-icon.component';
import { NavigatorNode } from './navigator-node';
import { NavigatorService } from './navigator.service';
import { PopoverConfirmComponent } from '../modal/popover-confirm.component';
import * as i0 from "@angular/core";
import * as i1 from "./navigator.service";
import * as i2 from "@angular/router";
import * as i3 from "ngx-bootstrap/collapse";
import * as i4 from "../common/icon.directive";
import * as i5 from "@angular/common";
import * as i6 from "../modal/popover-confirm.component";
import * as i7 from "../i18n/c8y-translate.pipe";
/**
 * Navigator node renderer.
 */
export class NavigatorNodeComponent {
    constructor(componentFactoryResolver, navigator) {
        this.componentFactoryResolver = componentFactoryResolver;
        this.navigator = navigator;
        /**
         * Event emitter responsible for broadcasting one of the following events: "icon", "expander" or "link" as string value.
         *
         * The type of event depends on where you click on the navigator node:
         * * clicking the icon will broadcast the event "icon",
         * * clicking the expander will broadcast the event "expander",
         * * clicking the label will broadcast the event "link".
         */
        this.nodeClick = new EventEmitter();
    }
    /**
     * @ignore
     */
    ngAfterViewInit() {
        this.childrenNodes.forEach(n => (n.parentNode = this));
        if (!this.node.component) {
            this.viewInitTimeout = setTimeout(() => {
                this.updateIcon();
                this.openOnFirstUrl();
                this.expandParentIfActive();
                this.node.confirm = this.confirm;
            });
        }
    }
    /**
     * Expands the navigator node when the URL matches the path provided in the node.
     */
    openOnFirstUrl() {
        if (this.navigator.openOnFirstUrl(this.node) && !this.node.open) {
            this.expandCollapse(true);
        }
    }
    /**
     * Returns the expander title.
     */
    get expandTitle() {
        return !this.node.open ? 'Expand' : 'Collapse';
    }
    /**
     * Click event handler.
     *
     * @param {string} from Source of the click event.
     * @param event DOM event.
     */
    click(from = 'link', $event) {
        let open;
        switch (from) {
            case "expander" /* ClickEventSource.EXPANDER */:
                if ($event) {
                    $event.preventDefault();
                    $event.stopPropagation();
                }
                open = !this.node.open;
                break;
            case "icon" /* ClickEventSource.ICON */:
            case "link" /* ClickEventSource.LINK */:
                open = this.routerLinkActive && this.routerLinkActive.isActive ? true : !this.node.open;
                break;
        }
        this.handleExpandCollapse(open, from, $event);
        this.nodeClick.emit(from);
    }
    /**
     * Expands or collapses the navigator node and its children recursively.
     *
     * @param {boolean} open Open or close the node.
     * @param {boolean} recursive Open or close the children.
     * @param {ClickOptions} forNode Click options.
     */
    expandCollapse(open, recursive, forNode = {}) {
        this.node.open = open;
        if (recursive) {
            this.childrenNodes.forEach(n => n.expandCollapse(open, recursive));
        }
        forNode.open = open;
        this.node.click(forNode);
    }
    /**
     * @ignore
     */
    ngOnDestroy() {
        clearTimeout(this.viewInitTimeout);
        if (this.node) {
            this.node.destroy();
        }
    }
    handleExpandCollapse(open, from, $event) {
        if (open === this.node.open ||
            (this.node.path && !open && from !== "expander" /* ClickEventSource.EXPANDER */)) {
            return;
        }
        this.expandCollapse(open, false, { [from]: true, $event });
    }
    expandParentIfActive() {
        if (this.routerLinkActive && this.routerLinkActive.isActive && this.parentNode) {
            this.parentNode.expandCollapse(true);
        }
    }
    updateIcon() {
        if (this.node.iconTemplate) {
            this.updateIconTemplate();
        }
        else {
            this.updateIconComponent();
        }
    }
    updateIconComponent() {
        let componentType = NavigatorIconComponent;
        if (this.node && this.node.iconComponent) {
            componentType = this.node.iconComponent;
        }
        this.iconSlot.clear();
        const componentRef = this.iconSlot.createComponent(componentType, {
            injector: this.node.injector
        });
        componentRef.instance.node = this.node;
    }
    updateIconTemplate() {
        this.iconSlot.clear();
        this.iconSlot.createEmbeddedView(this.node.iconTemplate, undefined, {
            injector: this.node.injector
        });
    }
}
NavigatorNodeComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.0.6", ngImport: i0, type: NavigatorNodeComponent, deps: [{ token: i0.ComponentFactoryResolver }, { token: i1.NavigatorService }], target: i0.ɵɵFactoryTarget.Component });
NavigatorNodeComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.0.6", type: NavigatorNodeComponent, selector: "c8y-navigator-node", inputs: { node: "node", isRoot: "isRoot" }, outputs: { nodeClick: "nodeClick" }, viewQueries: [{ propertyName: "iconSlot", first: true, predicate: ["icon"], descendants: true, read: ViewContainerRef }, { propertyName: "routerLinkActive", first: true, predicate: RouterLinkActive, descendants: true }, { propertyName: "confirm", first: true, predicate: PopoverConfirmComponent, descendants: true }, { propertyName: "childrenNodes", predicate: NavigatorNodeComponent, descendants: true }], ngImport: i0, template: "<ng-container *ngIf=\"node.component\">\n  <ng-container *ngComponentOutlet=\"node.component; injector: node.injector\"></ng-container>\n</ng-container>\n\n<div\n  *ngIf=\"!node.component\"\n  class=\"slot\"\n  [hidden]=\"node.hidden\"\n  (dragstart)=\"node.dragStart($event)\"\n  (dragend)=\"node.dragEnd($event)\"\n  (drop)=\"node.drop($event)\"\n  [draggable]=\"node.draggable\"\n  [ngClass]=\"{ dragged: node.dragged, disabled: node.loading }\"\n>\n  <ng-container>\n    <div\n      class=\"link\"\n      [routerLink]=\"node.canNavigate ? node.path : undefined\"\n      [routerLinkActive]=\"node.canNavigate ? 'active' : ''\"\n      [routerLinkActiveOptions]=\"{ exact: node.routerLinkExact }\"\n      tabindex=\"-1\"\n    >\n      <ng-container *ngTemplateOutlet=\"navicon\"></ng-container>\n      <button\n        class=\"btn-clean\"\n        type=\"button\"\n        title=\"{{ node.label | translate }}\"\n        draggable=\"false\"\n        (dragover)=\"node.canDrop && $event.preventDefault()\"\n        (dragenter)=\"node.canDrop && node.dragEnter($event)\"\n        (dragleave)=\"node.canDrop && node.dragLeave($event)\"\n        [attr.data-cy]=\"node.label\"\n        [attr.id]=\"isRoot ? node.id : undefined\"\n        (click)=\"click(node.canNavigate ? 'link' : 'expander', $event)\"\n        [ngClass]=\"{\n          'root-link': isRoot,\n          open: node.open && node.hasChildren,\n          parent: node.hasChildren,\n          'dragged-hover': node.draggedHover && !node.dragged\n        }\"\n        [attr.aria-expanded]=\"node.hasChildren ? node.open : null\"\n      >\n        <ng-container *ngTemplateOutlet=\"inner\"></ng-container>\n      </button>\n    </div>\n  </ng-container>\n\n  <div\n    class=\"children panel-expand expand\"\n    *ngIf=\"node.children.length\"\n    [collapse]=\"!node.open\"\n    [isAnimated]=\"true\"\n  >\n    <c8y-navigator-node\n      *ngFor=\"let childNode of node.children\"\n      [node]=\"childNode\"\n      (nodeClick)=\"nodeClick.emit($event)\"\n    ></c8y-navigator-node>\n  </div>\n</div>\n\n<!-- icon -->\n<ng-template #navicon>\n  <!-- loader -->\n  <i\n    *ngIf=\"node.loading && !isRoot\"\n    class=\"icon-spin loadingIndicator\"\n    style=\"{{ isRoot ? 'padding-left: 16px;' : null }}\"\n    [c8yIcon]=\"'circle-o-notch'\"\n  ></i>\n  <ng-container #icon></ng-container>\n</ng-template>\n\n<ng-template #inner>\n\n  <!--title  -->\n  <span>{{ node.label | translate }}</span>\n\n  <!--expander  -->\n  <i\n    role=\"button\"\n    class=\"expander\"\n    [attr.aria-label]=\"expandTitle\"\n    *ngIf=\"node.hasChildren\"\n    [c8yIcon]=\"'chevron-down'\"\n    (click)=\"click('expander', $event)\"\n    data-cy=\"c8y-navigator-node--expander\"\n  ></i>\n\n  <!--  Popover confirm  -->\n  <c8y-popover-confirm triggers=\"focus\" containerClass=\"navigator-popover\"></c8y-popover-confirm>\n</ng-template>\n", dependencies: [{ kind: "directive", type: i2.RouterLink, selector: ":not(a):not(area)[routerLink]", inputs: ["queryParams", "fragment", "queryParamsHandling", "preserveFragment", "skipLocationChange", "replaceUrl", "state", "relativeTo", "routerLink"] }, { kind: "directive", type: i2.RouterLinkActive, selector: "[routerLinkActive]", inputs: ["routerLinkActiveOptions", "ariaCurrentWhenActive", "routerLinkActive"], outputs: ["isActiveChange"], exportAs: ["routerLinkActive"] }, { kind: "directive", type: i3.CollapseDirective, selector: "[collapse]", inputs: ["display", "isAnimated", "collapse"], outputs: ["collapsed", "collapses", "expanded", "expands"], exportAs: ["bs-collapse"] }, { kind: "directive", type: i4.IconDirective, selector: "[c8yIcon]", inputs: ["c8yIcon"] }, { kind: "directive", type: i5.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i5.NgComponentOutlet, selector: "[ngComponentOutlet]", inputs: ["ngComponentOutlet", "ngComponentOutletInjector", "ngComponentOutletContent", "ngComponentOutletNgModule", "ngComponentOutletNgModuleFactory"] }, { kind: "directive", type: i5.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i5.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i5.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "component", type: i6.PopoverConfirmComponent, selector: "c8y-popover-confirm", inputs: ["buttons", "message", "title", "isOpen", "containerClass", "placement", "outsideClick"] }, { kind: "component", type: NavigatorNodeComponent, selector: "c8y-navigator-node", inputs: ["node", "isRoot"], outputs: ["nodeClick"] }, { kind: "pipe", type: i7.C8yTranslatePipe, name: "translate" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.0.6", ngImport: i0, type: NavigatorNodeComponent, decorators: [{
            type: Component,
            args: [{ selector: 'c8y-navigator-node', template: "<ng-container *ngIf=\"node.component\">\n  <ng-container *ngComponentOutlet=\"node.component; injector: node.injector\"></ng-container>\n</ng-container>\n\n<div\n  *ngIf=\"!node.component\"\n  class=\"slot\"\n  [hidden]=\"node.hidden\"\n  (dragstart)=\"node.dragStart($event)\"\n  (dragend)=\"node.dragEnd($event)\"\n  (drop)=\"node.drop($event)\"\n  [draggable]=\"node.draggable\"\n  [ngClass]=\"{ dragged: node.dragged, disabled: node.loading }\"\n>\n  <ng-container>\n    <div\n      class=\"link\"\n      [routerLink]=\"node.canNavigate ? node.path : undefined\"\n      [routerLinkActive]=\"node.canNavigate ? 'active' : ''\"\n      [routerLinkActiveOptions]=\"{ exact: node.routerLinkExact }\"\n      tabindex=\"-1\"\n    >\n      <ng-container *ngTemplateOutlet=\"navicon\"></ng-container>\n      <button\n        class=\"btn-clean\"\n        type=\"button\"\n        title=\"{{ node.label | translate }}\"\n        draggable=\"false\"\n        (dragover)=\"node.canDrop && $event.preventDefault()\"\n        (dragenter)=\"node.canDrop && node.dragEnter($event)\"\n        (dragleave)=\"node.canDrop && node.dragLeave($event)\"\n        [attr.data-cy]=\"node.label\"\n        [attr.id]=\"isRoot ? node.id : undefined\"\n        (click)=\"click(node.canNavigate ? 'link' : 'expander', $event)\"\n        [ngClass]=\"{\n          'root-link': isRoot,\n          open: node.open && node.hasChildren,\n          parent: node.hasChildren,\n          'dragged-hover': node.draggedHover && !node.dragged\n        }\"\n        [attr.aria-expanded]=\"node.hasChildren ? node.open : null\"\n      >\n        <ng-container *ngTemplateOutlet=\"inner\"></ng-container>\n      </button>\n    </div>\n  </ng-container>\n\n  <div\n    class=\"children panel-expand expand\"\n    *ngIf=\"node.children.length\"\n    [collapse]=\"!node.open\"\n    [isAnimated]=\"true\"\n  >\n    <c8y-navigator-node\n      *ngFor=\"let childNode of node.children\"\n      [node]=\"childNode\"\n      (nodeClick)=\"nodeClick.emit($event)\"\n    ></c8y-navigator-node>\n  </div>\n</div>\n\n<!-- icon -->\n<ng-template #navicon>\n  <!-- loader -->\n  <i\n    *ngIf=\"node.loading && !isRoot\"\n    class=\"icon-spin loadingIndicator\"\n    style=\"{{ isRoot ? 'padding-left: 16px;' : null }}\"\n    [c8yIcon]=\"'circle-o-notch'\"\n  ></i>\n  <ng-container #icon></ng-container>\n</ng-template>\n\n<ng-template #inner>\n\n  <!--title  -->\n  <span>{{ node.label | translate }}</span>\n\n  <!--expander  -->\n  <i\n    role=\"button\"\n    class=\"expander\"\n    [attr.aria-label]=\"expandTitle\"\n    *ngIf=\"node.hasChildren\"\n    [c8yIcon]=\"'chevron-down'\"\n    (click)=\"click('expander', $event)\"\n    data-cy=\"c8y-navigator-node--expander\"\n  ></i>\n\n  <!--  Popover confirm  -->\n  <c8y-popover-confirm triggers=\"focus\" containerClass=\"navigator-popover\"></c8y-popover-confirm>\n</ng-template>\n" }]
        }], ctorParameters: function () { return [{ type: i0.ComponentFactoryResolver }, { type: i1.NavigatorService }]; }, propDecorators: { iconSlot: [{
                type: ViewChild,
                args: ['icon', { read: ViewContainerRef, static: false }]
            }], node: [{
                type: Input
            }], isRoot: [{
                type: Input
            }], routerLinkActive: [{
                type: ViewChild,
                args: [RouterLinkActive, { static: false }]
            }], childrenNodes: [{
                type: ViewChildren,
                args: [NavigatorNodeComponent]
            }], nodeClick: [{
                type: Output
            }], confirm: [{
                type: ViewChild,
                args: [PopoverConfirmComponent, { static: false }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmF2aWdhdG9yLW5vZGUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vY29yZS9uYXZpZ2F0b3IvbmF2aWdhdG9yLW5vZGUuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vY29yZS9uYXZpZ2F0b3IvbmF2aWdhdG9yLW5vZGUuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsMkNBQTJDO0FBQzNDLE9BQU8sRUFDTCxTQUFTLEVBQ1Qsd0JBQXdCLEVBQ3hCLEtBQUssRUFDTCxTQUFTLEVBQ1QsU0FBUyxFQUNULFlBQVksRUFDWixnQkFBZ0IsRUFDaEIsTUFBTSxFQUNOLFlBQVksRUFFYixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNuRCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUNwRSxPQUFPLEVBQUUsYUFBYSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQy9ELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3ZELE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLG9DQUFvQyxDQUFDOzs7Ozs7Ozs7QUFRN0U7O0dBRUc7QUFLSCxNQUFNLE9BQU8sc0JBQXNCO0lBZ0RqQyxZQUNVLHdCQUFrRCxFQUNsRCxTQUEyQjtRQUQzQiw2QkFBd0IsR0FBeEIsd0JBQXdCLENBQTBCO1FBQ2xELGNBQVMsR0FBVCxTQUFTLENBQWtCO1FBeEJyQzs7Ozs7OztXQU9HO1FBQ08sY0FBUyxHQUF5QixJQUFJLFlBQVksRUFBRSxDQUFDO0lBaUI1RCxDQUFDO0lBRUo7O09BRUc7SUFDSCxlQUFlO1FBQ2IsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztR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Q0FBQyxZQUFZLEVBQUUsU0FBUyxFQUFFO1lBQ2xFLFFBQVEsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVE7U0FDN0IsQ0FBQyxDQUFDO0lBQ0wsQ0FBQzs7bUhBbExVLHNCQUFzQjt1R0FBdEIsc0JBQXNCLHdOQUlOLGdCQUFnQixnRUFlaEMsZ0JBQWdCLDBFQW9CaEIsdUJBQXVCLG1FQWZwQixzQkFBc0IsZ0RDeER0QyxtMEZBNEZBLHdyREQ1RGEsc0JBQXNCOzJGQUF0QixzQkFBc0I7a0JBSmxDLFNBQVM7K0JBQ0Usb0JBQW9COzhJQU9nQyxRQUFRO3NCQUFyRSxTQUFTO3VCQUFDLE1BQU0sRUFBRSxFQUFFLElBQUksRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFO2dCQUtuRCxJQUFJO3NCQUFaLEtBQUs7Z0JBS0csTUFBTTtzQkFBZCxLQUFLO2dCQUswQyxnQkFBZ0I7c0JBQS9ELFNBQVM7dUJBQUMsZ0JBQWdCLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFO2dCQUtSLGFBQWE7c0JBQWxELFlBQVk7dUJBQUMsc0JBQXNCO2dCQVUxQixTQUFTO3NCQUFsQixNQUFNO2dCQUtnRCxPQUFPO3NCQUE3RCxTQUFTO3VCQUFDLHVCQUF1QixFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSIsInNvdXJjZXNDb250ZW50IjpbIi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcbmltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxuICBJbnB1dCxcbiAgUXVlcnlMaXN0LFxuICBWaWV3Q2hpbGQsXG4gIFZpZXdDaGlsZHJlbixcbiAgVmlld0NvbnRhaW5lclJlZixcbiAgT3V0cHV0LFxuICBFdmVudEVtaXR0ZXIsXG4gIE9uRGVzdHJveVxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFJvdXRlckxpbmtBY3RpdmUgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgTmF2aWdhdG9ySWNvbkNvbXBvbmVudCB9IGZyb20gJy4vbmF2aWdhdG9yLWljb24uY29tcG9uZW50JztcbmltcG9ydCB7IE5hdmlnYXRvck5vZGUsIENsaWNrT3B0aW9ucyB9IGZyb20gJy4vbmF2aWdhdG9yLW5vZGUnO1xuaW1wb3J0IHsgTmF2aWdhdG9yU2VydmljZSB9IGZyb20gJy4vbmF2aWdhdG9yLnNlcnZpY2UnO1xuaW1wb3J0IHsgUG9wb3ZlckNvbmZpcm1Db21wb25lbnQgfSBmcm9tICcuLi9tb2RhbC9wb3BvdmVyLWNvbmZpcm0uY29tcG9uZW50JztcblxuZXhwb3J0IGNvbnN0IGVudW0gQ2xpY2tFdmVudFNvdXJjZSB7XG4gIElDT04gPSAnaWNvbicsXG4gIEVYUEFOREVSID0gJ2V4cGFuZGVyJyxcbiAgTElOSyA9ICdsaW5rJ1xufVxuXG4vKipcbiAqIE5hdmlnYXRvciBub2RlIHJlbmRlcmVyLlxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjOHktbmF2aWdhdG9yLW5vZGUnLFxuICB0ZW1wbGF0ZVVybDogJy4vbmF2aWdhdG9yLW5vZGUuY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIE5hdmlnYXRvck5vZGVDb21wb25lbnQgaW1wbGVtZW50cyBPbkRlc3Ryb3kge1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgQFZpZXdDaGlsZCgnaWNvbicsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiwgc3RhdGljOiBmYWxzZSB9KSBpY29uU2xvdDogVmlld0NvbnRhaW5lclJlZjtcblxuICAvKipcbiAgICogTmF2aWdhdG9yIG5vZGUuXG4gICAqL1xuICBASW5wdXQoKSBub2RlOiBOYXZpZ2F0b3JOb2RlO1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIG5hdmlnYXRvciBub2RlIGlzIGEgcm9vdCBub2RlICh0b3Agbm9kZSBpbiB0aGUgaGllcmFyY2h5KS5cbiAgICovXG4gIEBJbnB1dCgpIGlzUm9vdDogYm9vbGVhbjtcblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgQFZpZXdDaGlsZChSb3V0ZXJMaW5rQWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSkgcm91dGVyTGlua0FjdGl2ZTogUm91dGVyTGlua0FjdGl2ZTtcblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgQFZpZXdDaGlsZHJlbihOYXZpZ2F0b3JOb2RlQ29tcG9uZW50KSBjaGlsZHJlbk5vZGVzOiBRdWVyeUxpc3Q8TmF2aWdhdG9yTm9kZUNvbXBvbmVudD47XG5cbiAgLyoqXG4gICAqIEV2ZW50IGVtaXR0ZXIgcmVzcG9uc2libGUgZm9yIGJyb2FkY2FzdGluZyBvbmUgb2YgdGhlIGZvbGxvd2luZyBldmVudHM6IFwiaWNvblwiLCBcImV4cGFuZGVyXCIgb3IgXCJsaW5rXCIgYXMgc3RyaW5nIHZhbHVlLlxuICAgKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudCBkZXBlbmRzIG9uIHdoZXJlIHlvdSBjbGljayBvbiB0aGUgbmF2aWdhdG9yIG5vZGU6XG4gICAqICogY2xpY2tpbmcgdGhlIGljb24gd2lsbCBicm9hZGNhc3QgdGhlIGV2ZW50IFwiaWNvblwiLFxuICAgKiAqIGNsaWNraW5nIHRoZSBleHBhbmRlciB3aWxsIGJyb2FkY2FzdCB0aGUgZXZlbnQgXCJleHBhbmRlclwiLFxuICAgKiAqIGNsaWNraW5nIHRoZSBsYWJlbCB3aWxsIGJyb2FkY2FzdCB0aGUgZXZlbnQgXCJsaW5rXCIuXG4gICAqL1xuICBAT3V0cHV0KCkgbm9kZUNsaWNrOiBFdmVudEVtaXR0ZXI8c3RyaW5nPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgQFZpZXdDaGlsZChQb3BvdmVyQ29uZmlybUNvbXBvbmVudCwgeyBzdGF0aWM6IGZhbHNlIH0pIGNvbmZpcm06IFBvcG92ZXJDb25maXJtQ29tcG9uZW50O1xuXG4gIC8qKlxuICAgKiBQYXJlbnQgbm9kZSByZW5kZXJlci5cbiAgICovXG4gIHBhcmVudE5vZGU6IE5hdmlnYXRvck5vZGVDb21wb25lbnQ7XG5cbiAgcHJpdmF0ZSB2aWV3SW5pdFRpbWVvdXQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBjb21wb25lbnRGYWN0b3J5UmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcbiAgICBwcml2YXRlIG5hdmlnYXRvcjogTmF2aWdhdG9yU2VydmljZVxuICApIHt9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICB0aGlzLmNoaWxkcmVuTm9kZXMuZm9yRWFjaChuID0+IChuLnBhcmVudE5vZGUgPSB0aGlzKSk7XG4gICAgaWYgKCF0aGlzLm5vZGUuY29tcG9uZW50KSB7XG4gICAgICB0aGlzLnZpZXdJbml0VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZUljb24oKTtcbiAgICAgICAgdGhpcy5vcGVuT25GaXJzdFVybCgpO1xuICAgICAgICB0aGlzLmV4cGFuZFBhcmVudElmQWN0aXZlKCk7XG4gICAgICAgIHRoaXMubm9kZS5jb25maXJtID0gdGhpcy5jb25maXJtO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4cGFuZHMgdGhlIG5hdmlnYXRvciBub2RlIHdoZW4gdGhlIFVSTCBtYXRjaGVzIHRoZSBwYXRoIHByb3ZpZGVkIGluIHRoZSBub2RlLlxuICAgKi9cbiAgb3Blbk9uRmlyc3RVcmwoKSB7XG4gICAgaWYgKHRoaXMubmF2aWdhdG9yLm9wZW5PbkZpcnN0VXJsKHRoaXMubm9kZSkgJiYgIXRoaXMubm9kZS5vcGVuKSB7XG4gICAgICB0aGlzLmV4cGFuZENvbGxhcHNlKHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBleHBhbmRlciB0aXRsZS5cbiAgICovXG4gIGdldCBleHBhbmRUaXRsZSgpIHtcbiAgICByZXR1cm4gIXRoaXMubm9kZS5vcGVuID8gJ0V4cGFuZCcgOiAnQ29sbGFwc2UnO1xuICB9XG5cbiAgLyoqXG4gICAqIENsaWNrIGV2ZW50IGhhbmRsZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmcm9tIFNvdXJjZSBvZiB0aGUgY2xpY2sgZXZlbnQuXG4gICAqIEBwYXJhbSBldmVudCBET00gZXZlbnQuXG4gICAqL1xuICBjbGljayhmcm9tOiAnaWNvbicgfCAnZXhwYW5kZXInIHwgJ2xpbmsnID0gJ2xpbmsnLCAkZXZlbnQ/OiBNb3VzZUV2ZW50KSB7XG4gICAgbGV0IG9wZW46IGJvb2xlYW47XG5cbiAgICBzd2l0Y2ggKGZyb20pIHtcbiAgICAgIGNhc2UgQ2xpY2tFdmVudFNvdXJjZS5FWFBBTkRFUjpcbiAgICAgICAgaWYgKCRldmVudCkge1xuICAgICAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBvcGVuID0gIXRoaXMubm9kZS5vcGVuO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ2xpY2tFdmVudFNvdXJjZS5JQ09OOlxuICAgICAgY2FzZSBDbGlja0V2ZW50U291cmNlLkxJTks6XG4gICAgICAgIG9wZW4gPSB0aGlzLnJvdXRlckxpbmtBY3RpdmUgJiYgdGhpcy5yb3V0ZXJMaW5rQWN0aXZlLmlzQWN0aXZlID8gdHJ1ZSA6ICF0aGlzLm5vZGUub3BlbjtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHRoaXMuaGFuZGxlRXhwYW5kQ29sbGFwc2Uob3BlbiwgZnJvbSwgJGV2ZW50KTtcbiAgICB0aGlzLm5vZGVDbGljay5lbWl0KGZyb20pO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cGFuZHMgb3IgY29sbGFwc2VzIHRoZSBuYXZpZ2F0b3Igbm9kZSBhbmQgaXRzIGNoaWxkcmVuIHJlY3Vyc2l2ZWx5LlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wZW4gT3BlbiBvciBjbG9zZSB0aGUgbm9kZS5cbiAgICogQHBhcmFtIHtib29sZWFufSByZWN1cnNpdmUgT3BlbiBvciBjbG9zZSB0aGUgY2hpbGRyZW4uXG4gICAqIEBwYXJhbSB7Q2xpY2tPcHRpb25zfSBmb3JOb2RlIENsaWNrIG9wdGlvbnMuXG4gICAqL1xuICBleHBhbmRDb2xsYXBzZShvcGVuLCByZWN1cnNpdmU/LCBmb3JOb2RlOiBDbGlja09wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMubm9kZS5vcGVuID0gb3BlbjtcbiAgICBpZiAocmVjdXJzaXZlKSB7XG4gICAgICB0aGlzLmNoaWxkcmVuTm9kZXMuZm9yRWFjaChuID0+IG4uZXhwYW5kQ29sbGFwc2Uob3BlbiwgcmVjdXJzaXZlKSk7XG4gICAgfVxuICAgIGZvck5vZGUub3BlbiA9IG9wZW47XG4gICAgdGhpcy5ub2RlLmNsaWNrKGZvck5vZGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnZpZXdJbml0VGltZW91dCk7XG5cbiAgICBpZiAodGhpcy5ub2RlKSB7XG4gICAgICB0aGlzLm5vZGUuZGVzdHJveSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlRXhwYW5kQ29sbGFwc2Uob3BlbiwgZnJvbSwgJGV2ZW50KSB7XG4gICAgaWYgKFxuICAgICAgb3BlbiA9PT0gdGhpcy5ub2RlLm9wZW4gfHxcbiAgICAgICh0aGlzLm5vZGUucGF0aCAmJiAhb3BlbiAmJiBmcm9tICE9PSBDbGlja0V2ZW50U291cmNlLkVYUEFOREVSKVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmV4cGFuZENvbGxhcHNlKG9wZW4sIGZhbHNlLCB7IFtmcm9tXTogdHJ1ZSwgJGV2ZW50IH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBleHBhbmRQYXJlbnRJZkFjdGl2ZSgpIHtcbiAgICBpZiAodGhpcy5yb3V0ZXJMaW5rQWN0aXZlICYmIHRoaXMucm91dGVyTGlua0FjdGl2ZS5pc0FjdGl2ZSAmJiB0aGlzLnBhcmVudE5vZGUpIHtcbiAgICAgIHRoaXMucGFyZW50Tm9kZS5leHBhbmRDb2xsYXBzZSh0cnVlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUljb24oKSB7XG4gICAgaWYgKHRoaXMubm9kZS5pY29uVGVtcGxhdGUpIHtcbiAgICAgIHRoaXMudXBkYXRlSWNvblRlbXBsYXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudXBkYXRlSWNvbkNvbXBvbmVudCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlSWNvbkNvbXBvbmVudCgpIHtcbiAgICBsZXQgY29tcG9uZW50VHlwZSA9IE5hdmlnYXRvckljb25Db21wb25lbnQ7XG4gICAgaWYgKHRoaXMubm9kZSAmJiB0aGlzLm5vZGUuaWNvbkNvbXBvbmVudCkge1xuICAgICAgY29tcG9uZW50VHlwZSA9IHRoaXMubm9kZS5pY29uQ29tcG9uZW50O1xuICAgIH1cbiAgICB0aGlzLmljb25TbG90LmNsZWFyKCk7XG4gICAgY29uc3QgY29tcG9uZW50UmVmID0gdGhpcy5pY29uU2xvdC5jcmVhdGVDb21wb25lbnQoY29tcG9uZW50VHlwZSwge1xuICAgICAgaW5qZWN0b3I6IHRoaXMubm9kZS5pbmplY3RvclxuICAgIH0pO1xuICAgIGNvbXBvbmVudFJlZi5pbnN0YW5jZS5ub2RlID0gdGhpcy5ub2RlO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVJY29uVGVtcGxhdGUoKSB7XG4gICAgdGhpcy5pY29uU2xvdC5jbGVhcigpO1xuICAgIHRoaXMuaWNvblNsb3QuY3JlYXRlRW1iZWRkZWRWaWV3KHRoaXMubm9kZS5pY29uVGVtcGxhdGUsIHVuZGVmaW5lZCwge1xuICAgICAgaW5qZWN0b3I6IHRoaXMubm9kZS5pbmplY3RvclxuICAgIH0pO1xuICB9XG59XG4iLCI8bmctY29udGFpbmVyICpuZ0lmPVwibm9kZS5jb21wb25lbnRcIj5cbiAgPG5nLWNvbnRhaW5lciAqbmdDb21wb25lbnRPdXRsZXQ9XCJub2RlLmNvbXBvbmVudDsgaW5qZWN0b3I6IG5vZGUuaW5qZWN0b3JcIj48L25nLWNvbnRhaW5lcj5cbjwvbmctY29udGFpbmVyPlxuXG48ZGl2XG4gICpuZ0lmPVwiIW5vZGUuY29tcG9uZW50XCJcbiAgY2xhc3M9XCJzbG90XCJcbiAgW2hpZGRlbl09XCJub2RlLmhpZGRlblwiXG4gIChkcmFnc3RhcnQpPVwibm9kZS5kcmFnU3RhcnQoJGV2ZW50KVwiXG4gIChkcmFnZW5kKT1cIm5vZGUuZHJhZ0VuZCgkZXZlbnQpXCJcbiAgKGRyb3ApPVwibm9kZS5kcm9wKCRldmVudClcIlxuICBbZHJhZ2dhYmxlXT1cIm5vZGUuZHJhZ2dhYmxlXCJcbiAgW25nQ2xhc3NdPVwieyBkcmFnZ2VkOiBub2RlLmRyYWdnZWQsIGRpc2FibGVkOiBub2RlLmxvYWRpbmcgfVwiXG4+XG4gIDxuZy1jb250YWluZXI+XG4gICAgPGRpdlxuICAgICAgY2xhc3M9XCJsaW5rXCJcbiAgICAgIFtyb3V0ZXJMaW5rXT1cIm5vZGUuY2FuTmF2aWdhdGUgPyBub2RlLnBhdGggOiB1bmRlZmluZWRcIlxuICAgICAgW3JvdXRlckxpbmtBY3RpdmVdPVwibm9kZS5jYW5OYXZpZ2F0ZSA/ICdhY3RpdmUnIDogJydcIlxuICAgICAgW3JvdXRlckxpbmtBY3RpdmVPcHRpb25zXT1cInsgZXhhY3Q6IG5vZGUucm91dGVyTGlua0V4YWN0IH1cIlxuICAgICAgdGFiaW5kZXg9XCItMVwiXG4gICAgPlxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cIm5hdmljb25cIj48L25nLWNvbnRhaW5lcj5cbiAgICAgIDxidXR0b25cbiAgICAgICAgY2xhc3M9XCJidG4tY2xlYW5cIlxuICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgdGl0bGU9XCJ7eyBub2RlLmxhYmVsIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICAgZHJhZ2dhYmxlPVwiZmFsc2VcIlxuICAgICAgICAoZHJhZ292ZXIpPVwibm9kZS5jYW5Ecm9wICYmICRldmVudC5wcmV2ZW50RGVmYXVsdCgpXCJcbiAgICAgICAgKGRyYWdlbnRlcik9XCJub2RlLmNhbkRyb3AgJiYgbm9kZS5kcmFnRW50ZXIoJGV2ZW50KVwiXG4gICAgICAgIChkcmFnbGVhdmUpPVwibm9kZS5jYW5Ecm9wICYmIG5vZGUuZHJhZ0xlYXZlKCRldmVudClcIlxuICAgICAgICBbYXR0ci5kYXRhLWN5XT1cIm5vZGUubGFiZWxcIlxuICAgICAgICBbYXR0ci5pZF09XCJpc1Jvb3QgPyBub2RlLmlkIDogdW5kZWZpbmVkXCJcbiAgICAgICAgKGNsaWNrKT1cImNsaWNrKG5vZGUuY2FuTmF2aWdhdGUgPyAnbGluaycgOiAnZXhwYW5kZXInLCAkZXZlbnQpXCJcbiAgICAgICAgW25nQ2xhc3NdPVwie1xuICAgICAgICAgICdyb290LWxpbmsnOiBpc1Jvb3QsXG4gICAgICAgICAgb3Blbjogbm9kZS5vcGVuICYmIG5vZGUuaGFzQ2hpbGRyZW4sXG4gICAgICAgICAgcGFyZW50OiBub2RlLmhhc0NoaWxkcmVuLFxuICAgICAgICAgICdkcmFnZ2VkLWhvdmVyJzogbm9kZS5kcmFnZ2VkSG92ZXIgJiYgIW5vZGUuZHJhZ2dlZFxuICAgICAgICB9XCJcbiAgICAgICAgW2F0dHIuYXJpYS1leHBhbmRlZF09XCJub2RlLmhhc0NoaWxkcmVuID8gbm9kZS5vcGVuIDogbnVsbFwiXG4gICAgICA+XG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJpbm5lclwiPjwvbmctY29udGFpbmVyPlxuICAgICAgPC9idXR0b24+XG4gICAgPC9kaXY+XG4gIDwvbmctY29udGFpbmVyPlxuXG4gIDxkaXZcbiAgICBjbGFzcz1cImNoaWxkcmVuIHBhbmVsLWV4cGFuZCBleHBhbmRcIlxuICAgICpuZ0lmPVwibm9kZS5jaGlsZHJlbi5sZW5ndGhcIlxuICAgIFtjb2xsYXBzZV09XCIhbm9kZS5vcGVuXCJcbiAgICBbaXNBbmltYXRlZF09XCJ0cnVlXCJcbiAgPlxuICAgIDxjOHktbmF2aWdhdG9yLW5vZGVcbiAgICAgICpuZ0Zvcj1cImxldCBjaGlsZE5vZGUgb2Ygbm9kZS5jaGlsZHJlblwiXG4gICAgICBbbm9kZV09XCJjaGlsZE5vZGVcIlxuICAgICAgKG5vZGVDbGljayk9XCJub2RlQ2xpY2suZW1pdCgkZXZlbnQpXCJcbiAgICA+PC9jOHktbmF2aWdhdG9yLW5vZGU+XG4gIDwvZGl2PlxuPC9kaXY+XG5cbjwhLS0gaWNvbiAtLT5cbjxuZy10ZW1wbGF0ZSAjbmF2aWNvbj5cbiAgPCEtLSBsb2FkZXIgLS0+XG4gIDxpXG4gICAgKm5nSWY9XCJub2RlLmxvYWRpbmcgJiYgIWlzUm9vdFwiXG4gICAgY2xhc3M9XCJpY29uLXNwaW4gbG9hZGluZ0luZGljYXRvclwiXG4gICAgc3R5bGU9XCJ7eyBpc1Jvb3QgPyAncGFkZGluZy1sZWZ0OiAxNnB4OycgOiBudWxsIH19XCJcbiAgICBbYzh5SWNvbl09XCInY2lyY2xlLW8tbm90Y2gnXCJcbiAgPjwvaT5cbiAgPG5nLWNvbnRhaW5lciAjaWNvbj48L25nLWNvbnRhaW5lcj5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjaW5uZXI+XG5cbiAgPCEtLXRpdGxlICAtLT5cbiAgPHNwYW4+e3sgbm9kZS5sYWJlbCB8IHRyYW5zbGF0ZSB9fTwvc3Bhbj5cblxuICA8IS0tZXhwYW5kZXIgIC0tPlxuICA8aVxuICAgIHJvbGU9XCJidXR0b25cIlxuICAgIGNsYXNzPVwiZXhwYW5kZXJcIlxuICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiZXhwYW5kVGl0bGVcIlxuICAgICpuZ0lmPVwibm9kZS5oYXNDaGlsZHJlblwiXG4gICAgW2M4eUljb25dPVwiJ2NoZXZyb24tZG93bidcIlxuICAgIChjbGljayk9XCJjbGljaygnZXhwYW5kZXInLCAkZXZlbnQpXCJcbiAgICBkYXRhLWN5PVwiYzh5LW5hdmlnYXRvci1ub2RlLS1leHBhbmRlclwiXG4gID48L2k+XG5cbiAgPCEtLSAgUG9wb3ZlciBjb25maXJtICAtLT5cbiAgPGM4eS1wb3BvdmVyLWNvbmZpcm0gdHJpZ2dlcnM9XCJmb2N1c1wiIGNvbnRhaW5lckNsYXNzPVwibmF2aWdhdG9yLXBvcG92ZXJcIj48L2M4eS1wb3BvdmVyLWNvbmZpcm0+XG48L25nLXRlbXBsYXRlPlxuIl19