import { Component } from '@angular/core';
import { AppStateService } from '../common/ui-state.service';
import { TranslateService } from '../i18n/translate.service';
import { ModalService } from '../modal/modal.service';
import { gettext } from '../i18n/gettext';
import { UserPreferencesService } from '../common/user-preferences/user-preferences.service';
import { Status } from '../common/status.model';
import { HeaderService } from '../header/header.service';
import * as i0 from "@angular/core";
import * as i1 from "../i18n/translate.service";
import * as i2 from "../common/ui-state.service";
import * as i3 from "../common/user-preferences/user-preferences.service";
import * as i4 from "../modal/modal.service";
import * as i5 from "../header/header.service";
import * as i6 from "../common/icon.directive";
import * as i7 from "../i18n/c8y-translate.directive";
import * as i8 from "@angular/common";
import * as i9 from "@angular/forms";
import * as i10 from "../i18n/c8y-translate.pipe";
export class UiSettingsComponent {
    constructor(translate, state, ui, userPreferences, c8yModalService, headerService) {
        this.translate = translate;
        this.state = state;
        this.ui = ui;
        this.userPreferences = userPreferences;
        this.c8yModalService = c8yModalService;
        this.headerService = headerService;
        this.currentLang = this.ui.state.lang;
        this.open$ = this.headerService.rightDrawerOpen$;
    }
    ngOnInit() {
        this.languages = this.state.state.langs.map(l => ({
            lang: l,
            nativeLanguage: this.translate.getNativeLanguage(l)
        }));
    }
    async onLanguageChange(changedLang) {
        if (!changedLang) {
            return;
        }
        let reloadRequired = false;
        await this.translate.switchToLanguage(changedLang);
        if (changedLang !== this.currentLang) {
            reloadRequired = await this.persistLanguage(changedLang);
        }
        if (reloadRequired) {
            location.reload();
        }
    }
    async persistLanguage(lang) {
        let shouldReload;
        try {
            await this.c8yModalService.confirm(gettext('Reload recommended'), gettext('To change the language in the entire application, we recommend you to reload the page. If you have any unsaved changes, you can reload later. How would you like to proceed?'), Status.WARNING, {
                ok: gettext('Reload now'),
                cancel: gettext('Reload later')
            });
            this.translate.saveInLocalStorage(lang);
            await this.userPreferences.set('language', lang);
            this.currentLang = lang;
            shouldReload = true;
        }
        catch (ex) {
            this.translate.saveInLocalStorage(lang);
            await this.userPreferences.set('language', lang);
            this.currentLang = lang;
            shouldReload = false;
        }
        return shouldReload;
    }
}
UiSettingsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.0.6", ngImport: i0, type: UiSettingsComponent, deps: [{ token: i1.TranslateService }, { token: i2.AppStateService }, { token: i2.AppStateService }, { token: i3.UserPreferencesService }, { token: i4.ModalService }, { token: i5.HeaderService }], target: i0.ɵɵFactoryTarget.Component });
UiSettingsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.0.6", type: UiSettingsComponent, selector: "c8y-ui-settings", ngImport: i0, template: "<div class=\"separator-top p-t-8 p-b-8\">\n  <div class=\"c8y-right-drawer__item sticky-top\">\n    <i c8yIcon=\"eyedropper\"></i>\n    <span class=\"text-bold\">{{ 'UI settings' | translate }}</span>\n  </div>\n  <!-- TODO: uncomment and finish implementation when there will be agreement on using dark theme -->\n  <!-- <div class=\"p-l-16 p-r-16 p-b-16\">\n    <p>{{'Theme' | translate}}</p>\n    <div class=\"c8y-switch-multistate\">\n      <input tabindex=\"{{ (open$ | async) ? '0' : '-1'}}\" type=\"radio\" name=\"theme-switcher\" id=\"op1\" checked=\"checked\" [attr.aria-label]=\"'Light'\">\n      <label for=\"op1\" title=\"{{'Light' | translate}}\">\n        <i c8yIcon=\"sun\"></i>\n      </label>\n      <input tabindex=\"{{ (open$ | async) ? '0' : '-1'}}\" type=\"radio\" name=\"theme-switcher\" id=\"op2\" [attr.aria-label]=\"'Dark'\">\n      <label for=\"op2\" title=\"{{'Dark' | translate}}\">\n        <i c8yIcon=\"moon\"></i></label>\n      <input tabindex=\"{{ (open$ | async) ? '0' : '-1'}}\" type=\"radio\" name=\"theme-switcher\" id=\"op3\" [attr.aria-label]=\"'System'\">\n      <label for=\"op3\" title=\"{{'System' | translate}}\">\n        <i c8yIcon=\"imac-settings\"></i>\n      </label>\n      <div class=\"c8y-switch-multistate__handle\"></div>\n    </div>\n  </div> -->\n  <div class=\"form-group p-l-16 p-r-16\">\n    <p translate for=\"userLang\">Language</p>\n    <div class=\"c8y-select-wrapper\">\n      <select\n        id=\"userLang\"\n        #selectLang\n        tabindex=\"{{ (open$ | async) ? '0' : '-1'}}\"\n        [ngModel]=\"currentLang\"\n        (change)=\"onLanguageChange(selectLang.value)\"\n      >\n      <option *ngFor=\"let language of languages\" [value]=\"language.lang\">\n        {{ language.nativeLanguage }}\n        </option>\n      </select>\n      <span></span>\n    </div>\n  </div>\n</div>\n", dependencies: [{ kind: "directive", type: i6.IconDirective, selector: "[c8yIcon]", inputs: ["c8yIcon"] }, { kind: "directive", type: i7.C8yTranslateDirective, selector: "[translate],[ngx-translate]" }, { kind: "directive", type: i8.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i9.NgSelectOption, selector: "option", inputs: ["ngValue", "value"] }, { kind: "directive", type: i9.ɵNgSelectMultipleOption, selector: "option", inputs: ["ngValue", "value"] }, { kind: "directive", type: i9.SelectControlValueAccessor, selector: "select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]", inputs: ["compareWith"] }, { kind: "directive", type: i9.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i9.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "pipe", type: i10.C8yTranslatePipe, name: "translate" }, { kind: "pipe", type: i8.AsyncPipe, name: "async" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.0.6", ngImport: i0, type: UiSettingsComponent, decorators: [{
            type: Component,
            args: [{ selector: 'c8y-ui-settings', template: "<div class=\"separator-top p-t-8 p-b-8\">\n  <div class=\"c8y-right-drawer__item sticky-top\">\n    <i c8yIcon=\"eyedropper\"></i>\n    <span class=\"text-bold\">{{ 'UI settings' | translate }}</span>\n  </div>\n  <!-- TODO: uncomment and finish implementation when there will be agreement on using dark theme -->\n  <!-- <div class=\"p-l-16 p-r-16 p-b-16\">\n    <p>{{'Theme' | translate}}</p>\n    <div class=\"c8y-switch-multistate\">\n      <input tabindex=\"{{ (open$ | async) ? '0' : '-1'}}\" type=\"radio\" name=\"theme-switcher\" id=\"op1\" checked=\"checked\" [attr.aria-label]=\"'Light'\">\n      <label for=\"op1\" title=\"{{'Light' | translate}}\">\n        <i c8yIcon=\"sun\"></i>\n      </label>\n      <input tabindex=\"{{ (open$ | async) ? '0' : '-1'}}\" type=\"radio\" name=\"theme-switcher\" id=\"op2\" [attr.aria-label]=\"'Dark'\">\n      <label for=\"op2\" title=\"{{'Dark' | translate}}\">\n        <i c8yIcon=\"moon\"></i></label>\n      <input tabindex=\"{{ (open$ | async) ? '0' : '-1'}}\" type=\"radio\" name=\"theme-switcher\" id=\"op3\" [attr.aria-label]=\"'System'\">\n      <label for=\"op3\" title=\"{{'System' | translate}}\">\n        <i c8yIcon=\"imac-settings\"></i>\n      </label>\n      <div class=\"c8y-switch-multistate__handle\"></div>\n    </div>\n  </div> -->\n  <div class=\"form-group p-l-16 p-r-16\">\n    <p translate for=\"userLang\">Language</p>\n    <div class=\"c8y-select-wrapper\">\n      <select\n        id=\"userLang\"\n        #selectLang\n        tabindex=\"{{ (open$ | async) ? '0' : '-1'}}\"\n        [ngModel]=\"currentLang\"\n        (change)=\"onLanguageChange(selectLang.value)\"\n      >\n      <option *ngFor=\"let language of languages\" [value]=\"language.lang\">\n        {{ language.nativeLanguage }}\n        </option>\n      </select>\n      <span></span>\n    </div>\n  </div>\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i1.TranslateService }, { type: i2.AppStateService }, { type: i2.AppStateService }, { type: i3.UserPreferencesService }, { type: i4.ModalService }, { type: i5.HeaderService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidWktc2V0dGluZ3MuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vY29yZS91aS1zZXR0aW5ncy91aS1zZXR0aW5ncy5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9jb3JlL3VpLXNldHRpbmdzL3VpLXNldHRpbmdzLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFDbEQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzdELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQzdELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUN0RCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDMUMsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0scURBQXFELENBQUM7QUFDN0YsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBRWhELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQzs7Ozs7Ozs7Ozs7O0FBTXpELE1BQU0sT0FBTyxtQkFBbUI7SUFLOUIsWUFDVSxTQUEyQixFQUMzQixLQUFzQixFQUN0QixFQUFtQixFQUNuQixlQUF1QyxFQUN2QyxlQUE2QixFQUM3QixhQUE0QjtRQUw1QixjQUFTLEdBQVQsU0FBUyxDQUFrQjtRQUMzQixVQUFLLEdBQUwsS0FBSyxDQUFpQjtRQUN0QixPQUFFLEdBQUYsRUFBRSxDQUFpQjtRQUNuQixvQkFBZSxHQUFmLGVBQWUsQ0FBd0I7UUFDdkMsb0JBQWUsR0FBZixlQUFlLENBQWM7UUFDN0Isa0JBQWEsR0FBYixhQUFhLENBQWU7UUFFcEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUM7UUFDdEMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLGdCQUFnQixDQUFDO0lBQ25ELENBQUM7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLFNBQVMsR0FBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFrQixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDOUQsSUFBSSxFQUFFLENBQUM7WUFDUCxjQUFjLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7U0FDcEQsQ0FBQyxDQUFDLENBQUM7SUFDTixDQUFDO0lBRUQsS0FBSyxDQUFDLGdCQUFnQixDQUFDLFdBQW1CO1FBQ3hDLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDaEIsT0FBTztTQUNSO1FBQ0QsSUFBSSxjQUFjLEdBQUcsS0FBSyxDQUFDO1FBQzNCLE1BQU0sSUFBSSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNuRCxJQUFJLFdBQVcsS0FBSyxJQUFJLENBQUMsV0FBVyxFQUFFO1lBQ3BDLGNBQWMsR0FBRyxNQUFNLElBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxDQUFDLENBQUM7U0FDMUQ7UUFDRCxJQUFJLGNBQWMsRUFBRTtZQUNsQixRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7U0FDbkI7SUFDSCxDQUFDO0lBRUQsS0FBSyxDQUFDLGVBQWUsQ0FBQyxJQUFZO1FBQ2hDLElBQUksWUFBNEMsQ0FBQztRQUNqRCxJQUFJO1lBQ0YsTUFBTSxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FDaEMsT0FBTyxDQUFDLG9CQUFvQixDQUFDLEVBQzdCLE9BQU8sQ0FDTCw4S0FBOEssQ0FDL0ssRUFDRCxNQUFNLENBQUMsT0FBTyxFQUNkO2dCQUNFLEVBQUUsRUFBRSxPQUFPLENBQUMsWUFBWSxDQUFDO2dCQUN6QixNQUFNLEVBQUUsT0FBTyxDQUFDLGNBQWMsQ0FBQzthQUNoQyxDQUNGLENBQUM7WUFDRixJQUFJLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3hDLE1BQU0sSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQ2pELElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO1lBQ3hCLFlBQVksR0FBRyxJQUFJLENBQUM7U0FDckI7UUFBQyxPQUFPLEVBQUUsRUFBRTtZQUNYLElBQUksQ0FBQyxTQUFTLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDeEMsTUFBTSxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDakQsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7WUFDeEIsWUFBWSxHQUFHLEtBQUssQ0FBQztTQUN0QjtRQUVELE9BQU8sWUFBWSxDQUFDO0lBQ3RCLENBQUM7O2dIQWhFVSxtQkFBbUI7b0dBQW5CLG1CQUFtQix1RENkaEMsbzBEQXlDQTsyRkQzQmEsbUJBQW1CO2tCQUovQixTQUFTOytCQUNFLGlCQUFpQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBcHBTdGF0ZVNlcnZpY2UgfSBmcm9tICcuLi9jb21tb24vdWktc3RhdGUuc2VydmljZSc7XG5pbXBvcnQgeyBUcmFuc2xhdGVTZXJ2aWNlIH0gZnJvbSAnLi4vaTE4bi90cmFuc2xhdGUuc2VydmljZSc7XG5pbXBvcnQgeyBNb2RhbFNlcnZpY2UgfSBmcm9tICcuLi9tb2RhbC9tb2RhbC5zZXJ2aWNlJztcbmltcG9ydCB7IGdldHRleHQgfSBmcm9tICcuLi9pMThuL2dldHRleHQnO1xuaW1wb3J0IHsgVXNlclByZWZlcmVuY2VzU2VydmljZSB9IGZyb20gJy4uL2NvbW1vbi91c2VyLXByZWZlcmVuY2VzL3VzZXItcHJlZmVyZW5jZXMuc2VydmljZSc7XG5pbXBvcnQgeyBTdGF0dXMgfSBmcm9tICcuLi9jb21tb24vc3RhdHVzLm1vZGVsJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEhlYWRlclNlcnZpY2UgfSBmcm9tICcuLi9oZWFkZXIvaGVhZGVyLnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjOHktdWktc2V0dGluZ3MnLFxuICB0ZW1wbGF0ZVVybDogJy4vdWktc2V0dGluZ3MuY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIFVpU2V0dGluZ3NDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBvcGVuJDogT2JzZXJ2YWJsZTxib29sZWFuPjtcbiAgY3VycmVudExhbmc6IHN0cmluZztcbiAgbGFuZ3VhZ2VzOiB7IGxhbmc6IHN0cmluZzsgbmF0aXZlTGFuZ3VhZ2U6IHN0cmluZyB9W107XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSB0cmFuc2xhdGU6IFRyYW5zbGF0ZVNlcnZpY2UsXG4gICAgcHJpdmF0ZSBzdGF0ZTogQXBwU3RhdGVTZXJ2aWNlLFxuICAgIHByaXZhdGUgdWk6IEFwcFN0YXRlU2VydmljZSxcbiAgICBwcml2YXRlIHVzZXJQcmVmZXJlbmNlczogVXNlclByZWZlcmVuY2VzU2VydmljZSxcbiAgICBwcml2YXRlIGM4eU1vZGFsU2VydmljZTogTW9kYWxTZXJ2aWNlLFxuICAgIHByaXZhdGUgaGVhZGVyU2VydmljZTogSGVhZGVyU2VydmljZVxuICApIHtcbiAgICB0aGlzLmN1cnJlbnRMYW5nID0gdGhpcy51aS5zdGF0ZS5sYW5nO1xuICAgIHRoaXMub3BlbiQgPSB0aGlzLmhlYWRlclNlcnZpY2UucmlnaHREcmF3ZXJPcGVuJDtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMubGFuZ3VhZ2VzID0gKHRoaXMuc3RhdGUuc3RhdGUubGFuZ3MgYXMgc3RyaW5nW10pLm1hcChsID0+ICh7XG4gICAgICBsYW5nOiBsLFxuICAgICAgbmF0aXZlTGFuZ3VhZ2U6IHRoaXMudHJhbnNsYXRlLmdldE5hdGl2ZUxhbmd1YWdlKGwpXG4gICAgfSkpO1xuICB9XG5cbiAgYXN5bmMgb25MYW5ndWFnZUNoYW5nZShjaGFuZ2VkTGFuZzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCFjaGFuZ2VkTGFuZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgcmVsb2FkUmVxdWlyZWQgPSBmYWxzZTtcbiAgICBhd2FpdCB0aGlzLnRyYW5zbGF0ZS5zd2l0Y2hUb0xhbmd1YWdlKGNoYW5nZWRMYW5nKTtcbiAgICBpZiAoY2hhbmdlZExhbmcgIT09IHRoaXMuY3VycmVudExhbmcpIHtcbiAgICAgIHJlbG9hZFJlcXVpcmVkID0gYXdhaXQgdGhpcy5wZXJzaXN0TGFuZ3VhZ2UoY2hhbmdlZExhbmcpO1xuICAgIH1cbiAgICBpZiAocmVsb2FkUmVxdWlyZWQpIHtcbiAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHBlcnNpc3RMYW5ndWFnZShsYW5nOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBsZXQgc2hvdWxkUmVsb2FkOiBib29sZWFuIHwgUHJvbWlzZUxpa2U8Ym9vbGVhbj47XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuYzh5TW9kYWxTZXJ2aWNlLmNvbmZpcm0oXG4gICAgICAgIGdldHRleHQoJ1JlbG9hZCByZWNvbW1lbmRlZCcpLFxuICAgICAgICBnZXR0ZXh0KFxuICAgICAgICAgICdUbyBjaGFuZ2UgdGhlIGxhbmd1YWdlIGluIHRoZSBlbnRpcmUgYXBwbGljYXRpb24sIHdlIHJlY29tbWVuZCB5b3UgdG8gcmVsb2FkIHRoZSBwYWdlLiBJZiB5b3UgaGF2ZSBhbnkgdW5zYXZlZCBjaGFuZ2VzLCB5b3UgY2FuIHJlbG9hZCBsYXRlci4gSG93IHdvdWxkIHlvdSBsaWtlIHRvIHByb2NlZWQ/J1xuICAgICAgICApLFxuICAgICAgICBTdGF0dXMuV0FSTklORyxcbiAgICAgICAge1xuICAgICAgICAgIG9rOiBnZXR0ZXh0KCdSZWxvYWQgbm93JyksXG4gICAgICAgICAgY2FuY2VsOiBnZXR0ZXh0KCdSZWxvYWQgbGF0ZXInKVxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgdGhpcy50cmFuc2xhdGUuc2F2ZUluTG9jYWxTdG9yYWdlKGxhbmcpO1xuICAgICAgYXdhaXQgdGhpcy51c2VyUHJlZmVyZW5jZXMuc2V0KCdsYW5ndWFnZScsIGxhbmcpO1xuICAgICAgdGhpcy5jdXJyZW50TGFuZyA9IGxhbmc7XG4gICAgICBzaG91bGRSZWxvYWQgPSB0cnVlO1xuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICB0aGlzLnRyYW5zbGF0ZS5zYXZlSW5Mb2NhbFN0b3JhZ2UobGFuZyk7XG4gICAgICBhd2FpdCB0aGlzLnVzZXJQcmVmZXJlbmNlcy5zZXQoJ2xhbmd1YWdlJywgbGFuZyk7XG4gICAgICB0aGlzLmN1cnJlbnRMYW5nID0gbGFuZztcbiAgICAgIHNob3VsZFJlbG9hZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiBzaG91bGRSZWxvYWQ7XG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJzZXBhcmF0b3ItdG9wIHAtdC04IHAtYi04XCI+XG4gIDxkaXYgY2xhc3M9XCJjOHktcmlnaHQtZHJhd2VyX19pdGVtIHN0aWNreS10b3BcIj5cbiAgICA8aSBjOHlJY29uPVwiZXllZHJvcHBlclwiPjwvaT5cbiAgICA8c3BhbiBjbGFzcz1cInRleHQtYm9sZFwiPnt7ICdVSSBzZXR0aW5ncycgfCB0cmFuc2xhdGUgfX08L3NwYW4+XG4gIDwvZGl2PlxuICA8IS0tIFRPRE86IHVuY29tbWVudCBhbmQgZmluaXNoIGltcGxlbWVudGF0aW9uIHdoZW4gdGhlcmUgd2lsbCBiZSBhZ3JlZW1lbnQgb24gdXNpbmcgZGFyayB0aGVtZSAtLT5cbiAgPCEtLSA8ZGl2IGNsYXNzPVwicC1sLTE2IHAtci0xNiBwLWItMTZcIj5cbiAgICA8cD57eydUaGVtZScgfCB0cmFuc2xhdGV9fTwvcD5cbiAgICA8ZGl2IGNsYXNzPVwiYzh5LXN3aXRjaC1tdWx0aXN0YXRlXCI+XG4gICAgICA8aW5wdXQgdGFiaW5kZXg9XCJ7eyAob3BlbiQgfCBhc3luYykgPyAnMCcgOiAnLTEnfX1cIiB0eXBlPVwicmFkaW9cIiBuYW1lPVwidGhlbWUtc3dpdGNoZXJcIiBpZD1cIm9wMVwiIGNoZWNrZWQ9XCJjaGVja2VkXCIgW2F0dHIuYXJpYS1sYWJlbF09XCInTGlnaHQnXCI+XG4gICAgICA8bGFiZWwgZm9yPVwib3AxXCIgdGl0bGU9XCJ7eydMaWdodCcgfCB0cmFuc2xhdGV9fVwiPlxuICAgICAgICA8aSBjOHlJY29uPVwic3VuXCI+PC9pPlxuICAgICAgPC9sYWJlbD5cbiAgICAgIDxpbnB1dCB0YWJpbmRleD1cInt7IChvcGVuJCB8IGFzeW5jKSA/ICcwJyA6ICctMSd9fVwiIHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJ0aGVtZS1zd2l0Y2hlclwiIGlkPVwib3AyXCIgW2F0dHIuYXJpYS1sYWJlbF09XCInRGFyaydcIj5cbiAgICAgIDxsYWJlbCBmb3I9XCJvcDJcIiB0aXRsZT1cInt7J0RhcmsnIHwgdHJhbnNsYXRlfX1cIj5cbiAgICAgICAgPGkgYzh5SWNvbj1cIm1vb25cIj48L2k+PC9sYWJlbD5cbiAgICAgIDxpbnB1dCB0YWJpbmRleD1cInt7IChvcGVuJCB8IGFzeW5jKSA/ICcwJyA6ICctMSd9fVwiIHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJ0aGVtZS1zd2l0Y2hlclwiIGlkPVwib3AzXCIgW2F0dHIuYXJpYS1sYWJlbF09XCInU3lzdGVtJ1wiPlxuICAgICAgPGxhYmVsIGZvcj1cIm9wM1wiIHRpdGxlPVwie3snU3lzdGVtJyB8IHRyYW5zbGF0ZX19XCI+XG4gICAgICAgIDxpIGM4eUljb249XCJpbWFjLXNldHRpbmdzXCI+PC9pPlxuICAgICAgPC9sYWJlbD5cbiAgICAgIDxkaXYgY2xhc3M9XCJjOHktc3dpdGNoLW11bHRpc3RhdGVfX2hhbmRsZVwiPjwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj4gLS0+XG4gIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIHAtbC0xNiBwLXItMTZcIj5cbiAgICA8cCB0cmFuc2xhdGUgZm9yPVwidXNlckxhbmdcIj5MYW5ndWFnZTwvcD5cbiAgICA8ZGl2IGNsYXNzPVwiYzh5LXNlbGVjdC13cmFwcGVyXCI+XG4gICAgICA8c2VsZWN0XG4gICAgICAgIGlkPVwidXNlckxhbmdcIlxuICAgICAgICAjc2VsZWN0TGFuZ1xuICAgICAgICB0YWJpbmRleD1cInt7IChvcGVuJCB8IGFzeW5jKSA/ICcwJyA6ICctMSd9fVwiXG4gICAgICAgIFtuZ01vZGVsXT1cImN1cnJlbnRMYW5nXCJcbiAgICAgICAgKGNoYW5nZSk9XCJvbkxhbmd1YWdlQ2hhbmdlKHNlbGVjdExhbmcudmFsdWUpXCJcbiAgICAgID5cbiAgICAgIDxvcHRpb24gKm5nRm9yPVwibGV0IGxhbmd1YWdlIG9mIGxhbmd1YWdlc1wiIFt2YWx1ZV09XCJsYW5ndWFnZS5sYW5nXCI+XG4gICAgICAgIHt7IGxhbmd1YWdlLm5hdGl2ZUxhbmd1YWdlIH19XG4gICAgICAgIDwvb3B0aW9uPlxuICAgICAgPC9zZWxlY3Q+XG4gICAgICA8c3Bhbj48L3NwYW4+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9kaXY+XG4iXX0=